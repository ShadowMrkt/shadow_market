{"asctime": "2025-04-08 02:04:51,712", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,714", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 454, "message": "[get_market_btc_key] Vault returned invalid data for key 'market_btc_multisig_key': None", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,777", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1547, "message": "Deprecated function `process_btc_withdrawal` called. Use Ledger system.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,779", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1550, "message": "Deprecated function `process_escrow_release` called. Use Taproot multi-sig workflow (prepare/sign/finalize/broadcast).", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,822", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,824", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,825", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,827", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,829", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,831", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,834", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,834", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 337, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-08 02:04:51,836", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,840", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-08 02:04:51,844", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-08 02:04:51,849", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,849", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,851", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-08 02:04:51,854", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-08 02:04:51,859", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,859", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,861", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,863", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,865", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-08 02:04:51,869", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-08 02:04:51,874", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-08 02:04:51,878", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,880", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 127e2a8af0e90115)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,880", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 127e2a8af0e90115): 4LdpnMo9wPESgQ4...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,882", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,882", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,882", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,884", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 127e2a8af0e90115)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,884", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 127e2a8af0e90115): Timeout", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,886", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 127e2a8af0e90115)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,886", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 127e2a8af0e90115): Monero RPC Error (Code: -5): RPC Failed", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,889", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 127e2a8af0e90115)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,889", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 127e2a8af0e90115). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,891", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,891", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,893", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 127e2a8af0e90115)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,893", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 127e2a8af0e90115) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,895", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,895", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,895", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,899", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,899", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,901", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,901", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,903", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,903", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,905", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,905", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '30504254da1c732cac11379f96312ff4fa1c00a794139f18aae423be2975202e0c3415d32617904120639c586746e4e10ee1803bc352ddca07afe9f272d8010444591fde946cec44ffd39ba2cc061a397ebceec257f0e204b54a0b22a46a9911b4f60b8d9f45de1e07e4d4f204de8d01aaa7ca24e67c86d61cc55c50ac43857c'}", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,907", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,908", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,908", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 7556, "thread": 17708, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-08 02:04:51,908", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,908", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,910", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,910", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,910", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,910", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': 'bc16f0e84b00ffbf31c9cb4a7232f03b215d3448d5868bce0ef3c8fe42b3e12f1e587e5e97b97bcb2434490d675be263761cc87cabdde546646f633f28cb81f57b9bbe90e0d29d037c860523d8307408f908e1ebcf264da3492630dc0d713235716fb6b2be24ab52a82f4837b2b51dfc5c9b77b7864975e93c65f948da23a086ed2e4a41539d3aa61b751a2f84fb7d81d26fb5db61d23b03998764ada55ecfa9fd681201645b721fd1d020edd9bece0c754e8eb3d7be7a804bd2582d4f6cb7733573bc7acb5e2527faf130886bd3fdb1882503cb0be050d73c3432b75d53b81638eb7cc0c77c70ac222e132cbaa007df5af2e204a40879ee40d5988d38114e81'}", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,911", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 7556, "thread": 17708, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:04:51,911", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,911", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,915", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,915", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,915", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,915", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 7556, "thread": 17708, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:04:51,916", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,916", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,918", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,919", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,919", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,919", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 7556, "thread": 17708, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:04:51,919", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,919", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,922", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,923", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,923", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,934", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,935", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-08 02:04:51,938", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,939", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,939", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 735, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-08 02:04:51,943", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,943", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,946", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,946", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,946", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,946", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,949", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,949", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,950", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,952", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,952", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,952", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,952", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,955", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,955", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,957", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,957", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,957", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,958", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,960", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,960", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,960", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 735, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 02:04:51,962", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,962", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 735, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 02:04:51,966", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,966", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,969", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,969", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,969", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 735, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-08 02:04:51,971", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,972", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,974", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,974", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,974", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,974", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,976", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,976", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,977", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,977", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,978", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,979", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,979", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 475f443e401b3c5ddb81e42936e091ebb759bc1623c71075cfa33ecafcfbd3fe", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,979", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,982", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,984", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,986", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,986", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,986", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 475f443e401b3c5ddb81e42936e091ebb759bc1623c71075cfa33ecafcfbd3fe", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,989", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,989", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,992", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,992", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,994", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,994", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:51,994", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,003", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,003", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,004", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,010", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,010", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,010", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,017", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,017", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,017", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,021", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,022", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,022", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,028", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,028", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 475f443e401b3c5ddb81e42936e091ebb759bc1623c71075cfa33ecafcfbd3fe, Fee: 0.000543210000 XMR (543210000 pico)", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,031", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,031", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,031", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,031", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,031", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,035", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 764f2b9e...): Failed to get daemon height. Cannot calculate confirmations.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,047", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 764f2b9e...): Skipping entry 0: TXID 475f443e401b3c5ddb81e42936e091ebb759bc1623c71075cfa33ecafcfbd3fe already processed.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,050", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,053", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,055", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,060", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 764f2b9e...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-08 02:04:52,065", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 764f2b9e...): Found candidate! TXID: 475f443e401b3c5ddb81e42936e091ebb759bc1623c71075cfa33ecafcfbd3fe, Amt: 1.234567890123 XMR, Confs: 11.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,065", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 764f2b9e...): Confirmed payment found.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,068", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,068", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,068", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,068", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-08 02:04:52,070", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,072", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,072", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,072", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,072", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 475f443e401b3c5ddb81e42936e091ebb759bc1623c71075cfa33ecafcfbd3fe, Fee: 0.000678900000 XMR (678900000 pico)", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,075", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,075", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,075", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,075", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,075", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,075", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,075", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,076", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,078", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,081", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,081", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,082", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,082", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1285, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 02:04:52,084", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,084", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1285, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 02:04:52,086", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,089", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,089", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,089", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 02:04:52,091", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 02:04:52,092", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,095", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,095", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,095", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,095", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 475f443e401b3c5ddb81e42936e091ebb759bc1623c71075cfa33ecafcfbd3fe, Fee: 0.000777700000 XMR (777700000 pico)", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,095", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,098", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,098", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,098", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,098", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 475f443e401b3c5ddb81e42936e091ebb759bc1623c71075cfa33ecafcfbd3fe, Fee: 0.000888800000 XMR (888800000 pico)", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,099", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,102", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,102", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,102", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,102", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,102", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,102", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,105", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,606", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,606", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:52,608", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:53,109", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:53,110", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:53,115", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/3): Timeout 1. Retrying in 0.5s...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:53,616", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/3): Refused 2. Retrying in 0.5s...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,120", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 401 (Authentication failed? Check RPC User/Password). Response: Unauthorized", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 02:04:54,123", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 500. Response: Internal Server Error", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 02:04:54,126", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-08 02:04:54,129", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 267, "message": "Monero RPC (Wallet - Method: some_method): RPC returned error: Code=-4, Message=Invalid params", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,143", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,143", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2679238892512'>", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,152", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,159", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,159", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2679238892176'>", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,166", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,176", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,176", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,184", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,184", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,192", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,192", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,192", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,200", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: WRONG_FINGERPRINT_XXXXXXXXXXXXXXXXXXXXXXXX, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: True, Status: signature valid", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,201", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: WRONG_FINGERPRINT_XXXXXXXXXXXXXXXXXXXXXXXX.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,201", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,209", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,210", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,210", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,215", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,223", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,223", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,240", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,240", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-08 02:04:54,247", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,254", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,254", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-08 02:04:54,262", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,262", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,269", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,270", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,277", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,277", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,290", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 387, "message": "User test_vendor_escrow missing valid withdrawal address in field 'btc_withdrawal_address' for currency BTC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,337", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 21901ced-0f17-404c-9916-e58c8af70feb (BTC): Initiating multi-sig escrow setup...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,339", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_test_user' loaded and cached.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,339", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 661, "message": "Order 21901ced-0f17-404c-9916-e58c8af70feb (BTC): BTC multisig details missing expected redeem/witness script.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,339", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 21901ced-0f17-404c-9916-e58c8af70feb (BTC): Generated BTC Escrow Address: tb1qw508d6qejxt...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,339", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 21901ced-0f17-404c-9916-e58c8af70feb (BTC): Created CryptoPayment 1cb9e863-f02c-473e-81d5-8e87e62aa383 (Multi-sig). Expected Atomic: 1000000", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,340", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 21901ced-0f17-404c-9916-e58c8af70feb (BTC): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 08:04:54.339780+00:00. Awaiting payment to tb1qw508d6qejxt...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,340", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 21901ced-0f17-404c-9916-e58c8af70feb (BTC): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,380", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order dbaca527-11df-485e-ad7b-2a1d8e99552f (XMR): Initiating multi-sig escrow setup...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,382", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order dbaca527-11df-485e-ad7b-2a1d8e99552f (XMR): Generated XMR Escrow Address: xmr_multisig_ad...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,382", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order dbaca527-11df-485e-ad7b-2a1d8e99552f (XMR): Created CryptoPayment 2d80ee31-9ff2-499a-9a41-458a14520e04 (Multi-sig). Expected Atomic: 1000000000000", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,383", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order dbaca527-11df-485e-ad7b-2a1d8e99552f (XMR): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 08:04:54.382870+00:00. Awaiting payment to xmr_multisig_ad...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,383", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order dbaca527-11df-485e-ad7b-2a1d8e99552f (XMR): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,424", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 05f68550-1f3f-4819-90cf-edb915a18019 (BTC): Initiating multi-sig escrow setup...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,425", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 537, "message": "Order 05f68550-1f3f-4819-90cf-edb915a18019 (BTC): Cannot create escrow details. Status: 'shipped' (Expected: 'pending_payment').", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,463", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order c1f348d4-cee8-406b-8afc-3a0df7b5242a (LTC): Initiating multi-sig escrow setup...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,465", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 607, "message": "Order c1f348d4-cee8-406b-8afc-3a0df7b5242a (LTC): Failed to gather participant info: Multisig key attribute mapping not found for currency LTC.", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 581, in create_escrow_for_order\n    raise ValueError(f\"Multisig key attribute mapping not found for currency {currency}.\")\nValueError: Multisig key attribute mapping not found for currency LTC."}
{"asctime": "2025-04-08 02:04:54,505", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 2c7158c1-9677-44a3-86ce-2e071f681293 (BTC): Initiating multi-sig escrow setup...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,506", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 2c7158c1-9677-44a3-86ce-2e071f681293 (BTC): Crypto service error during BTC escrow generation: BTC Gen Failed", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 639, in create_escrow_for_order\n    msig_details = crypto_service_module.create_btc_multisig_address(\n        participant_pubkeys_hex=participant_infos, # Use expected kwarg name\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: BTC Gen Failed"}
{"asctime": "2025-04-08 02:04:54,550", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order f59edcbd-628a-4851-a225-033a1f2015b7 (XMR): Initiating multi-sig escrow setup...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,551", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order f59edcbd-628a-4851-a225-033a1f2015b7 (XMR): Crypto service error during XMR escrow generation: XMR Wallet Gen Failed", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 621, in create_escrow_for_order\n    msig_details = crypto_service_module.create_monero_multisig_wallet(\n        participant_infos=participant_infos, # Use keyword arg for clarity\n        order_guid=str(order.id),           # Use keyword arg 'order_guid'\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: XMR Wallet Gen Failed"}
{"asctime": "2025-04-08 02:04:54,599", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: e29943ce-1716-4709-b9c1-753308951632, Payment: 67b1222c-7e3d-47bf-acdf-2d418c973216, Currency: BTC): Starting check.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,600", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: e29943ce-1716-4709-b9c1-753308951632, Payment: 67b1222c-7e3d-47bf-acdf-2d418c973216, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,600", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: e29943ce-1716-4709-b9c1-753308951632, Payment: 67b1222c-7e3d-47bf-acdf-2d418c973216, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,601", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1052, "message": "PaymentConfirm Check (Order: e29943ce-1716-4709-b9c1-753308951632, Payment: 67b1222c-7e3d-47bf-acdf-2d418c973216, Currency: BTC): Ledger updated (incl. deposit fee) & Order status -> payment_confirmed. TXID: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,601", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1067, "message": "PaymentConfirm Check (Order: e29943ce-1716-4709-b9c1-753308951632, Payment: 67b1222c-7e3d-47bf-acdf-2d418c973216, Currency: BTC): Sent payment confirmation notification to Vendor test_vendor_escrow.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,647", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 3c024095-b086-42b5-a821-550500c39117, Payment: d0ea51f2-1a13-4fec-8065-df64b2f8da7f, Currency: BTC): Starting check.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,691", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 917, "message": "Order f475cd76-4e82-43d4-8913-0e6cab646ff2 cancelled due to underpayment. Rcvd 0.00500000, Exp 0.01000000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,735", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 526b7ffa-1bf2-45fa-8336-b8f2af00d649, Payment: e543ee60-82b7-417e-8d22-6bddb16116cc, Currency: BTC): Starting check.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,736", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 526b7ffa-1bf2-45fa-8336-b8f2af00d649, Payment: e543ee60-82b7-417e-8d22-6bddb16116cc, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,736", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 526b7ffa-1bf2-45fa-8336-b8f2af00d649, Payment: e543ee60-82b7-417e-8d22-6bddb16116cc, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,736", "levelname": "CRITICAL", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1075, "message": "PaymentConfirm Check (Order: 526b7ffa-1bf2-45fa-8336-b8f2af00d649, Payment: e543ee60-82b7-417e-8d22-6bddb16116cc, Currency: BTC): CRITICAL: Ledger/Order atomic update FAILED during payment confirmation! Error: ['Cannot lock funds']. Transaction rolled back.", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1010, in check_and_confirm_payment\n    lock_success = ledger_service.lock_funds(\n        user=buyer, currency=currency, amount=expected_std, # Lock the required STANDARD order amount\n        related_order=order, notes=f\"Lock funds for Order {order.id} escrow\"\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nledger.services.InsufficientFundsError: ['Cannot lock funds']"}
{"asctime": "2025-04-08 02:04:54,782", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order d150915b-f710-4e5b-982d-1f06e3b7ddfd (MarkShipped by test_vendor_escrow): Attempting...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,783", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1190, "message": "Order d150915b-f710-4e5b-982d-1f06e3b7ddfd (MarkShipped by test_vendor_escrow): Tracking info provided but 'tracking_info' field missing on Order model.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,785", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1206, "message": "Order d150915b-f710-4e5b-982d-1f06e3b7ddfd (MarkShipped by test_vendor_escrow): Marked shipped. Status -> shipped. Dispute deadline: 2025-04-15 08:04:54.783444+00:00, Auto-finalize: 2025-04-22 08:04:54.783444+00:00", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,785", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1230, "message": "Order d150915b-f710-4e5b-982d-1f06e3b7ddfd (MarkShipped by test_vendor_escrow): Sent order shipped notification to Buyer test_buyer_escrow.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,827", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 03b220ae-0409-43cd-b730-cf8e16fc2591 (MarkShipped by test_buyer_escrow): Attempting...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,828", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1126, "message": "Order 03b220ae-0409-43cd-b730-cf8e16fc2591 (MarkShipped by test_buyer_escrow): Permission denied. User test_buyer_escrow is not the vendor (test_vendor_escrow).", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,869", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order ceff9ce6-fc5a-491f-aad7-c2f66e62d67c (MarkShipped by test_vendor_escrow): Attempting...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,870", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1130, "message": "Order ceff9ce6-fc5a-491f-aad7-c2f66e62d67c (MarkShipped by test_vendor_escrow): Cannot mark shipped. Invalid status 'pending_payment' (Expected: 'payment_confirmed').", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,912", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 6ebe2728-adad-4f86-92e0-853f4a33221b (MarkShipped by test_vendor_escrow): Attempting...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,914", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1144, "message": "Order 6ebe2728-adad-4f86-92e0-853f4a33221b (MarkShipped by test_vendor_escrow): Failed to prepare release transaction: Prep Fail", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1138, in mark_order_shipped\n    prepared_release_metadata = _prepare_release(order_locked) # Definition is later in file\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Prep Fail"}
{"asctime": "2025-04-08 02:04:54,960", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 0c451e29-27cf-4854-82a1-8e282de2bd49 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,961", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 0c451e29-27cf-4854-82a1-8e282de2bd49 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:54,962", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order 0c451e29-27cf-4854-82a1-8e282de2bd49 (SignRelease by test_buyer_escrow): Signature applied. Current signers: 1/2. Ready for broadcast: False.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,007", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order ca230b04-c8e5-4dd5-8115-a83015d884dc (SignRelease by test_vendor_escrow): Attempting signature...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,008", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order ca230b04-c8e5-4dd5-8115-a83015d884dc (SignRelease by test_vendor_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,008", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order ca230b04-c8e5-4dd5-8115-a83015d884dc (SignRelease by test_vendor_escrow): Signature applied. Current signers: 2/2. Ready for broadcast: True.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,009", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1465, "message": "Order ca230b04-c8e5-4dd5-8115-a83015d884dc (SignRelease by test_vendor_escrow): Sent 'ready for broadcast' notification to test_buyer_escrow.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,056", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 8dd00c8f-32c9-461b-9a89-1c6bbc942072 (SignRelease by test_mod_escrow): Attempting signature...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,057", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1289, "message": "Order 8dd00c8f-32c9-461b-9a89-1c6bbc942072 (SignRelease by test_mod_escrow): Permission denied. User is not buyer or vendor.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,097", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order bfeb2d27-f086-40ee-9a3f-404f25554df5 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,099", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order bfeb2d27-f086-40ee-9a3f-404f25554df5 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,101", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order bfeb2d27-f086-40ee-9a3f-404f25554df5 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,102", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order bfeb2d27-f086-40ee-9a3f-404f25554df5 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,148", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 7eae1ce5-ff83-4679-9a73-032b133ad56e (SignRelease by test_buyer_escrow): Attempting signature...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,149", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1321, "message": "Order 7eae1ce5-ff83-4679-9a73-032b133ad56e (SignRelease by test_buyer_escrow): User test_buyer_escrow (ID: 59) has already signed this release.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,192", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 15a961ed-7a00-4e14-91a1-d74eadf8f445 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,194", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 15a961ed-7a00-4e14-91a1-d74eadf8f445 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,194", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1425, "message": "Order 15a961ed-7a00-4e14-91a1-d74eadf8f445 (SignRelease by test_buyer_escrow): Crypto signing error: Simulated BTC Sign Failure", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1345, in sign_order_release\n    sign_result = sign_func(\n        psbt_base64=unsigned_crypto_data,  # Map to expected arg name\n        private_key_wif=private_key_info    # Map to expected arg name\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Simulated BTC Sign Failure"}
{"asctime": "2025-04-08 02:04:55,242", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 28763e26-f16e-42b8-b0df-79dccffca321 (BroadcastRelease): Initiating broadcast...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,243", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 28763e26-f16e-42b8-b0df-79dccffca321 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,243", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 28763e26-f16e-42b8-b0df-79dccffca321 (BroadcastRelease): Broadcast successful. Transaction Hash: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,243", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 28763e26-f16e-42b8-b0df-79dccffca321 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,243", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 28763e26-f16e-42b8-b0df-79dccffca321 (BroadcastRelease): Ledger updated. Vendor: 0.00975000 BTC, Fee: 0.00025000 BTC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,292", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order ac39473b-2f81-44b8-879c-e90752aa3119 (BroadcastRelease): Initiating broadcast...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,293", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order ac39473b-2f81-44b8-879c-e90752aa3119 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_signed_txset)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,293", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order ac39473b-2f81-44b8-879c-e90752aa3119 (BroadcastRelease): Broadcast successful. Transaction Hash: xmr_tx_hash_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,294", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order ac39473b-2f81-44b8-879c-e90752aa3119 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,294", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order ac39473b-2f81-44b8-879c-e90752aa3119 (BroadcastRelease): Ledger updated. Vendor: 0.975000000000 XMR, Fee: 0.025000000000 XMR.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,339", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 5c26c4c1-5545-4539-841e-6f08986ffc62 (BroadcastRelease): Initiating broadcast...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,341", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 5c26c4c1-5545-4539-841e-6f08986ffc62 (BroadcastRelease): Initiating broadcast...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,346", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 5c26c4c1-5545-4539-841e-6f08986ffc62 (BroadcastRelease): Initiating broadcast...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,393", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 723fb434-0f2c-4a4e-8f9a-255523467e98 (BroadcastRelease): Initiating broadcast...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,394", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 723fb434-0f2c-4a4e-8f9a-255523467e98 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,394", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 723fb434-0f2c-4a4e-8f9a-255523467e98 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 723fb434-0f2c-4a4e-8f9a-255523467e98 (service module returned invalid tx_hash: 'None').", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 723fb434-0f2c-4a4e-8f9a-255523467e98 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:04:55,492", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 2fbb0329-17ea-4c1f-9da6-f197554fde73 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 100, Notes: 'Full refund....'", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,493", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 2fbb0329-17ea-4c1f-9da6-f197554fde73 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.01000000 BTC, Vendor: 0E-8 BTC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,493", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 2fbb0329-17ea-4c1f-9da6-f197554fde73 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,493", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 2fbb0329-17ea-4c1f-9da6-f197554fde73 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,494", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 2fbb0329-17ea-4c1f-9da6-f197554fde73 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,494", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 2fbb0329-17ea-4c1f-9da6-f197554fde73 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.01000000, Vendor: 0E-8 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,542", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order cf26202c-12b7-4cab-a623-5ff8b0bacacd (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 70, Notes: 'Split 70/30...'", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,543", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order cf26202c-12b7-4cab-a623-5ff8b0bacacd (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00700000 BTC, Vendor: 0.00300000 BTC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,544", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order cf26202c-12b7-4cab-a623-5ff8b0bacacd (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,544", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order cf26202c-12b7-4cab-a623-5ff8b0bacacd (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,544", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order cf26202c-12b7-4cab-a623-5ff8b0bacacd (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,544", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order cf26202c-12b7-4cab-a623-5ff8b0bacacd (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.00700000, Vendor: 0.00300000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,590", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order de18f607-4beb-4ddb-8be3-3996cb7cb19e (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test notes...'", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,638", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order fb135a4f-1356-4476-8f3a-016b2320f74f (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 101, Notes: 'Test notes...'", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,639", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order fb135a4f-1356-4476-8f3a-016b2320f74f (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: -10, Notes: 'Test notes...'", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,687", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 3fc986bc-e81a-4be3-9738-84d8391f97fd (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test Notes - Crypto Fail Attempt...'", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,688", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 3fc986bc-e81a-4be3-9738-84d8391f97fd (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00500000 BTC, Vendor: 0.00500000 BTC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,688", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 3fc986bc-e81a-4be3-9738-84d8391f97fd (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,688", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order 3fc986bc-e81a-4be3-9738-84d8391f97fd (ResolveDispute by test_mod_escrow): Dispute broadcast error: Crypto dispute broadcast failed for Order 3fc986bc-e81a-4be3-9738-84d8391f97fd (service module returned invalid tx_hash: 'None').", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order 3fc986bc-e81a-4be3-9738-84d8391f97fd (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:04:55,733", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 16752dd2-41ab-4461-aab0-ac8e803fd316 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,735", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2244, "message": "Order 16752dd2-41ab-4461-aab0-ac8e803fd316 (GetUnsignedTx for test_buyer_escrow): Returning prepared transaction data (Type: btc_psbt). Already Signed: False", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,777", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 54448325-302e-4d69-833c-5286752f832c (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,778", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2212, "message": "Order 54448325-302e-4d69-833c-5286752f832c (GetUnsignedTx for test_buyer_escrow): Attempted to get unsigned TX before release initiated.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,778", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 54448325-302e-4d69-833c-5286752f832c (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,779", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 54448325-302e-4d69-833c-5286752f832c (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {}", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,780", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 54448325-302e-4d69-833c-5286752f832c (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,781", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 54448325-302e-4d69-833c-5286752f832c (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'type': 'btc_psbt', 'signatures': {}}", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,781", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 54448325-302e-4d69-833c-5286752f832c (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,782", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 54448325-302e-4d69-833c-5286752f832c (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'data': 'some_data', 'signatures': {}}", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,826", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order b33af462-3ae7-43e3-aaed-9e1a2b906b75 (GetUnsignedTx for test_mod_escrow): Request received.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,827", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2207, "message": "Order b33af462-3ae7-43e3-aaed-9e1a2b906b75 (GetUnsignedTx for test_mod_escrow): Permission denied. User not buyer or vendor.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,868", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 416, "message": "Order c16a9317-01c2-4ac0-bb6b-70f68de1ed83 (TimeoutCheck): Payment deadline 2025-04-08 07:04:55.867578+00:00 passed. Attempting cancellation.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,868", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 429, "message": "Order c16a9317-01c2-4ac0-bb6b-70f68de1ed83 (TimeoutCheck): Successfully cancelled due to payment timeout. Status -> cancelled_timeout", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,868", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 430, "message": "Order c16a9317-01c2-4ac0-bb6b-70f68de1ed83 automatically cancelled due to payment timeout.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,957", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 33ab651f-f8b4-45db-a111-fe4aa6ca5a8b (BroadcastRelease): Initiating broadcast...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,957", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,958", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 33ab651f-f8b4-45db-a111-fe4aa6ca5a8b (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,959", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 33ab651f-f8b4-45db-a111-fe4aa6ca5a8b (BroadcastRelease): Broadcast successful. Transaction Hash: aaa_int_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,960", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 33ab651f-f8b4-45db-a111-fe4aa6ca5a8b (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,961", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 4cf8ae1d-0bc7-409c-b707-a32dd6828e60 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,962", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction f58122ed-8b8b-48a7-ab70-3f25e6261217 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:55,962", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 33ab651f-f8b4-45db-a111-fe4aa6ca5a8b (BroadcastRelease): Ledger updated. Vendor: 0.01960000 BTC, Fee: 0.00040000 BTC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,005", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 14df41c4-de91-4928-b328-7192a8d76dac (BroadcastRelease): Initiating broadcast...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,006", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,007", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 14df41c4-de91-4928-b328-7192a8d76dac (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_unsigned_txset)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,007", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 14df41c4-de91-4928-b328-7192a8d76dac (BroadcastRelease): Broadcast successful. Transaction Hash: bbb_int_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,008", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 14df41c4-de91-4928-b328-7192a8d76dac (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,009", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction feaf917d-6112-4d17-a97a-fb8203e60c76 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,010", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 55c2977a-d472-482d-a713-c1e8dd853eaf recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,010", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 14df41c4-de91-4928-b328-7192a8d76dac (BroadcastRelease): Ledger updated. Vendor: 1.462500000000 XMR, Fee: 0.037500000000 XMR.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,050", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 958c5366-8b28-4ce1-9765-2758f947c161 (BroadcastRelease): Initiating broadcast...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,050", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,052", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 958c5366-8b28-4ce1-9765-2758f947c161 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,052", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 958c5366-8b28-4ce1-9765-2758f947c161 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 958c5366-8b28-4ce1-9765-2758f947c161 (service module returned invalid tx_hash: 'None').", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 958c5366-8b28-4ce1-9765-2758f947c161 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:04:56,092", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 3d1f5e51-cf94-4106-b3a5-6452c04a4551 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 30, Notes: 'Split decision: 30% to buyer...'", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,094", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,095", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 3d1f5e51-cf94-4106-b3a5-6452c04a4551 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.00600000 BTC, Vendor: 0.01400000 BTC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,095", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 3d1f5e51-cf94-4106-b3a5-6452c04a4551 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,095", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 3d1f5e51-cf94-4106-b3a5-6452c04a4551 (ResolveDispute by test_mod_int): Dispute transaction broadcast successful. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,096", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 3d1f5e51-cf94-4106-b3a5-6452c04a4551 (ResolveDispute by test_mod_int): Order state saved successfully. Proceeding to ledger updates.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,097", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 23ccfcdc-e017-4d2a-9b26-127f47965e5b recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,098", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction fc3ff732-e13e-4f9a-9cf8-acf62f6bde2f recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,098", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 3d1f5e51-cf94-4106-b3a5-6452c04a4551 (ResolveDispute by test_mod_int): Ledger updated. Buyer: 0.00600000, Vendor: 0.01400000 BTC. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,140", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order e0db5f9d-de54-4dc8-9bfe-a029de832eb0 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 50, Notes: 'Attempted resolution...'", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,140", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,141", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order e0db5f9d-de54-4dc8-9bfe-a029de832eb0 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.01000000 BTC, Vendor: 0.01000000 BTC.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,142", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order e0db5f9d-de54-4dc8-9bfe-a029de832eb0 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:04:56,142", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order e0db5f9d-de54-4dc8-9bfe-a029de832eb0 (ResolveDispute by test_mod_int): Dispute broadcast error: Crypto dispute broadcast failed for Order e0db5f9d-de54-4dc8-9bfe-a029de832eb0 (service module returned invalid tx_hash: 'None').", "process": 7556, "thread": 17708, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order e0db5f9d-de54-4dc8-9bfe-a029de832eb0 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:04:56,177", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 7556, "thread": 17708}
{"asctime": "2025-04-08 02:09:04,153", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,154", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 47d24fff-e2d4-4ea6-a0d3-b2ba71b00a1e recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,158", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 7a299092-ae79-4dd8-a763-30515a61e743 recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,162", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction f485a13d-85a0-4870-b848-0d30dcceb83a recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,168", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 202, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,172", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,176", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,181", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,185", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,187", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,190", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,193", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,196", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,199", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,202", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,205", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,209", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,248", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 486, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: Test lock", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,248", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 513, "message": "Ledger transaction 69114d22-08e4-4fc7-a658-8b48b4f8736c recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,253", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 465, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,259", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 448, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,264", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: Test unlock", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,264", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction 0dbafa52-e62d-4ccb-a33f-01d6ab4d4c32 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,269", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 592, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,269", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: Test unlock more", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,270", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction a948f1d5-8ee7-4a12-baae-64c39f402cab recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,274", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 587, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,280", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 566, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,285", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction cb169cfc-25aa-464a-b791-e90ff1122075 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,290", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction a74422f1-912c-4fed-84e5-ad07edea6bec recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,295", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 48dec48e-c1dd-4fcd-9049-31ac3cc27d7b recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,326", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 295, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,344", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,345", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 482, "message": "[get_market_btc_key] Market BTC key pubkey matches settings (031b7a7e8e...).", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,345", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 489, "message": "[get_market_btc_key] Successfully loaded and cached market BTC key from Vault (PubKey starts with: 031b7a7e8e...).", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,349", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,349", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 454, "message": "[get_market_btc_key] Vault returned invalid data for key 'market_btc_multisig_key': None", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,411", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1547, "message": "Deprecated function `process_btc_withdrawal` called. Use Ledger system.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,414", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1550, "message": "Deprecated function `process_escrow_release` called. Use Taproot multi-sig workflow (prepare/sign/finalize/broadcast).", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,452", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,454", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,456", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,457", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,459", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,460", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,463", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,463", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 337, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-08 02:09:04,465", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,470", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-08 02:09:04,474", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-08 02:09:04,480", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,480", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,482", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-08 02:09:04,485", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-08 02:09:04,489", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,489", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,493", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,495", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,497", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-08 02:09:04,501", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-08 02:09:04,504", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-08 02:09:04,507", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,509", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 1fe9828a86162729)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,509", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 1fe9828a86162729): 4LdpnMo9wPESgQ4...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,511", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,511", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,511", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,512", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 1fe9828a86162729)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,512", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 1fe9828a86162729): Timeout", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,514", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 1fe9828a86162729)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,514", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 1fe9828a86162729): Monero RPC Error (Code: -5): RPC Failed", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,516", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 1fe9828a86162729)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,516", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 1fe9828a86162729). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,519", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,519", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,521", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 1fe9828a86162729)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,521", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 1fe9828a86162729) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,523", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,523", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,524", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,528", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,529", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,531", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,531", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,533", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,533", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,535", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,535", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '88e259f2d701a8d9ca0e4f519bffe655c80b632c4ae5e9b6a5c4949d0b6eaddf8de0f00b1760ee4f52b1210fd770cca9e3f4c313b377344c78c3244ccf2618ab20066884b1648a223125fbe7c3e0665dcf63a7311228199a28c9aa4e55dff5cd401f867866f5bcee2f2ac20c6f8b425f26da5aa0503660cf7adc998efd9afacf'}", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,538", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,538", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,539", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 9124, "thread": 6080, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-08 02:09:04,539", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,539", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,541", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,541", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,541", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,541", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': 'd2512ef75657263eee3900a6494b7d7691f9622597b8adacb9e086c68068782abecb691781af7117caae1e231e5394823fd3436fe9af6cd25f01a95397bbaa96594dff1851ddffa4376bf2c6c1696d781a5b6d6e09e8bbedb6db876d139e696ed7018a439354484c4aba91bd91b72e2c246a7feaf0d44309354ffadb3338b61742f473941aec990dec53522b8d63b012c2abffbc95dc524e6686583f452c7c7a75ac5fa751e86dc0b55ab3e76b54cfb175900e2c95f45cdd0d97416e426a68bdf34d297cc7cffee583e16f70b123058e72f2a59882f119b3baa5c4b56311db1a0488dc2d31310253516fd515025500ab3a01c3b9bee8d866ad95ed992bfcf8d2'}", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,542", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 9124, "thread": 6080, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:09:04,542", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,542", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,544", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,544", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,544", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,544", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 9124, "thread": 6080, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:09:04,545", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,545", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,548", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,548", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,548", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,548", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 9124, "thread": 6080, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:09:04,548", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,548", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,551", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,551", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,551", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,560", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,560", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-08 02:09:04,563", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,564", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,564", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 735, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-08 02:09:04,566", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,566", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,568", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,569", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,569", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,569", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,572", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,572", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,572", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,575", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,576", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,576", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,576", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,578", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,578", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,580", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,580", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,580", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,581", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,583", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,583", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,583", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 735, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 02:09:04,586", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,586", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 735, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 02:09:04,589", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,590", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,591", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,592", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,592", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 735, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-08 02:09:04,594", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,594", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,597", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,597", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,597", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,597", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,599", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,599", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,599", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,600", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,602", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,602", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,602", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: b190474ba0b3d697aae862f809eebbdc4a788e65249a3c100aa5af22acd39360", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,602", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,605", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,607", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,609", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,609", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,609", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: b190474ba0b3d697aae862f809eebbdc4a788e65249a3c100aa5af22acd39360", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,612", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,612", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,614", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,615", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,617", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,617", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,617", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,619", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,619", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,619", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,622", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,623", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,623", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,626", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,626", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,626", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,628", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,629", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,629", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,632", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,632", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: b190474ba0b3d697aae862f809eebbdc4a788e65249a3c100aa5af22acd39360, Fee: 0.000543210000 XMR (543210000 pico)", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,635", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,635", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,635", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,635", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,635", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,638", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 1d14e5fa...): Failed to get daemon height. Cannot calculate confirmations.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,647", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 1d14e5fa...): Skipping entry 0: TXID b190474ba0b3d697aae862f809eebbdc4a788e65249a3c100aa5af22acd39360 already processed.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,650", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,653", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,655", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,660", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 1d14e5fa...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-08 02:09:04,666", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 1d14e5fa...): Found candidate! TXID: b190474ba0b3d697aae862f809eebbdc4a788e65249a3c100aa5af22acd39360, Amt: 1.234567890123 XMR, Confs: 11.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,666", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 1d14e5fa...): Confirmed payment found.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,669", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,670", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,670", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,670", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-08 02:09:04,672", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,675", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,675", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,675", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,675", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: b190474ba0b3d697aae862f809eebbdc4a788e65249a3c100aa5af22acd39360, Fee: 0.000678900000 XMR (678900000 pico)", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,678", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,678", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,678", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,678", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,678", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,678", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,678", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,678", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,681", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,683", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,684", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,684", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,684", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1285, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 02:09:04,686", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,686", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1285, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 02:09:04,688", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,690", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,691", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,691", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 02:09:04,692", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 02:09:04,693", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,696", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,696", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,696", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,696", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: b190474ba0b3d697aae862f809eebbdc4a788e65249a3c100aa5af22acd39360, Fee: 0.000777700000 XMR (777700000 pico)", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,696", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,700", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,700", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,700", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,700", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: b190474ba0b3d697aae862f809eebbdc4a788e65249a3c100aa5af22acd39360, Fee: 0.000888800000 XMR (888800000 pico)", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,700", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,703", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,703", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,703", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,703", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,703", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,704", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:04,707", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:05,208", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:05,209", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:05,213", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:05,766", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:05,766", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:05,768", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/3): Timeout 1. Retrying in 0.5s...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,269", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/3): Refused 2. Retrying in 0.5s...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,778", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 401 (Authentication failed? Check RPC User/Password). Response: Unauthorized", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 02:09:06,786", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 500. Response: Internal Server Error", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 02:09:06,793", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-08 02:09:06,799", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 267, "message": "Monero RPC (Wallet - Method: some_method): RPC returned error: Code=-4, Message=Invalid params", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,814", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,814", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2985294546992'>", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,820", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,827", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,828", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2985294547664'>", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,834", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,844", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,845", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,852", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,852", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,860", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,860", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,860", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,867", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: WRONG_FINGERPRINT_XXXXXXXXXXXXXXXXXXXXXXXX, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: True, Status: signature valid", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,867", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: WRONG_FINGERPRINT_XXXXXXXXXXXXXXXXXXXXXXXX.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,867", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,875", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,875", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,875", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,881", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,888", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,888", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,903", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,903", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-08 02:09:06,910", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,916", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,916", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-08 02:09:06,924", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,924", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,931", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,931", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,938", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,938", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:06,950", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 387, "message": "User test_vendor_escrow missing valid withdrawal address in field 'btc_withdrawal_address' for currency BTC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,001", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 8d363c30-2a24-4965-9467-fc5e1705e333 (BTC): Initiating multi-sig escrow setup...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,003", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_test_user' loaded and cached.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,004", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 661, "message": "Order 8d363c30-2a24-4965-9467-fc5e1705e333 (BTC): BTC multisig details missing expected redeem/witness script.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,004", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 8d363c30-2a24-4965-9467-fc5e1705e333 (BTC): Generated BTC Escrow Address: tb1qw508d6qejxt...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,004", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 8d363c30-2a24-4965-9467-fc5e1705e333 (BTC): Created CryptoPayment 0b9f558b-3db8-4afc-b532-de628b68cce1 (Multi-sig). Expected Atomic: 1000000", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,005", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 8d363c30-2a24-4965-9467-fc5e1705e333 (BTC): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 08:09:07.004837+00:00. Awaiting payment to tb1qw508d6qejxt...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,005", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 8d363c30-2a24-4965-9467-fc5e1705e333 (BTC): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,063", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order e4b39a75-79f2-474e-aad2-59c5a416592a (XMR): Initiating multi-sig escrow setup...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,065", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order e4b39a75-79f2-474e-aad2-59c5a416592a (XMR): Generated XMR Escrow Address: xmr_multisig_ad...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,066", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order e4b39a75-79f2-474e-aad2-59c5a416592a (XMR): Created CryptoPayment 2b1bbcce-5272-4db7-8871-40194b8957fa (Multi-sig). Expected Atomic: 1000000000000", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,066", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order e4b39a75-79f2-474e-aad2-59c5a416592a (XMR): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 08:09:07.066150+00:00. Awaiting payment to xmr_multisig_ad...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,067", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order e4b39a75-79f2-474e-aad2-59c5a416592a (XMR): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,110", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order b39fc754-950f-49fc-8edb-01a6ceb8e069 (BTC): Initiating multi-sig escrow setup...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,111", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 537, "message": "Order b39fc754-950f-49fc-8edb-01a6ceb8e069 (BTC): Cannot create escrow details. Status: 'shipped' (Expected: 'pending_payment').", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,151", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 3053132a-d866-4612-b68b-4c819510f2d9 (LTC): Initiating multi-sig escrow setup...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,153", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 607, "message": "Order 3053132a-d866-4612-b68b-4c819510f2d9 (LTC): Failed to gather participant info: Multisig key attribute mapping not found for currency LTC.", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 581, in create_escrow_for_order\n    raise ValueError(f\"Multisig key attribute mapping not found for currency {currency}.\")\nValueError: Multisig key attribute mapping not found for currency LTC."}
{"asctime": "2025-04-08 02:09:07,195", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 7a2e0da2-253c-4f51-a298-7b8a36fc531c (BTC): Initiating multi-sig escrow setup...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,197", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 7a2e0da2-253c-4f51-a298-7b8a36fc531c (BTC): Crypto service error during BTC escrow generation: BTC Gen Failed", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 639, in create_escrow_for_order\n    msig_details = crypto_service_module.create_btc_multisig_address(\n        participant_pubkeys_hex=participant_infos, # Use expected kwarg name\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: BTC Gen Failed"}
{"asctime": "2025-04-08 02:09:07,241", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 524021c0-bc8d-4b73-90c4-43c0692a285e (XMR): Initiating multi-sig escrow setup...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,243", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 524021c0-bc8d-4b73-90c4-43c0692a285e (XMR): Crypto service error during XMR escrow generation: XMR Wallet Gen Failed", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 621, in create_escrow_for_order\n    msig_details = crypto_service_module.create_monero_multisig_wallet(\n        participant_infos=participant_infos, # Use keyword arg for clarity\n        order_guid=str(order.id),           # Use keyword arg 'order_guid'\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: XMR Wallet Gen Failed"}
{"asctime": "2025-04-08 02:09:07,289", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: b9f5b075-b27b-44ea-899f-9355f9f40b8b, Payment: 5c0fe966-caf2-47d8-8878-d49f029b0704, Currency: BTC): Starting check.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,289", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: b9f5b075-b27b-44ea-899f-9355f9f40b8b, Payment: 5c0fe966-caf2-47d8-8878-d49f029b0704, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,289", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: b9f5b075-b27b-44ea-899f-9355f9f40b8b, Payment: 5c0fe966-caf2-47d8-8878-d49f029b0704, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,290", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1052, "message": "PaymentConfirm Check (Order: b9f5b075-b27b-44ea-899f-9355f9f40b8b, Payment: 5c0fe966-caf2-47d8-8878-d49f029b0704, Currency: BTC): Ledger updated (incl. deposit fee) & Order status -> payment_confirmed. TXID: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,290", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1067, "message": "PaymentConfirm Check (Order: b9f5b075-b27b-44ea-899f-9355f9f40b8b, Payment: 5c0fe966-caf2-47d8-8878-d49f029b0704, Currency: BTC): Sent payment confirmation notification to Vendor test_vendor_escrow.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,333", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 19a5c7f0-4721-4f54-a2a7-9b31aaf02d1d, Payment: 5253f4d0-a06f-4ed0-9a58-37582c452a29, Currency: BTC): Starting check.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,378", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 917, "message": "Order 16da865e-6544-4a54-b9c3-a9bcc144cfcc cancelled due to underpayment. Rcvd 0.00500000, Exp 0.01000000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,425", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 8b8cea0d-bbc0-41d9-8de2-f7735008f2c5, Payment: a6cb5e44-24db-4677-88d2-e954102a829f, Currency: BTC): Starting check.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,425", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 8b8cea0d-bbc0-41d9-8de2-f7735008f2c5, Payment: a6cb5e44-24db-4677-88d2-e954102a829f, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,426", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 8b8cea0d-bbc0-41d9-8de2-f7735008f2c5, Payment: a6cb5e44-24db-4677-88d2-e954102a829f, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,426", "levelname": "CRITICAL", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1075, "message": "PaymentConfirm Check (Order: 8b8cea0d-bbc0-41d9-8de2-f7735008f2c5, Payment: a6cb5e44-24db-4677-88d2-e954102a829f, Currency: BTC): CRITICAL: Ledger/Order atomic update FAILED during payment confirmation! Error: ['Cannot lock funds']. Transaction rolled back.", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1010, in check_and_confirm_payment\n    lock_success = ledger_service.lock_funds(\n        user=buyer, currency=currency, amount=expected_std, # Lock the required STANDARD order amount\n        related_order=order, notes=f\"Lock funds for Order {order.id} escrow\"\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nledger.services.InsufficientFundsError: ['Cannot lock funds']"}
{"asctime": "2025-04-08 02:09:07,473", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 687025eb-6fb9-482d-a82f-a6132803f775 (MarkShipped by test_vendor_escrow): Attempting...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,475", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1190, "message": "Order 687025eb-6fb9-482d-a82f-a6132803f775 (MarkShipped by test_vendor_escrow): Tracking info provided but 'tracking_info' field missing on Order model.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,477", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1206, "message": "Order 687025eb-6fb9-482d-a82f-a6132803f775 (MarkShipped by test_vendor_escrow): Marked shipped. Status -> shipped. Dispute deadline: 2025-04-15 08:09:07.474644+00:00, Auto-finalize: 2025-04-22 08:09:07.474644+00:00", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,477", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1230, "message": "Order 687025eb-6fb9-482d-a82f-a6132803f775 (MarkShipped by test_vendor_escrow): Sent order shipped notification to Buyer test_buyer_escrow.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,521", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 7041785d-a8c8-4924-aa87-1a0d56106b6a (MarkShipped by test_buyer_escrow): Attempting...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,522", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1126, "message": "Order 7041785d-a8c8-4924-aa87-1a0d56106b6a (MarkShipped by test_buyer_escrow): Permission denied. User test_buyer_escrow is not the vendor (test_vendor_escrow).", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,568", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 728219e9-3cdc-43ac-ba9d-79b227503777 (MarkShipped by test_vendor_escrow): Attempting...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,570", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1130, "message": "Order 728219e9-3cdc-43ac-ba9d-79b227503777 (MarkShipped by test_vendor_escrow): Cannot mark shipped. Invalid status 'pending_payment' (Expected: 'payment_confirmed').", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,617", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 934e3406-98cd-486c-b1fb-995020768361 (MarkShipped by test_vendor_escrow): Attempting...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,618", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1144, "message": "Order 934e3406-98cd-486c-b1fb-995020768361 (MarkShipped by test_vendor_escrow): Failed to prepare release transaction: Prep Fail", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1138, in mark_order_shipped\n    prepared_release_metadata = _prepare_release(order_locked) # Definition is later in file\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Prep Fail"}
{"asctime": "2025-04-08 02:09:07,669", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 2f204682-d84c-4848-a5cc-953dffa73d6e (SignRelease by test_buyer_escrow): Attempting signature...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,671", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 2f204682-d84c-4848-a5cc-953dffa73d6e (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,671", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order 2f204682-d84c-4848-a5cc-953dffa73d6e (SignRelease by test_buyer_escrow): Signature applied. Current signers: 1/2. Ready for broadcast: False.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,719", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 300f31d8-390d-42df-aacf-c4b23d811a1a (SignRelease by test_vendor_escrow): Attempting signature...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,721", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 300f31d8-390d-42df-aacf-c4b23d811a1a (SignRelease by test_vendor_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,721", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order 300f31d8-390d-42df-aacf-c4b23d811a1a (SignRelease by test_vendor_escrow): Signature applied. Current signers: 2/2. Ready for broadcast: True.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,722", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1465, "message": "Order 300f31d8-390d-42df-aacf-c4b23d811a1a (SignRelease by test_vendor_escrow): Sent 'ready for broadcast' notification to test_buyer_escrow.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,771", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order d7afa069-7262-47ac-b8ea-d9e9ae5a5844 (SignRelease by test_mod_escrow): Attempting signature...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,772", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1289, "message": "Order d7afa069-7262-47ac-b8ea-d9e9ae5a5844 (SignRelease by test_mod_escrow): Permission denied. User is not buyer or vendor.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,820", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 3084590d-96d2-4997-88dd-c94429a2d114 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,822", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 3084590d-96d2-4997-88dd-c94429a2d114 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,824", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 3084590d-96d2-4997-88dd-c94429a2d114 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,825", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 3084590d-96d2-4997-88dd-c94429a2d114 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,875", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 0ca3d443-73a8-4545-a3b7-236236de53a1 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,876", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1321, "message": "Order 0ca3d443-73a8-4545-a3b7-236236de53a1 (SignRelease by test_buyer_escrow): User test_buyer_escrow (ID: 59) has already signed this release.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,925", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 51e53d91-8a9b-417c-82e6-4fef6c971f7b (SignRelease by test_buyer_escrow): Attempting signature...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,927", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 51e53d91-8a9b-417c-82e6-4fef6c971f7b (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,927", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1425, "message": "Order 51e53d91-8a9b-417c-82e6-4fef6c971f7b (SignRelease by test_buyer_escrow): Crypto signing error: Simulated BTC Sign Failure", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1345, in sign_order_release\n    sign_result = sign_func(\n        psbt_base64=unsigned_crypto_data,  # Map to expected arg name\n        private_key_wif=private_key_info    # Map to expected arg name\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Simulated BTC Sign Failure"}
{"asctime": "2025-04-08 02:09:07,983", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 1ffdcda8-0fa8-4108-bbd0-0ab771b123cb (BroadcastRelease): Initiating broadcast...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,984", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 1ffdcda8-0fa8-4108-bbd0-0ab771b123cb (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,984", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 1ffdcda8-0fa8-4108-bbd0-0ab771b123cb (BroadcastRelease): Broadcast successful. Transaction Hash: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,985", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 1ffdcda8-0fa8-4108-bbd0-0ab771b123cb (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:07,985", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 1ffdcda8-0fa8-4108-bbd0-0ab771b123cb (BroadcastRelease): Ledger updated. Vendor: 0.00975000 BTC, Fee: 0.00025000 BTC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,038", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order d39cc4a6-4d3d-4b4e-a773-46be6c393be6 (BroadcastRelease): Initiating broadcast...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,039", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order d39cc4a6-4d3d-4b4e-a773-46be6c393be6 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_signed_txset)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,040", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order d39cc4a6-4d3d-4b4e-a773-46be6c393be6 (BroadcastRelease): Broadcast successful. Transaction Hash: xmr_tx_hash_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,040", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order d39cc4a6-4d3d-4b4e-a773-46be6c393be6 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,040", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order d39cc4a6-4d3d-4b4e-a773-46be6c393be6 (BroadcastRelease): Ledger updated. Vendor: 0.975000000000 XMR, Fee: 0.025000000000 XMR.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,091", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order a3d0856c-db18-4845-be5d-209651dbc441 (BroadcastRelease): Initiating broadcast...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,094", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order a3d0856c-db18-4845-be5d-209651dbc441 (BroadcastRelease): Initiating broadcast...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,099", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order a3d0856c-db18-4845-be5d-209651dbc441 (BroadcastRelease): Initiating broadcast...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,150", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 2a2780e3-7f04-44df-a2d1-50737da06667 (BroadcastRelease): Initiating broadcast...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,151", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 2a2780e3-7f04-44df-a2d1-50737da06667 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,151", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 2a2780e3-7f04-44df-a2d1-50737da06667 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 2a2780e3-7f04-44df-a2d1-50737da06667 (service module returned invalid tx_hash: 'None').", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 2a2780e3-7f04-44df-a2d1-50737da06667 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:09:08,261", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 746fe421-a277-4a31-bae6-8918797f5d2c (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 100, Notes: 'Full refund....'", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,263", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 746fe421-a277-4a31-bae6-8918797f5d2c (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.01000000 BTC, Vendor: 0E-8 BTC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,263", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 746fe421-a277-4a31-bae6-8918797f5d2c (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,264", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 746fe421-a277-4a31-bae6-8918797f5d2c (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,264", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 746fe421-a277-4a31-bae6-8918797f5d2c (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,264", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 746fe421-a277-4a31-bae6-8918797f5d2c (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.01000000, Vendor: 0E-8 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,316", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 4b11c0b0-bd39-4513-8f54-52d8fa07fcd8 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 70, Notes: 'Split 70/30...'", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,317", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 4b11c0b0-bd39-4513-8f54-52d8fa07fcd8 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00700000 BTC, Vendor: 0.00300000 BTC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,318", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 4b11c0b0-bd39-4513-8f54-52d8fa07fcd8 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,318", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 4b11c0b0-bd39-4513-8f54-52d8fa07fcd8 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,318", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 4b11c0b0-bd39-4513-8f54-52d8fa07fcd8 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,318", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 4b11c0b0-bd39-4513-8f54-52d8fa07fcd8 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.00700000, Vendor: 0.00300000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,367", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 28b5b95b-cce0-4d58-b53d-6116a4995b37 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test notes...'", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,416", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 35848299-370e-4cad-8904-851268e2f99f (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 101, Notes: 'Test notes...'", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,417", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 35848299-370e-4cad-8904-851268e2f99f (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: -10, Notes: 'Test notes...'", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,466", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 0a144e4f-f9e5-41f4-8008-40e1186274af (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test Notes - Crypto Fail Attempt...'", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,467", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 0a144e4f-f9e5-41f4-8008-40e1186274af (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00500000 BTC, Vendor: 0.00500000 BTC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,467", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 0a144e4f-f9e5-41f4-8008-40e1186274af (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,467", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order 0a144e4f-f9e5-41f4-8008-40e1186274af (ResolveDispute by test_mod_escrow): Dispute broadcast error: Crypto dispute broadcast failed for Order 0a144e4f-f9e5-41f4-8008-40e1186274af (service module returned invalid tx_hash: 'None').", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order 0a144e4f-f9e5-41f4-8008-40e1186274af (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:09:08,515", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order c7ad566e-c738-4980-8d50-9f9a01da4df4 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,517", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2244, "message": "Order c7ad566e-c738-4980-8d50-9f9a01da4df4 (GetUnsignedTx for test_buyer_escrow): Returning prepared transaction data (Type: btc_psbt). Already Signed: False", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,560", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 069172f7-19d5-4eed-b060-edfbb24c9e52 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,561", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2212, "message": "Order 069172f7-19d5-4eed-b060-edfbb24c9e52 (GetUnsignedTx for test_buyer_escrow): Attempted to get unsigned TX before release initiated.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,562", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 069172f7-19d5-4eed-b060-edfbb24c9e52 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,563", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 069172f7-19d5-4eed-b060-edfbb24c9e52 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {}", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,564", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 069172f7-19d5-4eed-b060-edfbb24c9e52 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,565", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 069172f7-19d5-4eed-b060-edfbb24c9e52 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'type': 'btc_psbt', 'signatures': {}}", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,565", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 069172f7-19d5-4eed-b060-edfbb24c9e52 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,566", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 069172f7-19d5-4eed-b060-edfbb24c9e52 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'data': 'some_data', 'signatures': {}}", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,611", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order d3bcbac1-399e-4c55-8bf6-a78c6a3078dc (GetUnsignedTx for test_mod_escrow): Request received.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,612", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2207, "message": "Order d3bcbac1-399e-4c55-8bf6-a78c6a3078dc (GetUnsignedTx for test_mod_escrow): Permission denied. User not buyer or vendor.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,654", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 416, "message": "Order afee2838-0104-46e0-aab2-ca211cb13e51 (TimeoutCheck): Payment deadline 2025-04-08 07:09:08.653615+00:00 passed. Attempting cancellation.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,654", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 429, "message": "Order afee2838-0104-46e0-aab2-ca211cb13e51 (TimeoutCheck): Successfully cancelled due to payment timeout. Status -> cancelled_timeout", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,654", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 430, "message": "Order afee2838-0104-46e0-aab2-ca211cb13e51 automatically cancelled due to payment timeout.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,739", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order ff5894b7-d155-45c0-ac44-4293107e0600 (BroadcastRelease): Initiating broadcast...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,740", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,741", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order ff5894b7-d155-45c0-ac44-4293107e0600 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,742", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order ff5894b7-d155-45c0-ac44-4293107e0600 (BroadcastRelease): Broadcast successful. Transaction Hash: aaa_int_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,743", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order ff5894b7-d155-45c0-ac44-4293107e0600 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,745", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction a554a2a5-9007-4e28-ac00-3e6c9f8907b4 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,746", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction d18efc6b-c5c1-4499-a5b8-32a89ce2a9aa recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,746", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order ff5894b7-d155-45c0-ac44-4293107e0600 (BroadcastRelease): Ledger updated. Vendor: 0.01960000 BTC, Fee: 0.00040000 BTC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,790", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order cef991b9-5e3d-4996-9f77-1e9fc292386b (BroadcastRelease): Initiating broadcast...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,790", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,792", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order cef991b9-5e3d-4996-9f77-1e9fc292386b (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_unsigned_txset)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,792", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order cef991b9-5e3d-4996-9f77-1e9fc292386b (BroadcastRelease): Broadcast successful. Transaction Hash: bbb_int_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,793", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order cef991b9-5e3d-4996-9f77-1e9fc292386b (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,794", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 1c77f740-c237-4c21-b82c-4860b4c1c7cf recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,795", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 2fd08312-b5c4-4a10-b0d2-e43fa8384e68 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,795", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order cef991b9-5e3d-4996-9f77-1e9fc292386b (BroadcastRelease): Ledger updated. Vendor: 1.462500000000 XMR, Fee: 0.037500000000 XMR.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,834", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order ecbaa143-d545-408b-87d8-c632c899ca9c (BroadcastRelease): Initiating broadcast...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,835", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,836", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order ecbaa143-d545-408b-87d8-c632c899ca9c (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,836", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order ecbaa143-d545-408b-87d8-c632c899ca9c (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order ecbaa143-d545-408b-87d8-c632c899ca9c (service module returned invalid tx_hash: 'None').", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order ecbaa143-d545-408b-87d8-c632c899ca9c (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:09:08,878", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 1395b983-246c-4802-9e5b-09930a335e16 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 30, Notes: 'Split decision: 30% to buyer...'", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,880", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,881", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 1395b983-246c-4802-9e5b-09930a335e16 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.00600000 BTC, Vendor: 0.01400000 BTC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,881", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 1395b983-246c-4802-9e5b-09930a335e16 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,881", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 1395b983-246c-4802-9e5b-09930a335e16 (ResolveDispute by test_mod_int): Dispute transaction broadcast successful. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,882", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 1395b983-246c-4802-9e5b-09930a335e16 (ResolveDispute by test_mod_int): Order state saved successfully. Proceeding to ledger updates.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,883", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction f930aa4a-5d32-4714-9ca8-1235034a3f24 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,884", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 99e81c44-2096-4fed-81c3-6461b036b6cd recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,884", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 1395b983-246c-4802-9e5b-09930a335e16 (ResolveDispute by test_mod_int): Ledger updated. Buyer: 0.00600000, Vendor: 0.01400000 BTC. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,926", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order f7a13c82-51f9-44d2-92d2-7d942163cc15 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 50, Notes: 'Attempted resolution...'", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,926", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,927", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order f7a13c82-51f9-44d2-92d2-7d942163cc15 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.01000000 BTC, Vendor: 0.01000000 BTC.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,927", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order f7a13c82-51f9-44d2-92d2-7d942163cc15 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:09:08,928", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order f7a13c82-51f9-44d2-92d2-7d942163cc15 (ResolveDispute by test_mod_int): Dispute broadcast error: Crypto dispute broadcast failed for Order f7a13c82-51f9-44d2-92d2-7d942163cc15 (service module returned invalid tx_hash: 'None').", "process": 9124, "thread": 6080, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order f7a13c82-51f9-44d2-92d2-7d942163cc15 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:09:08,963", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 9124, "thread": 6080}
{"asctime": "2025-04-08 02:34:00,380", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,380", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 84ad6d88-d9b7-4974-864b-03f4e9a106a7 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,385", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 4cdc7c18-3475-40e3-bc98-217aa06fd669 recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,389", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction d5ffe3fa-ff1d-444d-b459-9153b3a38bdc recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,395", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 202, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,399", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,403", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,407", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,411", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,414", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,418", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,422", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,426", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,429", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,433", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,436", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,440", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,480", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 486, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: Test lock", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,481", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 513, "message": "Ledger transaction ac84a65f-0b2a-437c-b51f-f3166dd8ba48 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,485", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 465, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,493", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 448, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,498", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: Test unlock", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,499", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction a83ed560-5b87-4214-86f6-fff474aaa06a recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,505", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 592, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,505", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: Test unlock more", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,505", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction b370b449-6fdd-4f70-9c3b-1fedeadccd03 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,510", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 587, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,517", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 566, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,524", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 34aacc77-0ae0-407d-a99f-fd19a87ed5af recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,530", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 591ba744-ba59-43dd-a5b8-92265de75a62 recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,535", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 9e7d809d-cacc-4362-a108-e887e2f480f7 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,564", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 295, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,585", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,585", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 482, "message": "[get_market_btc_key] Market BTC key pubkey matches settings (031b7a7e8e...).", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,586", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 489, "message": "[get_market_btc_key] Successfully loaded and cached market BTC key from Vault (PubKey starts with: 031b7a7e8e...).", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,589", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,589", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 454, "message": "[get_market_btc_key] Vault returned invalid data for key 'market_btc_multisig_key': None", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,655", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1547, "message": "Deprecated function `process_btc_withdrawal` called. Use Ledger system.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,657", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1550, "message": "Deprecated function `process_escrow_release` called. Use Taproot multi-sig workflow (prepare/sign/finalize/broadcast).", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,697", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,699", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,701", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,703", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,705", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,707", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,710", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,710", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 337, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-08 02:34:00,713", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,718", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-08 02:34:00,723", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-08 02:34:00,729", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,730", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,732", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-08 02:34:00,736", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-08 02:34:00,741", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,741", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,743", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,745", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,747", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-08 02:34:00,750", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-08 02:34:00,754", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-08 02:34:00,757", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,760", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 2f1903d821d9a675)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,760", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 2f1903d821d9a675): 4LdpnMo9wPESgQ4...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,762", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,762", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,762", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,764", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 2f1903d821d9a675)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,764", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 2f1903d821d9a675): Timeout", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,767", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 2f1903d821d9a675)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,767", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 2f1903d821d9a675): Monero RPC Error (Code: -5): RPC Failed", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,769", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 2f1903d821d9a675)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,769", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 2f1903d821d9a675). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,771", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,771", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,772", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 2f1903d821d9a675)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,773", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 2f1903d821d9a675) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,775", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,776", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,776", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,780", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,781", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,783", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,783", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,785", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,785", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,788", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,788", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': 'be1516b3fa89a88aef3251de7677cf849d494a1976dfbce82bf7853b7a899054a8f32b5bd8bc159d534daade76d65a2cc494218e42856d81316d8aaa46567aa588017f6f5087fad4be93af5840c6e1fdd38ca43c92f78c864836777e3e325842ccd506053fcb4d8296b467fbcf4e77710c98e9f478e2eb81a291115d850479e1'}", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,791", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,792", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,792", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 10340, "thread": 14580, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-08 02:34:00,792", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,792", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,795", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,795", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,795", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,795", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '3fe9de6bace0d4c5db95f0b883df10cc6d5db3487dfb3f9e34ff831954ffef57a99319e4ebf7c0462e25dcce92c182b8cc7997ceaec481166a247cb10cb7117f2bf2bcc90b538080e52a31264cc9a996eebae66444ab3f4ee2c81129380a9636d675ee99a7c6c9af1203a162b4b93d782a92fb5a9e31cad468d977d49b811dee8996affb71a153b4b2dbd5b46e80b2f6d99292e936fb340595e31b3d146a883c02b56ddaaa5cb9d48a78e4ee39f6834808094cdab73f4c24cf89395ba7b7c8abb0582297bffd8bc14c2cdb0a36f3cadea67972856d9c2d5b1e2e0d6e9c08487dc8caf9e025cb31b44cd0f200742c5e8f3c05943515173919b95e03c95712554b'}", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,795", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 10340, "thread": 14580, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:34:00,796", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,796", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,799", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,799", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,799", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,799", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 10340, "thread": 14580, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:34:00,799", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,800", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,802", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,803", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,803", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,803", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 10340, "thread": 14580, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:34:00,803", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,803", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,805", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,806", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,806", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,817", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,817", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-08 02:34:00,821", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,822", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,822", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 735, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-08 02:34:00,825", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,825", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,828", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,828", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,828", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,828", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,832", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,832", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,832", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,834", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,835", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,835", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,835", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,838", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,838", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,840", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,840", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,841", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,841", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,843", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,844", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,844", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 735, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 02:34:00,846", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,846", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 735, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 02:34:00,851", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,851", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,854", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,854", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,854", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 735, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-08 02:34:00,857", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,857", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,859", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,860", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,860", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,860", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,862", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,862", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,862", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,862", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,865", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,865", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,865", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 8eb447cefc2f62aa2c4192388e6d6c4cf80899544be98f89770ff7c0be214578", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,866", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,869", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,872", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,874", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,874", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,874", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 8eb447cefc2f62aa2c4192388e6d6c4cf80899544be98f89770ff7c0be214578", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,878", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,878", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,881", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,881", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,884", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,885", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,885", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,888", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,888", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,888", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,891", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,891", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,891", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,894", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,894", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,894", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,897", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,897", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,898", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,901", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,901", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 8eb447cefc2f62aa2c4192388e6d6c4cf80899544be98f89770ff7c0be214578, Fee: 0.000543210000 XMR (543210000 pico)", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,904", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,904", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,904", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,904", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,904", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,908", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: ae4d3658...): Failed to get daemon height. Cannot calculate confirmations.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,917", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: ae4d3658...): Skipping entry 0: TXID 8eb447cefc2f62aa2c4192388e6d6c4cf80899544be98f89770ff7c0be214578 already processed.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,921", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,924", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,927", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,932", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: ae4d3658...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-08 02:34:00,938", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: ae4d3658...): Found candidate! TXID: 8eb447cefc2f62aa2c4192388e6d6c4cf80899544be98f89770ff7c0be214578, Amt: 1.234567890123 XMR, Confs: 11.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,938", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: ae4d3658...): Confirmed payment found.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,942", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,942", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,942", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,942", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-08 02:34:00,944", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,946", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,946", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,946", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,946", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 8eb447cefc2f62aa2c4192388e6d6c4cf80899544be98f89770ff7c0be214578, Fee: 0.000678900000 XMR (678900000 pico)", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,949", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,949", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,949", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,949", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,949", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,950", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,950", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,950", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,954", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,957", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,957", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,957", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,957", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1285, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 02:34:00,960", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,960", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1285, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 02:34:00,962", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,965", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,965", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,965", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 02:34:00,967", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 02:34:00,968", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,971", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,971", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,971", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,971", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 8eb447cefc2f62aa2c4192388e6d6c4cf80899544be98f89770ff7c0be214578, Fee: 0.000777700000 XMR (777700000 pico)", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,971", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,974", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,974", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,975", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,975", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 8eb447cefc2f62aa2c4192388e6d6c4cf80899544be98f89770ff7c0be214578, Fee: 0.000888800000 XMR (888800000 pico)", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,975", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,978", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,978", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,978", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,979", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,979", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,979", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:00,982", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:01,482", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:01,482", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:01,485", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:01,986", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:01,986", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:01,990", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/3): Timeout 1. Retrying in 0.5s...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:02,490", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/3): Refused 2. Retrying in 0.5s...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:02,996", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 401 (Authentication failed? Check RPC User/Password). Response: Unauthorized", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 02:34:03,002", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 500. Response: Internal Server Error", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 02:34:03,007", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-08 02:34:03,010", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 267, "message": "Monero RPC (Wallet - Method: some_method): RPC returned error: Code=-4, Message=Invalid params", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,027", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,028", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2278737763296'>", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,035", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,043", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,044", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2278737762960'>", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,050", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,061", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,061", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,069", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,069", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,079", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,079", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,079", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,088", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: WRONG_FINGERPRINT_XXXXXXXXXXXXXXXXXXXXXXXX, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: True, Status: signature valid", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,088", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: WRONG_FINGERPRINT_XXXXXXXXXXXXXXXXXXXXXXXX.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,088", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,096", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,096", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,097", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,103", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,112", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,112", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,128", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,128", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-08 02:34:03,135", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,142", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,143", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-08 02:34:03,151", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,151", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,158", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,158", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,166", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,166", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,179", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 387, "message": "User test_vendor_escrow missing valid withdrawal address in field 'btc_withdrawal_address' for currency BTC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,226", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 84be58ab-6320-4aa4-ac60-ca552864bf75 (BTC): Initiating multi-sig escrow setup...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,229", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_test_user' loaded and cached.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,229", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 661, "message": "Order 84be58ab-6320-4aa4-ac60-ca552864bf75 (BTC): BTC multisig details missing expected redeem/witness script.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,229", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 84be58ab-6320-4aa4-ac60-ca552864bf75 (BTC): Generated BTC Escrow Address: tb1qw508d6qejxt...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,229", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 84be58ab-6320-4aa4-ac60-ca552864bf75 (BTC): Created CryptoPayment f2598c03-1a69-4e2d-8651-25ad4dea840a (Multi-sig). Expected Atomic: 1000000", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,230", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 84be58ab-6320-4aa4-ac60-ca552864bf75 (BTC): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 08:34:03.229829+00:00. Awaiting payment to tb1qw508d6qejxt...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,230", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 84be58ab-6320-4aa4-ac60-ca552864bf75 (BTC): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,272", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 7670720e-d192-4c8e-9655-606264487e29 (XMR): Initiating multi-sig escrow setup...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,274", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 7670720e-d192-4c8e-9655-606264487e29 (XMR): Generated XMR Escrow Address: xmr_multisig_ad...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,274", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 7670720e-d192-4c8e-9655-606264487e29 (XMR): Created CryptoPayment f0413878-a405-4424-bca1-cb7002dfde56 (Multi-sig). Expected Atomic: 1000000000000", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,275", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 7670720e-d192-4c8e-9655-606264487e29 (XMR): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 08:34:03.274649+00:00. Awaiting payment to xmr_multisig_ad...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,275", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 7670720e-d192-4c8e-9655-606264487e29 (XMR): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,318", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 94b88b1a-4c1d-49ba-b4e9-5850bb58a4e0 (BTC): Initiating multi-sig escrow setup...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,319", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 537, "message": "Order 94b88b1a-4c1d-49ba-b4e9-5850bb58a4e0 (BTC): Cannot create escrow details. Status: 'shipped' (Expected: 'pending_payment').", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,360", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 08ee0dde-3bf5-4c54-9bf8-ea8ac4cbacbb (LTC): Initiating multi-sig escrow setup...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,362", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 607, "message": "Order 08ee0dde-3bf5-4c54-9bf8-ea8ac4cbacbb (LTC): Failed to gather participant info: Multisig key attribute mapping not found for currency LTC.", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 581, in create_escrow_for_order\n    raise ValueError(f\"Multisig key attribute mapping not found for currency {currency}.\")\nValueError: Multisig key attribute mapping not found for currency LTC."}
{"asctime": "2025-04-08 02:34:03,404", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order f7ff390f-aa96-468e-a3c8-29895e3c50a7 (BTC): Initiating multi-sig escrow setup...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,405", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order f7ff390f-aa96-468e-a3c8-29895e3c50a7 (BTC): Crypto service error during BTC escrow generation: BTC Gen Failed", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 639, in create_escrow_for_order\n    msig_details = crypto_service_module.create_btc_multisig_address(\n        participant_pubkeys_hex=participant_infos, # Use expected kwarg name\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: BTC Gen Failed"}
{"asctime": "2025-04-08 02:34:03,450", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 76b8316a-e525-4c4a-9af6-daeaa72d3cb4 (XMR): Initiating multi-sig escrow setup...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,452", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 76b8316a-e525-4c4a-9af6-daeaa72d3cb4 (XMR): Crypto service error during XMR escrow generation: XMR Wallet Gen Failed", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 621, in create_escrow_for_order\n    msig_details = crypto_service_module.create_monero_multisig_wallet(\n        participant_infos=participant_infos, # Use keyword arg for clarity\n        order_guid=str(order.id),           # Use keyword arg 'order_guid'\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: XMR Wallet Gen Failed"}
{"asctime": "2025-04-08 02:34:03,502", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 9a9ec7d2-0527-48b1-847a-d31b8f44062c, Payment: 18b79db7-4ae2-4b14-9ea5-956290ea69b9, Currency: BTC): Starting check.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,502", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 9a9ec7d2-0527-48b1-847a-d31b8f44062c, Payment: 18b79db7-4ae2-4b14-9ea5-956290ea69b9, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,502", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 9a9ec7d2-0527-48b1-847a-d31b8f44062c, Payment: 18b79db7-4ae2-4b14-9ea5-956290ea69b9, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,503", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1052, "message": "PaymentConfirm Check (Order: 9a9ec7d2-0527-48b1-847a-d31b8f44062c, Payment: 18b79db7-4ae2-4b14-9ea5-956290ea69b9, Currency: BTC): Ledger updated (incl. deposit fee) & Order status -> payment_confirmed. TXID: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,504", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1067, "message": "PaymentConfirm Check (Order: 9a9ec7d2-0527-48b1-847a-d31b8f44062c, Payment: 18b79db7-4ae2-4b14-9ea5-956290ea69b9, Currency: BTC): Sent payment confirmation notification to Vendor test_vendor_escrow.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,551", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 5f0aca9f-45c2-4024-9bce-c9dda5141333, Payment: c7306b43-2141-43ed-8c4c-4859c7e7ddf0, Currency: BTC): Starting check.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,598", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 917, "message": "Order bd085d32-f258-403f-bfbf-fc6d6c93d737 cancelled due to underpayment. Rcvd 0.00500000, Exp 0.01000000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,645", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 10add348-1c18-41f4-97e2-65389a52e776, Payment: ebfd7eae-33d4-4073-80de-59cce29a4fda, Currency: BTC): Starting check.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,645", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 10add348-1c18-41f4-97e2-65389a52e776, Payment: ebfd7eae-33d4-4073-80de-59cce29a4fda, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,646", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 10add348-1c18-41f4-97e2-65389a52e776, Payment: ebfd7eae-33d4-4073-80de-59cce29a4fda, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,646", "levelname": "CRITICAL", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1075, "message": "PaymentConfirm Check (Order: 10add348-1c18-41f4-97e2-65389a52e776, Payment: ebfd7eae-33d4-4073-80de-59cce29a4fda, Currency: BTC): CRITICAL: Ledger/Order atomic update FAILED during payment confirmation! Error: ['Cannot lock funds']. Transaction rolled back.", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1010, in check_and_confirm_payment\n    lock_success = ledger_service.lock_funds(\n        user=buyer, currency=currency, amount=expected_std, # Lock the required STANDARD order amount\n        related_order=order, notes=f\"Lock funds for Order {order.id} escrow\"\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nledger.services.InsufficientFundsError: ['Cannot lock funds']"}
{"asctime": "2025-04-08 02:34:03,695", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order a6c824c9-1e47-4ed1-bf11-3a11ebed869d (MarkShipped by test_vendor_escrow): Attempting...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,697", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1190, "message": "Order a6c824c9-1e47-4ed1-bf11-3a11ebed869d (MarkShipped by test_vendor_escrow): Tracking info provided but 'tracking_info' field missing on Order model.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,699", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1206, "message": "Order a6c824c9-1e47-4ed1-bf11-3a11ebed869d (MarkShipped by test_vendor_escrow): Marked shipped. Status -> shipped. Dispute deadline: 2025-04-15 08:34:03.697074+00:00, Auto-finalize: 2025-04-22 08:34:03.697074+00:00", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,700", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1230, "message": "Order a6c824c9-1e47-4ed1-bf11-3a11ebed869d (MarkShipped by test_vendor_escrow): Sent order shipped notification to Buyer test_buyer_escrow.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,750", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 93386a30-b1a9-4429-bf8b-e57f9eefd6e3 (MarkShipped by test_buyer_escrow): Attempting...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,751", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1126, "message": "Order 93386a30-b1a9-4429-bf8b-e57f9eefd6e3 (MarkShipped by test_buyer_escrow): Permission denied. User test_buyer_escrow is not the vendor (test_vendor_escrow).", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,796", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order d72e9ba9-1d73-456f-af1d-a988d90ddd78 (MarkShipped by test_vendor_escrow): Attempting...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,797", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1130, "message": "Order d72e9ba9-1d73-456f-af1d-a988d90ddd78 (MarkShipped by test_vendor_escrow): Cannot mark shipped. Invalid status 'pending_payment' (Expected: 'payment_confirmed').", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,844", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 9bf53b89-efa5-495d-8757-35e4cc882fa9 (MarkShipped by test_vendor_escrow): Attempting...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,845", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1144, "message": "Order 9bf53b89-efa5-495d-8757-35e4cc882fa9 (MarkShipped by test_vendor_escrow): Failed to prepare release transaction: Prep Fail", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1138, in mark_order_shipped\n    prepared_release_metadata = _prepare_release(order_locked) # Definition is later in file\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Prep Fail"}
{"asctime": "2025-04-08 02:34:03,895", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order c7f2f6f7-2376-4876-b78b-7440cf5c0286 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,897", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order c7f2f6f7-2376-4876-b78b-7440cf5c0286 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,898", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order c7f2f6f7-2376-4876-b78b-7440cf5c0286 (SignRelease by test_buyer_escrow): Signature applied. Current signers: 1/2. Ready for broadcast: False.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,947", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 851d234d-4106-4a57-ab1a-d935b77eb67c (SignRelease by test_vendor_escrow): Attempting signature...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,948", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 851d234d-4106-4a57-ab1a-d935b77eb67c (SignRelease by test_vendor_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,949", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order 851d234d-4106-4a57-ab1a-d935b77eb67c (SignRelease by test_vendor_escrow): Signature applied. Current signers: 2/2. Ready for broadcast: True.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,949", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1465, "message": "Order 851d234d-4106-4a57-ab1a-d935b77eb67c (SignRelease by test_vendor_escrow): Sent 'ready for broadcast' notification to test_buyer_escrow.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:03,999", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 0bf2632a-f362-4775-861b-b3e406a28d7f (SignRelease by test_mod_escrow): Attempting signature...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,000", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1289, "message": "Order 0bf2632a-f362-4775-861b-b3e406a28d7f (SignRelease by test_mod_escrow): Permission denied. User is not buyer or vendor.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,049", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 60c50e5b-426b-4a77-a45e-29ed43a3c7e5 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,052", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 60c50e5b-426b-4a77-a45e-29ed43a3c7e5 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,054", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 60c50e5b-426b-4a77-a45e-29ed43a3c7e5 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,055", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 60c50e5b-426b-4a77-a45e-29ed43a3c7e5 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,106", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 03119728-4734-4202-aa2b-f26651ea5310 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,108", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1321, "message": "Order 03119728-4734-4202-aa2b-f26651ea5310 (SignRelease by test_buyer_escrow): User test_buyer_escrow (ID: 59) has already signed this release.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,155", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 53be2a53-9989-46b5-a051-5d697a06a52a (SignRelease by test_buyer_escrow): Attempting signature...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,156", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 53be2a53-9989-46b5-a051-5d697a06a52a (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,157", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1425, "message": "Order 53be2a53-9989-46b5-a051-5d697a06a52a (SignRelease by test_buyer_escrow): Crypto signing error: Simulated BTC Sign Failure", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1345, in sign_order_release\n    sign_result = sign_func(\n        psbt_base64=unsigned_crypto_data,  # Map to expected arg name\n        private_key_wif=private_key_info    # Map to expected arg name\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Simulated BTC Sign Failure"}
{"asctime": "2025-04-08 02:34:04,212", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 18f70461-7016-46b8-99cf-cdef144aab29 (BroadcastRelease): Initiating broadcast...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,214", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 18f70461-7016-46b8-99cf-cdef144aab29 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,214", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 18f70461-7016-46b8-99cf-cdef144aab29 (BroadcastRelease): Broadcast successful. Transaction Hash: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,214", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 18f70461-7016-46b8-99cf-cdef144aab29 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,214", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 18f70461-7016-46b8-99cf-cdef144aab29 (BroadcastRelease): Ledger updated. Vendor: 0.00975000 BTC, Fee: 0.00025000 BTC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,268", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 925efa83-9cbf-44f6-b455-b7478d54f9a4 (BroadcastRelease): Initiating broadcast...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,270", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 925efa83-9cbf-44f6-b455-b7478d54f9a4 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_signed_txset)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,270", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 925efa83-9cbf-44f6-b455-b7478d54f9a4 (BroadcastRelease): Broadcast successful. Transaction Hash: xmr_tx_hash_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,270", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 925efa83-9cbf-44f6-b455-b7478d54f9a4 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,271", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 925efa83-9cbf-44f6-b455-b7478d54f9a4 (BroadcastRelease): Ledger updated. Vendor: 0.975000000000 XMR, Fee: 0.025000000000 XMR.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,322", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 3eed91bb-2833-4be8-9c57-7ebc7ae35f67 (BroadcastRelease): Initiating broadcast...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,324", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 3eed91bb-2833-4be8-9c57-7ebc7ae35f67 (BroadcastRelease): Initiating broadcast...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,330", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 3eed91bb-2833-4be8-9c57-7ebc7ae35f67 (BroadcastRelease): Initiating broadcast...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,384", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 3e7af3a7-f4db-4740-b78d-7e55d10aa5f3 (BroadcastRelease): Initiating broadcast...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,386", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 3e7af3a7-f4db-4740-b78d-7e55d10aa5f3 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,386", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 3e7af3a7-f4db-4740-b78d-7e55d10aa5f3 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 3e7af3a7-f4db-4740-b78d-7e55d10aa5f3 (service module returned invalid tx_hash: 'None').", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 3e7af3a7-f4db-4740-b78d-7e55d10aa5f3 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:34:04,499", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 3960b176-2c06-43bb-aeb1-743c37a83f41 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 100, Notes: 'Full refund....'", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,501", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 3960b176-2c06-43bb-aeb1-743c37a83f41 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.01000000 BTC, Vendor: 0E-8 BTC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,501", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 3960b176-2c06-43bb-aeb1-743c37a83f41 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,501", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 3960b176-2c06-43bb-aeb1-743c37a83f41 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,502", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 3960b176-2c06-43bb-aeb1-743c37a83f41 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,502", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 3960b176-2c06-43bb-aeb1-743c37a83f41 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.01000000, Vendor: 0E-8 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,559", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 494079ba-7189-49dc-82ed-c0f94ac51d08 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 70, Notes: 'Split 70/30...'", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,561", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 494079ba-7189-49dc-82ed-c0f94ac51d08 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00700000 BTC, Vendor: 0.00300000 BTC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,561", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 494079ba-7189-49dc-82ed-c0f94ac51d08 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,561", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 494079ba-7189-49dc-82ed-c0f94ac51d08 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,561", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 494079ba-7189-49dc-82ed-c0f94ac51d08 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,561", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 494079ba-7189-49dc-82ed-c0f94ac51d08 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.00700000, Vendor: 0.00300000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,610", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order e73362f6-6773-4519-b7e5-26abd1092032 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test notes...'", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,663", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order dc40fcc6-af71-4fb6-bec9-4e0ddc2c7cc5 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 101, Notes: 'Test notes...'", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,665", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order dc40fcc6-af71-4fb6-bec9-4e0ddc2c7cc5 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: -10, Notes: 'Test notes...'", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,714", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order be52a8ef-c325-4598-babe-156a2c1017c0 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test Notes - Crypto Fail Attempt...'", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,716", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order be52a8ef-c325-4598-babe-156a2c1017c0 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00500000 BTC, Vendor: 0.00500000 BTC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,716", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order be52a8ef-c325-4598-babe-156a2c1017c0 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,716", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order be52a8ef-c325-4598-babe-156a2c1017c0 (ResolveDispute by test_mod_escrow): Dispute broadcast error: Crypto dispute broadcast failed for Order be52a8ef-c325-4598-babe-156a2c1017c0 (service module returned invalid tx_hash: 'None').", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order be52a8ef-c325-4598-babe-156a2c1017c0 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:34:04,763", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 1f7b74dd-fc4c-4bd4-b5e7-3607b87ac23d (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,764", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2244, "message": "Order 1f7b74dd-fc4c-4bd4-b5e7-3607b87ac23d (GetUnsignedTx for test_buyer_escrow): Returning prepared transaction data (Type: btc_psbt). Already Signed: False", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,813", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order f48c2b7b-ec39-44e0-95ef-8c1ce822b74e (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,815", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2212, "message": "Order f48c2b7b-ec39-44e0-95ef-8c1ce822b74e (GetUnsignedTx for test_buyer_escrow): Attempted to get unsigned TX before release initiated.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,816", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order f48c2b7b-ec39-44e0-95ef-8c1ce822b74e (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,817", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order f48c2b7b-ec39-44e0-95ef-8c1ce822b74e (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {}", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,818", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order f48c2b7b-ec39-44e0-95ef-8c1ce822b74e (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,819", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order f48c2b7b-ec39-44e0-95ef-8c1ce822b74e (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'type': 'btc_psbt', 'signatures': {}}", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,819", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order f48c2b7b-ec39-44e0-95ef-8c1ce822b74e (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,820", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order f48c2b7b-ec39-44e0-95ef-8c1ce822b74e (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'data': 'some_data', 'signatures': {}}", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,869", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 12caefb0-6f2b-4985-ab8f-aa9006b98324 (GetUnsignedTx for test_mod_escrow): Request received.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,870", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2207, "message": "Order 12caefb0-6f2b-4985-ab8f-aa9006b98324 (GetUnsignedTx for test_mod_escrow): Permission denied. User not buyer or vendor.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,913", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 416, "message": "Order bdf52593-c5e0-486c-80d1-0936b9c03bea (TimeoutCheck): Payment deadline 2025-04-08 07:34:04.913355+00:00 passed. Attempting cancellation.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,914", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 429, "message": "Order bdf52593-c5e0-486c-80d1-0936b9c03bea (TimeoutCheck): Successfully cancelled due to payment timeout. Status -> cancelled_timeout", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,914", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 430, "message": "Order bdf52593-c5e0-486c-80d1-0936b9c03bea automatically cancelled due to payment timeout.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,998", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 606096e6-5df7-4284-a3ae-d779fe06fb5e (BroadcastRelease): Initiating broadcast...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:04,999", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,000", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 606096e6-5df7-4284-a3ae-d779fe06fb5e (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,000", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 606096e6-5df7-4284-a3ae-d779fe06fb5e (BroadcastRelease): Broadcast successful. Transaction Hash: aaa_int_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,001", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 606096e6-5df7-4284-a3ae-d779fe06fb5e (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,002", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction f697813d-a9e8-4611-b147-278ab537bf42 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,003", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 5b68228e-43f7-4afa-8f4f-63d6bf1fb2a0 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,003", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 606096e6-5df7-4284-a3ae-d779fe06fb5e (BroadcastRelease): Ledger updated. Vendor: 0.01960000 BTC, Fee: 0.00040000 BTC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,047", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order fcb4e15d-f6aa-49a8-9f55-718088f4a9ca (BroadcastRelease): Initiating broadcast...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,048", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,049", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order fcb4e15d-f6aa-49a8-9f55-718088f4a9ca (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_unsigned_txset)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,049", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order fcb4e15d-f6aa-49a8-9f55-718088f4a9ca (BroadcastRelease): Broadcast successful. Transaction Hash: bbb_int_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,051", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order fcb4e15d-f6aa-49a8-9f55-718088f4a9ca (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,052", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction c839214a-4feb-4226-b1ca-c3ee9872ed0c recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,053", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction cd45d704-41fb-410c-a507-e4ae43e14aa9 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,053", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order fcb4e15d-f6aa-49a8-9f55-718088f4a9ca (BroadcastRelease): Ledger updated. Vendor: 1.462500000000 XMR, Fee: 0.037500000000 XMR.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,097", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order c48adf5e-756c-4198-96a4-1d87e928cd5f (BroadcastRelease): Initiating broadcast...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,098", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,100", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order c48adf5e-756c-4198-96a4-1d87e928cd5f (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,100", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order c48adf5e-756c-4198-96a4-1d87e928cd5f (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order c48adf5e-756c-4198-96a4-1d87e928cd5f (service module returned invalid tx_hash: 'None').", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order c48adf5e-756c-4198-96a4-1d87e928cd5f (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:34:05,143", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 261df7ac-a6be-4eda-8271-c60fe8c284a2 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 30, Notes: 'Split decision: 30% to buyer...'", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,145", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,147", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 261df7ac-a6be-4eda-8271-c60fe8c284a2 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.00600000 BTC, Vendor: 0.01400000 BTC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,147", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 261df7ac-a6be-4eda-8271-c60fe8c284a2 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,147", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 261df7ac-a6be-4eda-8271-c60fe8c284a2 (ResolveDispute by test_mod_int): Dispute transaction broadcast successful. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,149", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 261df7ac-a6be-4eda-8271-c60fe8c284a2 (ResolveDispute by test_mod_int): Order state saved successfully. Proceeding to ledger updates.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,150", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction fdb960c0-c28b-4b60-b0cc-1c7d7e83fba5 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,151", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction c5171240-791c-4f34-9ec0-3d44d6689b37 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,151", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 261df7ac-a6be-4eda-8271-c60fe8c284a2 (ResolveDispute by test_mod_int): Ledger updated. Buyer: 0.00600000, Vendor: 0.01400000 BTC. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,193", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order d66ef23a-16fe-4333-9011-c7d32e087a37 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 50, Notes: 'Attempted resolution...'", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,194", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,195", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order d66ef23a-16fe-4333-9011-c7d32e087a37 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.01000000 BTC, Vendor: 0.01000000 BTC.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,195", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order d66ef23a-16fe-4333-9011-c7d32e087a37 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:34:05,195", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order d66ef23a-16fe-4333-9011-c7d32e087a37 (ResolveDispute by test_mod_int): Dispute broadcast error: Crypto dispute broadcast failed for Order d66ef23a-16fe-4333-9011-c7d32e087a37 (service module returned invalid tx_hash: 'None').", "process": 10340, "thread": 14580, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order d66ef23a-16fe-4333-9011-c7d32e087a37 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:34:05,232", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 10340, "thread": 14580}
{"asctime": "2025-04-08 02:46:20,204", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,204", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 7ccf33ab-38d1-40ad-9146-d0eda1e93f48 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,209", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 5ec6a22a-85b8-4109-8b87-ca0c0d6350c6 recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,213", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 1348a400-e3ad-4327-a800-c1500096c301 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,219", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 202, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,223", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,226", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,229", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,232", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,235", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,238", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,241", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,246", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,250", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,254", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,257", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,261", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,300", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 486, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: Test lock", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,301", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 513, "message": "Ledger transaction 56704f0e-52b3-44eb-87ce-5e8589500056 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,306", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 465, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,313", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 448, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,319", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: Test unlock", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,319", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction d48ac45f-a68a-4d2b-beeb-1b28841d2c42 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,323", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 592, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,324", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: Test unlock more", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,324", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction d26ef9b8-093c-4a9c-984f-3a8fbaba3007 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,329", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 587, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,336", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 566, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,341", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction c521afe0-f86f-464d-a815-4f787c8797f3 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,347", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction ed2f8f29-d21d-4496-9b7b-c13d4df5bcad recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,352", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction a53f0c26-6286-4873-b76c-7acce53959cb recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,382", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 295, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,401", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,402", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 482, "message": "[get_market_btc_key] Market BTC key pubkey matches settings (031b7a7e8e...).", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,402", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 489, "message": "[get_market_btc_key] Successfully loaded and cached market BTC key from Vault (PubKey starts with: 031b7a7e8e...).", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,406", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,406", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 454, "message": "[get_market_btc_key] Vault returned invalid data for key 'market_btc_multisig_key': None", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,471", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1547, "message": "Deprecated function `process_btc_withdrawal` called. Use Ledger system.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,474", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1550, "message": "Deprecated function `process_escrow_release` called. Use Taproot multi-sig workflow (prepare/sign/finalize/broadcast).", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,514", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,515", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,517", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,518", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,520", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,521", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,523", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,523", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 341, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-08 02:46:20,525", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,530", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-08 02:46:20,536", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-08 02:46:20,541", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,541", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,542", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-08 02:46:20,546", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-08 02:46:20,549", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,549", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,551", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,553", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,554", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-08 02:46:20,557", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-08 02:46:20,562", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-08 02:46:20,566", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,569", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: c247e02c10931a6f)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,569", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: c247e02c10931a6f): 4LdpnMo9wPESgQ4...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,571", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,571", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,571", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,573", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: c247e02c10931a6f)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,573", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: c247e02c10931a6f): Timeout", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,575", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: c247e02c10931a6f)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,575", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: c247e02c10931a6f): Monero RPC Error (Code: -5): RPC Failed", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,577", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: c247e02c10931a6f)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,577", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: c247e02c10931a6f). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,579", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,579", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,581", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: c247e02c10931a6f)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,582", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: c247e02c10931a6f) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,584", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,585", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,585", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,588", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,589", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,591", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,591", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,594", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,594", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,596", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,596", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '86e6f61c28af844fdaf56423a5237ed17f374598298f83c2ce26d00fbf4cc150fa413388b0f5ca87080c9f5cac2df2a934272c87d39bc15b2f35b53b4c0d39db0cd6a8fbe6bfeb41bf55147217d1ef798a94c8335245a06502119fc8e7f5b8c958e26ece7b884dde7c4a46778b7335d9400b2d853ed3d47e2ca24cbd099888dc'}", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,599", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,599", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,600", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 1956, "thread": 5108, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-08 02:46:20,600", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,600", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,602", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,603", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,603", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,603", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '7e7d30999218848f0f68a485597c9b39162b47c2d734c80c83a8a3d910e2ae94f693537b73187be3ec8429dcb76fbe1bd871fa9a58c8e2e86b7d337293aa0dfe1ae7b54bf4ffeb96f81acf2338e6166ad6e82272afaab6baae905032047d79c024dcbae92a6c277137349563673ea3c3e309c969ff60188016189a96a3f35ebc7aa22411510683443c191b1bfca946eeb58e3914c53686ed61e431ac59c57a75944e7757ca724e552aca4f5f3cdeb9da0d6d7abecd9845ee2125aae0a161b9d1b3bc781b552ef51900744b49812dca254fd78395fffac996968e4c9495962be8a15abd2974eea1bd875a8d7da46d2d1c024e586f3ffe468e5ab69048a136fd11'}", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,603", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 1956, "thread": 5108, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:46:20,603", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,603", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,606", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,607", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,607", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,607", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 1956, "thread": 5108, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:46:20,607", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,607", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,610", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,611", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,611", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,611", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 1956, "thread": 5108, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:46:20,611", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,611", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,613", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,613", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,613", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,625", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,625", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-08 02:46:20,629", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,630", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,630", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-08 02:46:20,633", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,633", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,636", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,637", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,637", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,637", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,640", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,640", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,641", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,643", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,643", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,643", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,643", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,645", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,645", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,648", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,648", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,648", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,649", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,651", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,652", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,652", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 02:46:20,654", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,654", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 02:46:20,658", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,658", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,660", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,660", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,660", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-08 02:46:20,663", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,663", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,666", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,667", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,667", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,667", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,669", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,669", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,669", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,669", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,671", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,672", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,672", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 78d0a50c679f2707704d57e2aed8e5846dc52125ce8c4c17980c8e2636c0193b", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,672", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,677", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,679", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,682", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,682", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,682", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 78d0a50c679f2707704d57e2aed8e5846dc52125ce8c4c17980c8e2636c0193b", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,685", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,685", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,688", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,688", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,691", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,691", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,691", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,694", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,694", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,694", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,699", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,699", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,699", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,702", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,702", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,702", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,705", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,705", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,705", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,708", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,708", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 78d0a50c679f2707704d57e2aed8e5846dc52125ce8c4c17980c8e2636c0193b, Fee: 0.000543210000 XMR (543210000 pico)", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,711", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,712", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,712", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,712", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,712", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,715", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: f6added4...): Failed to get daemon height. Cannot calculate confirmations.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,724", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: f6added4...): Skipping entry 0: TXID 78d0a50c679f2707704d57e2aed8e5846dc52125ce8c4c17980c8e2636c0193b already processed.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,728", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,730", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,732", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,739", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: f6added4...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-08 02:46:20,744", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: f6added4...): Found candidate! TXID: 78d0a50c679f2707704d57e2aed8e5846dc52125ce8c4c17980c8e2636c0193b, Amt: 1.234567890123 XMR, Confs: 11.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,744", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: f6added4...): Confirmed payment found.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,747", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,747", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,747", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,747", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-08 02:46:20,749", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,753", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,753", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,753", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,753", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 78d0a50c679f2707704d57e2aed8e5846dc52125ce8c4c17980c8e2636c0193b, Fee: 0.000678900000 XMR (678900000 pico)", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,756", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,756", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,757", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,757", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,757", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,757", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,757", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,757", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,760", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,762", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,763", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,763", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,763", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 02:46:20,766", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,766", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 02:46:20,768", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,771", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,771", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,772", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 02:46:20,773", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 02:46:20,774", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,778", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,778", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,778", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,778", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 78d0a50c679f2707704d57e2aed8e5846dc52125ce8c4c17980c8e2636c0193b, Fee: 0.000777700000 XMR (777700000 pico)", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,778", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,781", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,782", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,782", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,782", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 78d0a50c679f2707704d57e2aed8e5846dc52125ce8c4c17980c8e2636c0193b, Fee: 0.000888800000 XMR (888800000 pico)", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,782", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,785", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,785", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,785", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,785", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,785", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,786", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:20,788", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:21,288", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:21,290", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:21,295", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:21,796", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:21,797", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:21,802", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/3): Timeout 1. Retrying in 0.5s...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,303", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/3): Refused 2. Retrying in 0.5s...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,812", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 401 (Authentication failed? Check RPC User/Password). Response: Unauthorized", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 02:46:22,819", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 500. Response: Internal Server Error", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 02:46:22,825", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-08 02:46:22,828", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 267, "message": "Monero RPC (Wallet - Method: some_method): RPC returned error: Code=-4, Message=Invalid params", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,840", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,840", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='1489963863408'>", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,846", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,856", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,857", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='1489969270464'>", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,862", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,870", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,870", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,879", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,879", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,888", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,888", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,888", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,895", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: WRONG_FINGERPRINT_XXXXXXXXXXXXXXXXXXXXXXXX, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: True, Status: signature valid", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,895", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: WRONG_FINGERPRINT_XXXXXXXXXXXXXXXXXXXXXXXX.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,896", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,904", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,904", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,904", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,909", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,917", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,917", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,931", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,931", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-08 02:46:22,938", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,944", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,944", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-08 02:46:22,952", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,952", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,960", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,960", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,969", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,969", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:22,984", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 387, "message": "User test_vendor_escrow missing valid withdrawal address in field 'btc_withdrawal_address' for currency BTC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,031", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 77a7d451-a1d3-44cd-ae49-1ccbd4ffcd73 (BTC): Initiating multi-sig escrow setup...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,034", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_test_user' loaded and cached.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,034", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 661, "message": "Order 77a7d451-a1d3-44cd-ae49-1ccbd4ffcd73 (BTC): BTC multisig details missing expected redeem/witness script.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,034", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 77a7d451-a1d3-44cd-ae49-1ccbd4ffcd73 (BTC): Generated BTC Escrow Address: tb1qw508d6qejxt...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,034", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 77a7d451-a1d3-44cd-ae49-1ccbd4ffcd73 (BTC): Created CryptoPayment c5ac351c-638f-4de0-96ad-8d42d04c1cc5 (Multi-sig). Expected Atomic: 1000000", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,035", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 77a7d451-a1d3-44cd-ae49-1ccbd4ffcd73 (BTC): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 08:46:23.034796+00:00. Awaiting payment to tb1qw508d6qejxt...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,035", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 77a7d451-a1d3-44cd-ae49-1ccbd4ffcd73 (BTC): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,075", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order d9650d53-b351-46f6-8de9-72c8d70aeb10 (XMR): Initiating multi-sig escrow setup...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,077", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order d9650d53-b351-46f6-8de9-72c8d70aeb10 (XMR): Generated XMR Escrow Address: xmr_multisig_ad...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,077", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order d9650d53-b351-46f6-8de9-72c8d70aeb10 (XMR): Created CryptoPayment 91ea6735-6541-46da-80a9-b46d97e68994 (Multi-sig). Expected Atomic: 1000000000000", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,078", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order d9650d53-b351-46f6-8de9-72c8d70aeb10 (XMR): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 08:46:23.077908+00:00. Awaiting payment to xmr_multisig_ad...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,078", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order d9650d53-b351-46f6-8de9-72c8d70aeb10 (XMR): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,121", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 5cac509f-ab93-4e39-a4c6-a2e5347dd250 (BTC): Initiating multi-sig escrow setup...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,121", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 537, "message": "Order 5cac509f-ab93-4e39-a4c6-a2e5347dd250 (BTC): Cannot create escrow details. Status: 'shipped' (Expected: 'pending_payment').", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,161", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 71a44e12-3bac-40f6-82af-b60e8b399443 (LTC): Initiating multi-sig escrow setup...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,163", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 607, "message": "Order 71a44e12-3bac-40f6-82af-b60e8b399443 (LTC): Failed to gather participant info: Multisig key attribute mapping not found for currency LTC.", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 581, in create_escrow_for_order\n    raise ValueError(f\"Multisig key attribute mapping not found for currency {currency}.\")\nValueError: Multisig key attribute mapping not found for currency LTC."}
{"asctime": "2025-04-08 02:46:23,205", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 12f40e35-665f-47b1-b8ff-880fda1b1d1c (BTC): Initiating multi-sig escrow setup...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,207", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 12f40e35-665f-47b1-b8ff-880fda1b1d1c (BTC): Crypto service error during BTC escrow generation: BTC Gen Failed", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 639, in create_escrow_for_order\n    msig_details = crypto_service_module.create_btc_multisig_address(\n        participant_pubkeys_hex=participant_infos, # Use expected kwarg name\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: BTC Gen Failed"}
{"asctime": "2025-04-08 02:46:23,248", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order b422c0b7-c20a-4b0e-8ac8-10362bbb1387 (XMR): Initiating multi-sig escrow setup...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,250", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order b422c0b7-c20a-4b0e-8ac8-10362bbb1387 (XMR): Crypto service error during XMR escrow generation: XMR Wallet Gen Failed", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 621, in create_escrow_for_order\n    msig_details = crypto_service_module.create_monero_multisig_wallet(\n        participant_infos=participant_infos, # Use keyword arg for clarity\n        order_guid=str(order.id),           # Use keyword arg 'order_guid'\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: XMR Wallet Gen Failed"}
{"asctime": "2025-04-08 02:46:23,300", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 01ebc294-e642-46b9-aaa4-71a8221f3d73, Payment: 34e5eb95-0986-4417-96a4-1deca19e22fc, Currency: BTC): Starting check.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,300", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 01ebc294-e642-46b9-aaa4-71a8221f3d73, Payment: 34e5eb95-0986-4417-96a4-1deca19e22fc, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,301", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 01ebc294-e642-46b9-aaa4-71a8221f3d73, Payment: 34e5eb95-0986-4417-96a4-1deca19e22fc, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,302", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1052, "message": "PaymentConfirm Check (Order: 01ebc294-e642-46b9-aaa4-71a8221f3d73, Payment: 34e5eb95-0986-4417-96a4-1deca19e22fc, Currency: BTC): Ledger updated (incl. deposit fee) & Order status -> payment_confirmed. TXID: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,302", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1067, "message": "PaymentConfirm Check (Order: 01ebc294-e642-46b9-aaa4-71a8221f3d73, Payment: 34e5eb95-0986-4417-96a4-1deca19e22fc, Currency: BTC): Sent payment confirmation notification to Vendor test_vendor_escrow.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,347", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: fb68decf-33a8-4b40-8d2f-12f4f0c14836, Payment: 33b6e928-2c70-429f-8e96-3ab4638cc4d9, Currency: BTC): Starting check.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,392", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 917, "message": "Order dc245bfb-c502-4851-a448-2083d5eca421 cancelled due to underpayment. Rcvd 0.00500000, Exp 0.01000000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,438", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 8d7db5ea-e488-4184-bc8f-e41eb891c484, Payment: 3b1ce971-1330-426b-a37c-e6bec4003aef, Currency: BTC): Starting check.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,439", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 8d7db5ea-e488-4184-bc8f-e41eb891c484, Payment: 3b1ce971-1330-426b-a37c-e6bec4003aef, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,439", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 8d7db5ea-e488-4184-bc8f-e41eb891c484, Payment: 3b1ce971-1330-426b-a37c-e6bec4003aef, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,439", "levelname": "CRITICAL", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1075, "message": "PaymentConfirm Check (Order: 8d7db5ea-e488-4184-bc8f-e41eb891c484, Payment: 3b1ce971-1330-426b-a37c-e6bec4003aef, Currency: BTC): CRITICAL: Ledger/Order atomic update FAILED during payment confirmation! Error: ['Cannot lock funds']. Transaction rolled back.", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1010, in check_and_confirm_payment\n    lock_success = ledger_service.lock_funds(\n        user=buyer, currency=currency, amount=expected_std, # Lock the required STANDARD order amount\n        related_order=order, notes=f\"Lock funds for Order {order.id} escrow\"\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nledger.services.InsufficientFundsError: ['Cannot lock funds']"}
{"asctime": "2025-04-08 02:46:23,486", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order d82ec44f-ac1e-42dd-837b-898518cf28df (MarkShipped by test_vendor_escrow): Attempting...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,488", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1190, "message": "Order d82ec44f-ac1e-42dd-837b-898518cf28df (MarkShipped by test_vendor_escrow): Tracking info provided but 'tracking_info' field missing on Order model.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,490", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1206, "message": "Order d82ec44f-ac1e-42dd-837b-898518cf28df (MarkShipped by test_vendor_escrow): Marked shipped. Status -> shipped. Dispute deadline: 2025-04-15 08:46:23.487692+00:00, Auto-finalize: 2025-04-22 08:46:23.487692+00:00", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,490", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1230, "message": "Order d82ec44f-ac1e-42dd-837b-898518cf28df (MarkShipped by test_vendor_escrow): Sent order shipped notification to Buyer test_buyer_escrow.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,534", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 84aaeb0a-fd8b-4d2d-a76f-11d9cf5edbdd (MarkShipped by test_buyer_escrow): Attempting...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,535", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1126, "message": "Order 84aaeb0a-fd8b-4d2d-a76f-11d9cf5edbdd (MarkShipped by test_buyer_escrow): Permission denied. User test_buyer_escrow is not the vendor (test_vendor_escrow).", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,577", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order d9eadf5c-90c0-42d6-aad7-3999879b3513 (MarkShipped by test_vendor_escrow): Attempting...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,578", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1130, "message": "Order d9eadf5c-90c0-42d6-aad7-3999879b3513 (MarkShipped by test_vendor_escrow): Cannot mark shipped. Invalid status 'pending_payment' (Expected: 'payment_confirmed').", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,622", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order a9daeb21-4310-448d-90f5-9f97e2c9faf5 (MarkShipped by test_vendor_escrow): Attempting...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,624", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1144, "message": "Order a9daeb21-4310-448d-90f5-9f97e2c9faf5 (MarkShipped by test_vendor_escrow): Failed to prepare release transaction: Prep Fail", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1138, in mark_order_shipped\n    prepared_release_metadata = _prepare_release(order_locked) # Definition is later in file\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Prep Fail"}
{"asctime": "2025-04-08 02:46:23,671", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 2c52b95b-75ea-4827-a75c-7367a6a1b633 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,672", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 2c52b95b-75ea-4827-a75c-7367a6a1b633 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,673", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order 2c52b95b-75ea-4827-a75c-7367a6a1b633 (SignRelease by test_buyer_escrow): Signature applied. Current signers: 1/2. Ready for broadcast: False.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,718", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order dd0539ae-51fe-46b8-ab80-83078ac78eff (SignRelease by test_vendor_escrow): Attempting signature...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,719", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order dd0539ae-51fe-46b8-ab80-83078ac78eff (SignRelease by test_vendor_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,720", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order dd0539ae-51fe-46b8-ab80-83078ac78eff (SignRelease by test_vendor_escrow): Signature applied. Current signers: 2/2. Ready for broadcast: True.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,720", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1465, "message": "Order dd0539ae-51fe-46b8-ab80-83078ac78eff (SignRelease by test_vendor_escrow): Sent 'ready for broadcast' notification to test_buyer_escrow.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,767", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order cfadaf4b-9b67-4238-80df-e29f7f32391c (SignRelease by test_mod_escrow): Attempting signature...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,768", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1289, "message": "Order cfadaf4b-9b67-4238-80df-e29f7f32391c (SignRelease by test_mod_escrow): Permission denied. User is not buyer or vendor.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,811", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 7a948962-8573-4624-8333-f61580149709 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,813", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 7a948962-8573-4624-8333-f61580149709 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,815", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 7a948962-8573-4624-8333-f61580149709 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,816", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 7a948962-8573-4624-8333-f61580149709 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,862", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 2f72dec0-57ee-4621-933e-c2dc91f9791d (SignRelease by test_buyer_escrow): Attempting signature...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,863", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1321, "message": "Order 2f72dec0-57ee-4621-933e-c2dc91f9791d (SignRelease by test_buyer_escrow): User test_buyer_escrow (ID: 59) has already signed this release.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,909", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order d3f306a4-d55a-4852-8216-d933d043707c (SignRelease by test_buyer_escrow): Attempting signature...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,910", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order d3f306a4-d55a-4852-8216-d933d043707c (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,910", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1425, "message": "Order d3f306a4-d55a-4852-8216-d933d043707c (SignRelease by test_buyer_escrow): Crypto signing error: Simulated BTC Sign Failure", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1345, in sign_order_release\n    sign_result = sign_func(\n        psbt_base64=unsigned_crypto_data,  # Map to expected arg name\n        private_key_wif=private_key_info    # Map to expected arg name\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Simulated BTC Sign Failure"}
{"asctime": "2025-04-08 02:46:23,960", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 0f2e545e-4cf1-4f6c-88a0-72b490158fc8 (BroadcastRelease): Initiating broadcast...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,961", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 0f2e545e-4cf1-4f6c-88a0-72b490158fc8 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,961", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 0f2e545e-4cf1-4f6c-88a0-72b490158fc8 (BroadcastRelease): Broadcast successful. Transaction Hash: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,962", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 0f2e545e-4cf1-4f6c-88a0-72b490158fc8 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:23,962", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 0f2e545e-4cf1-4f6c-88a0-72b490158fc8 (BroadcastRelease): Ledger updated. Vendor: 0.00975000 BTC, Fee: 0.00025000 BTC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,012", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 66efd96e-7f85-4b1f-946d-68d9c785ecaa (BroadcastRelease): Initiating broadcast...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,013", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 66efd96e-7f85-4b1f-946d-68d9c785ecaa (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_signed_txset)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,013", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 66efd96e-7f85-4b1f-946d-68d9c785ecaa (BroadcastRelease): Broadcast successful. Transaction Hash: xmr_tx_hash_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,013", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 66efd96e-7f85-4b1f-946d-68d9c785ecaa (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,014", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 66efd96e-7f85-4b1f-946d-68d9c785ecaa (BroadcastRelease): Ledger updated. Vendor: 0.975000000000 XMR, Fee: 0.025000000000 XMR.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,060", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order c77acc1c-2391-4740-8660-9655e7b01ac2 (BroadcastRelease): Initiating broadcast...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,062", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order c77acc1c-2391-4740-8660-9655e7b01ac2 (BroadcastRelease): Initiating broadcast...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,067", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order c77acc1c-2391-4740-8660-9655e7b01ac2 (BroadcastRelease): Initiating broadcast...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,114", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order c5accbcd-9530-49c3-b70d-1b2f3979d46f (BroadcastRelease): Initiating broadcast...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,115", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order c5accbcd-9530-49c3-b70d-1b2f3979d46f (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,116", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order c5accbcd-9530-49c3-b70d-1b2f3979d46f (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order c5accbcd-9530-49c3-b70d-1b2f3979d46f (service module returned invalid tx_hash: 'None').", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order c5accbcd-9530-49c3-b70d-1b2f3979d46f (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:46:24,219", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order e71800ef-455f-491a-a3a0-bed7d0b75bb5 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 100, Notes: 'Full refund....'", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,220", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order e71800ef-455f-491a-a3a0-bed7d0b75bb5 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.01000000 BTC, Vendor: 0E-8 BTC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,220", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order e71800ef-455f-491a-a3a0-bed7d0b75bb5 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,220", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order e71800ef-455f-491a-a3a0-bed7d0b75bb5 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,221", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order e71800ef-455f-491a-a3a0-bed7d0b75bb5 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,221", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order e71800ef-455f-491a-a3a0-bed7d0b75bb5 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.01000000, Vendor: 0E-8 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,269", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order bad2a22f-ccb9-4066-a385-1bc391992eca (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 70, Notes: 'Split 70/30...'", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,271", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order bad2a22f-ccb9-4066-a385-1bc391992eca (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00700000 BTC, Vendor: 0.00300000 BTC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,271", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order bad2a22f-ccb9-4066-a385-1bc391992eca (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,271", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order bad2a22f-ccb9-4066-a385-1bc391992eca (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,271", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order bad2a22f-ccb9-4066-a385-1bc391992eca (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,272", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order bad2a22f-ccb9-4066-a385-1bc391992eca (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.00700000, Vendor: 0.00300000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,319", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 07c1b3a0-8b2a-49c5-acb8-3d31efd4ab5f (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test notes...'", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,369", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 407c2b05-7e73-486a-b812-fa435276f9ae (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 101, Notes: 'Test notes...'", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,370", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 407c2b05-7e73-486a-b812-fa435276f9ae (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: -10, Notes: 'Test notes...'", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,419", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 47d09ff3-b4a2-4371-adb1-cbd4b666149a (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test Notes - Crypto Fail Attempt...'", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,420", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 47d09ff3-b4a2-4371-adb1-cbd4b666149a (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00500000 BTC, Vendor: 0.00500000 BTC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,420", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 47d09ff3-b4a2-4371-adb1-cbd4b666149a (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,420", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order 47d09ff3-b4a2-4371-adb1-cbd4b666149a (ResolveDispute by test_mod_escrow): Dispute broadcast error: Crypto dispute broadcast failed for Order 47d09ff3-b4a2-4371-adb1-cbd4b666149a (service module returned invalid tx_hash: 'None').", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order 47d09ff3-b4a2-4371-adb1-cbd4b666149a (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:46:24,466", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order ec7a13d8-3129-48a0-b7e8-b3ca0730d1f7 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,468", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2244, "message": "Order ec7a13d8-3129-48a0-b7e8-b3ca0730d1f7 (GetUnsignedTx for test_buyer_escrow): Returning prepared transaction data (Type: btc_psbt). Already Signed: False", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,513", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order b5f5d7bb-0518-40ce-9120-b0313250ba3a (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,514", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2212, "message": "Order b5f5d7bb-0518-40ce-9120-b0313250ba3a (GetUnsignedTx for test_buyer_escrow): Attempted to get unsigned TX before release initiated.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,515", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order b5f5d7bb-0518-40ce-9120-b0313250ba3a (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,516", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order b5f5d7bb-0518-40ce-9120-b0313250ba3a (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {}", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,517", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order b5f5d7bb-0518-40ce-9120-b0313250ba3a (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,518", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order b5f5d7bb-0518-40ce-9120-b0313250ba3a (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'type': 'btc_psbt', 'signatures': {}}", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,518", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order b5f5d7bb-0518-40ce-9120-b0313250ba3a (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,519", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order b5f5d7bb-0518-40ce-9120-b0313250ba3a (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'data': 'some_data', 'signatures': {}}", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,565", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 8eed0d6a-d547-4dd5-9d56-ab16a45d4979 (GetUnsignedTx for test_mod_escrow): Request received.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,566", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2207, "message": "Order 8eed0d6a-d547-4dd5-9d56-ab16a45d4979 (GetUnsignedTx for test_mod_escrow): Permission denied. User not buyer or vendor.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,608", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 416, "message": "Order 45570d0e-dba5-4abe-96e6-9815e6b738f4 (TimeoutCheck): Payment deadline 2025-04-08 07:46:24.608246+00:00 passed. Attempting cancellation.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,609", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 429, "message": "Order 45570d0e-dba5-4abe-96e6-9815e6b738f4 (TimeoutCheck): Successfully cancelled due to payment timeout. Status -> cancelled_timeout", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,609", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 430, "message": "Order 45570d0e-dba5-4abe-96e6-9815e6b738f4 automatically cancelled due to payment timeout.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,694", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 296891fd-931d-42d5-9f64-1bde303cc476 (BroadcastRelease): Initiating broadcast...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,695", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,697", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 296891fd-931d-42d5-9f64-1bde303cc476 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,697", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 296891fd-931d-42d5-9f64-1bde303cc476 (BroadcastRelease): Broadcast successful. Transaction Hash: aaa_int_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,699", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 296891fd-931d-42d5-9f64-1bde303cc476 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,700", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 6a04a7df-5d04-42b6-8379-f06698731b3b recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,701", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 63ef32f0-8ee8-46cd-bc17-4af01e2ff3d3 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,701", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 296891fd-931d-42d5-9f64-1bde303cc476 (BroadcastRelease): Ledger updated. Vendor: 0.01960000 BTC, Fee: 0.00040000 BTC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,743", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 7ffaeba9-29cb-4378-9d76-d10be75c80e3 (BroadcastRelease): Initiating broadcast...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,743", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,745", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 7ffaeba9-29cb-4378-9d76-d10be75c80e3 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_unsigned_txset)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,745", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 7ffaeba9-29cb-4378-9d76-d10be75c80e3 (BroadcastRelease): Broadcast successful. Transaction Hash: bbb_int_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,746", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 7ffaeba9-29cb-4378-9d76-d10be75c80e3 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,747", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 2c9d075b-c13e-45ae-bdad-c81786e83f6f recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,747", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 21099101-0161-4c7f-8777-2cd79193082c recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,748", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 7ffaeba9-29cb-4378-9d76-d10be75c80e3 (BroadcastRelease): Ledger updated. Vendor: 1.462500000000 XMR, Fee: 0.037500000000 XMR.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,788", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order e9463a1c-e76d-45d4-be89-57eda1287699 (BroadcastRelease): Initiating broadcast...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,788", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,790", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order e9463a1c-e76d-45d4-be89-57eda1287699 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,790", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order e9463a1c-e76d-45d4-be89-57eda1287699 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order e9463a1c-e76d-45d4-be89-57eda1287699 (service module returned invalid tx_hash: 'None').", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order e9463a1c-e76d-45d4-be89-57eda1287699 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:46:24,832", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 6f3de337-433f-479b-962b-6de2e6f24f12 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 30, Notes: 'Split decision: 30% to buyer...'", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,833", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,835", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 6f3de337-433f-479b-962b-6de2e6f24f12 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.00600000 BTC, Vendor: 0.01400000 BTC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,835", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 6f3de337-433f-479b-962b-6de2e6f24f12 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,835", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 6f3de337-433f-479b-962b-6de2e6f24f12 (ResolveDispute by test_mod_int): Dispute transaction broadcast successful. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,836", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 6f3de337-433f-479b-962b-6de2e6f24f12 (ResolveDispute by test_mod_int): Order state saved successfully. Proceeding to ledger updates.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,837", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 1459429e-0ea1-443d-b0dc-853a906f74f1 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,838", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction f1bc17af-0406-443c-9813-e0ab0d09ef5e recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,838", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 6f3de337-433f-479b-962b-6de2e6f24f12 (ResolveDispute by test_mod_int): Ledger updated. Buyer: 0.00600000, Vendor: 0.01400000 BTC. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,882", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 24b0fafa-b49f-4ad7-ad6a-05d50b624eb0 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 50, Notes: 'Attempted resolution...'", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,883", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,884", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 24b0fafa-b49f-4ad7-ad6a-05d50b624eb0 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.01000000 BTC, Vendor: 0.01000000 BTC.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,884", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 24b0fafa-b49f-4ad7-ad6a-05d50b624eb0 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:46:24,884", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order 24b0fafa-b49f-4ad7-ad6a-05d50b624eb0 (ResolveDispute by test_mod_int): Dispute broadcast error: Crypto dispute broadcast failed for Order 24b0fafa-b49f-4ad7-ad6a-05d50b624eb0 (service module returned invalid tx_hash: 'None').", "process": 1956, "thread": 5108, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order 24b0fafa-b49f-4ad7-ad6a-05d50b624eb0 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:46:24,920", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 1956, "thread": 5108}
{"asctime": "2025-04-08 02:52:29,610", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,611", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 975f2229-bffc-4055-98fb-72f5bf96c93c recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,615", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 04c115b4-4f2b-4b66-b342-af212d0e9ac9 recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,619", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 6db3f7b1-5d2c-48cf-b936-6e9560346527 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,624", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 202, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,630", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,633", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,638", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,641", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,645", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,648", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,651", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,654", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,657", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,660", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,662", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,666", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,704", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 486, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: Test lock", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,704", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 513, "message": "Ledger transaction 9ddeb8af-7055-49b1-9e3b-358daadfa306 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,708", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 465, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,715", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 448, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,720", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: Test unlock", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,721", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction 3060e147-18f9-4266-a437-39dbc1a67bf7 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,726", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 592, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,726", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: Test unlock more", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,727", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction 3c009e99-bf3c-4072-b3dd-b363463f9cd7 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,731", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 587, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,737", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 566, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,741", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 9cd1a0d6-dc98-4bc1-82cf-7d828addcbf6 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,747", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 0ffce4ac-3d18-40d0-a24b-2dad80d5ddac recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,752", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 849879ea-b30d-44b2-9ec3-978b039deb6b recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,783", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 295, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,799", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,800", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 482, "message": "[get_market_btc_key] Market BTC key pubkey matches settings (031b7a7e8e...).", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,800", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 489, "message": "[get_market_btc_key] Successfully loaded and cached market BTC key from Vault (PubKey starts with: 031b7a7e8e...).", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,802", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,802", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 454, "message": "[get_market_btc_key] Vault returned invalid data for key 'market_btc_multisig_key': None", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,870", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1547, "message": "Deprecated function `process_btc_withdrawal` called. Use Ledger system.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,873", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1550, "message": "Deprecated function `process_escrow_release` called. Use Taproot multi-sig workflow (prepare/sign/finalize/broadcast).", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,912", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,913", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,915", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,917", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,918", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,919", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,921", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,922", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 341, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-08 02:52:29,923", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,927", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-08 02:52:29,931", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-08 02:52:29,936", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,937", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,939", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-08 02:52:29,943", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-08 02:52:29,946", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,946", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,949", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,951", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,953", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-08 02:52:29,957", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-08 02:52:29,960", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-08 02:52:29,964", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,967", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 6dd01e534a2b8396)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,967", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 6dd01e534a2b8396): 4LdpnMo9wPESgQ4...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,969", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,970", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,970", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,971", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 6dd01e534a2b8396)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,971", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 6dd01e534a2b8396): Timeout", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,973", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 6dd01e534a2b8396)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,973", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 6dd01e534a2b8396): Monero RPC Error (Code: -5): RPC Failed", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,975", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 6dd01e534a2b8396)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,975", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 6dd01e534a2b8396). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,977", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,977", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,979", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 6dd01e534a2b8396)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,979", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 6dd01e534a2b8396) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,982", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,983", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,983", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,987", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,987", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,989", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,989", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,991", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,991", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,994", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,994", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': 'c9c76816b537f80b3efff119988a40750f1ae474425232763d79c87c3ad604c27bab055543ee8a28aa0aa16ecb955ce6329480f942136ca2a760f4f4e89a6936d48811c46a9b9153476a5b72be9354d7c6b34035a52e658d160be9f6c2bf1207bced51a6163ea78c1560c67b1534fd03117126a810463e69cb67e22e5e78d1e9'}", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,997", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,997", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,997", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 7696, "thread": 7720, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-08 02:52:29,998", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:29,998", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,000", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,001", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,001", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,001", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '80ebb4aed986a5b88cfad177a93abc030be87b37f8dd947b5f3b4e95faa3bfff84fa893421f1664f9fd9893a9d5fd852941675d36aeb8d02258a832bae5ae2c8caa8016e81289777961c4b491a3a3020e2cff933647c350b4b7b5430313f4f806c8b8c55a6e746e0a2a30cce25481a6d3307fb689d9059adf2fb5357d042f8ce8190f36336e273cc64af883b5bcb7fb3a9a4978454433284fdc56ad776363149cde083a3ca730da9dc44e7fa7f4bb9f9034397014e55135615579fd50d68d14cd02b15f69acd67b1a190010724efe44bfda732919137c2e179a6474f3dbee6750f2e421b3f6e0cd308c569a64805c5374e51fbc40ab86c4b273150b96baeca5b'}", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,001", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 7696, "thread": 7720, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:52:30,001", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,001", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,004", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,004", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,004", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,004", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 7696, "thread": 7720, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:52:30,004", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,005", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,008", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,008", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,008", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,008", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 7696, "thread": 7720, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:52:30,009", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,009", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,011", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,012", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,012", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,022", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,022", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-08 02:52:30,027", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,027", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,027", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-08 02:52:30,030", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,030", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,032", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,033", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,033", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,033", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,036", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,036", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,037", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,039", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,039", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,040", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,040", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,042", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,042", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,043", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,044", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,044", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,044", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,046", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,046", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,046", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 02:52:30,049", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,049", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 02:52:30,053", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,054", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,055", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,056", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,056", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-08 02:52:30,058", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,058", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,060", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,060", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,061", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,061", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,063", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,064", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,064", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,064", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,068", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,068", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,069", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 505a12d59c7ca1cf7e7946d3fd3e5d96e4342b5cd8ce68af43dc347ff093b53c", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,069", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,072", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,074", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,077", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,077", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,078", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 505a12d59c7ca1cf7e7946d3fd3e5d96e4342b5cd8ce68af43dc347ff093b53c", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,081", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,081", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,083", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,083", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,085", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,086", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,086", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,090", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,090", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,090", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,093", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,094", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,094", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,097", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,097", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,097", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,099", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,099", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,099", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,102", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,102", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 505a12d59c7ca1cf7e7946d3fd3e5d96e4342b5cd8ce68af43dc347ff093b53c, Fee: 0.000543210000 XMR (543210000 pico)", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,105", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,106", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,106", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,106", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,106", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,109", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 83a97727...): Failed to get daemon height. Cannot calculate confirmations.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,119", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 83a97727...): Skipping entry 0: TXID 505a12d59c7ca1cf7e7946d3fd3e5d96e4342b5cd8ce68af43dc347ff093b53c already processed.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,123", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,126", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,128", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,134", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 83a97727...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-08 02:52:30,139", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 83a97727...): Found candidate! TXID: 505a12d59c7ca1cf7e7946d3fd3e5d96e4342b5cd8ce68af43dc347ff093b53c, Amt: 1.234567890123 XMR, Confs: 11.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,140", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 83a97727...): Confirmed payment found.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,143", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,143", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,143", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,143", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-08 02:52:30,146", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,149", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,149", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,149", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,149", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 505a12d59c7ca1cf7e7946d3fd3e5d96e4342b5cd8ce68af43dc347ff093b53c, Fee: 0.000678900000 XMR (678900000 pico)", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,152", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,152", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,152", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,152", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,153", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,153", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,153", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,153", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,155", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,159", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,159", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,160", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,160", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 02:52:30,162", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,162", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 02:52:30,165", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,168", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,168", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,168", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 02:52:30,170", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 02:52:30,172", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,175", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,175", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,175", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,175", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 505a12d59c7ca1cf7e7946d3fd3e5d96e4342b5cd8ce68af43dc347ff093b53c, Fee: 0.000777700000 XMR (777700000 pico)", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,175", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,178", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,178", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,178", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,178", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 505a12d59c7ca1cf7e7946d3fd3e5d96e4342b5cd8ce68af43dc347ff093b53c, Fee: 0.000888800000 XMR (888800000 pico)", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,178", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,180", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,181", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,181", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,181", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,181", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,181", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,184", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,685", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,685", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:30,691", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:31,192", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:31,193", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:31,198", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/3): Timeout 1. Retrying in 0.5s...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:31,699", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/3): Refused 2. Retrying in 0.5s...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,207", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 401 (Authentication failed? Check RPC User/Password). Response: Unauthorized", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 02:52:32,212", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 500. Response: Internal Server Error", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 02:52:32,218", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-08 02:52:32,222", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 267, "message": "Monero RPC (Wallet - Method: some_method): RPC returned error: Code=-4, Message=Invalid params", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,236", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,236", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='1346490415968'>", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,242", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,248", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,249", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='1346514554560'>", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,254", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,265", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,265", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,274", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,274", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,282", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,282", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,282", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,291", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: WRONG_FINGERPRINT_XXXXXXXXXXXXXXXXXXXXXXXX, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: True, Status: signature valid", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,291", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: WRONG_FINGERPRINT_XXXXXXXXXXXXXXXXXXXXXXXX.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,291", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,299", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,299", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,299", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,305", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,313", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,313", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,328", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,328", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-08 02:52:32,336", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,342", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,342", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-08 02:52:32,351", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,351", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,359", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,359", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,367", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,367", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,379", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 387, "message": "User test_vendor_escrow missing valid withdrawal address in field 'btc_withdrawal_address' for currency BTC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,426", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 5b0f37cb-5dfa-4a1a-9abe-29e01688a0c5 (BTC): Initiating multi-sig escrow setup...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,429", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_test_user' loaded and cached.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,429", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 661, "message": "Order 5b0f37cb-5dfa-4a1a-9abe-29e01688a0c5 (BTC): BTC multisig details missing expected redeem/witness script.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,429", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 5b0f37cb-5dfa-4a1a-9abe-29e01688a0c5 (BTC): Generated BTC Escrow Address: tb1qw508d6qejxt...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,430", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 5b0f37cb-5dfa-4a1a-9abe-29e01688a0c5 (BTC): Created CryptoPayment d8ba505a-bd48-4192-8a52-7b77ab9c0ff5 (Multi-sig). Expected Atomic: 1000000", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,430", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 5b0f37cb-5dfa-4a1a-9abe-29e01688a0c5 (BTC): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 08:52:32.430445+00:00. Awaiting payment to tb1qw508d6qejxt...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,431", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 5b0f37cb-5dfa-4a1a-9abe-29e01688a0c5 (BTC): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,473", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 8910fb7c-7ad2-4999-b21e-fabd46dc741a (XMR): Initiating multi-sig escrow setup...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,474", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 8910fb7c-7ad2-4999-b21e-fabd46dc741a (XMR): Generated XMR Escrow Address: xmr_multisig_ad...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,475", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 8910fb7c-7ad2-4999-b21e-fabd46dc741a (XMR): Created CryptoPayment be959a17-7b63-4089-b602-ae709c5ff603 (Multi-sig). Expected Atomic: 1000000000000", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,475", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 8910fb7c-7ad2-4999-b21e-fabd46dc741a (XMR): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 08:52:32.475527+00:00. Awaiting payment to xmr_multisig_ad...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,476", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 8910fb7c-7ad2-4999-b21e-fabd46dc741a (XMR): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,519", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order affd28a5-677f-4c57-9891-929b17a6389d (BTC): Initiating multi-sig escrow setup...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,519", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 537, "message": "Order affd28a5-677f-4c57-9891-929b17a6389d (BTC): Cannot create escrow details. Status: 'shipped' (Expected: 'pending_payment').", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,561", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 0c5aefe0-5cd0-420c-9e28-e20bf0fa75d9 (LTC): Initiating multi-sig escrow setup...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,563", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 607, "message": "Order 0c5aefe0-5cd0-420c-9e28-e20bf0fa75d9 (LTC): Failed to gather participant info: Multisig key attribute mapping not found for currency LTC.", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 581, in create_escrow_for_order\n    raise ValueError(f\"Multisig key attribute mapping not found for currency {currency}.\")\nValueError: Multisig key attribute mapping not found for currency LTC."}
{"asctime": "2025-04-08 02:52:32,606", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 91cb8018-83b4-4570-a719-8d78d123b538 (BTC): Initiating multi-sig escrow setup...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,608", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 91cb8018-83b4-4570-a719-8d78d123b538 (BTC): Crypto service error during BTC escrow generation: BTC Gen Failed", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 639, in create_escrow_for_order\n    msig_details = crypto_service_module.create_btc_multisig_address(\n        participant_pubkeys_hex=participant_infos, # Use expected kwarg name\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: BTC Gen Failed"}
{"asctime": "2025-04-08 02:52:32,649", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 2dce8bea-3185-4208-a3a6-41445491f95d (XMR): Initiating multi-sig escrow setup...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,651", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 2dce8bea-3185-4208-a3a6-41445491f95d (XMR): Crypto service error during XMR escrow generation: XMR Wallet Gen Failed", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 621, in create_escrow_for_order\n    msig_details = crypto_service_module.create_monero_multisig_wallet(\n        participant_infos=participant_infos, # Use keyword arg for clarity\n        order_guid=str(order.id),           # Use keyword arg 'order_guid'\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: XMR Wallet Gen Failed"}
{"asctime": "2025-04-08 02:52:32,699", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: b3accdb4-c257-4f91-9526-f558e6813b7d, Payment: 09d86b43-9a90-4f75-9f85-e2fa74146060, Currency: BTC): Starting check.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,699", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: b3accdb4-c257-4f91-9526-f558e6813b7d, Payment: 09d86b43-9a90-4f75-9f85-e2fa74146060, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,700", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: b3accdb4-c257-4f91-9526-f558e6813b7d, Payment: 09d86b43-9a90-4f75-9f85-e2fa74146060, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,701", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1052, "message": "PaymentConfirm Check (Order: b3accdb4-c257-4f91-9526-f558e6813b7d, Payment: 09d86b43-9a90-4f75-9f85-e2fa74146060, Currency: BTC): Ledger updated (incl. deposit fee) & Order status -> payment_confirmed. TXID: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,701", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1067, "message": "PaymentConfirm Check (Order: b3accdb4-c257-4f91-9526-f558e6813b7d, Payment: 09d86b43-9a90-4f75-9f85-e2fa74146060, Currency: BTC): Sent payment confirmation notification to Vendor test_vendor_escrow.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,746", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 54677f24-e203-4a1e-a27b-edca3278a7ce, Payment: 1be0ed36-158d-49fb-b741-61c556ceeb23, Currency: BTC): Starting check.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,792", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 917, "message": "Order b8d3e034-fa1e-4513-8e21-5edb0b8ae2b0 cancelled due to underpayment. Rcvd 0.00500000, Exp 0.01000000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,839", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 106be746-127e-4da2-8093-be234f17e3e9, Payment: b081a7a4-a389-48e1-9d90-023bd4e74830, Currency: BTC): Starting check.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,840", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 106be746-127e-4da2-8093-be234f17e3e9, Payment: b081a7a4-a389-48e1-9d90-023bd4e74830, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,840", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 106be746-127e-4da2-8093-be234f17e3e9, Payment: b081a7a4-a389-48e1-9d90-023bd4e74830, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,840", "levelname": "CRITICAL", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1075, "message": "PaymentConfirm Check (Order: 106be746-127e-4da2-8093-be234f17e3e9, Payment: b081a7a4-a389-48e1-9d90-023bd4e74830, Currency: BTC): CRITICAL: Ledger/Order atomic update FAILED during payment confirmation! Error: ['Cannot lock funds']. Transaction rolled back.", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1010, in check_and_confirm_payment\n    lock_success = ledger_service.lock_funds(\n        user=buyer, currency=currency, amount=expected_std, # Lock the required STANDARD order amount\n        related_order=order, notes=f\"Lock funds for Order {order.id} escrow\"\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nledger.services.InsufficientFundsError: ['Cannot lock funds']"}
{"asctime": "2025-04-08 02:52:32,887", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 5303b8cc-0693-4a2f-9d51-e4d0bf7235eb (MarkShipped by test_vendor_escrow): Attempting...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,889", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1190, "message": "Order 5303b8cc-0693-4a2f-9d51-e4d0bf7235eb (MarkShipped by test_vendor_escrow): Tracking info provided but 'tracking_info' field missing on Order model.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,890", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1206, "message": "Order 5303b8cc-0693-4a2f-9d51-e4d0bf7235eb (MarkShipped by test_vendor_escrow): Marked shipped. Status -> shipped. Dispute deadline: 2025-04-15 08:52:32.888668+00:00, Auto-finalize: 2025-04-22 08:52:32.888668+00:00", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,891", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1230, "message": "Order 5303b8cc-0693-4a2f-9d51-e4d0bf7235eb (MarkShipped by test_vendor_escrow): Sent order shipped notification to Buyer test_buyer_escrow.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,934", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order ca963294-a7c4-4fb1-817b-b14bb386aaa4 (MarkShipped by test_buyer_escrow): Attempting...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,935", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1126, "message": "Order ca963294-a7c4-4fb1-817b-b14bb386aaa4 (MarkShipped by test_buyer_escrow): Permission denied. User test_buyer_escrow is not the vendor (test_vendor_escrow).", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,978", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order e319e9e7-7072-4810-8f86-21f7ea679641 (MarkShipped by test_vendor_escrow): Attempting...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:32,980", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1130, "message": "Order e319e9e7-7072-4810-8f86-21f7ea679641 (MarkShipped by test_vendor_escrow): Cannot mark shipped. Invalid status 'pending_payment' (Expected: 'payment_confirmed').", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,023", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 84666eda-5414-47be-bce9-9010d744a356 (MarkShipped by test_vendor_escrow): Attempting...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,024", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1144, "message": "Order 84666eda-5414-47be-bce9-9010d744a356 (MarkShipped by test_vendor_escrow): Failed to prepare release transaction: Prep Fail", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1138, in mark_order_shipped\n    prepared_release_metadata = _prepare_release(order_locked) # Definition is later in file\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Prep Fail"}
{"asctime": "2025-04-08 02:52:33,067", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 9fe2d5d2-6a8f-4846-810d-ce983f7e0327 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,068", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 9fe2d5d2-6a8f-4846-810d-ce983f7e0327 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,068", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order 9fe2d5d2-6a8f-4846-810d-ce983f7e0327 (SignRelease by test_buyer_escrow): Signature applied. Current signers: 1/2. Ready for broadcast: False.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,126", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 81a03459-c4e6-4302-887c-072c3391fec5 (SignRelease by test_vendor_escrow): Attempting signature...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,127", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 81a03459-c4e6-4302-887c-072c3391fec5 (SignRelease by test_vendor_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,127", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order 81a03459-c4e6-4302-887c-072c3391fec5 (SignRelease by test_vendor_escrow): Signature applied. Current signers: 2/2. Ready for broadcast: True.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,128", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1465, "message": "Order 81a03459-c4e6-4302-887c-072c3391fec5 (SignRelease by test_vendor_escrow): Sent 'ready for broadcast' notification to test_buyer_escrow.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,176", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order dc6ca633-6b63-4eb2-90b4-c3a3b4853ce5 (SignRelease by test_mod_escrow): Attempting signature...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,177", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1289, "message": "Order dc6ca633-6b63-4eb2-90b4-c3a3b4853ce5 (SignRelease by test_mod_escrow): Permission denied. User is not buyer or vendor.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,225", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 8a9a35e4-5528-4e65-ab3e-d469f3d5183e (SignRelease by test_buyer_escrow): Attempting signature...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,227", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 8a9a35e4-5528-4e65-ab3e-d469f3d5183e (SignRelease by test_buyer_escrow): Attempting signature...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,229", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 8a9a35e4-5528-4e65-ab3e-d469f3d5183e (SignRelease by test_buyer_escrow): Attempting signature...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,230", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 8a9a35e4-5528-4e65-ab3e-d469f3d5183e (SignRelease by test_buyer_escrow): Attempting signature...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,281", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order ca699855-176e-42bb-bcf9-4f72f4806d07 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,282", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1321, "message": "Order ca699855-176e-42bb-bcf9-4f72f4806d07 (SignRelease by test_buyer_escrow): User test_buyer_escrow (ID: 59) has already signed this release.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,330", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order e9905518-5b99-4531-86f7-75212715e5bf (SignRelease by test_buyer_escrow): Attempting signature...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,331", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order e9905518-5b99-4531-86f7-75212715e5bf (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,331", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1425, "message": "Order e9905518-5b99-4531-86f7-75212715e5bf (SignRelease by test_buyer_escrow): Crypto signing error: Simulated BTC Sign Failure", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1345, in sign_order_release\n    sign_result = sign_func(\n        psbt_base64=unsigned_crypto_data,  # Map to expected arg name\n        private_key_wif=private_key_info    # Map to expected arg name\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Simulated BTC Sign Failure"}
{"asctime": "2025-04-08 02:52:33,386", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 43259464-ec4a-4f7e-9716-9726d8c93e20 (BroadcastRelease): Initiating broadcast...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,387", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 43259464-ec4a-4f7e-9716-9726d8c93e20 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,388", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 43259464-ec4a-4f7e-9716-9726d8c93e20 (BroadcastRelease): Broadcast successful. Transaction Hash: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,388", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 43259464-ec4a-4f7e-9716-9726d8c93e20 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,388", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 43259464-ec4a-4f7e-9716-9726d8c93e20 (BroadcastRelease): Ledger updated. Vendor: 0.00975000 BTC, Fee: 0.00025000 BTC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,442", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order cec66c45-80ff-4606-bd8a-bd25a06431d9 (BroadcastRelease): Initiating broadcast...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,444", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order cec66c45-80ff-4606-bd8a-bd25a06431d9 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_signed_txset)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,444", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order cec66c45-80ff-4606-bd8a-bd25a06431d9 (BroadcastRelease): Broadcast successful. Transaction Hash: xmr_tx_hash_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,444", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order cec66c45-80ff-4606-bd8a-bd25a06431d9 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,444", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order cec66c45-80ff-4606-bd8a-bd25a06431d9 (BroadcastRelease): Ledger updated. Vendor: 0.975000000000 XMR, Fee: 0.025000000000 XMR.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,500", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order f6993b35-5e4b-4f16-a624-3e71219ba7b4 (BroadcastRelease): Initiating broadcast...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,502", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order f6993b35-5e4b-4f16-a624-3e71219ba7b4 (BroadcastRelease): Initiating broadcast...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,509", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order f6993b35-5e4b-4f16-a624-3e71219ba7b4 (BroadcastRelease): Initiating broadcast...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,563", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 5975fdda-abad-4d47-a942-954824d2eea5 (BroadcastRelease): Initiating broadcast...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,564", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 5975fdda-abad-4d47-a942-954824d2eea5 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,564", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 5975fdda-abad-4d47-a942-954824d2eea5 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 5975fdda-abad-4d47-a942-954824d2eea5 (service module returned invalid tx_hash: 'None').", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 5975fdda-abad-4d47-a942-954824d2eea5 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:52:33,677", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order e6f2a3e6-cc19-4feb-accd-52026ca1c732 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 100, Notes: 'Full refund....'", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,679", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order e6f2a3e6-cc19-4feb-accd-52026ca1c732 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.01000000 BTC, Vendor: 0E-8 BTC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,679", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order e6f2a3e6-cc19-4feb-accd-52026ca1c732 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,679", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order e6f2a3e6-cc19-4feb-accd-52026ca1c732 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,680", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order e6f2a3e6-cc19-4feb-accd-52026ca1c732 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,680", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order e6f2a3e6-cc19-4feb-accd-52026ca1c732 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.01000000, Vendor: 0E-8 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,736", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 319a9807-bf8a-4384-ac85-6c6fac4f8999 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 70, Notes: 'Split 70/30...'", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,738", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 319a9807-bf8a-4384-ac85-6c6fac4f8999 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00700000 BTC, Vendor: 0.00300000 BTC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,738", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 319a9807-bf8a-4384-ac85-6c6fac4f8999 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,738", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 319a9807-bf8a-4384-ac85-6c6fac4f8999 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,739", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 319a9807-bf8a-4384-ac85-6c6fac4f8999 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,739", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 319a9807-bf8a-4384-ac85-6c6fac4f8999 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.00700000, Vendor: 0.00300000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,793", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 6727e8df-16a1-48db-a31c-c31f31d1cfa6 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test notes...'", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,846", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 1cb66996-4c7c-4686-a9bb-c9a65dbd7045 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 101, Notes: 'Test notes...'", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,848", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 1cb66996-4c7c-4686-a9bb-c9a65dbd7045 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: -10, Notes: 'Test notes...'", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,901", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 8cde1f00-2568-40a6-be40-766cc702ccf3 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test Notes - Crypto Fail Attempt...'", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,903", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 8cde1f00-2568-40a6-be40-766cc702ccf3 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00500000 BTC, Vendor: 0.00500000 BTC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,903", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 8cde1f00-2568-40a6-be40-766cc702ccf3 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,903", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order 8cde1f00-2568-40a6-be40-766cc702ccf3 (ResolveDispute by test_mod_escrow): Dispute broadcast error: Crypto dispute broadcast failed for Order 8cde1f00-2568-40a6-be40-766cc702ccf3 (service module returned invalid tx_hash: 'None').", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order 8cde1f00-2568-40a6-be40-766cc702ccf3 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:52:33,953", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order ad711ff2-65ec-493f-918a-160309820652 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:33,955", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2244, "message": "Order ad711ff2-65ec-493f-918a-160309820652 (GetUnsignedTx for test_buyer_escrow): Returning prepared transaction data (Type: btc_psbt). Already Signed: False", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,001", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order bedd7897-98b0-4b1d-9bc9-dcfe5f52334f (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,002", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2212, "message": "Order bedd7897-98b0-4b1d-9bc9-dcfe5f52334f (GetUnsignedTx for test_buyer_escrow): Attempted to get unsigned TX before release initiated.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,003", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order bedd7897-98b0-4b1d-9bc9-dcfe5f52334f (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,005", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order bedd7897-98b0-4b1d-9bc9-dcfe5f52334f (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {}", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,005", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order bedd7897-98b0-4b1d-9bc9-dcfe5f52334f (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,006", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order bedd7897-98b0-4b1d-9bc9-dcfe5f52334f (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'type': 'btc_psbt', 'signatures': {}}", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,007", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order bedd7897-98b0-4b1d-9bc9-dcfe5f52334f (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,008", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order bedd7897-98b0-4b1d-9bc9-dcfe5f52334f (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'data': 'some_data', 'signatures': {}}", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,056", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order baa347d3-bbf2-4ed0-b05d-28b64685197c (GetUnsignedTx for test_mod_escrow): Request received.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,057", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2207, "message": "Order baa347d3-bbf2-4ed0-b05d-28b64685197c (GetUnsignedTx for test_mod_escrow): Permission denied. User not buyer or vendor.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,102", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 416, "message": "Order a9149317-557a-4d77-a6f0-c371815a7a3d (TimeoutCheck): Payment deadline 2025-04-08 07:52:34.101612+00:00 passed. Attempting cancellation.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,102", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 429, "message": "Order a9149317-557a-4d77-a6f0-c371815a7a3d (TimeoutCheck): Successfully cancelled due to payment timeout. Status -> cancelled_timeout", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,102", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 430, "message": "Order a9149317-557a-4d77-a6f0-c371815a7a3d automatically cancelled due to payment timeout.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,197", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order acbe480e-bcf7-4bc9-84cd-63340247935f (BroadcastRelease): Initiating broadcast...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,198", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,199", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order acbe480e-bcf7-4bc9-84cd-63340247935f (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,200", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order acbe480e-bcf7-4bc9-84cd-63340247935f (BroadcastRelease): Broadcast successful. Transaction Hash: aaa_int_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,201", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order acbe480e-bcf7-4bc9-84cd-63340247935f (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,202", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 703cfb18-975c-4bac-82ad-7e5db9e6d32e recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,203", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 04411f0e-fd27-4287-8c2c-24e4d3c94159 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,203", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order acbe480e-bcf7-4bc9-84cd-63340247935f (BroadcastRelease): Ledger updated. Vendor: 0.01960000 BTC, Fee: 0.00040000 BTC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,249", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 272b0531-c8b8-4eea-9682-cb8ec31fd537 (BroadcastRelease): Initiating broadcast...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,250", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,251", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 272b0531-c8b8-4eea-9682-cb8ec31fd537 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_unsigned_txset)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,251", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 272b0531-c8b8-4eea-9682-cb8ec31fd537 (BroadcastRelease): Broadcast successful. Transaction Hash: bbb_int_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,252", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 272b0531-c8b8-4eea-9682-cb8ec31fd537 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,253", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 64cc2aed-d303-47a6-a123-162f07df7a87 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,254", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 24af0230-2262-4358-a6b3-7886d708ec18 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,254", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 272b0531-c8b8-4eea-9682-cb8ec31fd537 (BroadcastRelease): Ledger updated. Vendor: 1.462500000000 XMR, Fee: 0.037500000000 XMR.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,297", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 94af728f-8fa6-494b-af80-56a665c934a9 (BroadcastRelease): Initiating broadcast...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,298", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,299", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 94af728f-8fa6-494b-af80-56a665c934a9 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,299", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 94af728f-8fa6-494b-af80-56a665c934a9 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 94af728f-8fa6-494b-af80-56a665c934a9 (service module returned invalid tx_hash: 'None').", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 94af728f-8fa6-494b-af80-56a665c934a9 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:52:34,344", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 673bf210-25aa-42a3-9205-95c43fd082ca (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 30, Notes: 'Split decision: 30% to buyer...'", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,345", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,346", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 673bf210-25aa-42a3-9205-95c43fd082ca (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.00600000 BTC, Vendor: 0.01400000 BTC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,346", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 673bf210-25aa-42a3-9205-95c43fd082ca (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,347", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 673bf210-25aa-42a3-9205-95c43fd082ca (ResolveDispute by test_mod_int): Dispute transaction broadcast successful. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,348", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 673bf210-25aa-42a3-9205-95c43fd082ca (ResolveDispute by test_mod_int): Order state saved successfully. Proceeding to ledger updates.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,349", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 1c546d13-2dd1-4636-9edf-85f2718338a6 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,350", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 1223bad3-cc57-4cf3-937b-8e31171a3b46 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,350", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 673bf210-25aa-42a3-9205-95c43fd082ca (ResolveDispute by test_mod_int): Ledger updated. Buyer: 0.00600000, Vendor: 0.01400000 BTC. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,398", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order f853f0d3-6b27-4ca7-8941-81bd87163291 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 50, Notes: 'Attempted resolution...'", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,398", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,400", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order f853f0d3-6b27-4ca7-8941-81bd87163291 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.01000000 BTC, Vendor: 0.01000000 BTC.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,400", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order f853f0d3-6b27-4ca7-8941-81bd87163291 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:52:34,400", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order f853f0d3-6b27-4ca7-8941-81bd87163291 (ResolveDispute by test_mod_int): Dispute broadcast error: Crypto dispute broadcast failed for Order f853f0d3-6b27-4ca7-8941-81bd87163291 (service module returned invalid tx_hash: 'None').", "process": 7696, "thread": 7720, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order f853f0d3-6b27-4ca7-8941-81bd87163291 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:52:34,438", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 7696, "thread": 7720}
{"asctime": "2025-04-08 02:56:10,991", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:10,992", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 144a2b8c-2bcb-45f6-95d7-1460725325fa recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:10,996", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction fbadb6c7-1254-4038-a657-924357eba23f recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,002", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction e2c0d2ff-5936-491a-b1c0-5bdb36670717 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,008", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 202, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,011", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,014", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,016", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,019", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,022", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,024", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,027", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,030", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,036", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,039", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,043", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,045", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,085", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 486, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: Test lock", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,086", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 513, "message": "Ledger transaction c3c05ce9-985e-4b38-8870-20fc82d75644 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,089", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 465, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,095", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 448, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,099", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: Test unlock", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,099", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction aa1da510-94f4-4ba2-ac9a-0d36631504a3 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,104", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 592, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,104", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: Test unlock more", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,104", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction d822495b-f5c3-4562-8656-18a7d8c67aee recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,109", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 587, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,115", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 566, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,122", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction fce20e48-03a6-41c9-b41d-729e78ab6c86 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,127", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction dfe4d459-411d-4c3d-915d-732943425941 recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,132", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction f25e8580-c21b-4bc2-a31e-210d5b3b0a42 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,163", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 295, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,182", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,182", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 482, "message": "[get_market_btc_key] Market BTC key pubkey matches settings (031b7a7e8e...).", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,182", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 489, "message": "[get_market_btc_key] Successfully loaded and cached market BTC key from Vault (PubKey starts with: 031b7a7e8e...).", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,186", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,186", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 454, "message": "[get_market_btc_key] Vault returned invalid data for key 'market_btc_multisig_key': None", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,253", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1547, "message": "Deprecated function `process_btc_withdrawal` called. Use Ledger system.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,256", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1550, "message": "Deprecated function `process_escrow_release` called. Use Taproot multi-sig workflow (prepare/sign/finalize/broadcast).", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,294", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,296", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,298", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,300", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,302", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,304", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,307", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,307", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 341, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-08 02:56:11,309", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,313", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-08 02:56:11,318", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-08 02:56:11,323", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,323", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,325", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-08 02:56:11,329", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-08 02:56:11,334", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,334", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,336", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,338", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,340", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-08 02:56:11,344", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-08 02:56:11,349", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-08 02:56:11,353", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,355", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 8598fd9d0b045482)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,355", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 8598fd9d0b045482): 4LdpnMo9wPESgQ4...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,357", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,357", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,357", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,359", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 8598fd9d0b045482)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,359", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 8598fd9d0b045482): Timeout", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,361", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 8598fd9d0b045482)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,361", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 8598fd9d0b045482): Monero RPC Error (Code: -5): RPC Failed", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,363", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 8598fd9d0b045482)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,363", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 8598fd9d0b045482). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,365", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,365", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,367", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 8598fd9d0b045482)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,367", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 8598fd9d0b045482) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,370", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,370", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,370", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,374", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,375", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,377", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,377", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,380", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,380", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,382", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,382", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': 'a1f9e6d403b714e8f08027bd06f13557a14d377d357681e04efccaed83d1b972d4ed57a1f3a0691ed72175ed7b7d92217d7a490aa99ea53ce976e1cb47cb327b9ab530777af61d1f3214883cc2af20e750f90d9833d65015c16af3ad13734adb5ba8841ce1fa3c26ff2a9d0fcfed3c356b84e53b7aa746af193e3727c872c50c'}", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,385", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,385", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,385", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 5492, "thread": 396, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-08 02:56:11,385", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,385", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,388", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,389", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,389", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,389", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '70b32af64d2c1bb84b321270d95a82f21c35bc41c120501d5a6488eb78a82a53e8ef5899df39d6dc49d6dfc9084e84c921a3ed3e9e98d76058989e8517fc1d88fd13e63b952a16dfe305be92cfb6b6dd5e895fe5e5f3ed069418f1fa4b680937062088e571f330a820db06a2fcf4c9c523a8695d5711ce292f433e4c1b2d77e83335cf2a7e13b682a99156ef28ae7079abeea7218fa45f1f23d250f94c75651049c4cb9c586323d2a9887d3417622a16a15b2b9782b9999160079fac83e87fb24a68169cbd3062b25930d45de5f6b5277208e4a9c308ab4a28ddcb865f85cb81a9607a65d6e3f36c351227020b0fdcdd3549106387ad874e8645981a8538fb42'}", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,389", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 5492, "thread": 396, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:56:11,389", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,389", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,392", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,392", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,393", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,393", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 5492, "thread": 396, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:56:11,393", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,393", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,396", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,396", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,396", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,396", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 5492, "thread": 396, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 02:56:11,396", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,397", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,399", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,399", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,399", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,408", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,408", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-08 02:56:11,412", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,412", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,412", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-08 02:56:11,414", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,415", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,417", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,417", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,417", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,418", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,420", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,421", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,422", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,424", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,425", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,425", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,425", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,427", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,427", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,429", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,429", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,429", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,429", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,431", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,431", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,432", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 02:56:11,434", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,434", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 02:56:11,437", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,438", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,439", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,439", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,439", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-08 02:56:11,441", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,441", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,443", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,443", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,444", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,444", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,445", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,445", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,446", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,446", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,449", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,449", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,450", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 3ed461b2e84d3613cc69e682f8add15c6ac4870c6056a18c7ffed8ed5d2e5e4e", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,450", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,453", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,455", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,458", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,458", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,458", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 3ed461b2e84d3613cc69e682f8add15c6ac4870c6056a18c7ffed8ed5d2e5e4e", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,461", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,461", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,463", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,464", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,466", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,466", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,466", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,469", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,469", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,469", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,473", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,473", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,473", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,476", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,476", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,477", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,479", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,480", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,480", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,482", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,482", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 3ed461b2e84d3613cc69e682f8add15c6ac4870c6056a18c7ffed8ed5d2e5e4e, Fee: 0.000543210000 XMR (543210000 pico)", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,485", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,485", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,485", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,486", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,486", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,490", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 22c76475...): Failed to get daemon height. Cannot calculate confirmations.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,501", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 22c76475...): Skipping entry 0: TXID 3ed461b2e84d3613cc69e682f8add15c6ac4870c6056a18c7ffed8ed5d2e5e4e already processed.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,505", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,508", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,510", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,516", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 22c76475...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-08 02:56:11,522", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 22c76475...): Found candidate! TXID: 3ed461b2e84d3613cc69e682f8add15c6ac4870c6056a18c7ffed8ed5d2e5e4e, Amt: 1.234567890123 XMR, Confs: 11.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,522", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 22c76475...): Confirmed payment found.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,524", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,525", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,525", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,525", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-08 02:56:11,527", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,530", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,530", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,530", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,530", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 3ed461b2e84d3613cc69e682f8add15c6ac4870c6056a18c7ffed8ed5d2e5e4e, Fee: 0.000678900000 XMR (678900000 pico)", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,533", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,533", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,533", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,533", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,533", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,533", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,534", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,534", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,538", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,541", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,541", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,541", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,541", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 02:56:11,544", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,544", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 02:56:11,547", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,549", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,549", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,550", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 02:56:11,551", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 02:56:11,553", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,556", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,556", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,557", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,557", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 3ed461b2e84d3613cc69e682f8add15c6ac4870c6056a18c7ffed8ed5d2e5e4e, Fee: 0.000777700000 XMR (777700000 pico)", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,557", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,560", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,560", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,561", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,561", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 3ed461b2e84d3613cc69e682f8add15c6ac4870c6056a18c7ffed8ed5d2e5e4e, Fee: 0.000888800000 XMR (888800000 pico)", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,561", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,564", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,564", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,564", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,564", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,564", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,565", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:11,567", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:12,067", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:12,068", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:12,073", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:12,573", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:12,574", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:12,580", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/3): Timeout 1. Retrying in 0.5s...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,081", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/3): Refused 2. Retrying in 0.5s...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,590", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 401 (Authentication failed? Check RPC User/Password). Response: Unauthorized", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 02:56:13,597", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 500. Response: Internal Server Error", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 02:56:13,603", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-08 02:56:13,607", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 267, "message": "Monero RPC (Wallet - Method: some_method): RPC returned error: Code=-4, Message=Invalid params", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,621", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,621", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2782627404096'>", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,629", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,636", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,637", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2782651534032'>", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,642", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,653", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,653", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,660", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,660", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,669", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,669", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,669", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,678", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: WRONG_FINGERPRINT_XXXXXXXXXXXXXXXXXXXXXXXX, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: True, Status: signature valid", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,679", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: WRONG_FINGERPRINT_XXXXXXXXXXXXXXXXXXXXXXXX.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,679", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,687", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,687", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,687", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,693", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,700", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,701", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,715", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,716", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-08 02:56:13,723", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,729", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,729", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-08 02:56:13,736", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,736", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,743", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,743", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,751", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,751", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,763", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 387, "message": "User test_vendor_escrow missing valid withdrawal address in field 'btc_withdrawal_address' for currency BTC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,807", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order c33f7727-bba5-42df-b2b2-5f1682ac0485 (BTC): Initiating multi-sig escrow setup...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,809", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_test_user' loaded and cached.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,809", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 661, "message": "Order c33f7727-bba5-42df-b2b2-5f1682ac0485 (BTC): BTC multisig details missing expected redeem/witness script.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,809", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order c33f7727-bba5-42df-b2b2-5f1682ac0485 (BTC): Generated BTC Escrow Address: tb1qw508d6qejxt...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,809", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order c33f7727-bba5-42df-b2b2-5f1682ac0485 (BTC): Created CryptoPayment eccd5d98-b349-4698-88b8-2ea05bd48635 (Multi-sig). Expected Atomic: 1000000", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,810", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order c33f7727-bba5-42df-b2b2-5f1682ac0485 (BTC): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 08:56:13.810052+00:00. Awaiting payment to tb1qw508d6qejxt...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,811", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order c33f7727-bba5-42df-b2b2-5f1682ac0485 (BTC): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,851", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order ec9fb8f4-daef-4dae-b93b-2bad8ca87064 (XMR): Initiating multi-sig escrow setup...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,853", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order ec9fb8f4-daef-4dae-b93b-2bad8ca87064 (XMR): Generated XMR Escrow Address: xmr_multisig_ad...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,853", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order ec9fb8f4-daef-4dae-b93b-2bad8ca87064 (XMR): Created CryptoPayment f8190ae1-4e2f-41c6-902a-0db65fd6be84 (Multi-sig). Expected Atomic: 1000000000000", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,854", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order ec9fb8f4-daef-4dae-b93b-2bad8ca87064 (XMR): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 08:56:13.853921+00:00. Awaiting payment to xmr_multisig_ad...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,854", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order ec9fb8f4-daef-4dae-b93b-2bad8ca87064 (XMR): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,897", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 8eaf46e4-5d94-477f-9ab0-29de00b52f00 (BTC): Initiating multi-sig escrow setup...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,897", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 537, "message": "Order 8eaf46e4-5d94-477f-9ab0-29de00b52f00 (BTC): Cannot create escrow details. Status: 'shipped' (Expected: 'pending_payment').", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,958", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 05fde06c-1d83-4f57-a448-e5f6d3b43a05 (LTC): Initiating multi-sig escrow setup...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:13,961", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 607, "message": "Order 05fde06c-1d83-4f57-a448-e5f6d3b43a05 (LTC): Failed to gather participant info: Multisig key attribute mapping not found for currency LTC.", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 581, in create_escrow_for_order\n    raise ValueError(f\"Multisig key attribute mapping not found for currency {currency}.\")\nValueError: Multisig key attribute mapping not found for currency LTC."}
{"asctime": "2025-04-08 02:56:14,012", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 08f64ba9-133d-4777-8e9a-9d4f2f107506 (BTC): Initiating multi-sig escrow setup...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,014", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 08f64ba9-133d-4777-8e9a-9d4f2f107506 (BTC): Crypto service error during BTC escrow generation: BTC Gen Failed", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 639, in create_escrow_for_order\n    msig_details = crypto_service_module.create_btc_multisig_address(\n        participant_pubkeys_hex=participant_infos, # Use expected kwarg name\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: BTC Gen Failed"}
{"asctime": "2025-04-08 02:56:14,056", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order f5368310-56e0-4afc-8ca1-90fb4bb1e652 (XMR): Initiating multi-sig escrow setup...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,058", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order f5368310-56e0-4afc-8ca1-90fb4bb1e652 (XMR): Crypto service error during XMR escrow generation: XMR Wallet Gen Failed", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 621, in create_escrow_for_order\n    msig_details = crypto_service_module.create_monero_multisig_wallet(\n        participant_infos=participant_infos, # Use keyword arg for clarity\n        order_guid=str(order.id),           # Use keyword arg 'order_guid'\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: XMR Wallet Gen Failed"}
{"asctime": "2025-04-08 02:56:14,106", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 1220d20d-9a7a-4ed5-a456-0df786bed7c5, Payment: f34fdb3e-ad2c-4473-a50a-bb03b7e84805, Currency: BTC): Starting check.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,107", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 1220d20d-9a7a-4ed5-a456-0df786bed7c5, Payment: f34fdb3e-ad2c-4473-a50a-bb03b7e84805, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,107", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 1220d20d-9a7a-4ed5-a456-0df786bed7c5, Payment: f34fdb3e-ad2c-4473-a50a-bb03b7e84805, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,108", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1052, "message": "PaymentConfirm Check (Order: 1220d20d-9a7a-4ed5-a456-0df786bed7c5, Payment: f34fdb3e-ad2c-4473-a50a-bb03b7e84805, Currency: BTC): Ledger updated (incl. deposit fee) & Order status -> payment_confirmed. TXID: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,108", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1067, "message": "PaymentConfirm Check (Order: 1220d20d-9a7a-4ed5-a456-0df786bed7c5, Payment: f34fdb3e-ad2c-4473-a50a-bb03b7e84805, Currency: BTC): Sent payment confirmation notification to Vendor test_vendor_escrow.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,153", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 4379770a-f2c9-4d4c-907a-b562a83c76a4, Payment: e6c20995-ee11-42b8-86ae-1ce0dcbad4b5, Currency: BTC): Starting check.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,200", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 917, "message": "Order d17d628c-6281-4958-810b-140926d890e4 cancelled due to underpayment. Rcvd 0.00500000, Exp 0.01000000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,246", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 31b86f7b-f6d1-451d-8109-8171e6a3447d, Payment: af58ed1f-c46d-45fc-aafe-ce1f760e95c3, Currency: BTC): Starting check.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,246", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 31b86f7b-f6d1-451d-8109-8171e6a3447d, Payment: af58ed1f-c46d-45fc-aafe-ce1f760e95c3, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,246", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 31b86f7b-f6d1-451d-8109-8171e6a3447d, Payment: af58ed1f-c46d-45fc-aafe-ce1f760e95c3, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,246", "levelname": "CRITICAL", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1075, "message": "PaymentConfirm Check (Order: 31b86f7b-f6d1-451d-8109-8171e6a3447d, Payment: af58ed1f-c46d-45fc-aafe-ce1f760e95c3, Currency: BTC): CRITICAL: Ledger/Order atomic update FAILED during payment confirmation! Error: ['Cannot lock funds']. Transaction rolled back.", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1010, in check_and_confirm_payment\n    lock_success = ledger_service.lock_funds(\n        user=buyer, currency=currency, amount=expected_std, # Lock the required STANDARD order amount\n        related_order=order, notes=f\"Lock funds for Order {order.id} escrow\"\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nledger.services.InsufficientFundsError: ['Cannot lock funds']"}
{"asctime": "2025-04-08 02:56:14,293", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 66b59c13-6470-4e23-8a37-1cbed683dea3 (MarkShipped by test_vendor_escrow): Attempting...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,295", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1190, "message": "Order 66b59c13-6470-4e23-8a37-1cbed683dea3 (MarkShipped by test_vendor_escrow): Tracking info provided but 'tracking_info' field missing on Order model.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,297", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1206, "message": "Order 66b59c13-6470-4e23-8a37-1cbed683dea3 (MarkShipped by test_vendor_escrow): Marked shipped. Status -> shipped. Dispute deadline: 2025-04-15 08:56:14.295297+00:00, Auto-finalize: 2025-04-22 08:56:14.295297+00:00", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,298", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1230, "message": "Order 66b59c13-6470-4e23-8a37-1cbed683dea3 (MarkShipped by test_vendor_escrow): Sent order shipped notification to Buyer test_buyer_escrow.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,342", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 695a1088-20ec-429b-830f-30cd530c1b4e (MarkShipped by test_buyer_escrow): Attempting...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,344", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1126, "message": "Order 695a1088-20ec-429b-830f-30cd530c1b4e (MarkShipped by test_buyer_escrow): Permission denied. User test_buyer_escrow is not the vendor (test_vendor_escrow).", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,385", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order ffac1ec1-3198-46c8-bc94-d17bd0cafdca (MarkShipped by test_vendor_escrow): Attempting...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,386", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1130, "message": "Order ffac1ec1-3198-46c8-bc94-d17bd0cafdca (MarkShipped by test_vendor_escrow): Cannot mark shipped. Invalid status 'pending_payment' (Expected: 'payment_confirmed').", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,430", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 570963ce-64a1-4fa7-90d8-14695ddb9d4b (MarkShipped by test_vendor_escrow): Attempting...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,431", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1144, "message": "Order 570963ce-64a1-4fa7-90d8-14695ddb9d4b (MarkShipped by test_vendor_escrow): Failed to prepare release transaction: Prep Fail", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1138, in mark_order_shipped\n    prepared_release_metadata = _prepare_release(order_locked) # Definition is later in file\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Prep Fail"}
{"asctime": "2025-04-08 02:56:14,477", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order e90c611c-35c3-4d90-99f9-890cb2297d99 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,478", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order e90c611c-35c3-4d90-99f9-890cb2297d99 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,479", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order e90c611c-35c3-4d90-99f9-890cb2297d99 (SignRelease by test_buyer_escrow): Signature applied. Current signers: 1/2. Ready for broadcast: False.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,524", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 3e5b9de5-bbc5-4c92-9ebe-16aea7cd2f85 (SignRelease by test_vendor_escrow): Attempting signature...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,525", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 3e5b9de5-bbc5-4c92-9ebe-16aea7cd2f85 (SignRelease by test_vendor_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,526", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order 3e5b9de5-bbc5-4c92-9ebe-16aea7cd2f85 (SignRelease by test_vendor_escrow): Signature applied. Current signers: 2/2. Ready for broadcast: True.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,526", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1465, "message": "Order 3e5b9de5-bbc5-4c92-9ebe-16aea7cd2f85 (SignRelease by test_vendor_escrow): Sent 'ready for broadcast' notification to test_buyer_escrow.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,572", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 9698225c-704e-4501-aef0-3337a311b39e (SignRelease by test_mod_escrow): Attempting signature...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,574", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1289, "message": "Order 9698225c-704e-4501-aef0-3337a311b39e (SignRelease by test_mod_escrow): Permission denied. User is not buyer or vendor.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,619", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 63b58cab-151e-4b8e-a96d-41ce428c5ebd (SignRelease by test_buyer_escrow): Attempting signature...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,621", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 63b58cab-151e-4b8e-a96d-41ce428c5ebd (SignRelease by test_buyer_escrow): Attempting signature...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,623", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 63b58cab-151e-4b8e-a96d-41ce428c5ebd (SignRelease by test_buyer_escrow): Attempting signature...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,625", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 63b58cab-151e-4b8e-a96d-41ce428c5ebd (SignRelease by test_buyer_escrow): Attempting signature...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,672", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 2c6a54bf-bc5e-4263-8a4e-c3a30daa7fdb (SignRelease by test_buyer_escrow): Attempting signature...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,674", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1321, "message": "Order 2c6a54bf-bc5e-4263-8a4e-c3a30daa7fdb (SignRelease by test_buyer_escrow): User test_buyer_escrow (ID: 59) has already signed this release.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,718", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 3c12fd52-d609-477f-8bff-f8d4f0818db3 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,720", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 3c12fd52-d609-477f-8bff-f8d4f0818db3 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,720", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1425, "message": "Order 3c12fd52-d609-477f-8bff-f8d4f0818db3 (SignRelease by test_buyer_escrow): Crypto signing error: Simulated BTC Sign Failure", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1345, in sign_order_release\n    sign_result = sign_func(\n        psbt_base64=unsigned_crypto_data,  # Map to expected arg name\n        private_key_wif=private_key_info    # Map to expected arg name\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Simulated BTC Sign Failure"}
{"asctime": "2025-04-08 02:56:14,769", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 9ba258e9-539b-490f-bcfb-bb7deabc0599 (BroadcastRelease): Initiating broadcast...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,771", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 9ba258e9-539b-490f-bcfb-bb7deabc0599 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,771", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 9ba258e9-539b-490f-bcfb-bb7deabc0599 (BroadcastRelease): Broadcast successful. Transaction Hash: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,771", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 9ba258e9-539b-490f-bcfb-bb7deabc0599 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,771", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 9ba258e9-539b-490f-bcfb-bb7deabc0599 (BroadcastRelease): Ledger updated. Vendor: 0.00975000 BTC, Fee: 0.00025000 BTC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,821", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 29aae9fc-3e17-480a-946c-58e14e092501 (BroadcastRelease): Initiating broadcast...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,822", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 29aae9fc-3e17-480a-946c-58e14e092501 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_signed_txset)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,822", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 29aae9fc-3e17-480a-946c-58e14e092501 (BroadcastRelease): Broadcast successful. Transaction Hash: xmr_tx_hash_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,823", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 29aae9fc-3e17-480a-946c-58e14e092501 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,823", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 29aae9fc-3e17-480a-946c-58e14e092501 (BroadcastRelease): Ledger updated. Vendor: 0.975000000000 XMR, Fee: 0.025000000000 XMR.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,870", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 804ae00e-b993-46bb-ad6c-762cd6de7646 (BroadcastRelease): Initiating broadcast...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,872", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 804ae00e-b993-46bb-ad6c-762cd6de7646 (BroadcastRelease): Initiating broadcast...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,877", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 804ae00e-b993-46bb-ad6c-762cd6de7646 (BroadcastRelease): Initiating broadcast...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,925", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 0d9c0c66-0e73-4aca-a79c-b87c8b563821 (BroadcastRelease): Initiating broadcast...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,926", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 0d9c0c66-0e73-4aca-a79c-b87c8b563821 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:14,926", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 0d9c0c66-0e73-4aca-a79c-b87c8b563821 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 0d9c0c66-0e73-4aca-a79c-b87c8b563821 (service module returned invalid tx_hash: 'None').", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 0d9c0c66-0e73-4aca-a79c-b87c8b563821 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:56:15,027", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order bafe1e2c-dad3-4d87-b37a-21fa9b2e2ddc (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 100, Notes: 'Full refund....'", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,029", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order bafe1e2c-dad3-4d87-b37a-21fa9b2e2ddc (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.01000000 BTC, Vendor: 0E-8 BTC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,029", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order bafe1e2c-dad3-4d87-b37a-21fa9b2e2ddc (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,029", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order bafe1e2c-dad3-4d87-b37a-21fa9b2e2ddc (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,029", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order bafe1e2c-dad3-4d87-b37a-21fa9b2e2ddc (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,029", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order bafe1e2c-dad3-4d87-b37a-21fa9b2e2ddc (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.01000000, Vendor: 0E-8 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,080", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 7ae6ab31-e783-4823-ac86-345c3c7ba404 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 70, Notes: 'Split 70/30...'", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,082", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 7ae6ab31-e783-4823-ac86-345c3c7ba404 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00700000 BTC, Vendor: 0.00300000 BTC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,082", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 7ae6ab31-e783-4823-ac86-345c3c7ba404 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,082", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 7ae6ab31-e783-4823-ac86-345c3c7ba404 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,083", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 7ae6ab31-e783-4823-ac86-345c3c7ba404 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,083", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 7ae6ab31-e783-4823-ac86-345c3c7ba404 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.00700000, Vendor: 0.00300000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,131", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 30cbfcf5-8558-43d4-a85e-36755a680661 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test notes...'", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,179", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order abe6dcc1-5435-40aa-adae-1014fea58e76 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 101, Notes: 'Test notes...'", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,180", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order abe6dcc1-5435-40aa-adae-1014fea58e76 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: -10, Notes: 'Test notes...'", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,229", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 92de124c-28ee-4592-8c52-31df7a8c9d1a (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test Notes - Crypto Fail Attempt...'", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,230", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 92de124c-28ee-4592-8c52-31df7a8c9d1a (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00500000 BTC, Vendor: 0.00500000 BTC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,230", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 92de124c-28ee-4592-8c52-31df7a8c9d1a (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,230", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order 92de124c-28ee-4592-8c52-31df7a8c9d1a (ResolveDispute by test_mod_escrow): Dispute broadcast error: Crypto dispute broadcast failed for Order 92de124c-28ee-4592-8c52-31df7a8c9d1a (service module returned invalid tx_hash: 'None').", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order 92de124c-28ee-4592-8c52-31df7a8c9d1a (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:56:15,277", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 65e05545-7728-424d-87d6-e3e2b069eb01 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,278", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2244, "message": "Order 65e05545-7728-424d-87d6-e3e2b069eb01 (GetUnsignedTx for test_buyer_escrow): Returning prepared transaction data (Type: btc_psbt). Already Signed: False", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,321", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 1b1fdf7f-182f-42e2-927c-fe5377d5028e (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,322", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2212, "message": "Order 1b1fdf7f-182f-42e2-927c-fe5377d5028e (GetUnsignedTx for test_buyer_escrow): Attempted to get unsigned TX before release initiated.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,323", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 1b1fdf7f-182f-42e2-927c-fe5377d5028e (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,324", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 1b1fdf7f-182f-42e2-927c-fe5377d5028e (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {}", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,324", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 1b1fdf7f-182f-42e2-927c-fe5377d5028e (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,325", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 1b1fdf7f-182f-42e2-927c-fe5377d5028e (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'type': 'btc_psbt', 'signatures': {}}", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,326", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 1b1fdf7f-182f-42e2-927c-fe5377d5028e (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,327", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 1b1fdf7f-182f-42e2-927c-fe5377d5028e (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'data': 'some_data', 'signatures': {}}", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,372", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order d187fbbe-a075-4146-9fa6-e37b66119979 (GetUnsignedTx for test_mod_escrow): Request received.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,373", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2207, "message": "Order d187fbbe-a075-4146-9fa6-e37b66119979 (GetUnsignedTx for test_mod_escrow): Permission denied. User not buyer or vendor.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,416", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 416, "message": "Order 12e1ec9f-32b0-45ce-8192-61410f6da9ea (TimeoutCheck): Payment deadline 2025-04-08 07:56:15.415874+00:00 passed. Attempting cancellation.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,416", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 429, "message": "Order 12e1ec9f-32b0-45ce-8192-61410f6da9ea (TimeoutCheck): Successfully cancelled due to payment timeout. Status -> cancelled_timeout", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,416", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 430, "message": "Order 12e1ec9f-32b0-45ce-8192-61410f6da9ea automatically cancelled due to payment timeout.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,504", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 1755b9af-7837-4e34-b92f-d4c09d517cd2 (BroadcastRelease): Initiating broadcast...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,505", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,507", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 1755b9af-7837-4e34-b92f-d4c09d517cd2 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,507", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 1755b9af-7837-4e34-b92f-d4c09d517cd2 (BroadcastRelease): Broadcast successful. Transaction Hash: aaa_int_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,508", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 1755b9af-7837-4e34-b92f-d4c09d517cd2 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,509", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 2a84f7ae-718d-468b-9f1a-9f6a62525dde recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,510", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 1b91a432-92a8-4680-af8b-017da7f9dc01 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,510", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 1755b9af-7837-4e34-b92f-d4c09d517cd2 (BroadcastRelease): Ledger updated. Vendor: 0.01960000 BTC, Fee: 0.00040000 BTC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,555", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 3fbffbc2-02be-4e7b-805d-9909c1d44472 (BroadcastRelease): Initiating broadcast...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,555", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,557", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 3fbffbc2-02be-4e7b-805d-9909c1d44472 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_unsigned_txset)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,557", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 3fbffbc2-02be-4e7b-805d-9909c1d44472 (BroadcastRelease): Broadcast successful. Transaction Hash: bbb_int_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,558", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 3fbffbc2-02be-4e7b-805d-9909c1d44472 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,559", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 8544e144-97af-4779-8b92-6f0e7dde0917 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,560", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 790f6095-4392-4733-b417-80d1f5929a94 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,560", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 3fbffbc2-02be-4e7b-805d-9909c1d44472 (BroadcastRelease): Ledger updated. Vendor: 1.462500000000 XMR, Fee: 0.037500000000 XMR.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,599", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 461780dd-8247-4ae4-a354-3b48e71029c2 (BroadcastRelease): Initiating broadcast...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,600", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,601", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 461780dd-8247-4ae4-a354-3b48e71029c2 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,601", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 461780dd-8247-4ae4-a354-3b48e71029c2 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 461780dd-8247-4ae4-a354-3b48e71029c2 (service module returned invalid tx_hash: 'None').", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 461780dd-8247-4ae4-a354-3b48e71029c2 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:56:15,644", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 1655be2f-8cf0-44ff-8ff6-ee85afd77ec6 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 30, Notes: 'Split decision: 30% to buyer...'", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,645", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,646", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 1655be2f-8cf0-44ff-8ff6-ee85afd77ec6 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.00600000 BTC, Vendor: 0.01400000 BTC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,646", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 1655be2f-8cf0-44ff-8ff6-ee85afd77ec6 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,646", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 1655be2f-8cf0-44ff-8ff6-ee85afd77ec6 (ResolveDispute by test_mod_int): Dispute transaction broadcast successful. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,647", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 1655be2f-8cf0-44ff-8ff6-ee85afd77ec6 (ResolveDispute by test_mod_int): Order state saved successfully. Proceeding to ledger updates.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,648", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction bb001265-3325-4e2e-8e3a-a41aa560a904 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,649", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction a37f0d71-4bca-4f3d-ad57-20d72d65ad62 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,649", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 1655be2f-8cf0-44ff-8ff6-ee85afd77ec6 (ResolveDispute by test_mod_int): Ledger updated. Buyer: 0.00600000, Vendor: 0.01400000 BTC. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,692", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order c6f7241d-ead0-4573-8811-236157345d63 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 50, Notes: 'Attempted resolution...'", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,693", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,694", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order c6f7241d-ead0-4573-8811-236157345d63 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.01000000 BTC, Vendor: 0.01000000 BTC.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,694", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order c6f7241d-ead0-4573-8811-236157345d63 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 02:56:15,694", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order c6f7241d-ead0-4573-8811-236157345d63 (ResolveDispute by test_mod_int): Dispute broadcast error: Crypto dispute broadcast failed for Order c6f7241d-ead0-4573-8811-236157345d63 (service module returned invalid tx_hash: 'None').", "process": 5492, "thread": 396, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order c6f7241d-ead0-4573-8811-236157345d63 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 02:56:15,732", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 5492, "thread": 396}
{"asctime": "2025-04-08 03:07:13,463", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,464", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 55b6e064-b538-413e-b6b3-6956a8872019 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,468", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 7150258f-d005-45b2-b64a-b8ec1038970a recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,472", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 13be86d9-3c7d-4299-a5b4-f8054c84cdef recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,476", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 202, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,481", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,503", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,509", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,516", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,521", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,524", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,528", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,533", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,537", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,540", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,544", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,547", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,581", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 486, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: Test lock", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,582", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 513, "message": "Ledger transaction 0f545367-5de6-47ae-9b5c-d23bf4df1a9c recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,585", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 465, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,591", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 448, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,595", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: Test unlock", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,595", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction 59ec271b-1d96-4963-a030-6ea1548bbb19 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,600", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 592, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,601", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: Test unlock more", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,601", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction 3cbf9317-187a-416d-932f-c27135f57afb recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,605", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 587, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,611", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 566, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,615", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction f407b13f-d4d7-43db-87d6-eb2f79c8c38f recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,620", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction ebd00c07-9cc9-47ec-9b82-d6611ca736ed recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,624", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction c699776e-95fd-4b10-bae9-6f7f4b149282 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,656", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 295, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,672", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,672", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 482, "message": "[get_market_btc_key] Market BTC key pubkey matches settings (031b7a7e8e...).", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,672", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 489, "message": "[get_market_btc_key] Successfully loaded and cached market BTC key from Vault (PubKey starts with: 031b7a7e8e...).", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,675", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,675", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 454, "message": "[get_market_btc_key] Vault returned invalid data for key 'market_btc_multisig_key': None", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,737", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1547, "message": "Deprecated function `process_btc_withdrawal` called. Use Ledger system.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,741", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1550, "message": "Deprecated function `process_escrow_release` called. Use Taproot multi-sig workflow (prepare/sign/finalize/broadcast).", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,782", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,784", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,786", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,788", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,790", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,792", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,795", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,795", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 341, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-08 03:07:13,797", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,801", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-08 03:07:13,805", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-08 03:07:13,810", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,810", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,811", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-08 03:07:13,814", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-08 03:07:13,818", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,818", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,820", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,823", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,825", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-08 03:07:13,829", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-08 03:07:13,835", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-08 03:07:13,840", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,842", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: c607a725924b137b)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,842", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: c607a725924b137b): 4LdpnMo9wPESgQ4...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,845", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,845", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,845", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,848", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: c607a725924b137b)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,848", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: c607a725924b137b): Timeout", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,852", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: c607a725924b137b)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,852", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: c607a725924b137b): Monero RPC Error (Code: -5): RPC Failed", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,854", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: c607a725924b137b)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,854", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: c607a725924b137b). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,856", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,856", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,858", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: c607a725924b137b)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,858", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: c607a725924b137b) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,860", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,860", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,861", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,864", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,864", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,867", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,867", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,869", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,869", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,871", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,871", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '01348b83d7cefd6379d7b2a0813d9c019f4276f7f508ee1697667efca57149a571643bf4e5ea87e04e3a83e72fc48514d8313fb3ac26585ac5c61035360f8ed7490884e1165abb6c8a5bbaf2218069754366cf62b18a93f0e9516173513facf0b375261f5e4ec34864cc9047090a1b43b172a553917bce710d6ae5ae3474532c'}", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,875", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,875", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,875", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 2940, "thread": 1528, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-08 03:07:13,876", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,876", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,878", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,878", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,878", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,878", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '7ea3ce2fd826ba8e224b9ab97be5815a5a97aa62a7d2b62fe30b632720e5d7dda7edf1f7954f2aeabfc3dd5fbb288d18271be81a759fa5337615f6aec0a8b55cc0b5b738a6bfb8ed3a1f0b3f8b9c5815ad6451f5a44885ef8ac0fe7133c2ba5b6582ae361c75b6a0443ba2af363a143fc11c4c065176bab5c7242950b40f4346088f3497fe4db97f5eda3a448bf5bed8bb773afd3ad07e89439f4a71ed299d4e33e7bbab9ae56d8744affebf6f3762f0d633869524c05fd79414a2bddc048b730907d458ab855393e226d86b48d7c965ff670411fa91c9f97b16a6e0be853aee154cc5ab6785b1a3af7d5cbed5d2b07e6f29e8a9a85d502c443fa8e5d8911e38'}", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,879", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 2940, "thread": 1528, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 03:07:13,879", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,879", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,882", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,882", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,882", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,882", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 2940, "thread": 1528, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 03:07:13,882", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,883", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,884", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,885", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,885", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,885", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 2940, "thread": 1528, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 03:07:13,885", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,885", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,888", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,888", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,888", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,898", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,899", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-08 03:07:13,903", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,903", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,904", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-08 03:07:13,906", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,906", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,909", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,909", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,909", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,910", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,912", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,912", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,913", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,915", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,915", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,916", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,916", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,918", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,918", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,920", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,920", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,920", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,920", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,922", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,922", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,923", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 03:07:13,925", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,925", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 03:07:13,929", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,929", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,931", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,932", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,932", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-08 03:07:13,934", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,935", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,937", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,937", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,937", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,937", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,939", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,939", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,939", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,939", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,941", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,942", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,942", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: d135c99e3054a889abbe6293b6d6284424e7820301f456b374cbe21265dc6872", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,942", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,945", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,948", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,951", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,951", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,951", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: d135c99e3054a889abbe6293b6d6284424e7820301f456b374cbe21265dc6872", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,954", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,954", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,957", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,957", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,960", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,960", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,960", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,963", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,963", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,963", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,966", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,966", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,966", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,969", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,969", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,969", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,972", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,972", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,972", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,975", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,975", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: d135c99e3054a889abbe6293b6d6284424e7820301f456b374cbe21265dc6872, Fee: 0.000543210000 XMR (543210000 pico)", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,978", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,979", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,979", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,979", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,979", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,982", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: ca38762b...): Failed to get daemon height. Cannot calculate confirmations.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,991", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: ca38762b...): Skipping entry 0: TXID d135c99e3054a889abbe6293b6d6284424e7820301f456b374cbe21265dc6872 already processed.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,994", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:13,997", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,000", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,006", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: ca38762b...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-08 03:07:14,011", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: ca38762b...): Found candidate! TXID: d135c99e3054a889abbe6293b6d6284424e7820301f456b374cbe21265dc6872, Amt: 1.234567890123 XMR, Confs: 11.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,011", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: ca38762b...): Confirmed payment found.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,015", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,015", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,015", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,015", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-08 03:07:14,017", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,019", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,020", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,020", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,020", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: d135c99e3054a889abbe6293b6d6284424e7820301f456b374cbe21265dc6872, Fee: 0.000678900000 XMR (678900000 pico)", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,022", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,022", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,022", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,022", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,022", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,022", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,022", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,022", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,025", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,029", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,029", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,030", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,030", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 03:07:14,032", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,033", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 03:07:14,035", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,038", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,039", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,039", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 03:07:14,040", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 03:07:14,042", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,044", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,044", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,045", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,045", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: d135c99e3054a889abbe6293b6d6284424e7820301f456b374cbe21265dc6872, Fee: 0.000777700000 XMR (777700000 pico)", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,045", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,047", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,047", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,048", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,048", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: d135c99e3054a889abbe6293b6d6284424e7820301f456b374cbe21265dc6872, Fee: 0.000888800000 XMR (888800000 pico)", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,048", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,050", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,050", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,050", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,050", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,051", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,051", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,053", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,554", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,554", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:14,559", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:15,060", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:15,060", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:15,066", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/3): Timeout 1. Retrying in 0.5s...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:15,567", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/3): Refused 2. Retrying in 0.5s...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,073", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 401 (Authentication failed? Check RPC User/Password). Response: Unauthorized", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 03:07:16,083", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 500. Response: Internal Server Error", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 03:07:16,092", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-08 03:07:16,095", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 267, "message": "Monero RPC (Wallet - Method: some_method): RPC returned error: Code=-4, Message=Invalid params", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,109", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,110", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='1565114211632'>", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,118", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,125", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,126", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='1565114211296'>", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,132", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,142", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,142", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,149", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,149", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,157", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,157", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,157", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,165", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: WRONG_FINGERPRINT_XXXXXXXXXXXXXXXXXXXXXXXX, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: True, Status: signature valid", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,165", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: WRONG_FINGERPRINT_XXXXXXXXXXXXXXXXXXXXXXXX.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,165", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,174", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,174", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,174", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,179", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,188", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,188", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,203", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,203", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-08 03:07:16,210", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,217", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,217", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-08 03:07:16,227", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,227", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,235", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,235", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,242", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,242", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,255", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 387, "message": "User test_vendor_escrow missing valid withdrawal address in field 'btc_withdrawal_address' for currency BTC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,298", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 4e67a1d3-ea20-4a86-a74c-16ef8518735e (BTC): Initiating multi-sig escrow setup...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,301", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_test_user' loaded and cached.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,301", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 661, "message": "Order 4e67a1d3-ea20-4a86-a74c-16ef8518735e (BTC): BTC multisig details missing expected redeem/witness script.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,301", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 4e67a1d3-ea20-4a86-a74c-16ef8518735e (BTC): Generated BTC Escrow Address: tb1qw508d6qejxt...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,301", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 4e67a1d3-ea20-4a86-a74c-16ef8518735e (BTC): Created CryptoPayment 4aed839c-8493-4c1c-987c-3f564c0fe653 (Multi-sig). Expected Atomic: 1000000", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,302", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 4e67a1d3-ea20-4a86-a74c-16ef8518735e (BTC): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 09:07:16.301835+00:00. Awaiting payment to tb1qw508d6qejxt...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,302", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 4e67a1d3-ea20-4a86-a74c-16ef8518735e (BTC): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,342", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 998b5cfd-ec77-4113-9a5d-467bad0b893a (XMR): Initiating multi-sig escrow setup...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,343", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 998b5cfd-ec77-4113-9a5d-467bad0b893a (XMR): Generated XMR Escrow Address: xmr_multisig_ad...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,344", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 998b5cfd-ec77-4113-9a5d-467bad0b893a (XMR): Created CryptoPayment 1cfbd777-2105-4e01-94f1-32c86a0a2049 (Multi-sig). Expected Atomic: 1000000000000", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,344", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 998b5cfd-ec77-4113-9a5d-467bad0b893a (XMR): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 09:07:16.344411+00:00. Awaiting payment to xmr_multisig_ad...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,345", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 998b5cfd-ec77-4113-9a5d-467bad0b893a (XMR): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,388", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 1254437b-9b3a-4d3a-b1e1-1bf232ace4ed (BTC): Initiating multi-sig escrow setup...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,389", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 537, "message": "Order 1254437b-9b3a-4d3a-b1e1-1bf232ace4ed (BTC): Cannot create escrow details. Status: 'shipped' (Expected: 'pending_payment').", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,429", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order f3c24459-0df5-4810-9323-409a5c62dc18 (LTC): Initiating multi-sig escrow setup...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,431", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 607, "message": "Order f3c24459-0df5-4810-9323-409a5c62dc18 (LTC): Failed to gather participant info: Multisig key attribute mapping not found for currency LTC.", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 581, in create_escrow_for_order\n    raise ValueError(f\"Multisig key attribute mapping not found for currency {currency}.\")\nValueError: Multisig key attribute mapping not found for currency LTC."}
{"asctime": "2025-04-08 03:07:16,472", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 2d54166a-0003-4976-8d80-2f05483f5095 (BTC): Initiating multi-sig escrow setup...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,473", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 2d54166a-0003-4976-8d80-2f05483f5095 (BTC): Crypto service error during BTC escrow generation: BTC Gen Failed", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 639, in create_escrow_for_order\n    msig_details = crypto_service_module.create_btc_multisig_address(\n        participant_pubkeys_hex=participant_infos, # Use expected kwarg name\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: BTC Gen Failed"}
{"asctime": "2025-04-08 03:07:16,519", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 826f9ce9-5f80-4c1c-a177-f5932ec3efd2 (XMR): Initiating multi-sig escrow setup...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,520", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 826f9ce9-5f80-4c1c-a177-f5932ec3efd2 (XMR): Crypto service error during XMR escrow generation: XMR Wallet Gen Failed", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 621, in create_escrow_for_order\n    msig_details = crypto_service_module.create_monero_multisig_wallet(\n        participant_infos=participant_infos, # Use keyword arg for clarity\n        order_guid=str(order.id),           # Use keyword arg 'order_guid'\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: XMR Wallet Gen Failed"}
{"asctime": "2025-04-08 03:07:16,568", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 49d3217c-1548-492d-b7d9-be8a9773ebe0, Payment: 946ee775-d1fc-4738-8b8e-29a228af143c, Currency: BTC): Starting check.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,568", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 49d3217c-1548-492d-b7d9-be8a9773ebe0, Payment: 946ee775-d1fc-4738-8b8e-29a228af143c, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,569", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 49d3217c-1548-492d-b7d9-be8a9773ebe0, Payment: 946ee775-d1fc-4738-8b8e-29a228af143c, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,570", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1052, "message": "PaymentConfirm Check (Order: 49d3217c-1548-492d-b7d9-be8a9773ebe0, Payment: 946ee775-d1fc-4738-8b8e-29a228af143c, Currency: BTC): Ledger updated (incl. deposit fee) & Order status -> payment_confirmed. TXID: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,570", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1067, "message": "PaymentConfirm Check (Order: 49d3217c-1548-492d-b7d9-be8a9773ebe0, Payment: 946ee775-d1fc-4738-8b8e-29a228af143c, Currency: BTC): Sent payment confirmation notification to Vendor test_vendor_escrow.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,615", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 9a260409-ab69-43c3-84fc-6ee5fd0bd056, Payment: e6649b3a-4416-40e1-8650-d9aac85f1ab2, Currency: BTC): Starting check.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,662", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 917, "message": "Order 5f96a82e-01eb-44ad-bf81-564a8d7fb2b4 cancelled due to underpayment. Rcvd 0.00500000, Exp 0.01000000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,708", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 60970b21-bf2c-4bcf-b1e1-7a4032add154, Payment: 244bca0e-c24c-4049-ab4a-e27d349fba70, Currency: BTC): Starting check.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,708", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 60970b21-bf2c-4bcf-b1e1-7a4032add154, Payment: 244bca0e-c24c-4049-ab4a-e27d349fba70, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,708", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 60970b21-bf2c-4bcf-b1e1-7a4032add154, Payment: 244bca0e-c24c-4049-ab4a-e27d349fba70, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,708", "levelname": "CRITICAL", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1075, "message": "PaymentConfirm Check (Order: 60970b21-bf2c-4bcf-b1e1-7a4032add154, Payment: 244bca0e-c24c-4049-ab4a-e27d349fba70, Currency: BTC): CRITICAL: Ledger/Order atomic update FAILED during payment confirmation! Error: ['Cannot lock funds']. Transaction rolled back.", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1010, in check_and_confirm_payment\n    lock_success = ledger_service.lock_funds(\n        user=buyer, currency=currency, amount=expected_std, # Lock the required STANDARD order amount\n        related_order=order, notes=f\"Lock funds for Order {order.id} escrow\"\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nledger.services.InsufficientFundsError: ['Cannot lock funds']"}
{"asctime": "2025-04-08 03:07:16,755", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 653e8003-8a47-4e4d-bdc1-d0d7cbb40ee7 (MarkShipped by test_vendor_escrow): Attempting...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,756", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1190, "message": "Order 653e8003-8a47-4e4d-bdc1-d0d7cbb40ee7 (MarkShipped by test_vendor_escrow): Tracking info provided but 'tracking_info' field missing on Order model.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,758", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1206, "message": "Order 653e8003-8a47-4e4d-bdc1-d0d7cbb40ee7 (MarkShipped by test_vendor_escrow): Marked shipped. Status -> shipped. Dispute deadline: 2025-04-15 09:07:16.756414+00:00, Auto-finalize: 2025-04-22 09:07:16.756414+00:00", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,758", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1230, "message": "Order 653e8003-8a47-4e4d-bdc1-d0d7cbb40ee7 (MarkShipped by test_vendor_escrow): Sent order shipped notification to Buyer test_buyer_escrow.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,803", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 58fef25b-bd29-441a-a4ab-ac32b0dc1653 (MarkShipped by test_buyer_escrow): Attempting...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,804", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1126, "message": "Order 58fef25b-bd29-441a-a4ab-ac32b0dc1653 (MarkShipped by test_buyer_escrow): Permission denied. User test_buyer_escrow is not the vendor (test_vendor_escrow).", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,845", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 46d95531-1902-4099-a657-b47d9e770e32 (MarkShipped by test_vendor_escrow): Attempting...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,846", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1130, "message": "Order 46d95531-1902-4099-a657-b47d9e770e32 (MarkShipped by test_vendor_escrow): Cannot mark shipped. Invalid status 'pending_payment' (Expected: 'payment_confirmed').", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,889", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order e646462c-1058-4cd7-9721-b0f70f25c3a8 (MarkShipped by test_vendor_escrow): Attempting...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,890", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1144, "message": "Order e646462c-1058-4cd7-9721-b0f70f25c3a8 (MarkShipped by test_vendor_escrow): Failed to prepare release transaction: Prep Fail", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1138, in mark_order_shipped\n    prepared_release_metadata = _prepare_release(order_locked) # Definition is later in file\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Prep Fail"}
{"asctime": "2025-04-08 03:07:16,937", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 4e1c0a87-98cb-4aa3-8a0d-758ce1278bac (SignRelease by test_buyer_escrow): Attempting signature...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,938", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 4e1c0a87-98cb-4aa3-8a0d-758ce1278bac (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,939", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order 4e1c0a87-98cb-4aa3-8a0d-758ce1278bac (SignRelease by test_buyer_escrow): Signature applied. Current signers: 1/2. Ready for broadcast: False.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,985", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 76e96235-cc5a-4315-a40a-efe5fa9bf6a7 (SignRelease by test_vendor_escrow): Attempting signature...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,986", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 76e96235-cc5a-4315-a40a-efe5fa9bf6a7 (SignRelease by test_vendor_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,987", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order 76e96235-cc5a-4315-a40a-efe5fa9bf6a7 (SignRelease by test_vendor_escrow): Signature applied. Current signers: 2/2. Ready for broadcast: True.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:16,987", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1465, "message": "Order 76e96235-cc5a-4315-a40a-efe5fa9bf6a7 (SignRelease by test_vendor_escrow): Sent 'ready for broadcast' notification to test_buyer_escrow.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,035", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order cfd0bbfa-0e82-4d58-8b17-61021697d5bb (SignRelease by test_mod_escrow): Attempting signature...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,036", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1289, "message": "Order cfd0bbfa-0e82-4d58-8b17-61021697d5bb (SignRelease by test_mod_escrow): Permission denied. User is not buyer or vendor.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,080", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order f9e2147e-259d-43a1-8821-7cc413fffb43 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,082", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order f9e2147e-259d-43a1-8821-7cc413fffb43 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,083", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order f9e2147e-259d-43a1-8821-7cc413fffb43 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,085", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order f9e2147e-259d-43a1-8821-7cc413fffb43 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,131", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 5b9f1b84-2a29-4498-8c23-e7f4576bf91b (SignRelease by test_buyer_escrow): Attempting signature...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,132", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1321, "message": "Order 5b9f1b84-2a29-4498-8c23-e7f4576bf91b (SignRelease by test_buyer_escrow): User test_buyer_escrow (ID: 59) has already signed this release.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,178", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 515e4e5c-8eea-42fd-a13a-c5642907fe3f (SignRelease by test_buyer_escrow): Attempting signature...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,180", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 515e4e5c-8eea-42fd-a13a-c5642907fe3f (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,180", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1425, "message": "Order 515e4e5c-8eea-42fd-a13a-c5642907fe3f (SignRelease by test_buyer_escrow): Crypto signing error: Simulated BTC Sign Failure", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1345, in sign_order_release\n    sign_result = sign_func(\n        psbt_base64=unsigned_crypto_data,  # Map to expected arg name\n        private_key_wif=private_key_info    # Map to expected arg name\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Simulated BTC Sign Failure"}
{"asctime": "2025-04-08 03:07:17,230", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order ea6068e7-0967-4f35-a70e-872cc84237fb (BroadcastRelease): Initiating broadcast...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,231", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order ea6068e7-0967-4f35-a70e-872cc84237fb (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,232", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order ea6068e7-0967-4f35-a70e-872cc84237fb (BroadcastRelease): Broadcast successful. Transaction Hash: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,232", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order ea6068e7-0967-4f35-a70e-872cc84237fb (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,232", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order ea6068e7-0967-4f35-a70e-872cc84237fb (BroadcastRelease): Ledger updated. Vendor: 0.00975000 BTC, Fee: 0.00025000 BTC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,280", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 63d55235-ea91-4b0e-bbaa-9441c54dc8ef (BroadcastRelease): Initiating broadcast...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,282", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 63d55235-ea91-4b0e-bbaa-9441c54dc8ef (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_signed_txset)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,282", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 63d55235-ea91-4b0e-bbaa-9441c54dc8ef (BroadcastRelease): Broadcast successful. Transaction Hash: xmr_tx_hash_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,282", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 63d55235-ea91-4b0e-bbaa-9441c54dc8ef (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,283", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 63d55235-ea91-4b0e-bbaa-9441c54dc8ef (BroadcastRelease): Ledger updated. Vendor: 0.975000000000 XMR, Fee: 0.025000000000 XMR.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,329", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 5df106f7-fb0f-4640-a4b6-1bc516c81c90 (BroadcastRelease): Initiating broadcast...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,331", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 5df106f7-fb0f-4640-a4b6-1bc516c81c90 (BroadcastRelease): Initiating broadcast...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,336", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 5df106f7-fb0f-4640-a4b6-1bc516c81c90 (BroadcastRelease): Initiating broadcast...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,384", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 0c2cb92c-0536-4938-b996-39c308aade84 (BroadcastRelease): Initiating broadcast...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,385", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 0c2cb92c-0536-4938-b996-39c308aade84 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,385", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 0c2cb92c-0536-4938-b996-39c308aade84 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 0c2cb92c-0536-4938-b996-39c308aade84 (service module returned invalid tx_hash: 'None').", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 0c2cb92c-0536-4938-b996-39c308aade84 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:07:17,484", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 18e80def-49bc-46a5-a886-fef1f8135373 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 100, Notes: 'Full refund....'", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,485", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 18e80def-49bc-46a5-a886-fef1f8135373 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.01000000 BTC, Vendor: 0E-8 BTC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,485", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 18e80def-49bc-46a5-a886-fef1f8135373 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,485", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 18e80def-49bc-46a5-a886-fef1f8135373 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,486", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 18e80def-49bc-46a5-a886-fef1f8135373 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,486", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 18e80def-49bc-46a5-a886-fef1f8135373 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.01000000, Vendor: 0E-8 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,536", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 0032325d-7254-46a1-a2a0-d83182536721 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 70, Notes: 'Split 70/30...'", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,538", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 0032325d-7254-46a1-a2a0-d83182536721 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00700000 BTC, Vendor: 0.00300000 BTC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,538", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 0032325d-7254-46a1-a2a0-d83182536721 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,538", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 0032325d-7254-46a1-a2a0-d83182536721 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,538", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 0032325d-7254-46a1-a2a0-d83182536721 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,538", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 0032325d-7254-46a1-a2a0-d83182536721 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.00700000, Vendor: 0.00300000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,586", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order af4f9cfb-24bb-4e78-a34f-81af2bd5c323 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test notes...'", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,638", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order c603be85-3164-461f-b52d-db0e35ee2141 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 101, Notes: 'Test notes...'", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,639", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order c603be85-3164-461f-b52d-db0e35ee2141 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: -10, Notes: 'Test notes...'", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,688", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order af19e7c6-cdde-4c93-9c15-c77ca65b30cd (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test Notes - Crypto Fail Attempt...'", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,689", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order af19e7c6-cdde-4c93-9c15-c77ca65b30cd (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00500000 BTC, Vendor: 0.00500000 BTC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,689", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order af19e7c6-cdde-4c93-9c15-c77ca65b30cd (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,689", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order af19e7c6-cdde-4c93-9c15-c77ca65b30cd (ResolveDispute by test_mod_escrow): Dispute broadcast error: Crypto dispute broadcast failed for Order af19e7c6-cdde-4c93-9c15-c77ca65b30cd (service module returned invalid tx_hash: 'None').", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order af19e7c6-cdde-4c93-9c15-c77ca65b30cd (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:07:17,734", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 38b2b19e-0327-4a68-8f99-b44a8176c615 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,736", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2244, "message": "Order 38b2b19e-0327-4a68-8f99-b44a8176c615 (GetUnsignedTx for test_buyer_escrow): Returning prepared transaction data (Type: btc_psbt). Already Signed: False", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,780", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 3f1c8098-e62a-401e-b890-bfc7a31f71f8 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,782", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2212, "message": "Order 3f1c8098-e62a-401e-b890-bfc7a31f71f8 (GetUnsignedTx for test_buyer_escrow): Attempted to get unsigned TX before release initiated.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,782", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 3f1c8098-e62a-401e-b890-bfc7a31f71f8 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,783", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 3f1c8098-e62a-401e-b890-bfc7a31f71f8 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {}", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,784", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 3f1c8098-e62a-401e-b890-bfc7a31f71f8 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,785", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 3f1c8098-e62a-401e-b890-bfc7a31f71f8 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'type': 'btc_psbt', 'signatures': {}}", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,785", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 3f1c8098-e62a-401e-b890-bfc7a31f71f8 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,786", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 3f1c8098-e62a-401e-b890-bfc7a31f71f8 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'data': 'some_data', 'signatures': {}}", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,833", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 2dfe3abd-a8f5-4ebf-9433-2b1040c06876 (GetUnsignedTx for test_mod_escrow): Request received.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,834", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2207, "message": "Order 2dfe3abd-a8f5-4ebf-9433-2b1040c06876 (GetUnsignedTx for test_mod_escrow): Permission denied. User not buyer or vendor.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,876", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 416, "message": "Order b43f6f5a-c494-4f06-9b76-b5a92ddf3786 (TimeoutCheck): Payment deadline 2025-04-08 08:07:17.876111+00:00 passed. Attempting cancellation.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,876", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 429, "message": "Order b43f6f5a-c494-4f06-9b76-b5a92ddf3786 (TimeoutCheck): Successfully cancelled due to payment timeout. Status -> cancelled_timeout", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,877", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 430, "message": "Order b43f6f5a-c494-4f06-9b76-b5a92ddf3786 automatically cancelled due to payment timeout.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,963", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 117d1df5-755b-467a-9c68-fb3ff988c795 (BroadcastRelease): Initiating broadcast...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,964", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,965", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 117d1df5-755b-467a-9c68-fb3ff988c795 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,966", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 117d1df5-755b-467a-9c68-fb3ff988c795 (BroadcastRelease): Broadcast successful. Transaction Hash: aaa_int_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,967", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 117d1df5-755b-467a-9c68-fb3ff988c795 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,968", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction fa22ab75-ef51-44ad-b8e1-a3d0dfb6a18f recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,969", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 5834923d-4d0f-4f0a-bf20-ee9803067870 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:17,969", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 117d1df5-755b-467a-9c68-fb3ff988c795 (BroadcastRelease): Ledger updated. Vendor: 0.01960000 BTC, Fee: 0.00040000 BTC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,014", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 1587163e-f526-435d-9320-1bc2ab8a6605 (BroadcastRelease): Initiating broadcast...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,015", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,016", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 1587163e-f526-435d-9320-1bc2ab8a6605 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_unsigned_txset)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,016", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 1587163e-f526-435d-9320-1bc2ab8a6605 (BroadcastRelease): Broadcast successful. Transaction Hash: bbb_int_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,017", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 1587163e-f526-435d-9320-1bc2ab8a6605 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,018", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction a17d5636-9787-4da0-9b9c-69608c9322eb recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,019", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 64e85c6e-6b8c-47fd-8f1c-ccd7fea40d68 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,019", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 1587163e-f526-435d-9320-1bc2ab8a6605 (BroadcastRelease): Ledger updated. Vendor: 1.462500000000 XMR, Fee: 0.037500000000 XMR.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,059", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 9bd5ee30-16f7-4804-afb1-d31cc5b07f85 (BroadcastRelease): Initiating broadcast...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,059", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,061", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 9bd5ee30-16f7-4804-afb1-d31cc5b07f85 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,061", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 9bd5ee30-16f7-4804-afb1-d31cc5b07f85 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 9bd5ee30-16f7-4804-afb1-d31cc5b07f85 (service module returned invalid tx_hash: 'None').", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 9bd5ee30-16f7-4804-afb1-d31cc5b07f85 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:07:18,103", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 835187c8-57bb-4a4c-9695-e70e7fba360a (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 30, Notes: 'Split decision: 30% to buyer...'", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,105", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,106", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 835187c8-57bb-4a4c-9695-e70e7fba360a (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.00600000 BTC, Vendor: 0.01400000 BTC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,106", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 835187c8-57bb-4a4c-9695-e70e7fba360a (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,106", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 835187c8-57bb-4a4c-9695-e70e7fba360a (ResolveDispute by test_mod_int): Dispute transaction broadcast successful. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,108", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 835187c8-57bb-4a4c-9695-e70e7fba360a (ResolveDispute by test_mod_int): Order state saved successfully. Proceeding to ledger updates.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,109", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 9ad8b057-13af-4ce3-9d19-5f64a49b0f81 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,109", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 0c6d2c4c-7315-445b-b458-b67b1bec5a16 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,109", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 835187c8-57bb-4a4c-9695-e70e7fba360a (ResolveDispute by test_mod_int): Ledger updated. Buyer: 0.00600000, Vendor: 0.01400000 BTC. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,156", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 692feaed-98f7-4da5-b17f-82c2017c9e79 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 50, Notes: 'Attempted resolution...'", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,156", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,158", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 692feaed-98f7-4da5-b17f-82c2017c9e79 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.01000000 BTC, Vendor: 0.01000000 BTC.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,158", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 692feaed-98f7-4da5-b17f-82c2017c9e79 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:07:18,158", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order 692feaed-98f7-4da5-b17f-82c2017c9e79 (ResolveDispute by test_mod_int): Dispute broadcast error: Crypto dispute broadcast failed for Order 692feaed-98f7-4da5-b17f-82c2017c9e79 (service module returned invalid tx_hash: 'None').", "process": 2940, "thread": 1528, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order 692feaed-98f7-4da5-b17f-82c2017c9e79 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:07:18,196", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 2940, "thread": 1528}
{"asctime": "2025-04-08 03:13:01,101", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,102", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction ae6bffe0-4d28-4f4d-9a35-0556e79101ae recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,106", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction efcb8e4c-5817-4191-b753-cf174ce21262 recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,110", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 043ada70-b51f-422a-8b1d-16ebdcdcd12e recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,115", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 202, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,119", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,123", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,125", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,129", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,131", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,134", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,137", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,139", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,142", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,146", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,151", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,154", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,195", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 486, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: Test lock", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,195", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 513, "message": "Ledger transaction afcb4f96-1350-4bab-b4eb-9ee2579baa4b recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,199", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 465, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,207", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 448, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,212", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: Test unlock", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,212", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction 2d511e58-89f9-4279-858e-588d191336b5 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,217", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 592, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,217", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: Test unlock more", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,218", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction 781f6e6f-68b3-4ae1-83a3-234b7474454e recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,222", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 587, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,229", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 566, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,235", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 59f4377d-3f54-489f-a120-1943b07fda7e recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,241", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 6581a9de-11f7-4e69-a9a2-39f4ba36b560 recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,246", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 72909f47-38f5-414a-8d4a-7c472d2e6597 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,275", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 295, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,294", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,294", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 482, "message": "[get_market_btc_key] Market BTC key pubkey matches settings (031b7a7e8e...).", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,294", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 489, "message": "[get_market_btc_key] Successfully loaded and cached market BTC key from Vault (PubKey starts with: 031b7a7e8e...).", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,298", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,298", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 454, "message": "[get_market_btc_key] Vault returned invalid data for key 'market_btc_multisig_key': None", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,364", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1547, "message": "Deprecated function `process_btc_withdrawal` called. Use Ledger system.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,368", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1550, "message": "Deprecated function `process_escrow_release` called. Use Taproot multi-sig workflow (prepare/sign/finalize/broadcast).", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,407", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,408", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,410", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,411", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,413", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,416", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,418", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,418", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 341, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-08 03:13:01,421", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,426", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-08 03:13:01,431", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-08 03:13:01,437", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,437", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,439", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-08 03:13:01,444", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-08 03:13:01,448", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,448", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,451", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,452", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,454", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-08 03:13:01,459", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-08 03:13:01,463", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-08 03:13:01,467", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,470", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 848f006fe30ec052)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,470", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 848f006fe30ec052): 4LdpnMo9wPESgQ4...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,472", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,472", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,472", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,474", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 848f006fe30ec052)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,475", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 848f006fe30ec052): Timeout", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,477", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 848f006fe30ec052)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,477", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 848f006fe30ec052): Monero RPC Error (Code: -5): RPC Failed", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,478", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 848f006fe30ec052)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,479", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 848f006fe30ec052). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,480", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,480", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,482", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 848f006fe30ec052)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,482", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 848f006fe30ec052) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,484", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,485", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,485", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,489", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,489", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,491", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,491", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,492", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,493", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,494", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,494", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '7581536da560da5c67b9a95ab3f914792d956d2c19db0951be45d53ea3ce3ef8463eeea2ae109ab1d750fce2075092c3ae732e15a32d3dc64acdfccd30abd8f8d89052932cd5829238e39698961bc31eadaccbcb0a493a006532c047ed1113418f101dab64cebbc75b1309c5d7fb9a3cd243e9343b89d6c9513c68f8e91cd9c4'}", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,498", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,498", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,498", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 9760, "thread": 17380, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-08 03:13:01,498", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,498", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,503", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,503", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,503", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,504", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': 'c213ceef3befea575864ab1f38852b108a65539c740b2929ebc1cac1791edac006db2f18c8a25f789ae9db30930c86ad166b937de6f64c817523ad1c5fe5e7cc0ed3084db58d98d5155a085dea76182744f3b47d1cd1df21dd58ac66d84bb09277271974fa516c05a584dcc6da1dd9c15eb87d6ab08c6c1d997668025578b9526381bad37aa9753b18055094ce79c471bf549a5d450a31586b3a43b67d421e04efceb29fb912c9324f93bf69b30344b8047aebaca9833a1e38abb59b02c9fea09a409c14c403f5e8ae3c4387b0139e6ba7781901c47a5dc97f8c6a4a31027feb2f16fb1116515429593ac213b573b1a22ece7105e06ab6de6a78eabecb999dae'}", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,505", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 9760, "thread": 17380, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 03:13:01,506", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,506", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,509", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,510", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,510", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,510", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 9760, "thread": 17380, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 03:13:01,510", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,510", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,513", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,513", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,513", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,513", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 9760, "thread": 17380, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 03:13:01,513", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,514", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,516", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,516", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,517", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,528", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,528", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-08 03:13:01,533", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,534", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,534", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-08 03:13:01,536", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,536", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,539", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,539", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,540", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,540", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,542", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,542", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,543", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,545", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,546", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,546", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,546", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,548", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,548", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,550", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,550", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,551", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,551", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,553", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,553", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,553", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 03:13:01,555", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,555", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 03:13:01,559", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,559", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,562", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,562", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,562", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-08 03:13:01,565", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,565", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,567", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,567", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,567", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,568", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,569", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,569", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,570", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,570", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,572", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,572", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,572", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 9b763161dab7b3bbeb5538f7970cd57454c0232652d1990e0359f43afd935c59", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,572", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,576", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,578", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,581", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,581", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,581", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 9b763161dab7b3bbeb5538f7970cd57454c0232652d1990e0359f43afd935c59", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,584", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,584", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,587", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,588", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,590", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,590", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,591", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,594", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,594", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,595", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,597", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,597", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,597", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,600", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,600", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,600", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,603", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,603", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,603", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,606", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,606", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 9b763161dab7b3bbeb5538f7970cd57454c0232652d1990e0359f43afd935c59, Fee: 0.000543210000 XMR (543210000 pico)", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,609", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,609", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,609", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,610", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,610", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,613", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 9ce6fb67...): Failed to get daemon height. Cannot calculate confirmations.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,622", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 9ce6fb67...): Skipping entry 0: TXID 9b763161dab7b3bbeb5538f7970cd57454c0232652d1990e0359f43afd935c59 already processed.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,625", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,628", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,631", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,637", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 9ce6fb67...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-08 03:13:01,642", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 9ce6fb67...): Found candidate! TXID: 9b763161dab7b3bbeb5538f7970cd57454c0232652d1990e0359f43afd935c59, Amt: 1.234567890123 XMR, Confs: 11.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,642", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 9ce6fb67...): Confirmed payment found.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,645", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,645", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,645", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,646", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-08 03:13:01,647", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,650", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,650", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,650", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,650", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 9b763161dab7b3bbeb5538f7970cd57454c0232652d1990e0359f43afd935c59, Fee: 0.000678900000 XMR (678900000 pico)", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,653", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,653", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,653", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,653", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,653", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,653", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,653", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,653", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,656", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,661", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,661", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,661", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,661", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 03:13:01,665", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,665", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 03:13:01,668", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,672", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,673", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,674", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 03:13:01,675", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 03:13:01,677", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,680", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,680", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,680", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,680", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 9b763161dab7b3bbeb5538f7970cd57454c0232652d1990e0359f43afd935c59, Fee: 0.000777700000 XMR (777700000 pico)", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,680", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,683", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,683", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,683", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,683", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 9b763161dab7b3bbeb5538f7970cd57454c0232652d1990e0359f43afd935c59, Fee: 0.000888800000 XMR (888800000 pico)", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,684", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,686", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,686", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,686", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,687", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,687", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,687", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:01,689", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:02,190", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:02,190", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:02,196", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:02,697", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:02,697", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:02,703", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/3): Timeout 1. Retrying in 0.5s...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,204", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/3): Refused 2. Retrying in 0.5s...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,710", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 401 (Authentication failed? Check RPC User/Password). Response: Unauthorized", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 03:13:03,715", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 500. Response: Internal Server Error", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 03:13:03,720", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-08 03:13:03,725", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 267, "message": "Monero RPC (Wallet - Method: some_method): RPC returned error: Code=-4, Message=Invalid params", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,739", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,740", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2122251362928'>", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,746", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,755", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,755", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2122251362592'>", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,761", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,769", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,770", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,776", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,776", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,786", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,786", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,786", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,794", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,794", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,794", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,800", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,808", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,808", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,824", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,824", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-08 03:13:03,832", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,838", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,839", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-08 03:13:03,847", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,847", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,855", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,855", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,862", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,862", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,877", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 387, "message": "User test_vendor_escrow missing valid withdrawal address in field 'btc_withdrawal_address' for currency BTC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,923", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 8acf36e3-e01c-4ced-a25d-6a42c104fe8d (BTC): Initiating multi-sig escrow setup...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,925", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_test_user' loaded and cached.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,925", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 661, "message": "Order 8acf36e3-e01c-4ced-a25d-6a42c104fe8d (BTC): BTC multisig details missing expected redeem/witness script.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,926", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 8acf36e3-e01c-4ced-a25d-6a42c104fe8d (BTC): Generated BTC Escrow Address: tb1qw508d6qejxt...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,926", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 8acf36e3-e01c-4ced-a25d-6a42c104fe8d (BTC): Created CryptoPayment 60ee381b-bb2a-4428-854a-cf94c719e369 (Multi-sig). Expected Atomic: 1000000", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,926", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 8acf36e3-e01c-4ced-a25d-6a42c104fe8d (BTC): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 09:13:03.926522+00:00. Awaiting payment to tb1qw508d6qejxt...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,927", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 8acf36e3-e01c-4ced-a25d-6a42c104fe8d (BTC): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,967", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 31bae8ff-9c3c-4700-acb5-4e92b642b4e6 (XMR): Initiating multi-sig escrow setup...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,969", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 31bae8ff-9c3c-4700-acb5-4e92b642b4e6 (XMR): Generated XMR Escrow Address: xmr_multisig_ad...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,969", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 31bae8ff-9c3c-4700-acb5-4e92b642b4e6 (XMR): Created CryptoPayment 0dc4042b-111e-43ef-b37d-c215c553910b (Multi-sig). Expected Atomic: 1000000000000", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,970", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 31bae8ff-9c3c-4700-acb5-4e92b642b4e6 (XMR): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 09:13:03.969690+00:00. Awaiting payment to xmr_multisig_ad...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:03,970", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 31bae8ff-9c3c-4700-acb5-4e92b642b4e6 (XMR): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,013", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order cebe1b13-6065-4aae-a442-d989b1931a5e (BTC): Initiating multi-sig escrow setup...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,013", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 537, "message": "Order cebe1b13-6065-4aae-a442-d989b1931a5e (BTC): Cannot create escrow details. Status: 'shipped' (Expected: 'pending_payment').", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,055", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 904aca1b-1590-4c7f-8a7e-5b468a9fb917 (LTC): Initiating multi-sig escrow setup...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,057", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 607, "message": "Order 904aca1b-1590-4c7f-8a7e-5b468a9fb917 (LTC): Failed to gather participant info: Multisig key attribute mapping not found for currency LTC.", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 581, in create_escrow_for_order\n    raise ValueError(f\"Multisig key attribute mapping not found for currency {currency}.\")\nValueError: Multisig key attribute mapping not found for currency LTC."}
{"asctime": "2025-04-08 03:13:04,098", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 2a4ee056-0474-4ead-a164-37311db3bc9c (BTC): Initiating multi-sig escrow setup...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,100", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 2a4ee056-0474-4ead-a164-37311db3bc9c (BTC): Crypto service error during BTC escrow generation: BTC Gen Failed", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 639, in create_escrow_for_order\n    msig_details = crypto_service_module.create_btc_multisig_address(\n        participant_pubkeys_hex=participant_infos, # Use expected kwarg name\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: BTC Gen Failed"}
{"asctime": "2025-04-08 03:13:04,143", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 3859be43-136a-47c2-8469-20d45e412cab (XMR): Initiating multi-sig escrow setup...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,145", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 3859be43-136a-47c2-8469-20d45e412cab (XMR): Crypto service error during XMR escrow generation: XMR Wallet Gen Failed", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 621, in create_escrow_for_order\n    msig_details = crypto_service_module.create_monero_multisig_wallet(\n        participant_infos=participant_infos, # Use keyword arg for clarity\n        order_guid=str(order.id),           # Use keyword arg 'order_guid'\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: XMR Wallet Gen Failed"}
{"asctime": "2025-04-08 03:13:04,194", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 97e9f8ed-bd17-478e-b52b-f869c37caced, Payment: 3e2a24c0-bbee-41a2-8e3d-4105111120e2, Currency: BTC): Starting check.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,194", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 97e9f8ed-bd17-478e-b52b-f869c37caced, Payment: 3e2a24c0-bbee-41a2-8e3d-4105111120e2, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,195", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 97e9f8ed-bd17-478e-b52b-f869c37caced, Payment: 3e2a24c0-bbee-41a2-8e3d-4105111120e2, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,195", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1052, "message": "PaymentConfirm Check (Order: 97e9f8ed-bd17-478e-b52b-f869c37caced, Payment: 3e2a24c0-bbee-41a2-8e3d-4105111120e2, Currency: BTC): Ledger updated (incl. deposit fee) & Order status -> payment_confirmed. TXID: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,196", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1067, "message": "PaymentConfirm Check (Order: 97e9f8ed-bd17-478e-b52b-f869c37caced, Payment: 3e2a24c0-bbee-41a2-8e3d-4105111120e2, Currency: BTC): Sent payment confirmation notification to Vendor test_vendor_escrow.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,241", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 2e26ae28-7cf9-413b-b4e9-f96960e0579a, Payment: 2ebb447a-8f5b-47e7-a1fe-03a225914abd, Currency: BTC): Starting check.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,289", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 917, "message": "Order e8bb69ea-55e3-4dff-934f-c44712ef7fca cancelled due to underpayment. Rcvd 0.00500000, Exp 0.01000000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,336", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 7a6d3601-4f2a-494c-9c8c-f776aceacabc, Payment: 7e2ec4fc-9b55-432e-a6fc-cbf9ba925a84, Currency: BTC): Starting check.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,336", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 7a6d3601-4f2a-494c-9c8c-f776aceacabc, Payment: 7e2ec4fc-9b55-432e-a6fc-cbf9ba925a84, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,337", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 7a6d3601-4f2a-494c-9c8c-f776aceacabc, Payment: 7e2ec4fc-9b55-432e-a6fc-cbf9ba925a84, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,337", "levelname": "CRITICAL", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1075, "message": "PaymentConfirm Check (Order: 7a6d3601-4f2a-494c-9c8c-f776aceacabc, Payment: 7e2ec4fc-9b55-432e-a6fc-cbf9ba925a84, Currency: BTC): CRITICAL: Ledger/Order atomic update FAILED during payment confirmation! Error: ['Cannot lock funds']. Transaction rolled back.", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1010, in check_and_confirm_payment\n    lock_success = ledger_service.lock_funds(\n        user=buyer, currency=currency, amount=expected_std, # Lock the required STANDARD order amount\n        related_order=order, notes=f\"Lock funds for Order {order.id} escrow\"\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nledger.services.InsufficientFundsError: ['Cannot lock funds']"}
{"asctime": "2025-04-08 03:13:04,385", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 91ba8b03-2a82-474c-9d89-907465455f5b (MarkShipped by test_vendor_escrow): Attempting...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,387", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1190, "message": "Order 91ba8b03-2a82-474c-9d89-907465455f5b (MarkShipped by test_vendor_escrow): Tracking info provided but 'tracking_info' field missing on Order model.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,389", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1206, "message": "Order 91ba8b03-2a82-474c-9d89-907465455f5b (MarkShipped by test_vendor_escrow): Marked shipped. Status -> shipped. Dispute deadline: 2025-04-15 09:13:04.386860+00:00, Auto-finalize: 2025-04-22 09:13:04.386860+00:00", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,389", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1230, "message": "Order 91ba8b03-2a82-474c-9d89-907465455f5b (MarkShipped by test_vendor_escrow): Sent order shipped notification to Buyer test_buyer_escrow.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,435", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order f5bc841c-bcaf-4845-830e-b280a7d2aeba (MarkShipped by test_buyer_escrow): Attempting...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,436", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1126, "message": "Order f5bc841c-bcaf-4845-830e-b280a7d2aeba (MarkShipped by test_buyer_escrow): Permission denied. User test_buyer_escrow is not the vendor (test_vendor_escrow).", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,478", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order ad871650-5760-40e1-b129-59824bd3a6a6 (MarkShipped by test_vendor_escrow): Attempting...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,479", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1130, "message": "Order ad871650-5760-40e1-b129-59824bd3a6a6 (MarkShipped by test_vendor_escrow): Cannot mark shipped. Invalid status 'pending_payment' (Expected: 'payment_confirmed').", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,521", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order db022267-044c-4562-a894-e8265b19a61b (MarkShipped by test_vendor_escrow): Attempting...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,523", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1144, "message": "Order db022267-044c-4562-a894-e8265b19a61b (MarkShipped by test_vendor_escrow): Failed to prepare release transaction: Prep Fail", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1138, in mark_order_shipped\n    prepared_release_metadata = _prepare_release(order_locked) # Definition is later in file\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Prep Fail"}
{"asctime": "2025-04-08 03:13:04,570", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 5106453f-52e0-4c2e-8e9d-66da7d7fe1e6 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,571", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 5106453f-52e0-4c2e-8e9d-66da7d7fe1e6 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,572", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order 5106453f-52e0-4c2e-8e9d-66da7d7fe1e6 (SignRelease by test_buyer_escrow): Signature applied. Current signers: 1/2. Ready for broadcast: False.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,619", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order eede2dd7-fae5-46c9-9065-8bf6d80ea603 (SignRelease by test_vendor_escrow): Attempting signature...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,621", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order eede2dd7-fae5-46c9-9065-8bf6d80ea603 (SignRelease by test_vendor_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,621", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order eede2dd7-fae5-46c9-9065-8bf6d80ea603 (SignRelease by test_vendor_escrow): Signature applied. Current signers: 2/2. Ready for broadcast: True.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,621", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1465, "message": "Order eede2dd7-fae5-46c9-9065-8bf6d80ea603 (SignRelease by test_vendor_escrow): Sent 'ready for broadcast' notification to test_buyer_escrow.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,668", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 57e97a74-b711-40e3-9de7-8a1693f4d56b (SignRelease by test_mod_escrow): Attempting signature...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,669", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1289, "message": "Order 57e97a74-b711-40e3-9de7-8a1693f4d56b (SignRelease by test_mod_escrow): Permission denied. User is not buyer or vendor.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,713", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 85187526-c1e7-46af-a0d1-7bb5a56f4801 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,715", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 85187526-c1e7-46af-a0d1-7bb5a56f4801 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,716", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 85187526-c1e7-46af-a0d1-7bb5a56f4801 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,718", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 85187526-c1e7-46af-a0d1-7bb5a56f4801 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,766", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order e2681610-d5fe-4854-b829-2df46e1c48ec (SignRelease by test_buyer_escrow): Attempting signature...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,767", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1321, "message": "Order e2681610-d5fe-4854-b829-2df46e1c48ec (SignRelease by test_buyer_escrow): User test_buyer_escrow (ID: 59) has already signed this release.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,812", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 9ea419e1-c9e4-4710-9fc6-98676dd08b27 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,813", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 9ea419e1-c9e4-4710-9fc6-98676dd08b27 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,813", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1425, "message": "Order 9ea419e1-c9e4-4710-9fc6-98676dd08b27 (SignRelease by test_buyer_escrow): Crypto signing error: Simulated BTC Sign Failure", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1345, in sign_order_release\n    sign_result = sign_func(\n        psbt_base64=unsigned_crypto_data,  # Map to expected arg name\n        private_key_wif=private_key_info    # Map to expected arg name\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Simulated BTC Sign Failure"}
{"asctime": "2025-04-08 03:13:04,862", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order fb810b47-0577-4421-b3aa-51f1c9894202 (BroadcastRelease): Initiating broadcast...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,864", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order fb810b47-0577-4421-b3aa-51f1c9894202 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,864", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order fb810b47-0577-4421-b3aa-51f1c9894202 (BroadcastRelease): Broadcast successful. Transaction Hash: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,864", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order fb810b47-0577-4421-b3aa-51f1c9894202 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,865", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order fb810b47-0577-4421-b3aa-51f1c9894202 (BroadcastRelease): Ledger updated. Vendor: 0.00975000 BTC, Fee: 0.00025000 BTC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,915", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order df870945-13c8-4c0a-a065-40456847f1ec (BroadcastRelease): Initiating broadcast...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,916", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order df870945-13c8-4c0a-a065-40456847f1ec (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_signed_txset)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,916", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order df870945-13c8-4c0a-a065-40456847f1ec (BroadcastRelease): Broadcast successful. Transaction Hash: xmr_tx_hash_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,916", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order df870945-13c8-4c0a-a065-40456847f1ec (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,917", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order df870945-13c8-4c0a-a065-40456847f1ec (BroadcastRelease): Ledger updated. Vendor: 0.975000000000 XMR, Fee: 0.025000000000 XMR.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,965", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 4823c811-1357-4b68-818a-9be0e8167bf5 (BroadcastRelease): Initiating broadcast...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,967", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 4823c811-1357-4b68-818a-9be0e8167bf5 (BroadcastRelease): Initiating broadcast...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:04,972", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 4823c811-1357-4b68-818a-9be0e8167bf5 (BroadcastRelease): Initiating broadcast...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,019", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order f7e55576-bb15-4ca4-a426-23eac55dfa62 (BroadcastRelease): Initiating broadcast...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,021", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order f7e55576-bb15-4ca4-a426-23eac55dfa62 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,021", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order f7e55576-bb15-4ca4-a426-23eac55dfa62 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order f7e55576-bb15-4ca4-a426-23eac55dfa62 (service module returned invalid tx_hash: 'None').", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order f7e55576-bb15-4ca4-a426-23eac55dfa62 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:13:05,125", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 381ff368-ccc0-4f23-ae49-3ea68fba5cd0 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 100, Notes: 'Full refund....'", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,126", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 381ff368-ccc0-4f23-ae49-3ea68fba5cd0 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.01000000 BTC, Vendor: 0E-8 BTC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,126", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 381ff368-ccc0-4f23-ae49-3ea68fba5cd0 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,126", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 381ff368-ccc0-4f23-ae49-3ea68fba5cd0 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,127", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 381ff368-ccc0-4f23-ae49-3ea68fba5cd0 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,127", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 381ff368-ccc0-4f23-ae49-3ea68fba5cd0 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.01000000, Vendor: 0E-8 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,178", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 479e46db-54d1-4919-9b0a-5af0980f9630 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 70, Notes: 'Split 70/30...'", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,180", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 479e46db-54d1-4919-9b0a-5af0980f9630 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00700000 BTC, Vendor: 0.00300000 BTC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,180", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 479e46db-54d1-4919-9b0a-5af0980f9630 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,180", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 479e46db-54d1-4919-9b0a-5af0980f9630 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,181", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 479e46db-54d1-4919-9b0a-5af0980f9630 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,181", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 479e46db-54d1-4919-9b0a-5af0980f9630 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.00700000, Vendor: 0.00300000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,227", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order fac6358a-6ff0-43d0-9420-ebb1356bf3c0 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test notes...'", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,276", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 0c743711-9383-4431-8032-c32eded97fcc (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 101, Notes: 'Test notes...'", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,277", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 0c743711-9383-4431-8032-c32eded97fcc (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: -10, Notes: 'Test notes...'", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,325", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 11b8d673-67a2-463f-a2de-8e48e8a25974 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test Notes - Crypto Fail Attempt...'", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,326", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 11b8d673-67a2-463f-a2de-8e48e8a25974 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00500000 BTC, Vendor: 0.00500000 BTC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,326", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 11b8d673-67a2-463f-a2de-8e48e8a25974 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,326", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order 11b8d673-67a2-463f-a2de-8e48e8a25974 (ResolveDispute by test_mod_escrow): Dispute broadcast error: Crypto dispute broadcast failed for Order 11b8d673-67a2-463f-a2de-8e48e8a25974 (service module returned invalid tx_hash: 'None').", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order 11b8d673-67a2-463f-a2de-8e48e8a25974 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:13:05,375", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order fe7aeca8-05ef-468f-ace9-afea4ef266c4 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,376", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2244, "message": "Order fe7aeca8-05ef-468f-ace9-afea4ef266c4 (GetUnsignedTx for test_buyer_escrow): Returning prepared transaction data (Type: btc_psbt). Already Signed: False", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,419", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 6a940166-c3e3-43f2-abf9-2b2cbaa7a6e3 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,421", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2212, "message": "Order 6a940166-c3e3-43f2-abf9-2b2cbaa7a6e3 (GetUnsignedTx for test_buyer_escrow): Attempted to get unsigned TX before release initiated.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,421", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 6a940166-c3e3-43f2-abf9-2b2cbaa7a6e3 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,422", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 6a940166-c3e3-43f2-abf9-2b2cbaa7a6e3 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {}", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,423", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 6a940166-c3e3-43f2-abf9-2b2cbaa7a6e3 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,424", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 6a940166-c3e3-43f2-abf9-2b2cbaa7a6e3 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'type': 'btc_psbt', 'signatures': {}}", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,424", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 6a940166-c3e3-43f2-abf9-2b2cbaa7a6e3 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,425", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 6a940166-c3e3-43f2-abf9-2b2cbaa7a6e3 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'data': 'some_data', 'signatures': {}}", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,470", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 7d1a1e7f-2d2c-481a-af59-d1af7e5b87f9 (GetUnsignedTx for test_mod_escrow): Request received.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,472", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2207, "message": "Order 7d1a1e7f-2d2c-481a-af59-d1af7e5b87f9 (GetUnsignedTx for test_mod_escrow): Permission denied. User not buyer or vendor.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,516", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 416, "message": "Order 905940d2-c809-45d3-b609-395e8bd1b875 (TimeoutCheck): Payment deadline 2025-04-08 08:13:05.515433+00:00 passed. Attempting cancellation.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,516", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 429, "message": "Order 905940d2-c809-45d3-b609-395e8bd1b875 (TimeoutCheck): Successfully cancelled due to payment timeout. Status -> cancelled_timeout", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,516", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 430, "message": "Order 905940d2-c809-45d3-b609-395e8bd1b875 automatically cancelled due to payment timeout.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,602", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 5370b4a2-c76f-49e1-8d87-3fe96e379360 (BroadcastRelease): Initiating broadcast...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,603", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,605", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 5370b4a2-c76f-49e1-8d87-3fe96e379360 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,606", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 5370b4a2-c76f-49e1-8d87-3fe96e379360 (BroadcastRelease): Broadcast successful. Transaction Hash: aaa_int_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,608", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 5370b4a2-c76f-49e1-8d87-3fe96e379360 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,609", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction b58d3b1b-9c79-4350-a7b9-9035dca31513 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,610", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction c85ec919-6c45-4d1b-848c-2a11144e2421 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,610", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 5370b4a2-c76f-49e1-8d87-3fe96e379360 (BroadcastRelease): Ledger updated. Vendor: 0.01960000 BTC, Fee: 0.00040000 BTC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,654", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 971bc844-dbba-4bda-a97d-23f6747cd9d2 (BroadcastRelease): Initiating broadcast...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,654", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,656", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 971bc844-dbba-4bda-a97d-23f6747cd9d2 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_unsigned_txset)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,656", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 971bc844-dbba-4bda-a97d-23f6747cd9d2 (BroadcastRelease): Broadcast successful. Transaction Hash: bbb_int_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,657", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 971bc844-dbba-4bda-a97d-23f6747cd9d2 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,658", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction a104558c-7924-4a99-a69d-fede9fde021b recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,659", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 029b10a0-2580-4ecf-81b5-28b4e8fc85dc recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,659", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 971bc844-dbba-4bda-a97d-23f6747cd9d2 (BroadcastRelease): Ledger updated. Vendor: 1.462500000000 XMR, Fee: 0.037500000000 XMR.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,699", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 4c43df59-8c66-4c4d-b863-abacc2991db0 (BroadcastRelease): Initiating broadcast...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,700", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,701", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 4c43df59-8c66-4c4d-b863-abacc2991db0 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,701", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 4c43df59-8c66-4c4d-b863-abacc2991db0 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 4c43df59-8c66-4c4d-b863-abacc2991db0 (service module returned invalid tx_hash: 'None').", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 4c43df59-8c66-4c4d-b863-abacc2991db0 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:13:05,744", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order a55715b8-0216-4c8e-8987-b3665a69b644 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 30, Notes: 'Split decision: 30% to buyer...'", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,746", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,747", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order a55715b8-0216-4c8e-8987-b3665a69b644 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.00600000 BTC, Vendor: 0.01400000 BTC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,747", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order a55715b8-0216-4c8e-8987-b3665a69b644 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,748", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order a55715b8-0216-4c8e-8987-b3665a69b644 (ResolveDispute by test_mod_int): Dispute transaction broadcast successful. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,749", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order a55715b8-0216-4c8e-8987-b3665a69b644 (ResolveDispute by test_mod_int): Order state saved successfully. Proceeding to ledger updates.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,750", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction e841b189-fcbf-4e27-b2a9-93cba0b5cb39 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,751", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 71657b67-bddb-463a-b38a-4ce08f37ec77 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,751", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order a55715b8-0216-4c8e-8987-b3665a69b644 (ResolveDispute by test_mod_int): Ledger updated. Buyer: 0.00600000, Vendor: 0.01400000 BTC. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,793", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 8c54f2ab-7cc5-424f-9f85-e2bf55b8afa9 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 50, Notes: 'Attempted resolution...'", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,794", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,795", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 8c54f2ab-7cc5-424f-9f85-e2bf55b8afa9 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.01000000 BTC, Vendor: 0.01000000 BTC.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,795", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 8c54f2ab-7cc5-424f-9f85-e2bf55b8afa9 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:13:05,795", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order 8c54f2ab-7cc5-424f-9f85-e2bf55b8afa9 (ResolveDispute by test_mod_int): Dispute broadcast error: Crypto dispute broadcast failed for Order 8c54f2ab-7cc5-424f-9f85-e2bf55b8afa9 (service module returned invalid tx_hash: 'None').", "process": 9760, "thread": 17380, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order 8c54f2ab-7cc5-424f-9f85-e2bf55b8afa9 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:13:05,840", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 9760, "thread": 17380}
{"asctime": "2025-04-08 03:19:15,756", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,757", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction c09cf35a-57ad-4b64-aa4c-5e7b5d032f7c recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,761", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 12ac3815-b719-4db7-b759-a3621405dcdf recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,766", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction bfea427c-5b80-43c1-845f-28c9f306ab2c recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,773", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 202, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,776", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,779", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,782", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,785", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,788", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,790", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,793", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,797", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,802", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,805", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,811", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,815", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,852", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 486, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: Test lock", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,852", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 513, "message": "Ledger transaction d645103d-3bd6-483b-a7cf-b414e32a4a7e recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,856", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 465, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,862", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 448, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,867", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: Test unlock", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,868", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction 32b453e0-a873-4879-b6b9-ee29cb8d8c6a recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,872", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 592, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,872", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: Test unlock more", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,872", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction 5cae16ac-5394-449b-9199-d62a90f01c00 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,877", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 587, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,885", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 566, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,891", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 993a47c2-359a-418b-b7cd-916c04231624 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,897", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 514681c5-cd9e-47af-8746-f1ec9461e0d9 recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,902", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction b133a846-d771-4e0d-a783-62d32da76c49 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,934", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 295, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,953", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,953", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 482, "message": "[get_market_btc_key] Market BTC key pubkey matches settings (031b7a7e8e...).", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,953", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 489, "message": "[get_market_btc_key] Successfully loaded and cached market BTC key from Vault (PubKey starts with: 031b7a7e8e...).", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,957", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:15,957", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 454, "message": "[get_market_btc_key] Vault returned invalid data for key 'market_btc_multisig_key': None", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,023", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1547, "message": "Deprecated function `process_btc_withdrawal` called. Use Ledger system.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,026", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1550, "message": "Deprecated function `process_escrow_release` called. Use Taproot multi-sig workflow (prepare/sign/finalize/broadcast).", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,065", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,067", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,068", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,071", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,073", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,075", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,077", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,077", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 341, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-08 03:19:16,079", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,084", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-08 03:19:16,089", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-08 03:19:16,095", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,095", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,097", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-08 03:19:16,102", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-08 03:19:16,106", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,106", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,108", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,110", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,112", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-08 03:19:16,117", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-08 03:19:16,121", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-08 03:19:16,125", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,127", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 18d96ca1ec0ea75a)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,127", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 18d96ca1ec0ea75a): 4LdpnMo9wPESgQ4...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,129", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,129", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,129", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,132", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 18d96ca1ec0ea75a)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,132", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 18d96ca1ec0ea75a): Timeout", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,135", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 18d96ca1ec0ea75a)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,135", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 18d96ca1ec0ea75a): Monero RPC Error (Code: -5): RPC Failed", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,136", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 18d96ca1ec0ea75a)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,136", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 18d96ca1ec0ea75a). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,138", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,138", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,140", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 18d96ca1ec0ea75a)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,141", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 18d96ca1ec0ea75a) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,143", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,144", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,144", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,149", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,149", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,150", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,151", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,152", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,153", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,154", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,154", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': 'ca17fb64dea3155140b71a02971fb44f1682b5d3db6909316ed069ed9ccf67b063b2b3db0a8c9864ea2bb02ee31cd22ac76f7c4386e2bde6753d9460d2b7d712f16cffa9b3a82facdbe97c4e5f9debe4ef26dae14f04b5eb6125332b7b84a1f379904839564619564d0df0f306108a10de382fa15c65f890791ad4474ce92b32'}", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,157", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,157", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,157", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 12808, "thread": 14688, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-08 03:19:16,158", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,158", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,160", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,160", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,160", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,160", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': 'd66eb1e90364973717f3db0c8c4a12fc4264ccf6c8ff55914d26331b7bb91e312ea786b6e29756073b6b79187b6c3b22b0081bb0a3b25f5c5406003ef8bc24dbfe3cc3dac1f1c31c8ac95e16623a3884df17bcb9728632eb6e097f6c9ea9994d3118eee8ba6460c71daf4fb27c4e33e975a7bdc3a85a73388ddc89f3edfb2c9d9f746264ed1628102da3083b781a37021a07234408a56683c5143f5aa4ecff9fd9c6eb3a64b1628cc614d74a962abf0fa2e7ae2f722e90415540484e54c24da99879db008bd92f583a56caa8fea252220f68beb8244cb8ad54587aec006ec1ec8f94f3a25eeef48eb77e54243a6193892241bf4c3390df30db4f6a4cbb7c2c27'}", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,160", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 12808, "thread": 14688, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 03:19:16,160", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,161", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,163", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,163", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,163", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,163", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 12808, "thread": 14688, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 03:19:16,164", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,164", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,166", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,166", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,166", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,166", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 12808, "thread": 14688, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 03:19:16,167", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,167", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,169", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,170", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,170", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,180", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,181", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-08 03:19:16,184", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,184", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,185", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-08 03:19:16,187", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,187", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,189", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,190", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,190", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,190", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,192", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,192", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,193", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,195", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,196", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,196", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,196", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,199", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,199", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,201", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,201", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,201", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,201", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,204", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,204", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,204", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 03:19:16,206", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,206", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 03:19:16,210", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,210", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,212", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,213", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,213", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-08 03:19:16,216", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,216", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,218", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,219", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,219", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,219", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,221", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,221", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,221", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,221", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,223", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,223", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,223", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 72d22a35612cc887e605e09d8b1bc3b06508576c3d4f69f32a4ba60536bf26a8", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,224", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,226", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,229", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,231", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,231", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,231", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 72d22a35612cc887e605e09d8b1bc3b06508576c3d4f69f32a4ba60536bf26a8", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,234", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,234", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,236", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,236", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,238", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,239", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,239", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,241", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,241", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,241", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,245", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,245", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,245", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,247", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,247", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,248", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,250", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,250", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,250", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,253", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,253", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 72d22a35612cc887e605e09d8b1bc3b06508576c3d4f69f32a4ba60536bf26a8, Fee: 0.000543210000 XMR (543210000 pico)", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,256", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,256", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,256", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,257", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,257", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,260", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 19aad97d...): Failed to get daemon height. Cannot calculate confirmations.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,269", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 19aad97d...): Skipping entry 0: TXID 72d22a35612cc887e605e09d8b1bc3b06508576c3d4f69f32a4ba60536bf26a8 already processed.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,273", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,276", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,278", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,285", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 19aad97d...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-08 03:19:16,290", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 19aad97d...): Found candidate! TXID: 72d22a35612cc887e605e09d8b1bc3b06508576c3d4f69f32a4ba60536bf26a8, Amt: 1.234567890123 XMR, Confs: 11.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,290", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 19aad97d...): Confirmed payment found.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,293", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,294", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,294", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,295", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-08 03:19:16,297", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,299", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,300", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,300", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,300", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 72d22a35612cc887e605e09d8b1bc3b06508576c3d4f69f32a4ba60536bf26a8, Fee: 0.000678900000 XMR (678900000 pico)", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,302", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,302", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,302", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,303", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,303", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,303", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,303", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,303", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,306", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,310", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,311", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,311", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,311", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 03:19:16,314", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,315", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 03:19:16,317", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,321", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,321", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,321", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 03:19:16,323", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 03:19:16,324", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,326", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,327", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,327", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,327", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 72d22a35612cc887e605e09d8b1bc3b06508576c3d4f69f32a4ba60536bf26a8, Fee: 0.000777700000 XMR (777700000 pico)", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,327", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,329", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,330", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,330", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,330", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 72d22a35612cc887e605e09d8b1bc3b06508576c3d4f69f32a4ba60536bf26a8, Fee: 0.000888800000 XMR (888800000 pico)", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,330", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,332", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,332", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,333", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,333", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,333", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,333", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,336", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,836", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,837", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:16,842", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:17,343", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:17,344", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:17,348", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/3): Timeout 1. Retrying in 0.5s...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:17,849", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/3): Refused 2. Retrying in 0.5s...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,355", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 401 (Authentication failed? Check RPC User/Password). Response: Unauthorized", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 03:19:18,359", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 500. Response: Internal Server Error", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 03:19:18,377", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-08 03:19:18,385", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 267, "message": "Monero RPC (Wallet - Method: some_method): RPC returned error: Code=-4, Message=Invalid params", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,406", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,407", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='1459003597088'>", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,414", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,426", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,426", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='1459003596752'>", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,432", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,441", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,441", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,448", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,449", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,456", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,456", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,457", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,464", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,464", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,465", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,470", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,478", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,478", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,494", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,494", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-08 03:19:18,502", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,510", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,511", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-08 03:19:18,519", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,519", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,527", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,528", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,537", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,537", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,551", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 387, "message": "User test_vendor_escrow missing valid withdrawal address in field 'btc_withdrawal_address' for currency BTC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,599", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 0670693d-0436-45d9-b038-9e93802541d1 (BTC): Initiating multi-sig escrow setup...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,601", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_test_user' loaded and cached.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,601", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 661, "message": "Order 0670693d-0436-45d9-b038-9e93802541d1 (BTC): BTC multisig details missing expected redeem/witness script.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,601", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 0670693d-0436-45d9-b038-9e93802541d1 (BTC): Generated BTC Escrow Address: tb1qw508d6qejxt...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,602", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 0670693d-0436-45d9-b038-9e93802541d1 (BTC): Created CryptoPayment 9b379752-448d-4465-b782-57ff434a20c6 (Multi-sig). Expected Atomic: 1000000", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,602", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 0670693d-0436-45d9-b038-9e93802541d1 (BTC): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 09:19:18.602172+00:00. Awaiting payment to tb1qw508d6qejxt...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,602", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 0670693d-0436-45d9-b038-9e93802541d1 (BTC): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,647", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 56f347d2-7b27-46e4-9ea9-bfecab38f404 (XMR): Initiating multi-sig escrow setup...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,649", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 56f347d2-7b27-46e4-9ea9-bfecab38f404 (XMR): Generated XMR Escrow Address: xmr_multisig_ad...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,649", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 56f347d2-7b27-46e4-9ea9-bfecab38f404 (XMR): Created CryptoPayment c9011def-dfc9-4552-86b1-3f9c8e814185 (Multi-sig). Expected Atomic: 1000000000000", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,649", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 56f347d2-7b27-46e4-9ea9-bfecab38f404 (XMR): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 09:19:18.649593+00:00. Awaiting payment to xmr_multisig_ad...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,650", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 56f347d2-7b27-46e4-9ea9-bfecab38f404 (XMR): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,706", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 175f3b90-b9f8-4b66-a2bd-7dc99ec119cc (BTC): Initiating multi-sig escrow setup...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,706", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 537, "message": "Order 175f3b90-b9f8-4b66-a2bd-7dc99ec119cc (BTC): Cannot create escrow details. Status: 'shipped' (Expected: 'pending_payment').", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,746", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 4e274e27-dcbb-4672-bb47-7bb883ad05ae (LTC): Initiating multi-sig escrow setup...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,748", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 607, "message": "Order 4e274e27-dcbb-4672-bb47-7bb883ad05ae (LTC): Failed to gather participant info: Multisig key attribute mapping not found for currency LTC.", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 581, in create_escrow_for_order\n    raise ValueError(f\"Multisig key attribute mapping not found for currency {currency}.\")\nValueError: Multisig key attribute mapping not found for currency LTC."}
{"asctime": "2025-04-08 03:19:18,787", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order c4520165-d04d-43ee-a7a5-86e3b00ca278 (BTC): Initiating multi-sig escrow setup...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,789", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order c4520165-d04d-43ee-a7a5-86e3b00ca278 (BTC): Crypto service error during BTC escrow generation: BTC Gen Failed", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 639, in create_escrow_for_order\n    msig_details = crypto_service_module.create_btc_multisig_address(\n        participant_pubkeys_hex=participant_infos, # Use expected kwarg name\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: BTC Gen Failed"}
{"asctime": "2025-04-08 03:19:18,835", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 38d6bb7e-0bf6-4ac5-b5d9-f3e44fd39cb2 (XMR): Initiating multi-sig escrow setup...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,837", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 38d6bb7e-0bf6-4ac5-b5d9-f3e44fd39cb2 (XMR): Crypto service error during XMR escrow generation: XMR Wallet Gen Failed", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 621, in create_escrow_for_order\n    msig_details = crypto_service_module.create_monero_multisig_wallet(\n        participant_infos=participant_infos, # Use keyword arg for clarity\n        order_guid=str(order.id),           # Use keyword arg 'order_guid'\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: XMR Wallet Gen Failed"}
{"asctime": "2025-04-08 03:19:18,890", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 0aadcc88-11ba-4ee2-8120-523dd2b5fa6c, Payment: abcf16a5-96a0-4f02-99f5-5d3c2f50e620, Currency: BTC): Starting check.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,891", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 0aadcc88-11ba-4ee2-8120-523dd2b5fa6c, Payment: abcf16a5-96a0-4f02-99f5-5d3c2f50e620, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,891", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 0aadcc88-11ba-4ee2-8120-523dd2b5fa6c, Payment: abcf16a5-96a0-4f02-99f5-5d3c2f50e620, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,892", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1052, "message": "PaymentConfirm Check (Order: 0aadcc88-11ba-4ee2-8120-523dd2b5fa6c, Payment: abcf16a5-96a0-4f02-99f5-5d3c2f50e620, Currency: BTC): Ledger updated (incl. deposit fee) & Order status -> payment_confirmed. TXID: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,892", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1067, "message": "PaymentConfirm Check (Order: 0aadcc88-11ba-4ee2-8120-523dd2b5fa6c, Payment: abcf16a5-96a0-4f02-99f5-5d3c2f50e620, Currency: BTC): Sent payment confirmation notification to Vendor test_vendor_escrow.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,939", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 5580a9f0-1086-4294-be39-5453cef708b4, Payment: ac45d18e-c5a0-417c-9c95-ca2016250dca, Currency: BTC): Starting check.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:18,989", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 917, "message": "Order 99cdc2b8-8861-40d7-b31d-513070f4009d cancelled due to underpayment. Rcvd 0.00500000, Exp 0.01000000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,039", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 08aca78e-a421-4c75-9a2b-09d6ebaab947, Payment: 5a7b845b-d295-428a-a6b2-ca9b89aba6ce, Currency: BTC): Starting check.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,039", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 08aca78e-a421-4c75-9a2b-09d6ebaab947, Payment: 5a7b845b-d295-428a-a6b2-ca9b89aba6ce, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,040", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 08aca78e-a421-4c75-9a2b-09d6ebaab947, Payment: 5a7b845b-d295-428a-a6b2-ca9b89aba6ce, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,040", "levelname": "CRITICAL", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1075, "message": "PaymentConfirm Check (Order: 08aca78e-a421-4c75-9a2b-09d6ebaab947, Payment: 5a7b845b-d295-428a-a6b2-ca9b89aba6ce, Currency: BTC): CRITICAL: Ledger/Order atomic update FAILED during payment confirmation! Error: ['Cannot lock funds']. Transaction rolled back.", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1010, in check_and_confirm_payment\n    lock_success = ledger_service.lock_funds(\n        user=buyer, currency=currency, amount=expected_std, # Lock the required STANDARD order amount\n        related_order=order, notes=f\"Lock funds for Order {order.id} escrow\"\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nledger.services.InsufficientFundsError: ['Cannot lock funds']"}
{"asctime": "2025-04-08 03:19:19,096", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 2029729e-aa6e-4465-b5b2-b12b00987780 (MarkShipped by test_vendor_escrow): Attempting...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,099", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1190, "message": "Order 2029729e-aa6e-4465-b5b2-b12b00987780 (MarkShipped by test_vendor_escrow): Tracking info provided but 'tracking_info' field missing on Order model.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,101", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1206, "message": "Order 2029729e-aa6e-4465-b5b2-b12b00987780 (MarkShipped by test_vendor_escrow): Marked shipped. Status -> shipped. Dispute deadline: 2025-04-15 09:19:19.098763+00:00, Auto-finalize: 2025-04-22 09:19:19.098763+00:00", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,102", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1230, "message": "Order 2029729e-aa6e-4465-b5b2-b12b00987780 (MarkShipped by test_vendor_escrow): Sent order shipped notification to Buyer test_buyer_escrow.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,151", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 1223d24e-66df-4ecc-b013-98b395adf8f1 (MarkShipped by test_buyer_escrow): Attempting...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,153", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1126, "message": "Order 1223d24e-66df-4ecc-b013-98b395adf8f1 (MarkShipped by test_buyer_escrow): Permission denied. User test_buyer_escrow is not the vendor (test_vendor_escrow).", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,202", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 47ef0313-e4cc-46ad-a425-adbdbc201714 (MarkShipped by test_vendor_escrow): Attempting...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,203", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1130, "message": "Order 47ef0313-e4cc-46ad-a425-adbdbc201714 (MarkShipped by test_vendor_escrow): Cannot mark shipped. Invalid status 'pending_payment' (Expected: 'payment_confirmed').", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,262", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 160536b2-45b3-4f8d-b415-5b8578e941de (MarkShipped by test_vendor_escrow): Attempting...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,263", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1144, "message": "Order 160536b2-45b3-4f8d-b415-5b8578e941de (MarkShipped by test_vendor_escrow): Failed to prepare release transaction: Prep Fail", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1138, in mark_order_shipped\n    prepared_release_metadata = _prepare_release(order_locked) # Definition is later in file\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Prep Fail"}
{"asctime": "2025-04-08 03:19:19,319", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order aa8b6424-3885-47f5-87d3-2d35d0c02bc8 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,321", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order aa8b6424-3885-47f5-87d3-2d35d0c02bc8 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,321", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order aa8b6424-3885-47f5-87d3-2d35d0c02bc8 (SignRelease by test_buyer_escrow): Signature applied. Current signers: 1/2. Ready for broadcast: False.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,375", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 6f427953-b2db-43e0-a80e-c62e690159ae (SignRelease by test_vendor_escrow): Attempting signature...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,377", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 6f427953-b2db-43e0-a80e-c62e690159ae (SignRelease by test_vendor_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,377", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order 6f427953-b2db-43e0-a80e-c62e690159ae (SignRelease by test_vendor_escrow): Signature applied. Current signers: 2/2. Ready for broadcast: True.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,377", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1465, "message": "Order 6f427953-b2db-43e0-a80e-c62e690159ae (SignRelease by test_vendor_escrow): Sent 'ready for broadcast' notification to test_buyer_escrow.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,434", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order e981c57d-eab9-4a7a-83b5-79718fe7d793 (SignRelease by test_mod_escrow): Attempting signature...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,435", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1289, "message": "Order e981c57d-eab9-4a7a-83b5-79718fe7d793 (SignRelease by test_mod_escrow): Permission denied. User is not buyer or vendor.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,485", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order a1710d70-7e9d-402d-a271-01550bea5b51 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,488", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order a1710d70-7e9d-402d-a271-01550bea5b51 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,490", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order a1710d70-7e9d-402d-a271-01550bea5b51 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,492", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order a1710d70-7e9d-402d-a271-01550bea5b51 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,549", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 77cbb61e-256a-42c4-a26b-f07308886b9e (SignRelease by test_buyer_escrow): Attempting signature...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,551", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1321, "message": "Order 77cbb61e-256a-42c4-a26b-f07308886b9e (SignRelease by test_buyer_escrow): User test_buyer_escrow (ID: 59) has already signed this release.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,606", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order c3e484ca-c719-49b1-a5c7-07b69fd731dd (SignRelease by test_buyer_escrow): Attempting signature...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,608", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order c3e484ca-c719-49b1-a5c7-07b69fd731dd (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,608", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1425, "message": "Order c3e484ca-c719-49b1-a5c7-07b69fd731dd (SignRelease by test_buyer_escrow): Crypto signing error: Simulated BTC Sign Failure", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1345, in sign_order_release\n    sign_result = sign_func(\n        psbt_base64=unsigned_crypto_data,  # Map to expected arg name\n        private_key_wif=private_key_info    # Map to expected arg name\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Simulated BTC Sign Failure"}
{"asctime": "2025-04-08 03:19:19,662", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order d5bed045-ff03-4e00-830e-057c54b80d65 (BroadcastRelease): Initiating broadcast...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,664", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order d5bed045-ff03-4e00-830e-057c54b80d65 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,664", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order d5bed045-ff03-4e00-830e-057c54b80d65 (BroadcastRelease): Broadcast successful. Transaction Hash: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,665", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order d5bed045-ff03-4e00-830e-057c54b80d65 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,665", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order d5bed045-ff03-4e00-830e-057c54b80d65 (BroadcastRelease): Ledger updated. Vendor: 0.00975000 BTC, Fee: 0.00025000 BTC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,719", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order b2b49c43-fb23-49a2-afaf-57ca8b9122a3 (BroadcastRelease): Initiating broadcast...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,720", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order b2b49c43-fb23-49a2-afaf-57ca8b9122a3 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_signed_txset)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,721", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order b2b49c43-fb23-49a2-afaf-57ca8b9122a3 (BroadcastRelease): Broadcast successful. Transaction Hash: xmr_tx_hash_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,721", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order b2b49c43-fb23-49a2-afaf-57ca8b9122a3 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,721", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order b2b49c43-fb23-49a2-afaf-57ca8b9122a3 (BroadcastRelease): Ledger updated. Vendor: 0.975000000000 XMR, Fee: 0.025000000000 XMR.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,772", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order cbc3d881-f23d-43a2-bf57-f279ef17a402 (BroadcastRelease): Initiating broadcast...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,775", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order cbc3d881-f23d-43a2-bf57-f279ef17a402 (BroadcastRelease): Initiating broadcast...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,780", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order cbc3d881-f23d-43a2-bf57-f279ef17a402 (BroadcastRelease): Initiating broadcast...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,835", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 0c05ebf3-6761-4e4f-97f5-8f8a48f08a3f (BroadcastRelease): Initiating broadcast...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,837", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 0c05ebf3-6761-4e4f-97f5-8f8a48f08a3f (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,837", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 0c05ebf3-6761-4e4f-97f5-8f8a48f08a3f (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 0c05ebf3-6761-4e4f-97f5-8f8a48f08a3f (service module returned invalid tx_hash: 'None').", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 0c05ebf3-6761-4e4f-97f5-8f8a48f08a3f (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:19:19,946", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 19750176-96b9-465d-9806-aeb35e3e08f0 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 100, Notes: 'Full refund....'", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,948", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 19750176-96b9-465d-9806-aeb35e3e08f0 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.01000000 BTC, Vendor: 0E-8 BTC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,948", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 19750176-96b9-465d-9806-aeb35e3e08f0 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,948", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 19750176-96b9-465d-9806-aeb35e3e08f0 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,948", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 19750176-96b9-465d-9806-aeb35e3e08f0 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:19,949", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 19750176-96b9-465d-9806-aeb35e3e08f0 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.01000000, Vendor: 0E-8 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,011", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order b25fbda8-f266-47d1-a90a-13bb0e1a9f1f (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 70, Notes: 'Split 70/30...'", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,013", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order b25fbda8-f266-47d1-a90a-13bb0e1a9f1f (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00700000 BTC, Vendor: 0.00300000 BTC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,013", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order b25fbda8-f266-47d1-a90a-13bb0e1a9f1f (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,013", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order b25fbda8-f266-47d1-a90a-13bb0e1a9f1f (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,014", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order b25fbda8-f266-47d1-a90a-13bb0e1a9f1f (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,015", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order b25fbda8-f266-47d1-a90a-13bb0e1a9f1f (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.00700000, Vendor: 0.00300000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,074", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 3d49856d-bf0e-4ae3-9495-0f0276e0d3ee (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test notes...'", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,134", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order d5ab1afb-25d4-4384-a7b2-38648615fb9d (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 101, Notes: 'Test notes...'", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,136", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order d5ab1afb-25d4-4384-a7b2-38648615fb9d (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: -10, Notes: 'Test notes...'", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,195", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 4f9b3eff-f3bd-4d66-917e-fd734d9b625f (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test Notes - Crypto Fail Attempt...'", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,197", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 4f9b3eff-f3bd-4d66-917e-fd734d9b625f (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00500000 BTC, Vendor: 0.00500000 BTC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,197", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 4f9b3eff-f3bd-4d66-917e-fd734d9b625f (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,197", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order 4f9b3eff-f3bd-4d66-917e-fd734d9b625f (ResolveDispute by test_mod_escrow): Dispute broadcast error: Crypto dispute broadcast failed for Order 4f9b3eff-f3bd-4d66-917e-fd734d9b625f (service module returned invalid tx_hash: 'None').", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order 4f9b3eff-f3bd-4d66-917e-fd734d9b625f (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:19:20,252", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 88102e12-b5e4-427e-b643-e36327136ef5 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,254", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2244, "message": "Order 88102e12-b5e4-427e-b643-e36327136ef5 (GetUnsignedTx for test_buyer_escrow): Returning prepared transaction data (Type: btc_psbt). Already Signed: False", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,303", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 9c12b62f-9acc-4c61-bab9-d91d9eea0ed7 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,304", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2212, "message": "Order 9c12b62f-9acc-4c61-bab9-d91d9eea0ed7 (GetUnsignedTx for test_buyer_escrow): Attempted to get unsigned TX before release initiated.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,304", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 9c12b62f-9acc-4c61-bab9-d91d9eea0ed7 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,306", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 9c12b62f-9acc-4c61-bab9-d91d9eea0ed7 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {}", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,307", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 9c12b62f-9acc-4c61-bab9-d91d9eea0ed7 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,308", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 9c12b62f-9acc-4c61-bab9-d91d9eea0ed7 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'type': 'btc_psbt', 'signatures': {}}", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,309", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 9c12b62f-9acc-4c61-bab9-d91d9eea0ed7 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,310", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 9c12b62f-9acc-4c61-bab9-d91d9eea0ed7 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'data': 'some_data', 'signatures': {}}", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,363", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order a6482808-4f4e-4c6d-a3a5-ed9a175f366c (GetUnsignedTx for test_mod_escrow): Request received.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,365", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2207, "message": "Order a6482808-4f4e-4c6d-a3a5-ed9a175f366c (GetUnsignedTx for test_mod_escrow): Permission denied. User not buyer or vendor.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,410", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 416, "message": "Order 5f96315d-95eb-42a9-9ba2-3c60340eb860 (TimeoutCheck): Payment deadline 2025-04-08 08:19:20.409682+00:00 passed. Attempting cancellation.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,410", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 429, "message": "Order 5f96315d-95eb-42a9-9ba2-3c60340eb860 (TimeoutCheck): Successfully cancelled due to payment timeout. Status -> cancelled_timeout", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,410", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 430, "message": "Order 5f96315d-95eb-42a9-9ba2-3c60340eb860 automatically cancelled due to payment timeout.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,498", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order a9d42362-a4ba-413f-a55b-556047bca1e6 (BroadcastRelease): Initiating broadcast...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,498", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,500", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order a9d42362-a4ba-413f-a55b-556047bca1e6 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,500", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order a9d42362-a4ba-413f-a55b-556047bca1e6 (BroadcastRelease): Broadcast successful. Transaction Hash: aaa_int_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,501", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order a9d42362-a4ba-413f-a55b-556047bca1e6 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,502", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 8c1e01b3-ddfc-4608-ac14-893ab5c89df2 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,503", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction a66608b1-3823-478a-882e-8a0fd83250e1 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,503", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order a9d42362-a4ba-413f-a55b-556047bca1e6 (BroadcastRelease): Ledger updated. Vendor: 0.01960000 BTC, Fee: 0.00040000 BTC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,551", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order b9369be9-f4c8-4440-8221-7dedd3a0ead6 (BroadcastRelease): Initiating broadcast...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,551", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,553", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order b9369be9-f4c8-4440-8221-7dedd3a0ead6 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_unsigned_txset)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,553", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order b9369be9-f4c8-4440-8221-7dedd3a0ead6 (BroadcastRelease): Broadcast successful. Transaction Hash: bbb_int_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,554", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order b9369be9-f4c8-4440-8221-7dedd3a0ead6 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,555", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 5e7f8277-1dac-480d-9de1-85cfea48b0f4 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,556", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 3852da6f-f3cf-4c82-8662-01f10dbbbf12 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,556", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order b9369be9-f4c8-4440-8221-7dedd3a0ead6 (BroadcastRelease): Ledger updated. Vendor: 1.462500000000 XMR, Fee: 0.037500000000 XMR.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,601", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order ffdb91fa-1e30-4932-b434-724689c791fc (BroadcastRelease): Initiating broadcast...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,601", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,603", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order ffdb91fa-1e30-4932-b434-724689c791fc (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,603", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order ffdb91fa-1e30-4932-b434-724689c791fc (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order ffdb91fa-1e30-4932-b434-724689c791fc (service module returned invalid tx_hash: 'None').", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order ffdb91fa-1e30-4932-b434-724689c791fc (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:19:20,649", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 7f233810-f875-4da8-a024-18693f62a0d0 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 30, Notes: 'Split decision: 30% to buyer...'", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,651", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,653", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 7f233810-f875-4da8-a024-18693f62a0d0 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.00600000 BTC, Vendor: 0.01400000 BTC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,653", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 7f233810-f875-4da8-a024-18693f62a0d0 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,653", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 7f233810-f875-4da8-a024-18693f62a0d0 (ResolveDispute by test_mod_int): Dispute transaction broadcast successful. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,654", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 7f233810-f875-4da8-a024-18693f62a0d0 (ResolveDispute by test_mod_int): Order state saved successfully. Proceeding to ledger updates.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,655", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction eeb52982-3f7b-4db8-ab52-3234140561db recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,656", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 18287bb2-0e52-4d79-9c18-d40ab413ec41 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,656", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 7f233810-f875-4da8-a024-18693f62a0d0 (ResolveDispute by test_mod_int): Ledger updated. Buyer: 0.00600000, Vendor: 0.01400000 BTC. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,703", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 364b4f49-2753-400d-a95a-103811c5287c (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 50, Notes: 'Attempted resolution...'", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,704", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,705", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 364b4f49-2753-400d-a95a-103811c5287c (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.01000000 BTC, Vendor: 0.01000000 BTC.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,705", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 364b4f49-2753-400d-a95a-103811c5287c (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:19:20,705", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order 364b4f49-2753-400d-a95a-103811c5287c (ResolveDispute by test_mod_int): Dispute broadcast error: Crypto dispute broadcast failed for Order 364b4f49-2753-400d-a95a-103811c5287c (service module returned invalid tx_hash: 'None').", "process": 12808, "thread": 14688, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order 364b4f49-2753-400d-a95a-103811c5287c (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:19:20,743", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 12808, "thread": 14688}
{"asctime": "2025-04-08 03:36:26,789", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,790", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 079ff5db-e0db-4126-8de3-14e7ab569f7f recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,795", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction db825c63-3039-426d-9bd5-f84609cee3a9 recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,800", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 46194b98-d270-48eb-8f83-90ff30283418 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,804", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 202, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,808", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,812", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,816", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,819", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,823", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,827", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,832", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,835", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,839", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,844", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,847", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,850", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,892", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 486, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: Test lock", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,892", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 513, "message": "Ledger transaction dc7a3068-5151-4aec-90f2-9f409ef3e640 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,897", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 465, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,904", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 448, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,909", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: Test unlock", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,910", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction 0009b33b-ed4f-4a10-b456-9f99932d0eaa recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,915", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 592, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,915", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: Test unlock more", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,915", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction 33df27d0-2835-4081-8508-a5f0daaff707 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,919", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 587, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,927", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 566, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,932", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction fcd3e346-bb79-4392-a270-e6f46319f073 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,939", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction e348a1a6-bf90-4d93-ac36-6df1135907ac recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,944", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 853d9ec0-08b8-455a-b6db-57824f774b12 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,976", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 295, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,996", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,996", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 482, "message": "[get_market_btc_key] Market BTC key pubkey matches settings (031b7a7e8e...).", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:26,996", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 489, "message": "[get_market_btc_key] Successfully loaded and cached market BTC key from Vault (PubKey starts with: 031b7a7e8e...).", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,000", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,000", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 454, "message": "[get_market_btc_key] Vault returned invalid data for key 'market_btc_multisig_key': None", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,069", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1547, "message": "Deprecated function `process_btc_withdrawal` called. Use Ledger system.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,072", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1550, "message": "Deprecated function `process_escrow_release` called. Use Taproot multi-sig workflow (prepare/sign/finalize/broadcast).", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,113", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,115", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,117", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,120", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,122", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,124", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,126", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,126", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 341, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-08 03:36:27,128", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,134", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-08 03:36:27,139", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-08 03:36:27,144", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,145", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,147", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-08 03:36:27,152", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-08 03:36:27,155", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,156", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,158", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,161", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,163", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-08 03:36:27,167", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-08 03:36:27,171", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-08 03:36:27,176", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,180", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: d042cbbdf01955e5)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,180", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: d042cbbdf01955e5): 4LdpnMo9wPESgQ4...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,181", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,182", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,182", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,183", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: d042cbbdf01955e5)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,183", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: d042cbbdf01955e5): Timeout", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,186", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: d042cbbdf01955e5)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,186", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: d042cbbdf01955e5): Monero RPC Error (Code: -5): RPC Failed", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,188", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: d042cbbdf01955e5)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,188", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: d042cbbdf01955e5). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,191", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,191", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,193", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: d042cbbdf01955e5)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,194", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: d042cbbdf01955e5) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,196", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,196", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,196", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,201", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,201", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,204", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,204", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,206", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,206", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,208", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,208", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '235f61ec7a8c95cd257a68d8367194e6b3950ef3553f5008ad9f3ffa1c6bd6a7a29868f8858e02a4885399f60221a96f73040b7221bd8c3d8c2f69f75e7d941a12b01be8b8fa4eb717b43a38f484445945d5c7571e2c13635580eeb64064cf8d1a167545be3ffc84bc64e0c3131237dbd14fc9b420f25523df08e9abf1bd54a8'}", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,211", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,211", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,211", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 3924, "thread": 2492, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-08 03:36:27,211", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,212", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,215", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,215", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,215", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,216", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '3fa0107251c7b95a7b7c2e02187af0186e173f997f645455878aa4de2ae637a34f49e15ace4efa9e52a450f1d106696760d77d7361c77109104c457db540cfef4ce88160f4899b2982b876cb11138c30d9dbf165242bbc9615a3156b396baf903e8f3dfffd3634c4af9b73e6c829fb41c366b064c889e7cd17dbd0fa5366cf89545e2133ff371a3d8b326e0b00d975db08ac342296361847e68315f852d2381d91a00a14fea2e082a7b54dd046ced162da9695bb65c507e12c48d881888557e2952d13440e4d359898bedba769d611285625203d8904d6eb6dda45bf9d8f257c3ccce41c2868e1358de2ddc14cf74f9313034b248bad029d738c19cb826cc996'}", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,216", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 3924, "thread": 2492, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 03:36:27,216", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,216", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,218", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,219", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,219", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,219", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 3924, "thread": 2492, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 03:36:27,219", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,220", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,222", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,222", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,223", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,223", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 3924, "thread": 2492, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 03:36:27,223", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,223", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,225", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,225", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,225", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,236", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,237", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-08 03:36:27,241", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,241", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,241", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-08 03:36:27,244", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,245", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,248", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,248", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,248", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,248", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,251", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,251", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,252", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,254", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,254", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,254", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,254", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,257", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,257", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,259", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,259", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,260", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,260", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,262", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,262", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,263", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 03:36:27,265", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,265", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 03:36:27,269", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,269", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,271", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,272", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,272", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-08 03:36:27,274", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,274", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,277", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,277", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,277", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,277", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,279", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,279", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,279", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,279", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,283", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,283", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,283", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: b4b1acd746cc86ab2ea73ea16cd4aa463d478760f6ca33ad78df4c65ceccc350", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,283", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,287", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,290", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,292", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,293", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,293", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: b4b1acd746cc86ab2ea73ea16cd4aa463d478760f6ca33ad78df4c65ceccc350", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,295", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,296", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,299", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,299", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,302", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,302", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,302", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,305", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,306", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,306", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,308", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,309", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,309", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,311", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,311", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,312", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,314", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,314", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,314", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,317", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,317", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: b4b1acd746cc86ab2ea73ea16cd4aa463d478760f6ca33ad78df4c65ceccc350, Fee: 0.000543210000 XMR (543210000 pico)", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,320", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,320", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,320", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,321", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,321", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,324", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: b97f4bef...): Failed to get daemon height. Cannot calculate confirmations.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,334", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: b97f4bef...): Skipping entry 0: TXID b4b1acd746cc86ab2ea73ea16cd4aa463d478760f6ca33ad78df4c65ceccc350 already processed.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,339", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,341", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,344", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,350", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: b97f4bef...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-08 03:36:27,356", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: b97f4bef...): Found candidate! TXID: b4b1acd746cc86ab2ea73ea16cd4aa463d478760f6ca33ad78df4c65ceccc350, Amt: 1.234567890123 XMR, Confs: 11.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,356", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: b97f4bef...): Confirmed payment found.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,359", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,360", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,360", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,360", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-08 03:36:27,362", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,366", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,366", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,366", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,366", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: b4b1acd746cc86ab2ea73ea16cd4aa463d478760f6ca33ad78df4c65ceccc350, Fee: 0.000678900000 XMR (678900000 pico)", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,369", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,369", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,369", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,369", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,369", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,369", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,369", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,369", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,373", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,377", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,377", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,377", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,377", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 03:36:27,381", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,381", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 03:36:27,383", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,387", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,387", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,387", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 03:36:27,389", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 03:36:27,390", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,394", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,394", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,394", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,394", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: b4b1acd746cc86ab2ea73ea16cd4aa463d478760f6ca33ad78df4c65ceccc350, Fee: 0.000777700000 XMR (777700000 pico)", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,394", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,397", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,397", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,397", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,398", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: b4b1acd746cc86ab2ea73ea16cd4aa463d478760f6ca33ad78df4c65ceccc350, Fee: 0.000888800000 XMR (888800000 pico)", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,398", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,401", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,401", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,401", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,401", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,401", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,402", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,404", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,904", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,905", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:27,909", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:28,409", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:28,410", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:28,414", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/3): Timeout 1. Retrying in 0.5s...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:28,915", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/3): Refused 2. Retrying in 0.5s...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,422", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 401 (Authentication failed? Check RPC User/Password). Response: Unauthorized", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 03:36:29,431", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 500. Response: Internal Server Error", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 03:36:29,439", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-08 03:36:29,444", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 267, "message": "Monero RPC (Wallet - Method: some_method): RPC returned error: Code=-4, Message=Invalid params", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,459", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,459", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2859235834048'>", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,466", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,472", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,473", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2859260004736'>", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,477", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,487", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,488", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,496", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,496", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,503", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,503", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,504", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,511", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,511", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,511", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,516", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,526", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,526", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,541", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,541", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-08 03:36:29,550", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,557", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,557", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-08 03:36:29,565", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,566", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,574", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,574", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,583", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,583", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,597", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 387, "message": "User test_vendor_escrow missing valid withdrawal address in field 'btc_withdrawal_address' for currency BTC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,643", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 0b757376-066e-4546-8762-f917f7bb71e4 (BTC): Initiating multi-sig escrow setup...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,645", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_test_user' loaded and cached.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,646", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 661, "message": "Order 0b757376-066e-4546-8762-f917f7bb71e4 (BTC): BTC multisig details missing expected redeem/witness script.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,646", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 0b757376-066e-4546-8762-f917f7bb71e4 (BTC): Generated BTC Escrow Address: tb1qw508d6qejxt...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,646", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 0b757376-066e-4546-8762-f917f7bb71e4 (BTC): Created CryptoPayment 24ae31f0-6f46-47b8-be00-e90a20050198 (Multi-sig). Expected Atomic: 1000000", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,647", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 0b757376-066e-4546-8762-f917f7bb71e4 (BTC): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 09:36:29.646710+00:00. Awaiting payment to tb1qw508d6qejxt...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,647", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 0b757376-066e-4546-8762-f917f7bb71e4 (BTC): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,689", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order fa9d5632-9736-47a6-a227-9e71a153aad4 (XMR): Initiating multi-sig escrow setup...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,691", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order fa9d5632-9736-47a6-a227-9e71a153aad4 (XMR): Generated XMR Escrow Address: xmr_multisig_ad...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,692", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order fa9d5632-9736-47a6-a227-9e71a153aad4 (XMR): Created CryptoPayment a148c8e1-a470-46c3-8a6e-6a6dd45675b8 (Multi-sig). Expected Atomic: 1000000000000", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,692", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order fa9d5632-9736-47a6-a227-9e71a153aad4 (XMR): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 09:36:29.692411+00:00. Awaiting payment to xmr_multisig_ad...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,693", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order fa9d5632-9736-47a6-a227-9e71a153aad4 (XMR): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,735", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order ca7591ce-78ca-4622-b96b-a7fb48298749 (BTC): Initiating multi-sig escrow setup...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,735", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 537, "message": "Order ca7591ce-78ca-4622-b96b-a7fb48298749 (BTC): Cannot create escrow details. Status: 'shipped' (Expected: 'pending_payment').", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,776", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order af3f36ff-d033-4ab0-b2c9-5df16a5c852d (LTC): Initiating multi-sig escrow setup...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,777", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 607, "message": "Order af3f36ff-d033-4ab0-b2c9-5df16a5c852d (LTC): Failed to gather participant info: Multisig key attribute mapping not found for currency LTC.", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 581, in create_escrow_for_order\n    raise ValueError(f\"Multisig key attribute mapping not found for currency {currency}.\")\nValueError: Multisig key attribute mapping not found for currency LTC."}
{"asctime": "2025-04-08 03:36:29,820", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 33749a0b-d795-459f-87d6-ead9ee93d297 (BTC): Initiating multi-sig escrow setup...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,822", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 33749a0b-d795-459f-87d6-ead9ee93d297 (BTC): Crypto service error during BTC escrow generation: BTC Gen Failed", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 639, in create_escrow_for_order\n    msig_details = crypto_service_module.create_btc_multisig_address(\n        participant_pubkeys_hex=participant_infos, # Use expected kwarg name\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: BTC Gen Failed"}
{"asctime": "2025-04-08 03:36:29,865", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 540a78f8-cc05-4552-bb78-56ec3eb9db87 (XMR): Initiating multi-sig escrow setup...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,869", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 540a78f8-cc05-4552-bb78-56ec3eb9db87 (XMR): Crypto service error during XMR escrow generation: XMR Wallet Gen Failed", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 621, in create_escrow_for_order\n    msig_details = crypto_service_module.create_monero_multisig_wallet(\n        participant_infos=participant_infos, # Use keyword arg for clarity\n        order_guid=str(order.id),           # Use keyword arg 'order_guid'\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: XMR Wallet Gen Failed"}
{"asctime": "2025-04-08 03:36:29,925", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: bf1665d4-a836-4a7b-8b88-d7aefbc7d9d0, Payment: 606ab54e-7c92-4a09-8869-2dddf84189d5, Currency: BTC): Starting check.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,925", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: bf1665d4-a836-4a7b-8b88-d7aefbc7d9d0, Payment: 606ab54e-7c92-4a09-8869-2dddf84189d5, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,926", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: bf1665d4-a836-4a7b-8b88-d7aefbc7d9d0, Payment: 606ab54e-7c92-4a09-8869-2dddf84189d5, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,927", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1052, "message": "PaymentConfirm Check (Order: bf1665d4-a836-4a7b-8b88-d7aefbc7d9d0, Payment: 606ab54e-7c92-4a09-8869-2dddf84189d5, Currency: BTC): Ledger updated (incl. deposit fee) & Order status -> payment_confirmed. TXID: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,927", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1067, "message": "PaymentConfirm Check (Order: bf1665d4-a836-4a7b-8b88-d7aefbc7d9d0, Payment: 606ab54e-7c92-4a09-8869-2dddf84189d5, Currency: BTC): Sent payment confirmation notification to Vendor test_vendor_escrow.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:29,971", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: bf347b12-fb65-4389-badd-6cffe37f3887, Payment: 2ceae8d8-dd58-41ad-93c4-8bcc4ffda295, Currency: BTC): Starting check.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,018", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 917, "message": "Order 0af6223c-5e95-49b1-8829-181ff67aebeb cancelled due to underpayment. Rcvd 0.00500000, Exp 0.01000000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,066", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 8231d7b8-3b5e-4d97-97a4-959f5d39b07e, Payment: 34d8843f-3990-4f20-bef9-e9ac15bdb879, Currency: BTC): Starting check.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,066", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 8231d7b8-3b5e-4d97-97a4-959f5d39b07e, Payment: 34d8843f-3990-4f20-bef9-e9ac15bdb879, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,067", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 8231d7b8-3b5e-4d97-97a4-959f5d39b07e, Payment: 34d8843f-3990-4f20-bef9-e9ac15bdb879, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,067", "levelname": "CRITICAL", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1075, "message": "PaymentConfirm Check (Order: 8231d7b8-3b5e-4d97-97a4-959f5d39b07e, Payment: 34d8843f-3990-4f20-bef9-e9ac15bdb879, Currency: BTC): CRITICAL: Ledger/Order atomic update FAILED during payment confirmation! Error: ['Cannot lock funds']. Transaction rolled back.", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1010, in check_and_confirm_payment\n    lock_success = ledger_service.lock_funds(\n        user=buyer, currency=currency, amount=expected_std, # Lock the required STANDARD order amount\n        related_order=order, notes=f\"Lock funds for Order {order.id} escrow\"\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nledger.services.InsufficientFundsError: ['Cannot lock funds']"}
{"asctime": "2025-04-08 03:36:30,115", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 7b3c4a1b-411b-40b4-9a53-e685bafc90f6 (MarkShipped by test_vendor_escrow): Attempting...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,117", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1190, "message": "Order 7b3c4a1b-411b-40b4-9a53-e685bafc90f6 (MarkShipped by test_vendor_escrow): Tracking info provided but 'tracking_info' field missing on Order model.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,119", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1206, "message": "Order 7b3c4a1b-411b-40b4-9a53-e685bafc90f6 (MarkShipped by test_vendor_escrow): Marked shipped. Status -> shipped. Dispute deadline: 2025-04-15 09:36:30.116751+00:00, Auto-finalize: 2025-04-22 09:36:30.116751+00:00", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,120", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1230, "message": "Order 7b3c4a1b-411b-40b4-9a53-e685bafc90f6 (MarkShipped by test_vendor_escrow): Sent order shipped notification to Buyer test_buyer_escrow.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,167", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 3d06072f-771c-4b44-985f-c6f040140ef6 (MarkShipped by test_buyer_escrow): Attempting...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,169", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1126, "message": "Order 3d06072f-771c-4b44-985f-c6f040140ef6 (MarkShipped by test_buyer_escrow): Permission denied. User test_buyer_escrow is not the vendor (test_vendor_escrow).", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,214", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order fa1ba775-f2bd-455e-983d-a0d43d24974f (MarkShipped by test_vendor_escrow): Attempting...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,216", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1130, "message": "Order fa1ba775-f2bd-455e-983d-a0d43d24974f (MarkShipped by test_vendor_escrow): Cannot mark shipped. Invalid status 'pending_payment' (Expected: 'payment_confirmed').", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,263", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 3232cb75-d01e-4c2e-a32d-bda285f2b2bd (MarkShipped by test_vendor_escrow): Attempting...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,264", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1144, "message": "Order 3232cb75-d01e-4c2e-a32d-bda285f2b2bd (MarkShipped by test_vendor_escrow): Failed to prepare release transaction: Prep Fail", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1138, in mark_order_shipped\n    prepared_release_metadata = _prepare_release(order_locked) # Definition is later in file\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Prep Fail"}
{"asctime": "2025-04-08 03:36:30,317", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 019aa6a3-5340-4d8a-977a-f5b1daf8a0f0 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,318", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 019aa6a3-5340-4d8a-977a-f5b1daf8a0f0 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,319", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order 019aa6a3-5340-4d8a-977a-f5b1daf8a0f0 (SignRelease by test_buyer_escrow): Signature applied. Current signers: 1/2. Ready for broadcast: False.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,367", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order c3675488-52f6-468f-b947-7aefe2978ec7 (SignRelease by test_vendor_escrow): Attempting signature...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,368", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order c3675488-52f6-468f-b947-7aefe2978ec7 (SignRelease by test_vendor_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,369", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order c3675488-52f6-468f-b947-7aefe2978ec7 (SignRelease by test_vendor_escrow): Signature applied. Current signers: 2/2. Ready for broadcast: True.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,369", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1465, "message": "Order c3675488-52f6-468f-b947-7aefe2978ec7 (SignRelease by test_vendor_escrow): Sent 'ready for broadcast' notification to test_buyer_escrow.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,416", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order ad7429e7-957c-4816-9c00-ed4421c4779e (SignRelease by test_mod_escrow): Attempting signature...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,418", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1289, "message": "Order ad7429e7-957c-4816-9c00-ed4421c4779e (SignRelease by test_mod_escrow): Permission denied. User is not buyer or vendor.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,464", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 5d29e1ab-e9d9-4ff2-8a0b-05b79842316d (SignRelease by test_buyer_escrow): Attempting signature...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,466", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 5d29e1ab-e9d9-4ff2-8a0b-05b79842316d (SignRelease by test_buyer_escrow): Attempting signature...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,468", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 5d29e1ab-e9d9-4ff2-8a0b-05b79842316d (SignRelease by test_buyer_escrow): Attempting signature...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,470", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 5d29e1ab-e9d9-4ff2-8a0b-05b79842316d (SignRelease by test_buyer_escrow): Attempting signature...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,519", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order c5efc50b-90be-4fe4-bdb6-d3f24d1b23f8 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,520", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1321, "message": "Order c5efc50b-90be-4fe4-bdb6-d3f24d1b23f8 (SignRelease by test_buyer_escrow): User test_buyer_escrow (ID: 59) has already signed this release.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,568", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 65d05dd7-8031-44fa-a881-93eb3d6b1049 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,569", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 65d05dd7-8031-44fa-a881-93eb3d6b1049 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,569", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1425, "message": "Order 65d05dd7-8031-44fa-a881-93eb3d6b1049 (SignRelease by test_buyer_escrow): Crypto signing error: Simulated BTC Sign Failure", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1345, in sign_order_release\n    sign_result = sign_func(\n        psbt_base64=unsigned_crypto_data,  # Map to expected arg name\n        private_key_wif=private_key_info    # Map to expected arg name\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Simulated BTC Sign Failure"}
{"asctime": "2025-04-08 03:36:30,623", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 3dc0ff14-7519-419d-8261-1120b450d360 (BroadcastRelease): Initiating broadcast...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,625", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 3dc0ff14-7519-419d-8261-1120b450d360 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,625", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 3dc0ff14-7519-419d-8261-1120b450d360 (BroadcastRelease): Broadcast successful. Transaction Hash: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,625", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 3dc0ff14-7519-419d-8261-1120b450d360 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,626", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 3dc0ff14-7519-419d-8261-1120b450d360 (BroadcastRelease): Ledger updated. Vendor: 0.00975000 BTC, Fee: 0.00025000 BTC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,678", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order ac9c80ec-c7c9-48ac-982a-d21cd94653f6 (BroadcastRelease): Initiating broadcast...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,680", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order ac9c80ec-c7c9-48ac-982a-d21cd94653f6 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_signed_txset)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,680", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order ac9c80ec-c7c9-48ac-982a-d21cd94653f6 (BroadcastRelease): Broadcast successful. Transaction Hash: xmr_tx_hash_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,680", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order ac9c80ec-c7c9-48ac-982a-d21cd94653f6 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,680", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order ac9c80ec-c7c9-48ac-982a-d21cd94653f6 (BroadcastRelease): Ledger updated. Vendor: 0.975000000000 XMR, Fee: 0.025000000000 XMR.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,732", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order c6d6dd66-124f-4b66-9adc-72686cfe472f (BroadcastRelease): Initiating broadcast...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,735", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order c6d6dd66-124f-4b66-9adc-72686cfe472f (BroadcastRelease): Initiating broadcast...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,741", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order c6d6dd66-124f-4b66-9adc-72686cfe472f (BroadcastRelease): Initiating broadcast...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,792", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 85e11c34-d41f-475a-b4d6-ce7e2f39a212 (BroadcastRelease): Initiating broadcast...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,794", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 85e11c34-d41f-475a-b4d6-ce7e2f39a212 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,794", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 85e11c34-d41f-475a-b4d6-ce7e2f39a212 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 85e11c34-d41f-475a-b4d6-ce7e2f39a212 (service module returned invalid tx_hash: 'None').", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 85e11c34-d41f-475a-b4d6-ce7e2f39a212 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:36:30,903", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 74c87684-1996-4d88-b4a2-afa47af93cde (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 100, Notes: 'Full refund....'", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,904", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 74c87684-1996-4d88-b4a2-afa47af93cde (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.01000000 BTC, Vendor: 0E-8 BTC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,904", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 74c87684-1996-4d88-b4a2-afa47af93cde (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,904", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 74c87684-1996-4d88-b4a2-afa47af93cde (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,905", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 74c87684-1996-4d88-b4a2-afa47af93cde (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,905", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 74c87684-1996-4d88-b4a2-afa47af93cde (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.01000000, Vendor: 0E-8 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,957", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 1cbb7326-0eb9-45eb-acc8-fb6ee1131ee9 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 70, Notes: 'Split 70/30...'", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,959", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 1cbb7326-0eb9-45eb-acc8-fb6ee1131ee9 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00700000 BTC, Vendor: 0.00300000 BTC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,959", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 1cbb7326-0eb9-45eb-acc8-fb6ee1131ee9 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,959", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 1cbb7326-0eb9-45eb-acc8-fb6ee1131ee9 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,959", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 1cbb7326-0eb9-45eb-acc8-fb6ee1131ee9 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:30,960", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 1cbb7326-0eb9-45eb-acc8-fb6ee1131ee9 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.00700000, Vendor: 0.00300000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,009", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 9532bdac-4667-4b75-af75-f42f838c0ed9 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test notes...'", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,060", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 0e9f9e2b-6f9a-4212-9542-fb34bd7f24cf (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 101, Notes: 'Test notes...'", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,062", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 0e9f9e2b-6f9a-4212-9542-fb34bd7f24cf (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: -10, Notes: 'Test notes...'", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,116", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 0c52964f-8422-45cf-ae18-327e4ebe0f4a (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test Notes - Crypto Fail Attempt...'", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,117", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 0c52964f-8422-45cf-ae18-327e4ebe0f4a (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00500000 BTC, Vendor: 0.00500000 BTC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,117", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 0c52964f-8422-45cf-ae18-327e4ebe0f4a (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,117", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order 0c52964f-8422-45cf-ae18-327e4ebe0f4a (ResolveDispute by test_mod_escrow): Dispute broadcast error: Crypto dispute broadcast failed for Order 0c52964f-8422-45cf-ae18-327e4ebe0f4a (service module returned invalid tx_hash: 'None').", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order 0c52964f-8422-45cf-ae18-327e4ebe0f4a (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:36:31,167", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order e1c336d8-d16f-4854-9229-a6b68272144e (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,169", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2244, "message": "Order e1c336d8-d16f-4854-9229-a6b68272144e (GetUnsignedTx for test_buyer_escrow): Returning prepared transaction data (Type: btc_psbt). Already Signed: False", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,216", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order e256579b-0a19-435a-97dd-0e9ea77d1d50 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,217", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2212, "message": "Order e256579b-0a19-435a-97dd-0e9ea77d1d50 (GetUnsignedTx for test_buyer_escrow): Attempted to get unsigned TX before release initiated.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,218", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order e256579b-0a19-435a-97dd-0e9ea77d1d50 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,219", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order e256579b-0a19-435a-97dd-0e9ea77d1d50 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {}", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,220", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order e256579b-0a19-435a-97dd-0e9ea77d1d50 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,221", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order e256579b-0a19-435a-97dd-0e9ea77d1d50 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'type': 'btc_psbt', 'signatures': {}}", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,222", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order e256579b-0a19-435a-97dd-0e9ea77d1d50 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,223", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order e256579b-0a19-435a-97dd-0e9ea77d1d50 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'data': 'some_data', 'signatures': {}}", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,271", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order b50eb43d-e94d-4d07-abde-9938ff5a910e (GetUnsignedTx for test_mod_escrow): Request received.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,272", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2207, "message": "Order b50eb43d-e94d-4d07-abde-9938ff5a910e (GetUnsignedTx for test_mod_escrow): Permission denied. User not buyer or vendor.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,317", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 416, "message": "Order 47e68daa-0888-48b0-9c75-779bee582b89 (TimeoutCheck): Payment deadline 2025-04-08 08:36:31.316627+00:00 passed. Attempting cancellation.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,317", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 429, "message": "Order 47e68daa-0888-48b0-9c75-779bee582b89 (TimeoutCheck): Successfully cancelled due to payment timeout. Status -> cancelled_timeout", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,317", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 430, "message": "Order 47e68daa-0888-48b0-9c75-779bee582b89 automatically cancelled due to payment timeout.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,419", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 655ab1bb-93f7-498f-bfce-5f08be686848 (BroadcastRelease): Initiating broadcast...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,419", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,421", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 655ab1bb-93f7-498f-bfce-5f08be686848 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,421", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 655ab1bb-93f7-498f-bfce-5f08be686848 (BroadcastRelease): Broadcast successful. Transaction Hash: aaa_int_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,422", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 655ab1bb-93f7-498f-bfce-5f08be686848 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,423", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 59fb238a-fac0-4da8-a1cf-cbccfb37d1ce recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,424", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 5bc5148d-92cc-40dd-b920-55b7f6ad13d4 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,425", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 655ab1bb-93f7-498f-bfce-5f08be686848 (BroadcastRelease): Ledger updated. Vendor: 0.01960000 BTC, Fee: 0.00040000 BTC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,466", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 1dfefbff-5e90-486c-bb39-1c9d12505ae5 (BroadcastRelease): Initiating broadcast...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,467", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,468", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 1dfefbff-5e90-486c-bb39-1c9d12505ae5 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_unsigned_txset)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,468", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 1dfefbff-5e90-486c-bb39-1c9d12505ae5 (BroadcastRelease): Broadcast successful. Transaction Hash: bbb_int_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,469", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 1dfefbff-5e90-486c-bb39-1c9d12505ae5 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,470", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 42a2f036-14a4-4e29-86bf-168d7dccb3c0 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,471", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 496fe6e2-c30b-4e7f-898a-761f18d25a3a recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,471", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 1dfefbff-5e90-486c-bb39-1c9d12505ae5 (BroadcastRelease): Ledger updated. Vendor: 1.462500000000 XMR, Fee: 0.037500000000 XMR.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,513", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 62dcd0cb-8a82-4391-9c0f-e5c97ce7eefd (BroadcastRelease): Initiating broadcast...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,514", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,515", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 62dcd0cb-8a82-4391-9c0f-e5c97ce7eefd (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,515", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 62dcd0cb-8a82-4391-9c0f-e5c97ce7eefd (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 62dcd0cb-8a82-4391-9c0f-e5c97ce7eefd (service module returned invalid tx_hash: 'None').", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 62dcd0cb-8a82-4391-9c0f-e5c97ce7eefd (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:36:31,561", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order d1a2332c-0d21-4f81-82b4-0ef73a832273 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 30, Notes: 'Split decision: 30% to buyer...'", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,563", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,564", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order d1a2332c-0d21-4f81-82b4-0ef73a832273 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.00600000 BTC, Vendor: 0.01400000 BTC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,565", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order d1a2332c-0d21-4f81-82b4-0ef73a832273 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,565", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order d1a2332c-0d21-4f81-82b4-0ef73a832273 (ResolveDispute by test_mod_int): Dispute transaction broadcast successful. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,566", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order d1a2332c-0d21-4f81-82b4-0ef73a832273 (ResolveDispute by test_mod_int): Order state saved successfully. Proceeding to ledger updates.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,567", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 7cf7790c-7b0d-4031-b566-4887f1d7c4af recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,568", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction acbdd5ee-41f3-4a25-b571-63f627c2d205 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,568", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order d1a2332c-0d21-4f81-82b4-0ef73a832273 (ResolveDispute by test_mod_int): Ledger updated. Buyer: 0.00600000, Vendor: 0.01400000 BTC. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,612", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order e288161b-7a5b-492d-a62d-c25199a1e99d (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 50, Notes: 'Attempted resolution...'", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,612", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,613", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order e288161b-7a5b-492d-a62d-c25199a1e99d (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.01000000 BTC, Vendor: 0.01000000 BTC.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,614", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order e288161b-7a5b-492d-a62d-c25199a1e99d (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:36:31,614", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order e288161b-7a5b-492d-a62d-c25199a1e99d (ResolveDispute by test_mod_int): Dispute broadcast error: Crypto dispute broadcast failed for Order e288161b-7a5b-492d-a62d-c25199a1e99d (service module returned invalid tx_hash: 'None').", "process": 3924, "thread": 2492, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order e288161b-7a5b-492d-a62d-c25199a1e99d (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:36:31,652", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 3924, "thread": 2492}
{"asctime": "2025-04-08 03:48:01,252", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,252", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction c4415fe1-7851-42ab-8946-6eacdf43b0b9 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,256", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction c6b78111-1238-4f06-b42e-2a198f3d0d5c recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,261", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 5cb7424c-94c5-46a9-b208-9b3067d1296b recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,266", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 202, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,270", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,274", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,277", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,282", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,284", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,288", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,291", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,297", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,301", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,304", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,307", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,311", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,350", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 486, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: Test lock", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,351", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 513, "message": "Ledger transaction 941fb3f1-b0dc-408f-8c08-35e2ac92a0c8 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,357", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 465, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,364", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 448, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,370", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: Test unlock", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,371", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction 9df44025-b4f7-4c9f-9a2b-68b88489d824 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,377", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 592, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,377", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: Test unlock more", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,377", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction 6178f8d8-b841-485c-931a-801ff5004c1a recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,382", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 587, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,392", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 566, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,397", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction de8dec2d-97d9-4858-b90f-b430264f79f6 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,404", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction c0db941d-931d-4ff0-ac36-fdfce92a6b5a recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,410", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 32d630a7-0c9f-47b7-a38b-22ec7066caa6 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,440", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 295, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,460", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,460", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 482, "message": "[get_market_btc_key] Market BTC key pubkey matches settings (031b7a7e8e...).", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,460", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 489, "message": "[get_market_btc_key] Successfully loaded and cached market BTC key from Vault (PubKey starts with: 031b7a7e8e...).", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,463", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,463", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 454, "message": "[get_market_btc_key] Vault returned invalid data for key 'market_btc_multisig_key': None", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,530", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1547, "message": "Deprecated function `process_btc_withdrawal` called. Use Ledger system.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,533", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1550, "message": "Deprecated function `process_escrow_release` called. Use Taproot multi-sig workflow (prepare/sign/finalize/broadcast).", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,575", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,577", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,580", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,581", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,583", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,584", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,587", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,587", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 341, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-08 03:48:01,617", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,622", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-08 03:48:01,642", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-08 03:48:01,647", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,648", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,649", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-08 03:48:01,653", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-08 03:48:01,657", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,657", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,660", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,663", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,666", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-08 03:48:01,670", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-08 03:48:01,674", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-08 03:48:01,678", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,680", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7d41c8551386fbbe)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,680", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 7d41c8551386fbbe): 4LdpnMo9wPESgQ4...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,681", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,682", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,682", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,684", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7d41c8551386fbbe)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,684", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 7d41c8551386fbbe): Timeout", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,686", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7d41c8551386fbbe)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,686", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 7d41c8551386fbbe): Monero RPC Error (Code: -5): RPC Failed", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,688", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7d41c8551386fbbe)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,688", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 7d41c8551386fbbe). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,690", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,690", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,692", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7d41c8551386fbbe)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,692", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 7d41c8551386fbbe) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,694", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,694", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,695", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,698", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,698", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,701", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,701", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,703", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,703", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,706", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,706", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '23865c85956046f0ffc0b6ff66312b87cfe234bddd007c263762599ab32a7711e5e60af9dbbbd667a3f21d8e83e50ea6902a5e3455b26bbd4c8c6e7aed18d7baafde8ad270486ee102f02565fc1cf0b2e89a51883b597d97e2fabe4179cd9c59bd89c4d1eeb5a6cdc707922d57d8e64c02c85a94c305948f86ea668c478466cd'}", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,709", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,709", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,709", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 19512, "thread": 19516, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-08 03:48:01,709", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,709", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,711", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,711", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,712", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,712", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '6d1aa4275214ed5333da7630fcab6bbb63a50786145e3fb2f1de6a74e7a3fe0f4797b5c622dac99b65396876f4cc62ec582442581f09feee07a224742b40fa65eb267381fb0646266eb4db7f22011ffeef7feb2d64320f3e4add47ed7fd86bb705a732e8d65036d8bdda2c2a1c49e6f14ed27c79754586c501e2bb2f49d3b38e3c7e23c63d556fba1afdad90cfd2e01b7a2601da44337b31fc5e5f6f7d0ebcca66559684746541aa7817ac42088abd59586288ced5e885eed21620c95e8b8aaaa0b3a00efcae1c8f8afc420f35caba3de4ece7b2a7e6833205fb78304e6107a7852092fc5a429f6223a52c6f50e7724b2dd42dd651775f6df5099e4cc3d318a7'}", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,712", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 19512, "thread": 19516, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 03:48:01,712", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,712", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,714", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,714", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,714", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,714", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 19512, "thread": 19516, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 03:48:01,715", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,715", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,717", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,717", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,717", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,717", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 19512, "thread": 19516, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 03:48:01,717", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,717", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,719", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,719", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,719", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,730", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,731", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-08 03:48:01,735", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,735", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,735", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-08 03:48:01,738", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,738", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,741", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,742", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,742", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,742", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,746", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,746", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,746", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,748", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,749", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,749", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,749", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,751", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,751", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,753", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,753", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,753", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,754", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,756", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,756", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,756", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 03:48:01,759", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,759", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 03:48:01,763", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,763", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,765", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,765", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,765", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-08 03:48:01,768", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,768", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,770", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,771", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,771", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,771", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,773", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,774", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,774", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,774", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,776", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,776", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,776", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 63f4fa474584e103fc3ce258415aab9a94a38dd30249ee4d1bed31f769592bea", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,776", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,779", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,782", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,784", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,784", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,784", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 63f4fa474584e103fc3ce258415aab9a94a38dd30249ee4d1bed31f769592bea", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,788", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,789", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,791", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,792", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,795", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,796", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,796", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,799", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,800", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,800", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,803", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,803", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,803", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,806", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,806", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,806", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,809", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,810", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,810", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,814", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,814", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 63f4fa474584e103fc3ce258415aab9a94a38dd30249ee4d1bed31f769592bea, Fee: 0.000543210000 XMR (543210000 pico)", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,817", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,817", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,817", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,817", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,817", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,822", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: d54f9d35...): Failed to get daemon height. Cannot calculate confirmations.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,831", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: d54f9d35...): Skipping entry 0: TXID 63f4fa474584e103fc3ce258415aab9a94a38dd30249ee4d1bed31f769592bea already processed.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,834", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,838", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,840", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,847", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: d54f9d35...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-08 03:48:01,853", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: d54f9d35...): Found candidate! TXID: 63f4fa474584e103fc3ce258415aab9a94a38dd30249ee4d1bed31f769592bea, Amt: 1.234567890123 XMR, Confs: 11.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,853", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: d54f9d35...): Confirmed payment found.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,856", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,856", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,856", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,856", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-08 03:48:01,858", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,861", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,861", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,861", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,861", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 63f4fa474584e103fc3ce258415aab9a94a38dd30249ee4d1bed31f769592bea, Fee: 0.000678900000 XMR (678900000 pico)", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,863", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,863", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,863", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,863", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,864", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,864", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,864", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,864", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,867", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,870", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,870", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,870", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,870", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 03:48:01,874", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,874", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 03:48:01,877", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,880", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,880", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,880", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 03:48:01,882", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 03:48:01,896", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,900", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,900", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,900", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,901", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 63f4fa474584e103fc3ce258415aab9a94a38dd30249ee4d1bed31f769592bea, Fee: 0.000777700000 XMR (777700000 pico)", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,901", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,904", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,904", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,904", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,904", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 63f4fa474584e103fc3ce258415aab9a94a38dd30249ee4d1bed31f769592bea, Fee: 0.000888800000 XMR (888800000 pico)", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,904", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,908", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,908", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,909", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,909", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,909", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,909", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:01,912", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:02,413", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:02,413", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:02,417", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:02,917", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:02,918", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:02,922", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/3): Timeout 1. Retrying in 0.5s...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:03,423", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/3): Refused 2. Retrying in 0.5s...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:03,931", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 401 (Authentication failed? Check RPC User/Password). Response: Unauthorized", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 03:48:03,942", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 500. Response: Internal Server Error", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 03:48:03,949", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-08 03:48:03,953", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 267, "message": "Monero RPC (Wallet - Method: some_method): RPC returned error: Code=-4, Message=Invalid params", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:03,968", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:03,968", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2702143668976'>", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:03,975", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:03,984", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:03,984", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2702143669648'>", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:03,990", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:03,999", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:03,999", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,007", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,007", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,016", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,016", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,016", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,024", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,024", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,024", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,030", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,038", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,038", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,052", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,052", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-08 03:48:04,073", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,079", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,080", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-08 03:48:04,088", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,088", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,095", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,095", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,102", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,102", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,116", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 387, "message": "User test_vendor_escrow missing valid withdrawal address in field 'btc_withdrawal_address' for currency BTC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,164", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order c92d198a-ddad-4787-931f-10a7cac4d0d4 (BTC): Initiating multi-sig escrow setup...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,166", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_test_user' loaded and cached.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,167", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 661, "message": "Order c92d198a-ddad-4787-931f-10a7cac4d0d4 (BTC): BTC multisig details missing expected redeem/witness script.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,167", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order c92d198a-ddad-4787-931f-10a7cac4d0d4 (BTC): Generated BTC Escrow Address: tb1qw508d6qejxt...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,167", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order c92d198a-ddad-4787-931f-10a7cac4d0d4 (BTC): Created CryptoPayment 8ae845c5-4010-4fe6-aafa-63c725bbc833 (Multi-sig). Expected Atomic: 1000000", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,167", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order c92d198a-ddad-4787-931f-10a7cac4d0d4 (BTC): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 09:48:04.167609+00:00. Awaiting payment to tb1qw508d6qejxt...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,168", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order c92d198a-ddad-4787-931f-10a7cac4d0d4 (BTC): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,208", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 7a5bf66d-1c34-404c-85ee-647bf9ddd81e (XMR): Initiating multi-sig escrow setup...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,210", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 7a5bf66d-1c34-404c-85ee-647bf9ddd81e (XMR): Generated XMR Escrow Address: xmr_multisig_ad...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,210", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 7a5bf66d-1c34-404c-85ee-647bf9ddd81e (XMR): Created CryptoPayment 0302ed0e-6737-4d3b-aefa-86b41472c408 (Multi-sig). Expected Atomic: 1000000000000", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,210", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 7a5bf66d-1c34-404c-85ee-647bf9ddd81e (XMR): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 09:48:04.210558+00:00. Awaiting payment to xmr_multisig_ad...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,211", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 7a5bf66d-1c34-404c-85ee-647bf9ddd81e (XMR): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,254", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order f33363ee-6315-471b-a224-6a335a633ee3 (BTC): Initiating multi-sig escrow setup...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,255", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 537, "message": "Order f33363ee-6315-471b-a224-6a335a633ee3 (BTC): Cannot create escrow details. Status: 'shipped' (Expected: 'pending_payment').", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,295", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 46dd4be8-bd2d-4f4e-91b1-abb5d28f5a23 (LTC): Initiating multi-sig escrow setup...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,297", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 607, "message": "Order 46dd4be8-bd2d-4f4e-91b1-abb5d28f5a23 (LTC): Failed to gather participant info: Multisig key attribute mapping not found for currency LTC.", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 581, in create_escrow_for_order\n    raise ValueError(f\"Multisig key attribute mapping not found for currency {currency}.\")\nValueError: Multisig key attribute mapping not found for currency LTC."}
{"asctime": "2025-04-08 03:48:04,352", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order c67dd836-4e09-4147-86dd-12b08c070623 (BTC): Initiating multi-sig escrow setup...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,354", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order c67dd836-4e09-4147-86dd-12b08c070623 (BTC): Crypto service error during BTC escrow generation: BTC Gen Failed", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 639, in create_escrow_for_order\n    msig_details = crypto_service_module.create_btc_multisig_address(\n        participant_pubkeys_hex=participant_infos, # Use expected kwarg name\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: BTC Gen Failed"}
{"asctime": "2025-04-08 03:48:04,397", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order a358318b-659c-4d3a-bb77-cbf9debd1dbf (XMR): Initiating multi-sig escrow setup...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,399", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order a358318b-659c-4d3a-bb77-cbf9debd1dbf (XMR): Crypto service error during XMR escrow generation: XMR Wallet Gen Failed", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 621, in create_escrow_for_order\n    msig_details = crypto_service_module.create_monero_multisig_wallet(\n        participant_infos=participant_infos, # Use keyword arg for clarity\n        order_guid=str(order.id),           # Use keyword arg 'order_guid'\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: XMR Wallet Gen Failed"}
{"asctime": "2025-04-08 03:48:04,450", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: d1f3651d-7644-458a-994d-a2961ca93e41, Payment: 10cf173a-ac2d-4ab7-ba77-841538e5ce3c, Currency: BTC): Starting check.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,450", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: d1f3651d-7644-458a-994d-a2961ca93e41, Payment: 10cf173a-ac2d-4ab7-ba77-841538e5ce3c, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,451", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: d1f3651d-7644-458a-994d-a2961ca93e41, Payment: 10cf173a-ac2d-4ab7-ba77-841538e5ce3c, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,452", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1052, "message": "PaymentConfirm Check (Order: d1f3651d-7644-458a-994d-a2961ca93e41, Payment: 10cf173a-ac2d-4ab7-ba77-841538e5ce3c, Currency: BTC): Ledger updated (incl. deposit fee) & Order status -> payment_confirmed. TXID: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,452", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1067, "message": "PaymentConfirm Check (Order: d1f3651d-7644-458a-994d-a2961ca93e41, Payment: 10cf173a-ac2d-4ab7-ba77-841538e5ce3c, Currency: BTC): Sent payment confirmation notification to Vendor test_vendor_escrow.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,498", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 975d4587-d975-4340-a87b-84206f8fde10, Payment: e6823a23-5664-4038-9a30-02ca722f761e, Currency: BTC): Starting check.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,543", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 917, "message": "Order db664f09-8390-416b-ba31-5bf9af87ef11 cancelled due to underpayment. Rcvd 0.00500000, Exp 0.01000000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,590", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 0f012e3c-5b6b-4192-b160-0946bc2a6f33, Payment: 9f4a62d8-a409-4de9-8197-ccad5bcde485, Currency: BTC): Starting check.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,590", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 0f012e3c-5b6b-4192-b160-0946bc2a6f33, Payment: 9f4a62d8-a409-4de9-8197-ccad5bcde485, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,590", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 0f012e3c-5b6b-4192-b160-0946bc2a6f33, Payment: 9f4a62d8-a409-4de9-8197-ccad5bcde485, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,590", "levelname": "CRITICAL", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1075, "message": "PaymentConfirm Check (Order: 0f012e3c-5b6b-4192-b160-0946bc2a6f33, Payment: 9f4a62d8-a409-4de9-8197-ccad5bcde485, Currency: BTC): CRITICAL: Ledger/Order atomic update FAILED during payment confirmation! Error: ['Cannot lock funds']. Transaction rolled back.", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1010, in check_and_confirm_payment\n    lock_success = ledger_service.lock_funds(\n        user=buyer, currency=currency, amount=expected_std, # Lock the required STANDARD order amount\n        related_order=order, notes=f\"Lock funds for Order {order.id} escrow\"\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nledger.services.InsufficientFundsError: ['Cannot lock funds']"}
{"asctime": "2025-04-08 03:48:04,640", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 673ad218-a1a9-40c3-87f9-fa8e12e394ef (MarkShipped by test_vendor_escrow): Attempting...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,642", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1190, "message": "Order 673ad218-a1a9-40c3-87f9-fa8e12e394ef (MarkShipped by test_vendor_escrow): Tracking info provided but 'tracking_info' field missing on Order model.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,644", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1206, "message": "Order 673ad218-a1a9-40c3-87f9-fa8e12e394ef (MarkShipped by test_vendor_escrow): Marked shipped. Status -> shipped. Dispute deadline: 2025-04-15 09:48:04.642302+00:00, Auto-finalize: 2025-04-22 09:48:04.642302+00:00", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,644", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1230, "message": "Order 673ad218-a1a9-40c3-87f9-fa8e12e394ef (MarkShipped by test_vendor_escrow): Sent order shipped notification to Buyer test_buyer_escrow.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,690", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 620c6e88-2cfc-4a22-b069-6f974c7f103a (MarkShipped by test_buyer_escrow): Attempting...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,691", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1126, "message": "Order 620c6e88-2cfc-4a22-b069-6f974c7f103a (MarkShipped by test_buyer_escrow): Permission denied. User test_buyer_escrow is not the vendor (test_vendor_escrow).", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,734", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order e9e2671f-7d41-4577-9861-1aea43c4d6d8 (MarkShipped by test_vendor_escrow): Attempting...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,735", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1130, "message": "Order e9e2671f-7d41-4577-9861-1aea43c4d6d8 (MarkShipped by test_vendor_escrow): Cannot mark shipped. Invalid status 'pending_payment' (Expected: 'payment_confirmed').", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,781", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 89002500-7c46-401c-9e25-3fbb8814e6b4 (MarkShipped by test_vendor_escrow): Attempting...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,782", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1144, "message": "Order 89002500-7c46-401c-9e25-3fbb8814e6b4 (MarkShipped by test_vendor_escrow): Failed to prepare release transaction: Prep Fail", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1138, in mark_order_shipped\n    prepared_release_metadata = _prepare_release(order_locked) # Definition is later in file\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Prep Fail"}
{"asctime": "2025-04-08 03:48:04,833", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 1f8f4f88-d500-4ee1-a7ee-4ed7fd8c6734 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,834", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 1f8f4f88-d500-4ee1-a7ee-4ed7fd8c6734 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,835", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order 1f8f4f88-d500-4ee1-a7ee-4ed7fd8c6734 (SignRelease by test_buyer_escrow): Signature applied. Current signers: 1/2. Ready for broadcast: False.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,883", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 953e6e5e-61d5-460c-b532-749c1d9d69b8 (SignRelease by test_vendor_escrow): Attempting signature...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,885", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 953e6e5e-61d5-460c-b532-749c1d9d69b8 (SignRelease by test_vendor_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,885", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order 953e6e5e-61d5-460c-b532-749c1d9d69b8 (SignRelease by test_vendor_escrow): Signature applied. Current signers: 2/2. Ready for broadcast: True.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,886", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1465, "message": "Order 953e6e5e-61d5-460c-b532-749c1d9d69b8 (SignRelease by test_vendor_escrow): Sent 'ready for broadcast' notification to test_buyer_escrow.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,934", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 059a5308-e30f-4377-a866-b8245d65fb67 (SignRelease by test_mod_escrow): Attempting signature...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,935", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1289, "message": "Order 059a5308-e30f-4377-a866-b8245d65fb67 (SignRelease by test_mod_escrow): Permission denied. User is not buyer or vendor.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,982", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order bf5bbcd0-9e7c-4a7d-a5ff-0e4e6f7a8f43 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,984", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order bf5bbcd0-9e7c-4a7d-a5ff-0e4e6f7a8f43 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,985", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order bf5bbcd0-9e7c-4a7d-a5ff-0e4e6f7a8f43 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:04,987", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order bf5bbcd0-9e7c-4a7d-a5ff-0e4e6f7a8f43 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,037", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order bc6bd50a-fc24-423b-899d-13a2cd8bdd51 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,038", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1321, "message": "Order bc6bd50a-fc24-423b-899d-13a2cd8bdd51 (SignRelease by test_buyer_escrow): User test_buyer_escrow (ID: 59) has already signed this release.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,085", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 449c2acd-c14d-485d-82f9-e500d48c0caa (SignRelease by test_buyer_escrow): Attempting signature...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,086", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 449c2acd-c14d-485d-82f9-e500d48c0caa (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,087", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1425, "message": "Order 449c2acd-c14d-485d-82f9-e500d48c0caa (SignRelease by test_buyer_escrow): Crypto signing error: Simulated BTC Sign Failure", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1345, in sign_order_release\n    sign_result = sign_func(\n        psbt_base64=unsigned_crypto_data,  # Map to expected arg name\n        private_key_wif=private_key_info    # Map to expected arg name\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Simulated BTC Sign Failure"}
{"asctime": "2025-04-08 03:48:05,139", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 9bed35c6-07c9-4953-bf03-fcd5c9415462 (BroadcastRelease): Initiating broadcast...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,140", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 9bed35c6-07c9-4953-bf03-fcd5c9415462 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,141", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 9bed35c6-07c9-4953-bf03-fcd5c9415462 (BroadcastRelease): Broadcast successful. Transaction Hash: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,141", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 9bed35c6-07c9-4953-bf03-fcd5c9415462 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,141", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 9bed35c6-07c9-4953-bf03-fcd5c9415462 (BroadcastRelease): Ledger updated. Vendor: 0.00975000 BTC, Fee: 0.00025000 BTC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,192", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order d4bb38a4-6c61-46bf-a8b4-3345e3ed3750 (BroadcastRelease): Initiating broadcast...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,194", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order d4bb38a4-6c61-46bf-a8b4-3345e3ed3750 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_signed_txset)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,194", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order d4bb38a4-6c61-46bf-a8b4-3345e3ed3750 (BroadcastRelease): Broadcast successful. Transaction Hash: xmr_tx_hash_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,194", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order d4bb38a4-6c61-46bf-a8b4-3345e3ed3750 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,194", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order d4bb38a4-6c61-46bf-a8b4-3345e3ed3750 (BroadcastRelease): Ledger updated. Vendor: 0.975000000000 XMR, Fee: 0.025000000000 XMR.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,246", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order d2daf595-f666-4b90-bffb-99963726400b (BroadcastRelease): Initiating broadcast...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,248", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order d2daf595-f666-4b90-bffb-99963726400b (BroadcastRelease): Initiating broadcast...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,255", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order d2daf595-f666-4b90-bffb-99963726400b (BroadcastRelease): Initiating broadcast...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,306", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 6006bee3-beb1-4700-8c73-3a58bc811be5 (BroadcastRelease): Initiating broadcast...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,308", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 6006bee3-beb1-4700-8c73-3a58bc811be5 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,308", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 6006bee3-beb1-4700-8c73-3a58bc811be5 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 6006bee3-beb1-4700-8c73-3a58bc811be5 (service module returned invalid tx_hash: 'None').", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 6006bee3-beb1-4700-8c73-3a58bc811be5 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:48:05,404", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 1fd577bc-c97e-47c4-9389-9f9f79b6a913 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 100, Notes: 'Full refund....'", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,405", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 1fd577bc-c97e-47c4-9389-9f9f79b6a913 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.01000000 BTC, Vendor: 0E-8 BTC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,405", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 1fd577bc-c97e-47c4-9389-9f9f79b6a913 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,405", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 1fd577bc-c97e-47c4-9389-9f9f79b6a913 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,406", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 1fd577bc-c97e-47c4-9389-9f9f79b6a913 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,406", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 1fd577bc-c97e-47c4-9389-9f9f79b6a913 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.01000000, Vendor: 0E-8 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,464", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 39622554-e198-4981-be13-f67878e1fc4b (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 70, Notes: 'Split 70/30...'", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,466", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 39622554-e198-4981-be13-f67878e1fc4b (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00700000 BTC, Vendor: 0.00300000 BTC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,466", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 39622554-e198-4981-be13-f67878e1fc4b (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,466", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 39622554-e198-4981-be13-f67878e1fc4b (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,467", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 39622554-e198-4981-be13-f67878e1fc4b (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,467", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 39622554-e198-4981-be13-f67878e1fc4b (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.00700000, Vendor: 0.00300000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,518", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order b66c7187-bf7e-45bc-80e7-539830c3370d (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test notes...'", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,570", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order c70adcdc-d542-441a-a56e-2fbdd202a91d (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 101, Notes: 'Test notes...'", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,571", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order c70adcdc-d542-441a-a56e-2fbdd202a91d (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: -10, Notes: 'Test notes...'", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,622", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order c4cc8422-3f0d-4f2c-be7f-d82467a221a7 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test Notes - Crypto Fail Attempt...'", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,624", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order c4cc8422-3f0d-4f2c-be7f-d82467a221a7 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00500000 BTC, Vendor: 0.00500000 BTC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,624", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order c4cc8422-3f0d-4f2c-be7f-d82467a221a7 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,624", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order c4cc8422-3f0d-4f2c-be7f-d82467a221a7 (ResolveDispute by test_mod_escrow): Dispute broadcast error: Crypto dispute broadcast failed for Order c4cc8422-3f0d-4f2c-be7f-d82467a221a7 (service module returned invalid tx_hash: 'None').", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order c4cc8422-3f0d-4f2c-be7f-d82467a221a7 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:48:05,674", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 6f54c818-aaf1-4a72-8fef-98caebb043f9 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,676", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2244, "message": "Order 6f54c818-aaf1-4a72-8fef-98caebb043f9 (GetUnsignedTx for test_buyer_escrow): Returning prepared transaction data (Type: btc_psbt). Already Signed: False", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,721", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 67f92f76-7835-4154-be71-3a997762d093 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,722", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2212, "message": "Order 67f92f76-7835-4154-be71-3a997762d093 (GetUnsignedTx for test_buyer_escrow): Attempted to get unsigned TX before release initiated.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,723", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 67f92f76-7835-4154-be71-3a997762d093 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,724", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 67f92f76-7835-4154-be71-3a997762d093 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {}", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,725", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 67f92f76-7835-4154-be71-3a997762d093 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,726", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 67f92f76-7835-4154-be71-3a997762d093 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'type': 'btc_psbt', 'signatures': {}}", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,726", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 67f92f76-7835-4154-be71-3a997762d093 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,727", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 67f92f76-7835-4154-be71-3a997762d093 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'data': 'some_data', 'signatures': {}}", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,779", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 772a2831-672a-4b5d-8067-6b926fb5384e (GetUnsignedTx for test_mod_escrow): Request received.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,780", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2207, "message": "Order 772a2831-672a-4b5d-8067-6b926fb5384e (GetUnsignedTx for test_mod_escrow): Permission denied. User not buyer or vendor.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,830", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 416, "message": "Order ca5fe67b-08c4-496d-b3fd-b2f957b48f4a (TimeoutCheck): Payment deadline 2025-04-08 08:48:05.829514+00:00 passed. Attempting cancellation.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,830", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 429, "message": "Order ca5fe67b-08c4-496d-b3fd-b2f957b48f4a (TimeoutCheck): Successfully cancelled due to payment timeout. Status -> cancelled_timeout", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,830", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 430, "message": "Order ca5fe67b-08c4-496d-b3fd-b2f957b48f4a automatically cancelled due to payment timeout.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,923", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 9df85507-6427-4aff-9be4-65022db846dc (BroadcastRelease): Initiating broadcast...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,924", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,926", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 9df85507-6427-4aff-9be4-65022db846dc (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,926", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 9df85507-6427-4aff-9be4-65022db846dc (BroadcastRelease): Broadcast successful. Transaction Hash: aaa_int_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,927", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 9df85507-6427-4aff-9be4-65022db846dc (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,928", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 36eb0729-4fa6-4a38-9669-6d452bcef815 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,929", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 1b769b34-42c0-4ff3-8db4-83675b17e508 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,929", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 9df85507-6427-4aff-9be4-65022db846dc (BroadcastRelease): Ledger updated. Vendor: 0.01960000 BTC, Fee: 0.00040000 BTC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,975", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 6ca80ee5-a041-4a0a-ae56-0183a89f7aac (BroadcastRelease): Initiating broadcast...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,975", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,977", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 6ca80ee5-a041-4a0a-ae56-0183a89f7aac (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_unsigned_txset)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,977", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 6ca80ee5-a041-4a0a-ae56-0183a89f7aac (BroadcastRelease): Broadcast successful. Transaction Hash: bbb_int_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,978", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 6ca80ee5-a041-4a0a-ae56-0183a89f7aac (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,979", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction f1db72ec-2b7a-4268-ae29-a0d8a49c61ef recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,980", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction f93e3eed-30fb-4088-b94f-89f2abd75f8e recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:05,980", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 6ca80ee5-a041-4a0a-ae56-0183a89f7aac (BroadcastRelease): Ledger updated. Vendor: 1.462500000000 XMR, Fee: 0.037500000000 XMR.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:06,021", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 209abd0e-806c-4ec7-a1be-860aae2acd62 (BroadcastRelease): Initiating broadcast...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:06,022", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:06,023", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 209abd0e-806c-4ec7-a1be-860aae2acd62 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:06,023", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 209abd0e-806c-4ec7-a1be-860aae2acd62 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 209abd0e-806c-4ec7-a1be-860aae2acd62 (service module returned invalid tx_hash: 'None').", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 209abd0e-806c-4ec7-a1be-860aae2acd62 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:48:06,127", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 64e73493-9d2e-488f-8210-2b01c32b1aeb (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 30, Notes: 'Split decision: 30% to buyer...'", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:06,129", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:06,131", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 64e73493-9d2e-488f-8210-2b01c32b1aeb (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.00600000 BTC, Vendor: 0.01400000 BTC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:06,132", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 64e73493-9d2e-488f-8210-2b01c32b1aeb (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:06,132", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 64e73493-9d2e-488f-8210-2b01c32b1aeb (ResolveDispute by test_mod_int): Dispute transaction broadcast successful. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:06,135", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 64e73493-9d2e-488f-8210-2b01c32b1aeb (ResolveDispute by test_mod_int): Order state saved successfully. Proceeding to ledger updates.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:06,137", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 697585a5-5221-4a18-8635-984c3aab5567 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:06,138", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 738fcb51-7cd2-460f-b7f7-a26b41dbf7f5 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:06,138", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 64e73493-9d2e-488f-8210-2b01c32b1aeb (ResolveDispute by test_mod_int): Ledger updated. Buyer: 0.00600000, Vendor: 0.01400000 BTC. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:06,195", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 5d54af48-6194-43ce-bb29-84c0dc5d4d19 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 50, Notes: 'Attempted resolution...'", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:06,196", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:06,198", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 5d54af48-6194-43ce-bb29-84c0dc5d4d19 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.01000000 BTC, Vendor: 0.01000000 BTC.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:06,198", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 5d54af48-6194-43ce-bb29-84c0dc5d4d19 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 03:48:06,198", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order 5d54af48-6194-43ce-bb29-84c0dc5d4d19 (ResolveDispute by test_mod_int): Dispute broadcast error: Crypto dispute broadcast failed for Order 5d54af48-6194-43ce-bb29-84c0dc5d4d19 (service module returned invalid tx_hash: 'None').", "process": 19512, "thread": 19516, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order 5d54af48-6194-43ce-bb29-84c0dc5d4d19 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 03:48:06,249", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 19512, "thread": 19516}
{"asctime": "2025-04-08 04:01:18,876", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,876", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 47d9da9a-8efe-4e02-9905-b56c4d7e25b3 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,880", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction bea738c5-2c0a-4ae5-873d-53e7f599dd1f recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,884", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction de40cee4-1573-495e-90c9-f585b321734a recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,890", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 202, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,895", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,898", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,901", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,904", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,907", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,909", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,912", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,915", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,918", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,923", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,926", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,929", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,963", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 486, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: Test lock", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,963", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 513, "message": "Ledger transaction d79a349c-bc97-4a5e-a5da-bc4958c00bd3 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,970", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 465, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,977", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 448, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,982", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: Test unlock", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,982", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction a9b541ca-0594-47c6-8113-0e32889aad77 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,986", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 592, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,986", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: Test unlock more", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,986", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction 45a218b7-2260-489e-a8aa-a10af5f4051f recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,990", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 587, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:18,995", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 566, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,000", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 03d4ea25-7abd-40e8-a92a-4be4c5acd221 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,005", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 5a588a2d-6d7d-4b0b-ac08-b89619c7b37b recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,010", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 848e8697-3354-4f5b-aacc-dab49766c004 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,040", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 295, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,062", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,062", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 482, "message": "[get_market_btc_key] Market BTC key pubkey matches settings (031b7a7e8e...).", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,062", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 489, "message": "[get_market_btc_key] Successfully loaded and cached market BTC key from Vault (PubKey starts with: 031b7a7e8e...).", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,066", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,066", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 454, "message": "[get_market_btc_key] Vault returned invalid data for key 'market_btc_multisig_key': None", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,153", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1547, "message": "Deprecated function `process_btc_withdrawal` called. Use Ledger system.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,156", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1550, "message": "Deprecated function `process_escrow_release` called. Use Taproot multi-sig workflow (prepare/sign/finalize/broadcast).", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,192", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,193", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,195", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,197", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,198", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,200", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,203", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,203", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 341, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-08 04:01:19,206", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,210", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-08 04:01:19,215", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-08 04:01:19,221", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,222", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,224", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-08 04:01:19,228", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-08 04:01:19,232", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,232", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,234", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,236", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,238", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-08 04:01:19,242", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-08 04:01:19,245", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-08 04:01:19,250", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,252", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: b5d0418f809a8b10)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,252", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: b5d0418f809a8b10): 4LdpnMo9wPESgQ4...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,254", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,254", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,254", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,256", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: b5d0418f809a8b10)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,256", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: b5d0418f809a8b10): Timeout", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,258", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: b5d0418f809a8b10)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,258", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: b5d0418f809a8b10): Monero RPC Error (Code: -5): RPC Failed", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,260", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: b5d0418f809a8b10)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,260", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: b5d0418f809a8b10). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,262", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,262", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,264", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: b5d0418f809a8b10)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,265", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: b5d0418f809a8b10) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,267", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,268", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,268", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,272", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,272", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,274", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,274", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,276", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,277", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,279", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,279", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '8a656ac1edcee2f72b27546bb2c449d8b467c116e975a83d2bd247f47d3f640f511279cb05bf95a68e003fbbc839e569536bed25643af3ecc88958877b03456c1a39db5a42c65eb13843496ae1b16b7f13ccfc122dfd522e1cd972da9b977988fc907879b27a09b9f5d106ed76b101609f35d21f8d1e5bf19251ba00028badce'}", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,282", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,283", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,283", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 4900, "thread": 5392, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-08 04:01:19,283", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,283", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,285", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,285", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,285", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,285", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '0f4b572bccf4327308265e02490cc596f9963c178b14edb0e69be5f425178a1dd266ccfc2a78432f195ef8d7481743bed6004c5cfcabaf689d0d28bda42b214d64cf5cd9651e25bb08c21003f3c13480783058435f90c122f1ac55ee3349d9ff9736a70fcce3086de050c396ff6d15b61bbbc7588c0017fbb5f64d801754c2b65807e9485569dbe342716dbfd2731142c8a0100562cb9a26c58d1e83010e6dcd84df429541ede03cebe4bda39cc6c76749aa2e96f227cd150ae2d88f9f17236b1c95bed64019cdca2a3a59b3d22be2541ba93c385f9af6af87f85f675cfa23772a7dbb4dcab1bf7cb013362f929629eb7367d2f526db959bafb132e5993e5024'}", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,286", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 4900, "thread": 5392, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 04:01:19,286", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,286", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,290", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,290", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,291", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,291", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 4900, "thread": 5392, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 04:01:19,291", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,291", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,294", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,294", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,295", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,295", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 4900, "thread": 5392, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 04:01:19,295", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,295", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,297", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,298", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,298", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,309", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,309", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-08 04:01:19,313", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,313", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,313", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-08 04:01:19,316", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,316", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,318", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,319", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,319", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,319", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,322", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,322", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,323", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,325", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,326", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,326", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,326", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,328", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,328", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,330", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,330", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,330", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,330", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,332", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,332", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,332", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 04:01:19,335", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,335", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 04:01:19,338", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,339", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,340", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,341", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,341", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 739, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-08 04:01:19,343", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,343", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,345", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,345", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,345", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,345", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,347", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,347", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,347", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,347", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,349", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,349", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,349", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: a57644b90c31bb4ba03cabe22c49c3bb94c8759d5789d9bef482b9f2ae73e67e", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,349", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,352", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,355", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,358", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,358", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,359", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: a57644b90c31bb4ba03cabe22c49c3bb94c8759d5789d9bef482b9f2ae73e67e", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,362", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,362", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,365", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,365", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,368", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,368", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,368", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,371", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,371", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,372", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,374", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,374", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,374", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,377", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,377", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,377", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,380", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,380", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,380", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,383", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,384", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: a57644b90c31bb4ba03cabe22c49c3bb94c8759d5789d9bef482b9f2ae73e67e, Fee: 0.000543210000 XMR (543210000 pico)", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,386", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,386", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,386", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,387", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,387", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,389", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 4d7c81c8...): Failed to get daemon height. Cannot calculate confirmations.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,398", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 4d7c81c8...): Skipping entry 0: TXID a57644b90c31bb4ba03cabe22c49c3bb94c8759d5789d9bef482b9f2ae73e67e already processed.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,401", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,404", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,406", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,412", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 4d7c81c8...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-08 04:01:19,417", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 4d7c81c8...): Found candidate! TXID: a57644b90c31bb4ba03cabe22c49c3bb94c8759d5789d9bef482b9f2ae73e67e, Amt: 1.234567890123 XMR, Confs: 11.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,417", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 4d7c81c8...): Confirmed payment found.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,420", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,420", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,420", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,420", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-08 04:01:19,422", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,425", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,425", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,425", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,425", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: a57644b90c31bb4ba03cabe22c49c3bb94c8759d5789d9bef482b9f2ae73e67e, Fee: 0.000678900000 XMR (678900000 pico)", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,428", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,428", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,428", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,429", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,429", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,429", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,429", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,429", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,432", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,435", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,435", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,435", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,436", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 04:01:19,439", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,439", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1287, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 04:01:19,441", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,444", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,444", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,444", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 04:01:19,446", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 04:01:19,447", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,450", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,450", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,450", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,451", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: a57644b90c31bb4ba03cabe22c49c3bb94c8759d5789d9bef482b9f2ae73e67e, Fee: 0.000777700000 XMR (777700000 pico)", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,451", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,454", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,454", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,455", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,455", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: a57644b90c31bb4ba03cabe22c49c3bb94c8759d5789d9bef482b9f2ae73e67e, Fee: 0.000888800000 XMR (888800000 pico)", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,455", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,458", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,458", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,458", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,458", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,458", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,458", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,461", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,962", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,963", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:19,967", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:20,468", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:20,469", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:20,475", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/3): Timeout 1. Retrying in 0.5s...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:20,976", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/3): Refused 2. Retrying in 0.5s...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,484", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 401 (Authentication failed? Check RPC User/Password). Response: Unauthorized", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 04:01:21,492", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 295, "message": "Monero RPC (Wallet - Method: get_balance): HTTP error 500. Response: Internal Server Error", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 246, in _make_rpc_request\n    response.raise_for_status() # Raises HTTPError for bad responses (4xx or 5xx)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.HTTPError"}
{"asctime": "2025-04-08 04:01:21,500", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-08 04:01:21,504", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 267, "message": "Monero RPC (Wallet - Method: some_method): RPC returned error: Code=-4, Message=Invalid params", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,519", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,519", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2133199658288'>", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,527", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,534", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,534", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2133199657952'>", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,540", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,550", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,550", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,559", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,559", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,567", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,567", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,567", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,574", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,574", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,574", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,579", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,588", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,588", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,601", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,601", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-08 04:01:21,607", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,614", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,615", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-08 04:01:21,622", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,622", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,630", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,630", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,637", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,637", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,651", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 387, "message": "User test_vendor_escrow missing valid withdrawal address in field 'btc_withdrawal_address' for currency BTC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,700", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 1a12c8ec-401d-4501-8d9e-ccaf0b7b1174 (BTC): Initiating multi-sig escrow setup...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,702", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_test_user' loaded and cached.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,702", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 661, "message": "Order 1a12c8ec-401d-4501-8d9e-ccaf0b7b1174 (BTC): BTC multisig details missing expected redeem/witness script.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,702", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 1a12c8ec-401d-4501-8d9e-ccaf0b7b1174 (BTC): Generated BTC Escrow Address: tb1qw508d6qejxt...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,702", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 1a12c8ec-401d-4501-8d9e-ccaf0b7b1174 (BTC): Created CryptoPayment d11eb12d-c707-47ed-984f-f833f4459b08 (Multi-sig). Expected Atomic: 1000000", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,703", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 1a12c8ec-401d-4501-8d9e-ccaf0b7b1174 (BTC): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 10:01:21.703074+00:00. Awaiting payment to tb1qw508d6qejxt...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,703", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 1a12c8ec-401d-4501-8d9e-ccaf0b7b1174 (BTC): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,743", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order f2ed2a1d-4d7b-4cc2-911c-6c8e95ae6ce2 (XMR): Initiating multi-sig escrow setup...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,745", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order f2ed2a1d-4d7b-4cc2-911c-6c8e95ae6ce2 (XMR): Generated XMR Escrow Address: xmr_multisig_ad...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,746", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order f2ed2a1d-4d7b-4cc2-911c-6c8e95ae6ce2 (XMR): Created CryptoPayment 34e9fd18-02a3-4726-985f-0a2240305dff (Multi-sig). Expected Atomic: 1000000000000", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,746", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order f2ed2a1d-4d7b-4cc2-911c-6c8e95ae6ce2 (XMR): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 10:01:21.746137+00:00. Awaiting payment to xmr_multisig_ad...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,746", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order f2ed2a1d-4d7b-4cc2-911c-6c8e95ae6ce2 (XMR): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,785", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 69f585a4-f732-43b6-a84d-c507217027d6 (BTC): Initiating multi-sig escrow setup...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,786", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 537, "message": "Order 69f585a4-f732-43b6-a84d-c507217027d6 (BTC): Cannot create escrow details. Status: 'shipped' (Expected: 'pending_payment').", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,823", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 8807d4c5-c0e5-47dc-ba80-f297a3237a18 (LTC): Initiating multi-sig escrow setup...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,826", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 607, "message": "Order 8807d4c5-c0e5-47dc-ba80-f297a3237a18 (LTC): Failed to gather participant info: Multisig key attribute mapping not found for currency LTC.", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 581, in create_escrow_for_order\n    raise ValueError(f\"Multisig key attribute mapping not found for currency {currency}.\")\nValueError: Multisig key attribute mapping not found for currency LTC."}
{"asctime": "2025-04-08 04:01:21,870", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order cb0d467f-0185-4a20-b813-c1669999861d (BTC): Initiating multi-sig escrow setup...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,872", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order cb0d467f-0185-4a20-b813-c1669999861d (BTC): Crypto service error during BTC escrow generation: BTC Gen Failed", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 639, in create_escrow_for_order\n    msig_details = crypto_service_module.create_btc_multisig_address(\n        participant_pubkeys_hex=participant_infos, # Use expected kwarg name\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: BTC Gen Failed"}
{"asctime": "2025-04-08 04:01:21,919", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order c21c89e1-1e98-4dd7-93c8-1c8d0ffb8510 (XMR): Initiating multi-sig escrow setup...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,921", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order c21c89e1-1e98-4dd7-93c8-1c8d0ffb8510 (XMR): Crypto service error during XMR escrow generation: XMR Wallet Gen Failed", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 621, in create_escrow_for_order\n    msig_details = crypto_service_module.create_monero_multisig_wallet(\n        participant_infos=participant_infos, # Use keyword arg for clarity\n        order_guid=str(order.id),           # Use keyword arg 'order_guid'\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: XMR Wallet Gen Failed"}
{"asctime": "2025-04-08 04:01:21,977", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 8d0925e5-bf1c-4479-8d3d-b49b4543f49f, Payment: dd45ad09-ab21-4f98-ac2e-ea21ea300134, Currency: BTC): Starting check.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,977", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 8d0925e5-bf1c-4479-8d3d-b49b4543f49f, Payment: dd45ad09-ab21-4f98-ac2e-ea21ea300134, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,978", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 8d0925e5-bf1c-4479-8d3d-b49b4543f49f, Payment: dd45ad09-ab21-4f98-ac2e-ea21ea300134, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,979", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1052, "message": "PaymentConfirm Check (Order: 8d0925e5-bf1c-4479-8d3d-b49b4543f49f, Payment: dd45ad09-ab21-4f98-ac2e-ea21ea300134, Currency: BTC): Ledger updated (incl. deposit fee) & Order status -> payment_confirmed. TXID: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:21,979", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1067, "message": "PaymentConfirm Check (Order: 8d0925e5-bf1c-4479-8d3d-b49b4543f49f, Payment: dd45ad09-ab21-4f98-ac2e-ea21ea300134, Currency: BTC): Sent payment confirmation notification to Vendor test_vendor_escrow.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,033", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 157e7e94-7156-4ee7-bca3-8a856e1d32b9, Payment: efee5167-3e71-46d2-9edf-27d1125c3ae4, Currency: BTC): Starting check.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,084", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 917, "message": "Order 4319fd6e-63b6-42d3-953e-4eb185f463ee cancelled due to underpayment. Rcvd 0.00500000, Exp 0.01000000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,136", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 70fc80d5-90c3-4daa-899d-4955d704e82a, Payment: fa5db98c-ad29-4076-b768-c96e99643158, Currency: BTC): Starting check.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,137", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 70fc80d5-90c3-4daa-899d-4955d704e82a, Payment: fa5db98c-ad29-4076-b768-c96e99643158, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,137", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 70fc80d5-90c3-4daa-899d-4955d704e82a, Payment: fa5db98c-ad29-4076-b768-c96e99643158, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,138", "levelname": "CRITICAL", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1075, "message": "PaymentConfirm Check (Order: 70fc80d5-90c3-4daa-899d-4955d704e82a, Payment: fa5db98c-ad29-4076-b768-c96e99643158, Currency: BTC): CRITICAL: Ledger/Order atomic update FAILED during payment confirmation! Error: ['Cannot lock funds']. Transaction rolled back.", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1010, in check_and_confirm_payment\n    lock_success = ledger_service.lock_funds(\n        user=buyer, currency=currency, amount=expected_std, # Lock the required STANDARD order amount\n        related_order=order, notes=f\"Lock funds for Order {order.id} escrow\"\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nledger.services.InsufficientFundsError: ['Cannot lock funds']"}
{"asctime": "2025-04-08 04:01:22,194", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order b1d706da-58e3-4b2b-b227-f17003cad6f4 (MarkShipped by test_vendor_escrow): Attempting...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,197", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1190, "message": "Order b1d706da-58e3-4b2b-b227-f17003cad6f4 (MarkShipped by test_vendor_escrow): Tracking info provided but 'tracking_info' field missing on Order model.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,199", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1206, "message": "Order b1d706da-58e3-4b2b-b227-f17003cad6f4 (MarkShipped by test_vendor_escrow): Marked shipped. Status -> shipped. Dispute deadline: 2025-04-15 10:01:22.197062+00:00, Auto-finalize: 2025-04-22 10:01:22.197062+00:00", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,200", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1230, "message": "Order b1d706da-58e3-4b2b-b227-f17003cad6f4 (MarkShipped by test_vendor_escrow): Sent order shipped notification to Buyer test_buyer_escrow.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,257", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order b5e06ea4-f2c7-4793-a852-fbdcdb6a9faa (MarkShipped by test_buyer_escrow): Attempting...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,259", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1126, "message": "Order b5e06ea4-f2c7-4793-a852-fbdcdb6a9faa (MarkShipped by test_buyer_escrow): Permission denied. User test_buyer_escrow is not the vendor (test_vendor_escrow).", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,310", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 23099643-e1b0-4db5-8239-7f4f6ce9b8fb (MarkShipped by test_vendor_escrow): Attempting...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,311", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1130, "message": "Order 23099643-e1b0-4db5-8239-7f4f6ce9b8fb (MarkShipped by test_vendor_escrow): Cannot mark shipped. Invalid status 'pending_payment' (Expected: 'payment_confirmed').", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,359", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order faf77b74-f658-4f8f-8e39-102f1b414f5f (MarkShipped by test_vendor_escrow): Attempting...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,361", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1144, "message": "Order faf77b74-f658-4f8f-8e39-102f1b414f5f (MarkShipped by test_vendor_escrow): Failed to prepare release transaction: Prep Fail", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1138, in mark_order_shipped\n    prepared_release_metadata = _prepare_release(order_locked) # Definition is later in file\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Prep Fail"}
{"asctime": "2025-04-08 04:01:22,411", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order ed1131c1-c711-43e6-b4c9-de7d66c8cb02 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,412", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order ed1131c1-c711-43e6-b4c9-de7d66c8cb02 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,413", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order ed1131c1-c711-43e6-b4c9-de7d66c8cb02 (SignRelease by test_buyer_escrow): Signature applied. Current signers: 1/2. Ready for broadcast: False.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,462", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order c05042f7-d106-48f2-b848-5b717bd4421e (SignRelease by test_vendor_escrow): Attempting signature...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,463", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order c05042f7-d106-48f2-b848-5b717bd4421e (SignRelease by test_vendor_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,464", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order c05042f7-d106-48f2-b848-5b717bd4421e (SignRelease by test_vendor_escrow): Signature applied. Current signers: 2/2. Ready for broadcast: True.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,464", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1465, "message": "Order c05042f7-d106-48f2-b848-5b717bd4421e (SignRelease by test_vendor_escrow): Sent 'ready for broadcast' notification to test_buyer_escrow.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,534", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 2194e71a-e297-4959-b592-3dd1bb3eb48c (SignRelease by test_mod_escrow): Attempting signature...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,536", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1289, "message": "Order 2194e71a-e297-4959-b592-3dd1bb3eb48c (SignRelease by test_mod_escrow): Permission denied. User is not buyer or vendor.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,580", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 6df38148-be65-4904-8af8-bab24b198299 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,582", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 6df38148-be65-4904-8af8-bab24b198299 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,584", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 6df38148-be65-4904-8af8-bab24b198299 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,586", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 6df38148-be65-4904-8af8-bab24b198299 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,644", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order c276ed93-48d6-4eb3-bda2-ea941e341868 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,645", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1321, "message": "Order c276ed93-48d6-4eb3-bda2-ea941e341868 (SignRelease by test_buyer_escrow): User test_buyer_escrow (ID: 59) has already signed this release.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,695", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 98be8f9c-8669-4291-89f0-573e25f0ec66 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,696", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 98be8f9c-8669-4291-89f0-573e25f0ec66 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,696", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1425, "message": "Order 98be8f9c-8669-4291-89f0-573e25f0ec66 (SignRelease by test_buyer_escrow): Crypto signing error: Simulated BTC Sign Failure", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1345, in sign_order_release\n    sign_result = sign_func(\n        psbt_base64=unsigned_crypto_data,  # Map to expected arg name\n        private_key_wif=private_key_info    # Map to expected arg name\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Simulated BTC Sign Failure"}
{"asctime": "2025-04-08 04:01:22,751", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 78c10ad6-6100-4177-857d-f4a843920c75 (BroadcastRelease): Initiating broadcast...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,753", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 78c10ad6-6100-4177-857d-f4a843920c75 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,753", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 78c10ad6-6100-4177-857d-f4a843920c75 (BroadcastRelease): Broadcast successful. Transaction Hash: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,754", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 78c10ad6-6100-4177-857d-f4a843920c75 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,754", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 78c10ad6-6100-4177-857d-f4a843920c75 (BroadcastRelease): Ledger updated. Vendor: 0.00975000 BTC, Fee: 0.00025000 BTC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,808", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 0b20b92f-3d58-4886-9afd-633ef5c83e03 (BroadcastRelease): Initiating broadcast...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,810", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 0b20b92f-3d58-4886-9afd-633ef5c83e03 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_signed_txset)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,810", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 0b20b92f-3d58-4886-9afd-633ef5c83e03 (BroadcastRelease): Broadcast successful. Transaction Hash: xmr_tx_hash_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,811", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 0b20b92f-3d58-4886-9afd-633ef5c83e03 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,811", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 0b20b92f-3d58-4886-9afd-633ef5c83e03 (BroadcastRelease): Ledger updated. Vendor: 0.975000000000 XMR, Fee: 0.025000000000 XMR.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,863", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 4080c74c-5e4d-4a3b-a239-b559be2c8862 (BroadcastRelease): Initiating broadcast...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,866", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 4080c74c-5e4d-4a3b-a239-b559be2c8862 (BroadcastRelease): Initiating broadcast...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,871", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 4080c74c-5e4d-4a3b-a239-b559be2c8862 (BroadcastRelease): Initiating broadcast...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,920", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 39cabbdf-630f-4c97-b21c-a1cc6a272727 (BroadcastRelease): Initiating broadcast...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,922", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 39cabbdf-630f-4c97-b21c-a1cc6a272727 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:22,922", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 39cabbdf-630f-4c97-b21c-a1cc6a272727 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 39cabbdf-630f-4c97-b21c-a1cc6a272727 (service module returned invalid tx_hash: 'None').", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 39cabbdf-630f-4c97-b21c-a1cc6a272727 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 04:01:23,027", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order a5875e00-f8d4-4354-a112-4f6f5466186b (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 100, Notes: 'Full refund....'", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,029", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order a5875e00-f8d4-4354-a112-4f6f5466186b (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.01000000 BTC, Vendor: 0E-8 BTC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,029", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order a5875e00-f8d4-4354-a112-4f6f5466186b (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,029", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order a5875e00-f8d4-4354-a112-4f6f5466186b (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,029", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order a5875e00-f8d4-4354-a112-4f6f5466186b (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,029", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order a5875e00-f8d4-4354-a112-4f6f5466186b (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.01000000, Vendor: 0E-8 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,081", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order ce5dc70b-68a5-404e-b5cf-9ac701e64444 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 70, Notes: 'Split 70/30...'", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,082", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order ce5dc70b-68a5-404e-b5cf-9ac701e64444 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00700000 BTC, Vendor: 0.00300000 BTC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,082", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order ce5dc70b-68a5-404e-b5cf-9ac701e64444 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,083", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order ce5dc70b-68a5-404e-b5cf-9ac701e64444 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,083", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order ce5dc70b-68a5-404e-b5cf-9ac701e64444 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,083", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order ce5dc70b-68a5-404e-b5cf-9ac701e64444 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.00700000, Vendor: 0.00300000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,132", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 376b040d-46a4-49d7-88db-9e565ee8b592 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test notes...'", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,179", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 1ddad732-9da5-4fa5-9d35-b1f11b353f7c (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 101, Notes: 'Test notes...'", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,181", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 1ddad732-9da5-4fa5-9d35-b1f11b353f7c (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: -10, Notes: 'Test notes...'", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,230", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 6b23d5c8-155b-4ccf-ac8d-564aff210903 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test Notes - Crypto Fail Attempt...'", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,231", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 6b23d5c8-155b-4ccf-ac8d-564aff210903 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00500000 BTC, Vendor: 0.00500000 BTC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,232", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 6b23d5c8-155b-4ccf-ac8d-564aff210903 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,232", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order 6b23d5c8-155b-4ccf-ac8d-564aff210903 (ResolveDispute by test_mod_escrow): Dispute broadcast error: Crypto dispute broadcast failed for Order 6b23d5c8-155b-4ccf-ac8d-564aff210903 (service module returned invalid tx_hash: 'None').", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order 6b23d5c8-155b-4ccf-ac8d-564aff210903 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 04:01:23,280", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 22b464dc-7626-40f0-b1d6-c6ed128350dc (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,282", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2244, "message": "Order 22b464dc-7626-40f0-b1d6-c6ed128350dc (GetUnsignedTx for test_buyer_escrow): Returning prepared transaction data (Type: btc_psbt). Already Signed: False", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,327", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 29af928d-07c6-4932-bd02-e8b6a2e891dd (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,328", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2212, "message": "Order 29af928d-07c6-4932-bd02-e8b6a2e891dd (GetUnsignedTx for test_buyer_escrow): Attempted to get unsigned TX before release initiated.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,329", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 29af928d-07c6-4932-bd02-e8b6a2e891dd (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,330", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 29af928d-07c6-4932-bd02-e8b6a2e891dd (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {}", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,330", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 29af928d-07c6-4932-bd02-e8b6a2e891dd (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,331", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 29af928d-07c6-4932-bd02-e8b6a2e891dd (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'type': 'btc_psbt', 'signatures': {}}", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,332", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 29af928d-07c6-4932-bd02-e8b6a2e891dd (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,333", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 29af928d-07c6-4932-bd02-e8b6a2e891dd (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'data': 'some_data', 'signatures': {}}", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,384", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 1d8f9fe6-7d04-40aa-9887-1076ed02ae31 (GetUnsignedTx for test_mod_escrow): Request received.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,385", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2207, "message": "Order 1d8f9fe6-7d04-40aa-9887-1076ed02ae31 (GetUnsignedTx for test_mod_escrow): Permission denied. User not buyer or vendor.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,427", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 416, "message": "Order b183647c-6ad7-4175-8548-ee20232b78df (TimeoutCheck): Payment deadline 2025-04-08 09:01:23.427197+00:00 passed. Attempting cancellation.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,428", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 429, "message": "Order b183647c-6ad7-4175-8548-ee20232b78df (TimeoutCheck): Successfully cancelled due to payment timeout. Status -> cancelled_timeout", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,428", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 430, "message": "Order b183647c-6ad7-4175-8548-ee20232b78df automatically cancelled due to payment timeout.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,514", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order fe681d92-27ee-477d-8a89-299b13c7d6a0 (BroadcastRelease): Initiating broadcast...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,515", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,517", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order fe681d92-27ee-477d-8a89-299b13c7d6a0 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,517", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order fe681d92-27ee-477d-8a89-299b13c7d6a0 (BroadcastRelease): Broadcast successful. Transaction Hash: aaa_int_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,519", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order fe681d92-27ee-477d-8a89-299b13c7d6a0 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,520", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction dd68a20e-0f75-4cfb-9eff-ea1d90fa964a recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,521", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 26da2e8f-7832-4a9f-a0c9-a880542b1546 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,521", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order fe681d92-27ee-477d-8a89-299b13c7d6a0 (BroadcastRelease): Ledger updated. Vendor: 0.01960000 BTC, Fee: 0.00040000 BTC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,566", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 60f402d4-98fa-4270-8b64-91051df7da61 (BroadcastRelease): Initiating broadcast...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,567", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,568", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 60f402d4-98fa-4270-8b64-91051df7da61 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_unsigned_txset)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,568", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 60f402d4-98fa-4270-8b64-91051df7da61 (BroadcastRelease): Broadcast successful. Transaction Hash: bbb_int_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,569", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 60f402d4-98fa-4270-8b64-91051df7da61 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,570", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction c30a892d-1bc0-4455-b85b-c1270f1110e8 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,571", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 0144097a-7220-43a8-89ad-404c4fa1b214 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,571", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 60f402d4-98fa-4270-8b64-91051df7da61 (BroadcastRelease): Ledger updated. Vendor: 1.462500000000 XMR, Fee: 0.037500000000 XMR.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,612", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order ace2e28e-c11b-43ad-90de-60cad7db4b45 (BroadcastRelease): Initiating broadcast...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,612", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,614", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order ace2e28e-c11b-43ad-90de-60cad7db4b45 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,614", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order ace2e28e-c11b-43ad-90de-60cad7db4b45 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order ace2e28e-c11b-43ad-90de-60cad7db4b45 (service module returned invalid tx_hash: 'None').", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order ace2e28e-c11b-43ad-90de-60cad7db4b45 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 04:01:23,658", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 36aa0811-5545-4893-b40a-d622adb99c88 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 30, Notes: 'Split decision: 30% to buyer...'", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,660", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,661", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 36aa0811-5545-4893-b40a-d622adb99c88 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.00600000 BTC, Vendor: 0.01400000 BTC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,661", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 36aa0811-5545-4893-b40a-d622adb99c88 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,661", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 36aa0811-5545-4893-b40a-d622adb99c88 (ResolveDispute by test_mod_int): Dispute transaction broadcast successful. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,663", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 36aa0811-5545-4893-b40a-d622adb99c88 (ResolveDispute by test_mod_int): Order state saved successfully. Proceeding to ledger updates.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,664", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction dad51034-5575-4e2c-8ec1-2a22be872666 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,664", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 8ad5f3d5-051f-495d-a153-fe26dc9a9d8a recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,664", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 36aa0811-5545-4893-b40a-d622adb99c88 (ResolveDispute by test_mod_int): Ledger updated. Buyer: 0.00600000, Vendor: 0.01400000 BTC. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,720", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 091c9a3b-df1d-43c9-b8d5-d9472b3c774a (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 50, Notes: 'Attempted resolution...'", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,720", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,721", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 091c9a3b-df1d-43c9-b8d5-d9472b3c774a (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.01000000 BTC, Vendor: 0.01000000 BTC.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,722", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 091c9a3b-df1d-43c9-b8d5-d9472b3c774a (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:01:23,722", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order 091c9a3b-df1d-43c9-b8d5-d9472b3c774a (ResolveDispute by test_mod_int): Dispute broadcast error: Crypto dispute broadcast failed for Order 091c9a3b-df1d-43c9-b8d5-d9472b3c774a (service module returned invalid tx_hash: 'None').", "process": 4900, "thread": 5392, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order 091c9a3b-df1d-43c9-b8d5-d9472b3c774a (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 04:01:23,757", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 4900, "thread": 5392}
{"asctime": "2025-04-08 04:23:11,568", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,569", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 9a3bb102-b009-4995-b6f9-1343edbf94c5 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,573", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 7e5bf175-bbdf-47b5-b9d1-81b544314a27 recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,577", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 43a2d559-c8a3-412f-8e9b-2b63a41e58e5 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,581", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 202, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,586", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,589", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,592", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,595", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,598", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,601", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,604", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,608", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,611", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,615", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,617", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,621", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,658", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 486, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: Test lock", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,658", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 513, "message": "Ledger transaction a216850b-919d-4ebd-93f1-248169c66aa8 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,662", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 465, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,668", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 448, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,672", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: Test unlock", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,672", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction d344135b-4066-4a63-918e-f351a7bc2cf8 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,675", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 592, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,676", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: Test unlock more", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,676", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction 1a5512b3-b174-4cfe-96ad-0246906faed0 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,679", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 587, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,684", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 566, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,688", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction a33e41e1-f20a-4cb1-9bda-cc0490437a40 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,693", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction bbdeb90b-f377-4f5e-978e-80193efa2c3d recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,699", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction d181040f-8850-40aa-8739-94f5b039bd55 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,732", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 295, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,751", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,751", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 482, "message": "[get_market_btc_key] Market BTC key pubkey matches settings (031b7a7e8e...).", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,751", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 489, "message": "[get_market_btc_key] Successfully loaded and cached market BTC key from Vault (PubKey starts with: 031b7a7e8e...).", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,754", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,754", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 454, "message": "[get_market_btc_key] Vault returned invalid data for key 'market_btc_multisig_key': None", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,816", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1547, "message": "Deprecated function `process_btc_withdrawal` called. Use Ledger system.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,818", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1550, "message": "Deprecated function `process_escrow_release` called. Use Taproot multi-sig workflow (prepare/sign/finalize/broadcast).", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,859", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,860", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,862", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,864", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,866", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,868", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,871", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,871", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-08 04:23:11,873", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,877", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-08 04:23:11,881", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-08 04:23:11,886", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,887", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,888", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-08 04:23:11,893", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-08 04:23:11,897", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,897", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,899", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,901", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,902", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-08 04:23:11,907", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-08 04:23:11,911", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-08 04:23:11,914", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,917", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: f849370fd3e4cc82)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,917", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: f849370fd3e4cc82): 4LdpnMo9wPESgQ4...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,919", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,919", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,919", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,921", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: f849370fd3e4cc82)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,921", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: f849370fd3e4cc82): Timeout", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,923", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: f849370fd3e4cc82)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,923", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: f849370fd3e4cc82): Monero RPC Error (Code: -5): RPC Failed", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,925", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: f849370fd3e4cc82)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,925", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: f849370fd3e4cc82). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,927", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,927", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,928", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: f849370fd3e4cc82)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,929", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: f849370fd3e4cc82) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,931", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,931", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,931", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,935", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,936", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,938", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,938", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,940", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,940", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,942", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,942", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': 'a8d98bd737e87d61afde0f4ee2951a34fe1c53855cabd1f6155622f34c70834760b069e7727c99e1382fe8f4dcdc49e8c22c1d871f869c92ad5a017a489edec761b95eec9ed735562727a63deca6ffdb04cc3da54fdf3d996ef345e436012662b68ad49bbe1f3e98d39d563b87950ea3e15bf54e5a9f9d83fd7271810a0309da'}", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,945", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,945", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,945", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 2612, "thread": 20264, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-08 04:23:11,945", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,945", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,948", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,949", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,949", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,949", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '15acac8165336b5919f01db8d6ff8bfc44c794a15b67362158bfbc3834d05b7d37c94d515bbceb71713282a6e9d31e9e55d2ca3c9492dd3a2bd9610536d038977499113ef23c8a4f2defc296b5be121ede48cd203625642aa48892f30127eccd0e5cf045b597c0e87c74ff60343146b00860a99e1f3633c03026c32c61b8f28a17178fbec6c372527a882d7f622e6ab6663b9057237cf961f4a75da7cf9d07c31f5989d67c21a1511982af550faa7075905d7b2acfcbb9a286050eaf66b0e2482be48c3a40395611b960249a9370b9585501818e2d842acb4bcfc07042faae8947ce67e06104cb5ca5892e83192449ed4dc5f3eee72e0673357fd7f2af95ff20'}", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,949", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 2612, "thread": 20264, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 04:23:11,949", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,949", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,952", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,952", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,952", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,952", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 2612, "thread": 20264, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 04:23:11,952", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,953", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,955", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,955", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,955", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,955", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 2612, "thread": 20264, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 04:23:11,956", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,956", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,958", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,958", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,958", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,969", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,969", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-08 04:23:11,973", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,974", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,974", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-08 04:23:11,977", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,977", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,980", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,980", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,981", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,981", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,983", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,983", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,984", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,986", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,986", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,986", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,986", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,989", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,989", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,991", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,992", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,992", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,992", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,994", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,995", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,995", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 04:23:11,997", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:11,997", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 04:23:12,001", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,001", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,003", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,004", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,004", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-08 04:23:12,006", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,006", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,009", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,009", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,009", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,009", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,011", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,011", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,011", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,012", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,013", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,013", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,014", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 05d195c4c8eacf1b3fbb069d1147b75cf433919175c0d3bca5619a37b4876539", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,014", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,017", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,020", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,022", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,023", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,023", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 05d195c4c8eacf1b3fbb069d1147b75cf433919175c0d3bca5619a37b4876539", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,025", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,025", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,027", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,027", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,030", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,030", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,030", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,035", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,035", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,035", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,038", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,038", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,038", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,040", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,041", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,041", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,043", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,043", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,044", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,047", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,047", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 05d195c4c8eacf1b3fbb069d1147b75cf433919175c0d3bca5619a37b4876539, Fee: 0.000543210000 XMR (543210000 pico)", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,049", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,050", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,050", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,050", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,050", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,053", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: f49b0958...): Failed to get daemon height. Cannot calculate confirmations.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,062", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: f49b0958...): Skipping entry 0: TXID 05d195c4c8eacf1b3fbb069d1147b75cf433919175c0d3bca5619a37b4876539 already processed.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,065", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,067", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,070", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,077", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: f49b0958...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-08 04:23:12,082", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: f49b0958...): Found candidate! TXID: 05d195c4c8eacf1b3fbb069d1147b75cf433919175c0d3bca5619a37b4876539, Amt: 1.234567890123 XMR, Confs: 11.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,082", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: f49b0958...): Confirmed payment found.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,086", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,086", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,086", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,086", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-08 04:23:12,088", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,090", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,091", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,091", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,091", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 05d195c4c8eacf1b3fbb069d1147b75cf433919175c0d3bca5619a37b4876539, Fee: 0.000678900000 XMR (678900000 pico)", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,093", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,093", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,094", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,094", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,094", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,094", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,094", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,094", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,096", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,100", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,101", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,101", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,101", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 04:23:12,104", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,104", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 04:23:12,106", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,110", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,111", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,111", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 04:23:12,113", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 04:23:12,114", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,117", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,117", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,117", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,117", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 05d195c4c8eacf1b3fbb069d1147b75cf433919175c0d3bca5619a37b4876539, Fee: 0.000777700000 XMR (777700000 pico)", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,117", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,120", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,120", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,120", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,120", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 05d195c4c8eacf1b3fbb069d1147b75cf433919175c0d3bca5619a37b4876539, Fee: 0.000888800000 XMR (888800000 pico)", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,121", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,123", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,123", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,123", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,123", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,123", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,123", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,126", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,627", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,628", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:12,634", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,135", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,135", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,139", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-08 04:23:13,159", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,160", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2319166718704'>", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,167", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,174", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,174", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2319167525216'>", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,179", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,189", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,189", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,198", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,198", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,207", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,208", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,208", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,217", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,217", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,217", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,224", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,233", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,233", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,248", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,248", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-08 04:23:13,255", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,263", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,263", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-08 04:23:13,272", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,273", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,280", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,280", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,288", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,288", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,301", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 387, "message": "User test_vendor_escrow missing valid withdrawal address in field 'btc_withdrawal_address' for currency BTC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,367", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 486f5958-5779-4df6-825a-f5d3c1c0c5bb (BTC): Initiating multi-sig escrow setup...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,369", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_test_user' loaded and cached.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,370", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 661, "message": "Order 486f5958-5779-4df6-825a-f5d3c1c0c5bb (BTC): BTC multisig details missing expected redeem/witness script.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,370", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 486f5958-5779-4df6-825a-f5d3c1c0c5bb (BTC): Generated BTC Escrow Address: tb1qw508d6qejxt...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,370", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 486f5958-5779-4df6-825a-f5d3c1c0c5bb (BTC): Created CryptoPayment f5ee8c58-df74-4728-9e20-d6c769cb99ee (Multi-sig). Expected Atomic: 1000000", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,371", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 486f5958-5779-4df6-825a-f5d3c1c0c5bb (BTC): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 10:23:13.370717+00:00. Awaiting payment to tb1qw508d6qejxt...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,371", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 486f5958-5779-4df6-825a-f5d3c1c0c5bb (BTC): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,411", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 7f9a30e4-56e0-41d7-9930-20d52aab8b0f (XMR): Initiating multi-sig escrow setup...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,413", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 7f9a30e4-56e0-41d7-9930-20d52aab8b0f (XMR): Generated XMR Escrow Address: xmr_multisig_ad...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,414", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 7f9a30e4-56e0-41d7-9930-20d52aab8b0f (XMR): Created CryptoPayment e382db8d-6086-49c1-a536-bcec73d8cd53 (Multi-sig). Expected Atomic: 1000000000000", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,414", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 7f9a30e4-56e0-41d7-9930-20d52aab8b0f (XMR): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 10:23:13.414294+00:00. Awaiting payment to xmr_multisig_ad...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,414", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 7f9a30e4-56e0-41d7-9930-20d52aab8b0f (XMR): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,459", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 13718823-eded-4954-b3a8-a3a3b5d21436 (BTC): Initiating multi-sig escrow setup...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,459", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 537, "message": "Order 13718823-eded-4954-b3a8-a3a3b5d21436 (BTC): Cannot create escrow details. Status: 'shipped' (Expected: 'pending_payment').", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,500", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 5cba9a2b-6eb5-40c0-9b80-46bbc5a19b76 (LTC): Initiating multi-sig escrow setup...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,502", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 607, "message": "Order 5cba9a2b-6eb5-40c0-9b80-46bbc5a19b76 (LTC): Failed to gather participant info: Multisig key attribute mapping not found for currency LTC.", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 581, in create_escrow_for_order\n    raise ValueError(f\"Multisig key attribute mapping not found for currency {currency}.\")\nValueError: Multisig key attribute mapping not found for currency LTC."}
{"asctime": "2025-04-08 04:23:13,545", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 5063d1ff-00a1-4dc4-a7d3-d24b2ec0acbd (BTC): Initiating multi-sig escrow setup...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,547", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 5063d1ff-00a1-4dc4-a7d3-d24b2ec0acbd (BTC): Crypto service error during BTC escrow generation: BTC Gen Failed", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 639, in create_escrow_for_order\n    msig_details = crypto_service_module.create_btc_multisig_address(\n        participant_pubkeys_hex=participant_infos, # Use expected kwarg name\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: BTC Gen Failed"}
{"asctime": "2025-04-08 04:23:13,591", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 72cf95f6-a2e7-48ac-a73a-54eb2ae5b7c5 (XMR): Initiating multi-sig escrow setup...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,593", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 72cf95f6-a2e7-48ac-a73a-54eb2ae5b7c5 (XMR): Crypto service error during XMR escrow generation: XMR Wallet Gen Failed", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 621, in create_escrow_for_order\n    msig_details = crypto_service_module.create_monero_multisig_wallet(\n        participant_infos=participant_infos, # Use keyword arg for clarity\n        order_guid=str(order.id),           # Use keyword arg 'order_guid'\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: XMR Wallet Gen Failed"}
{"asctime": "2025-04-08 04:23:13,643", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 2138fb2b-cdae-44a1-ba33-0a46aaabdfa3, Payment: 1dd64046-5d4a-4e0b-83da-279200a79c49, Currency: BTC): Starting check.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,643", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 2138fb2b-cdae-44a1-ba33-0a46aaabdfa3, Payment: 1dd64046-5d4a-4e0b-83da-279200a79c49, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,644", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 2138fb2b-cdae-44a1-ba33-0a46aaabdfa3, Payment: 1dd64046-5d4a-4e0b-83da-279200a79c49, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,644", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1052, "message": "PaymentConfirm Check (Order: 2138fb2b-cdae-44a1-ba33-0a46aaabdfa3, Payment: 1dd64046-5d4a-4e0b-83da-279200a79c49, Currency: BTC): Ledger updated (incl. deposit fee) & Order status -> payment_confirmed. TXID: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,645", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1067, "message": "PaymentConfirm Check (Order: 2138fb2b-cdae-44a1-ba33-0a46aaabdfa3, Payment: 1dd64046-5d4a-4e0b-83da-279200a79c49, Currency: BTC): Sent payment confirmation notification to Vendor test_vendor_escrow.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,695", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 8d606d85-3942-4db2-a039-4fcc50329f9e, Payment: ee2a9173-a46b-4662-b6de-0dd3d659eba1, Currency: BTC): Starting check.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,750", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 917, "message": "Order d76c794e-34a2-407d-85e9-02c80a7efb7a cancelled due to underpayment. Rcvd 0.00500000, Exp 0.01000000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,801", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: e1594378-a9f3-4efc-83d2-e4ec2ee7d757, Payment: 7c9cf10b-07cf-4459-91cd-68de78006357, Currency: BTC): Starting check.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,801", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: e1594378-a9f3-4efc-83d2-e4ec2ee7d757, Payment: 7c9cf10b-07cf-4459-91cd-68de78006357, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,802", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: e1594378-a9f3-4efc-83d2-e4ec2ee7d757, Payment: 7c9cf10b-07cf-4459-91cd-68de78006357, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,802", "levelname": "CRITICAL", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1075, "message": "PaymentConfirm Check (Order: e1594378-a9f3-4efc-83d2-e4ec2ee7d757, Payment: 7c9cf10b-07cf-4459-91cd-68de78006357, Currency: BTC): CRITICAL: Ledger/Order atomic update FAILED during payment confirmation! Error: ['Cannot lock funds']. Transaction rolled back.", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1010, in check_and_confirm_payment\n    lock_success = ledger_service.lock_funds(\n        user=buyer, currency=currency, amount=expected_std, # Lock the required STANDARD order amount\n        related_order=order, notes=f\"Lock funds for Order {order.id} escrow\"\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nledger.services.InsufficientFundsError: ['Cannot lock funds']"}
{"asctime": "2025-04-08 04:23:13,851", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order a524d1e3-6b5c-47f6-8201-6324cd9a6964 (MarkShipped by test_vendor_escrow): Attempting...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,853", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1190, "message": "Order a524d1e3-6b5c-47f6-8201-6324cd9a6964 (MarkShipped by test_vendor_escrow): Tracking info provided but 'tracking_info' field missing on Order model.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,855", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1206, "message": "Order a524d1e3-6b5c-47f6-8201-6324cd9a6964 (MarkShipped by test_vendor_escrow): Marked shipped. Status -> shipped. Dispute deadline: 2025-04-15 10:23:13.852733+00:00, Auto-finalize: 2025-04-22 10:23:13.852733+00:00", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,855", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1230, "message": "Order a524d1e3-6b5c-47f6-8201-6324cd9a6964 (MarkShipped by test_vendor_escrow): Sent order shipped notification to Buyer test_buyer_escrow.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,900", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 29f2b48c-179c-4bed-ae92-04e408492e90 (MarkShipped by test_buyer_escrow): Attempting...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,902", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1126, "message": "Order 29f2b48c-179c-4bed-ae92-04e408492e90 (MarkShipped by test_buyer_escrow): Permission denied. User test_buyer_escrow is not the vendor (test_vendor_escrow).", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,946", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 0db2f98b-afee-410d-ad13-d8f1fc8fdc9e (MarkShipped by test_vendor_escrow): Attempting...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,947", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1130, "message": "Order 0db2f98b-afee-410d-ad13-d8f1fc8fdc9e (MarkShipped by test_vendor_escrow): Cannot mark shipped. Invalid status 'pending_payment' (Expected: 'payment_confirmed').", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,992", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 05303c23-410e-45ad-bdde-2f06f2495673 (MarkShipped by test_vendor_escrow): Attempting...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:13,993", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1144, "message": "Order 05303c23-410e-45ad-bdde-2f06f2495673 (MarkShipped by test_vendor_escrow): Failed to prepare release transaction: Prep Fail", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1138, in mark_order_shipped\n    prepared_release_metadata = _prepare_release(order_locked) # Definition is later in file\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Prep Fail"}
{"asctime": "2025-04-08 04:23:14,043", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order cf2702b3-986b-4d84-8b43-70a68f2f23a9 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,044", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order cf2702b3-986b-4d84-8b43-70a68f2f23a9 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,044", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order cf2702b3-986b-4d84-8b43-70a68f2f23a9 (SignRelease by test_buyer_escrow): Signature applied. Current signers: 1/2. Ready for broadcast: False.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,092", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order a7e1e057-a783-4ad5-b1f2-125209842811 (SignRelease by test_vendor_escrow): Attempting signature...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,093", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order a7e1e057-a783-4ad5-b1f2-125209842811 (SignRelease by test_vendor_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,094", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order a7e1e057-a783-4ad5-b1f2-125209842811 (SignRelease by test_vendor_escrow): Signature applied. Current signers: 2/2. Ready for broadcast: True.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,094", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1465, "message": "Order a7e1e057-a783-4ad5-b1f2-125209842811 (SignRelease by test_vendor_escrow): Sent 'ready for broadcast' notification to test_buyer_escrow.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,143", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 06dea09b-be56-4c92-b77a-6f439d1fddd6 (SignRelease by test_mod_escrow): Attempting signature...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,144", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1289, "message": "Order 06dea09b-be56-4c92-b77a-6f439d1fddd6 (SignRelease by test_mod_escrow): Permission denied. User is not buyer or vendor.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,192", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order aab8c494-8f9d-4b40-bedf-095af6d11de9 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,194", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order aab8c494-8f9d-4b40-bedf-095af6d11de9 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,196", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order aab8c494-8f9d-4b40-bedf-095af6d11de9 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,198", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order aab8c494-8f9d-4b40-bedf-095af6d11de9 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,253", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order a7cb1f38-b401-46b3-8102-12a05fa0664b (SignRelease by test_buyer_escrow): Attempting signature...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,254", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1321, "message": "Order a7cb1f38-b401-46b3-8102-12a05fa0664b (SignRelease by test_buyer_escrow): User test_buyer_escrow (ID: 59) has already signed this release.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,301", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order f433c016-e114-41d6-9639-b6dd28efe7fb (SignRelease by test_buyer_escrow): Attempting signature...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,302", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order f433c016-e114-41d6-9639-b6dd28efe7fb (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,302", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1425, "message": "Order f433c016-e114-41d6-9639-b6dd28efe7fb (SignRelease by test_buyer_escrow): Crypto signing error: Simulated BTC Sign Failure", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1345, in sign_order_release\n    sign_result = sign_func(\n        psbt_base64=unsigned_crypto_data,  # Map to expected arg name\n        private_key_wif=private_key_info    # Map to expected arg name\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Simulated BTC Sign Failure"}
{"asctime": "2025-04-08 04:23:14,355", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 055783d6-689a-4098-beb7-1c847a6054bc (BroadcastRelease): Initiating broadcast...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,356", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 055783d6-689a-4098-beb7-1c847a6054bc (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,356", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 055783d6-689a-4098-beb7-1c847a6054bc (BroadcastRelease): Broadcast successful. Transaction Hash: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,357", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 055783d6-689a-4098-beb7-1c847a6054bc (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,357", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 055783d6-689a-4098-beb7-1c847a6054bc (BroadcastRelease): Ledger updated. Vendor: 0.00975000 BTC, Fee: 0.00025000 BTC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,409", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order e11b97af-5583-4a02-9c10-b08e08d6a415 (BroadcastRelease): Initiating broadcast...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,411", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order e11b97af-5583-4a02-9c10-b08e08d6a415 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_signed_txset)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,411", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order e11b97af-5583-4a02-9c10-b08e08d6a415 (BroadcastRelease): Broadcast successful. Transaction Hash: xmr_tx_hash_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,411", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order e11b97af-5583-4a02-9c10-b08e08d6a415 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,412", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order e11b97af-5583-4a02-9c10-b08e08d6a415 (BroadcastRelease): Ledger updated. Vendor: 0.975000000000 XMR, Fee: 0.025000000000 XMR.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,461", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 352d8f68-85d0-4f08-83fc-b4c9ba58656f (BroadcastRelease): Initiating broadcast...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,464", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 352d8f68-85d0-4f08-83fc-b4c9ba58656f (BroadcastRelease): Initiating broadcast...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,469", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 352d8f68-85d0-4f08-83fc-b4c9ba58656f (BroadcastRelease): Initiating broadcast...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,518", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 0e9183ba-e4dc-4b38-b8d6-88abc8188b50 (BroadcastRelease): Initiating broadcast...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,519", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 0e9183ba-e4dc-4b38-b8d6-88abc8188b50 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,519", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 0e9183ba-e4dc-4b38-b8d6-88abc8188b50 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 0e9183ba-e4dc-4b38-b8d6-88abc8188b50 (service module returned invalid tx_hash: 'None').", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 0e9183ba-e4dc-4b38-b8d6-88abc8188b50 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 04:23:14,621", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 3a02d23b-5d85-4881-bc80-13ae932f9b1e (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 100, Notes: 'Full refund....'", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,622", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 3a02d23b-5d85-4881-bc80-13ae932f9b1e (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.01000000 BTC, Vendor: 0E-8 BTC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,622", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 3a02d23b-5d85-4881-bc80-13ae932f9b1e (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,622", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 3a02d23b-5d85-4881-bc80-13ae932f9b1e (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,623", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 3a02d23b-5d85-4881-bc80-13ae932f9b1e (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,623", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 3a02d23b-5d85-4881-bc80-13ae932f9b1e (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.01000000, Vendor: 0E-8 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,673", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 52118342-26ec-4a74-8d1f-65b0c506e592 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 70, Notes: 'Split 70/30...'", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,674", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 52118342-26ec-4a74-8d1f-65b0c506e592 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00700000 BTC, Vendor: 0.00300000 BTC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,674", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 52118342-26ec-4a74-8d1f-65b0c506e592 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,675", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 52118342-26ec-4a74-8d1f-65b0c506e592 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,675", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 52118342-26ec-4a74-8d1f-65b0c506e592 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,675", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 52118342-26ec-4a74-8d1f-65b0c506e592 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.00700000, Vendor: 0.00300000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,721", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 65666913-b424-4f4f-b120-d7fd183a7e74 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test notes...'", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,779", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order b2378795-11ff-4a2c-8785-b2c312ea6400 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 101, Notes: 'Test notes...'", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,782", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order b2378795-11ff-4a2c-8785-b2c312ea6400 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: -10, Notes: 'Test notes...'", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,861", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order d15e4fb6-50d7-4ce3-b8e4-8ef9c0043450 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test Notes - Crypto Fail Attempt...'", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,862", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order d15e4fb6-50d7-4ce3-b8e4-8ef9c0043450 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00500000 BTC, Vendor: 0.00500000 BTC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,863", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order d15e4fb6-50d7-4ce3-b8e4-8ef9c0043450 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,863", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order d15e4fb6-50d7-4ce3-b8e4-8ef9c0043450 (ResolveDispute by test_mod_escrow): Dispute broadcast error: Crypto dispute broadcast failed for Order d15e4fb6-50d7-4ce3-b8e4-8ef9c0043450 (service module returned invalid tx_hash: 'None').", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order d15e4fb6-50d7-4ce3-b8e4-8ef9c0043450 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 04:23:14,909", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order b4f82aa5-d658-4300-987a-1020d4dff4cc (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,911", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2244, "message": "Order b4f82aa5-d658-4300-987a-1020d4dff4cc (GetUnsignedTx for test_buyer_escrow): Returning prepared transaction data (Type: btc_psbt). Already Signed: False", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,956", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 5c75277f-21b8-4fee-b9b3-d0ec6625d5cb (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,957", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2212, "message": "Order 5c75277f-21b8-4fee-b9b3-d0ec6625d5cb (GetUnsignedTx for test_buyer_escrow): Attempted to get unsigned TX before release initiated.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,958", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 5c75277f-21b8-4fee-b9b3-d0ec6625d5cb (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,960", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 5c75277f-21b8-4fee-b9b3-d0ec6625d5cb (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {}", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,961", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 5c75277f-21b8-4fee-b9b3-d0ec6625d5cb (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,962", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 5c75277f-21b8-4fee-b9b3-d0ec6625d5cb (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'type': 'btc_psbt', 'signatures': {}}", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,963", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 5c75277f-21b8-4fee-b9b3-d0ec6625d5cb (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:14,965", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order 5c75277f-21b8-4fee-b9b3-d0ec6625d5cb (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'data': 'some_data', 'signatures': {}}", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,046", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 10af1406-f404-4513-a310-11dd1d7ce4ca (GetUnsignedTx for test_mod_escrow): Request received.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,048", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2207, "message": "Order 10af1406-f404-4513-a310-11dd1d7ce4ca (GetUnsignedTx for test_mod_escrow): Permission denied. User not buyer or vendor.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,096", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 416, "message": "Order c6eadd4b-1df0-445f-8ab4-df13c870423d (TimeoutCheck): Payment deadline 2025-04-08 09:23:15.095680+00:00 passed. Attempting cancellation.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,096", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 429, "message": "Order c6eadd4b-1df0-445f-8ab4-df13c870423d (TimeoutCheck): Successfully cancelled due to payment timeout. Status -> cancelled_timeout", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,096", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 430, "message": "Order c6eadd4b-1df0-445f-8ab4-df13c870423d automatically cancelled due to payment timeout.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,183", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order e67b6a0b-4957-491b-8281-03686158c150 (BroadcastRelease): Initiating broadcast...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,183", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,185", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order e67b6a0b-4957-491b-8281-03686158c150 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,185", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order e67b6a0b-4957-491b-8281-03686158c150 (BroadcastRelease): Broadcast successful. Transaction Hash: aaa_int_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,186", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order e67b6a0b-4957-491b-8281-03686158c150 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,187", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction dc814022-8e97-41cd-a755-caa687d15a75 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,188", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction c8d8f850-a35f-49e9-b81d-9fc06d7a9b79 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,189", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order e67b6a0b-4957-491b-8281-03686158c150 (BroadcastRelease): Ledger updated. Vendor: 0.01960000 BTC, Fee: 0.00040000 BTC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,232", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 9406646c-63f8-466a-b4ea-76c310bb473e (BroadcastRelease): Initiating broadcast...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,233", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,234", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 9406646c-63f8-466a-b4ea-76c310bb473e (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_unsigned_txset)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,234", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 9406646c-63f8-466a-b4ea-76c310bb473e (BroadcastRelease): Broadcast successful. Transaction Hash: bbb_int_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,236", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 9406646c-63f8-466a-b4ea-76c310bb473e (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,236", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 5284437d-c4cc-4d9c-9b24-c6d686569d9f recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,237", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 7553ee74-5482-422e-9675-49f3e99b4fe4 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,238", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 9406646c-63f8-466a-b4ea-76c310bb473e (BroadcastRelease): Ledger updated. Vendor: 1.462500000000 XMR, Fee: 0.037500000000 XMR.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,280", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order d76b68ac-01d7-48bd-878b-3f854b19f52b (BroadcastRelease): Initiating broadcast...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,281", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,282", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order d76b68ac-01d7-48bd-878b-3f854b19f52b (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,282", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order d76b68ac-01d7-48bd-878b-3f854b19f52b (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order d76b68ac-01d7-48bd-878b-3f854b19f52b (service module returned invalid tx_hash: 'None').", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order d76b68ac-01d7-48bd-878b-3f854b19f52b (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 04:23:15,326", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 17ce8bd0-9676-4483-a175-c22efddb68cb (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 30, Notes: 'Split decision: 30% to buyer...'", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,327", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,328", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 17ce8bd0-9676-4483-a175-c22efddb68cb (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.00600000 BTC, Vendor: 0.01400000 BTC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,328", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 17ce8bd0-9676-4483-a175-c22efddb68cb (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,328", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 17ce8bd0-9676-4483-a175-c22efddb68cb (ResolveDispute by test_mod_int): Dispute transaction broadcast successful. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,330", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 17ce8bd0-9676-4483-a175-c22efddb68cb (ResolveDispute by test_mod_int): Order state saved successfully. Proceeding to ledger updates.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,330", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 774e8077-1130-4d1f-8c43-fccffecbafc1 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,331", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction ad1bf2f9-a58f-4f1d-bb64-42c98f7bc546 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,332", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 17ce8bd0-9676-4483-a175-c22efddb68cb (ResolveDispute by test_mod_int): Ledger updated. Buyer: 0.00600000, Vendor: 0.01400000 BTC. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,375", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order ede1811c-f62a-40bf-8605-3494a84a96b1 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 50, Notes: 'Attempted resolution...'", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,376", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,377", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order ede1811c-f62a-40bf-8605-3494a84a96b1 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.01000000 BTC, Vendor: 0.01000000 BTC.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,377", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order ede1811c-f62a-40bf-8605-3494a84a96b1 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 04:23:15,377", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order ede1811c-f62a-40bf-8605-3494a84a96b1 (ResolveDispute by test_mod_int): Dispute broadcast error: Crypto dispute broadcast failed for Order ede1811c-f62a-40bf-8605-3494a84a96b1 (service module returned invalid tx_hash: 'None').", "process": 2612, "thread": 20264, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order ede1811c-f62a-40bf-8605-3494a84a96b1 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 04:23:15,416", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 2612, "thread": 20264}
{"asctime": "2025-04-08 11:11:40,182", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,182", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 18a852e0-f572-4d60-8ea3-37643908eaa2 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,188", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 822751b7-170a-440e-9c6b-ebc2e2cbbf26 recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,196", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 66007257-01d8-4ed6-b122-bb247fe393e8 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,206", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 202, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,210", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,218", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,222", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,230", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,235", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,240", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,244", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,250", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,255", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,260", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,266", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,270", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,325", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 486, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: Test lock", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,325", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 513, "message": "Ledger transaction 80a2e2c4-9ed3-4a41-b52f-d777ba906bbe recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,332", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 465, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,342", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 448, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,348", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: Test unlock", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,348", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction 5a823c8e-3326-4ec9-b015-225b1a7d5dae recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,356", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 592, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,356", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 602, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: Test unlock more", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,356", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Ledger transaction 5319e8bf-6342-4147-a21b-70c66c92ba4b recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,362", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 587, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,374", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 566, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,381", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 15a3bafb-03fd-4460-bd2e-514b40ea5171 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,388", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 050fb21d-cf20-4e6c-9b25-b0055d744470 recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,396", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction de9f1ab5-fc0f-415c-b5b1-47de201dcfbf recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,439", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 295, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,466", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,467", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 482, "message": "[get_market_btc_key] Market BTC key pubkey matches settings (031b7a7e8e...).", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,467", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 489, "message": "[get_market_btc_key] Successfully loaded and cached market BTC key from Vault (PubKey starts with: 031b7a7e8e...).", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,471", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 443, "message": "[get_market_btc_key] Fetching market BTC key 'market_btc_multisig_key' from Vault...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,471", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 454, "message": "[get_market_btc_key] Vault returned invalid data for key 'market_btc_multisig_key': None", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,560", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1547, "message": "Deprecated function `process_btc_withdrawal` called. Use Ledger system.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,565", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1550, "message": "Deprecated function `process_escrow_release` called. Use Taproot multi-sig workflow (prepare/sign/finalize/broadcast).", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,623", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,625", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,629", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,631", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,633", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,636", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,640", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,640", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-08 11:11:40,644", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,650", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-08 11:11:40,657", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-08 11:11:40,664", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,664", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,667", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-08 11:11:40,673", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-08 11:11:40,679", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,679", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,683", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,686", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,689", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-08 11:11:40,696", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-08 11:11:40,701", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-08 11:11:40,706", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,709", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7ccbff9c7e9cb39b)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,709", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 7ccbff9c7e9cb39b): 4LdpnMo9wPESgQ4...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,711", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,712", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,712", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,714", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7ccbff9c7e9cb39b)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,714", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 7ccbff9c7e9cb39b): Timeout", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,718", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7ccbff9c7e9cb39b)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,719", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 7ccbff9c7e9cb39b): Monero RPC Error (Code: -5): RPC Failed", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,721", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7ccbff9c7e9cb39b)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,721", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 7ccbff9c7e9cb39b). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,724", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,724", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,727", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7ccbff9c7e9cb39b)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,727", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 7ccbff9c7e9cb39b) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,731", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,731", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,732", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,738", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,738", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,741", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,741", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,745", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,745", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,748", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,748", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': 'cf531b6fe8bba30021faad913bab2c89ca069a694f3db87524ea9abc49ebb54bf0480426a052cf5be5f3e4350919abe820b453a1b31e271d43a5d8a9540fd24d1256fe825708a401edc90ee17a4f35f093b183ede2490eba5d435a3871537c97b06ac1695eae2b97305b3f147bd89a29a935757a2cbdbcac42b15027073a8651'}", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,752", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,752", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,753", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 3368, "thread": 7820, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-08 11:11:40,753", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,753", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,757", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,757", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,758", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,758", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '64fa4bcc0411c6fc84c2b1644ae6b027b58cee727dcbb4baa3e30fbbae768758bb39afd11758f5f66061e3fd5c0228e9c3c9ef4b5a25db5ecd96009972e2ac8448f8ddb2769dfd0d1460f99cddfe520b7c30ab214e9d46df6975da454418b30a206661f4a5c173faf59af1618dc90ec2f6cb1260bda9fafe9ab9a4fe5c29d2b53cc2641367cee99580be8a25992a6024e4fbbe442feedebcb78c8a270c7f0eebfc527189644b8a2310ad398717f7ba8bff01e93bffdbc47d955a5edaeee63f852101a0f871e5d82ee31a8fbb080e854d39a9603815e39008e53e13e6bef6d66b158745b5c9f86e66eb1645bfb6cafbaec8a22dcd5195cc8e33413eec698cce2b'}", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,759", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 3368, "thread": 7820, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 11:11:40,759", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,760", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,763", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,763", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,764", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,764", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 3368, "thread": 7820, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 11:11:40,764", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,764", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,767", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,767", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,767", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,768", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 3368, "thread": 7820, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-08 11:11:40,768", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,768", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,771", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,771", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,772", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,787", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,788", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-08 11:11:40,794", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,795", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,795", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-08 11:11:40,798", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,798", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,802", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,802", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,802", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,803", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,807", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,808", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,809", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,812", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,812", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,812", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,812", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,815", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,815", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,817", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,818", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,818", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,818", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,821", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,821", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,822", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 11:11:40,826", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,826", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-08 11:11:40,831", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,831", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,834", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,834", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,834", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-08 11:11:40,838", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,838", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,841", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,842", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,842", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,842", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,845", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,846", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,846", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,846", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,848", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,849", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,849", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 5d1e11197e2dd7d85bb6b95ae4571e655a2ee69c6665a302893ad9d303cde711", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,849", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,853", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,858", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,861", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,862", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,862", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 5d1e11197e2dd7d85bb6b95ae4571e655a2ee69c6665a302893ad9d303cde711", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,866", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,866", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,870", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,871", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,875", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,875", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,875", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,880", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,880", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,880", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,883", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,884", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,884", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,889", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,889", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,889", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,893", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,894", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,894", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,897", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,898", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 5d1e11197e2dd7d85bb6b95ae4571e655a2ee69c6665a302893ad9d303cde711, Fee: 0.000543210000 XMR (543210000 pico)", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,901", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,902", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,902", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,902", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,902", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,908", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 14619268...): Failed to get daemon height. Cannot calculate confirmations.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,919", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 14619268...): Skipping entry 0: TXID 5d1e11197e2dd7d85bb6b95ae4571e655a2ee69c6665a302893ad9d303cde711 already processed.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,924", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,929", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,931", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,940", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 14619268...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-08 11:11:40,946", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 14619268...): Found candidate! TXID: 5d1e11197e2dd7d85bb6b95ae4571e655a2ee69c6665a302893ad9d303cde711, Amt: 1.234567890123 XMR, Confs: 11.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,947", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 14619268...): Confirmed payment found.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,952", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,952", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,952", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,952", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-08 11:11:40,956", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,959", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,960", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,960", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,960", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 5d1e11197e2dd7d85bb6b95ae4571e655a2ee69c6665a302893ad9d303cde711, Fee: 0.000678900000 XMR (678900000 pico)", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,963", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,964", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,964", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,964", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,964", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,964", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,964", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,964", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,968", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,974", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,974", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,975", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,975", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 11:11:40,979", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,979", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"C:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-08 11:11:40,983", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,986", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,987", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,987", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 11:11:40,989", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-08 11:11:40,991", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,994", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,994", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,995", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,995", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 5d1e11197e2dd7d85bb6b95ae4571e655a2ee69c6665a302893ad9d303cde711, Fee: 0.000777700000 XMR (777700000 pico)", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,995", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,998", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,999", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,999", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,999", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 5d1e11197e2dd7d85bb6b95ae4571e655a2ee69c6665a302893ad9d303cde711, Fee: 0.000888800000 XMR (888800000 pico)", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:40,999", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:41,003", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:41,003", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:41,003", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:41,004", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:41,004", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:41,004", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:41,008", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:41,508", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:41,509", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:41,511", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,012", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,012", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,016", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-08 11:11:42,039", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,039", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2698416521968'>", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,047", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,056", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,056", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2698417326464'>", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,065", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,080", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,080", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,090", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,090", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,103", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,104", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,104", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,115", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,115", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,115", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,122", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,133", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,133", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,152", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,152", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-08 11:11:42,162", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,170", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,170", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-08 11:11:42,181", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,181", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,191", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,191", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,201", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,201", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,218", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 387, "message": "User test_vendor_escrow missing valid withdrawal address in field 'btc_withdrawal_address' for currency BTC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,282", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order f35909e8-f0d4-46d2-a593-8d6897f17464 (BTC): Initiating multi-sig escrow setup...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,285", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_test_user' loaded and cached.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,285", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 661, "message": "Order f35909e8-f0d4-46d2-a593-8d6897f17464 (BTC): BTC multisig details missing expected redeem/witness script.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,286", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order f35909e8-f0d4-46d2-a593-8d6897f17464 (BTC): Generated BTC Escrow Address: tb1qw508d6qejxt...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,286", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order f35909e8-f0d4-46d2-a593-8d6897f17464 (BTC): Created CryptoPayment 6258f417-5511-4a28-8fa4-f63b8b1d6c4a (Multi-sig). Expected Atomic: 1000000", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,287", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order f35909e8-f0d4-46d2-a593-8d6897f17464 (BTC): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 17:11:42.286812+00:00. Awaiting payment to tb1qw508d6qejxt...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,287", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order f35909e8-f0d4-46d2-a593-8d6897f17464 (BTC): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,346", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 9c89f944-fc9d-4329-a87e-d31c48be2084 (XMR): Initiating multi-sig escrow setup...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,348", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 687, "message": "Order 9c89f944-fc9d-4329-a87e-d31c48be2084 (XMR): Generated XMR Escrow Address: xmr_multisig_ad...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,349", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 715, "message": "Order 9c89f944-fc9d-4329-a87e-d31c48be2084 (XMR): Created CryptoPayment 9aabc398-6224-4ec4-97f0-56df1bc18897 (Multi-sig). Expected Atomic: 1000000000000", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,349", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 734, "message": "Order 9c89f944-fc9d-4329-a87e-d31c48be2084 (XMR): Multi-sig escrow setup successful. Status -> pending_payment. Payment deadline: 2025-04-09 17:11:42.349286+00:00. Awaiting payment to xmr_multisig_ad...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,350", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 747, "message": "Order 9c89f944-fc9d-4329-a87e-d31c48be2084 (XMR): Sent 'ready for payment' notification to Buyer test_buyer_escrow.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,414", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 9e3e965a-da50-4259-903d-bd3305b0e72e (BTC): Initiating multi-sig escrow setup...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,414", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 537, "message": "Order 9e3e965a-da50-4259-903d-bd3305b0e72e (BTC): Cannot create escrow details. Status: 'shipped' (Expected: 'pending_payment').", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,469", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 55156385-8081-4eaa-b766-554561cec08c (LTC): Initiating multi-sig escrow setup...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,472", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 607, "message": "Order 55156385-8081-4eaa-b766-554561cec08c (LTC): Failed to gather participant info: Multisig key attribute mapping not found for currency LTC.", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 581, in create_escrow_for_order\n    raise ValueError(f\"Multisig key attribute mapping not found for currency {currency}.\")\nValueError: Multisig key attribute mapping not found for currency LTC."}
{"asctime": "2025-04-08 11:11:42,532", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 20193c17-85e3-49b3-bd6f-c50b0884e6c1 (BTC): Initiating multi-sig escrow setup...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,535", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 20193c17-85e3-49b3-bd6f-c50b0884e6c1 (BTC): Crypto service error during BTC escrow generation: BTC Gen Failed", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 639, in create_escrow_for_order\n    msig_details = crypto_service_module.create_btc_multisig_address(\n        participant_pubkeys_hex=participant_infos, # Use expected kwarg name\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: BTC Gen Failed"}
{"asctime": "2025-04-08 11:11:42,595", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 515, "message": "Order 89301e08-84ed-4974-a6ca-a2afb6769d3e (XMR): Initiating multi-sig escrow setup...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,598", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 692, "message": "Order 89301e08-84ed-4974-a6ca-a2afb6769d3e (XMR): Crypto service error during XMR escrow generation: XMR Wallet Gen Failed", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 621, in create_escrow_for_order\n    msig_details = crypto_service_module.create_monero_multisig_wallet(\n        participant_infos=participant_infos, # Use keyword arg for clarity\n        order_guid=str(order.id),           # Use keyword arg 'order_guid'\n        threshold=threshold\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: XMR Wallet Gen Failed"}
{"asctime": "2025-04-08 11:11:42,668", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 12fe5868-4039-4b4a-a993-762b46277b0b, Payment: 4eb56fe0-dc09-4e79-ae33-2088d5634f14, Currency: BTC): Starting check.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,668", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 12fe5868-4039-4b4a-a993-762b46277b0b, Payment: 4eb56fe0-dc09-4e79-ae33-2088d5634f14, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,669", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 12fe5868-4039-4b4a-a993-762b46277b0b, Payment: 4eb56fe0-dc09-4e79-ae33-2088d5634f14, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,670", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1052, "message": "PaymentConfirm Check (Order: 12fe5868-4039-4b4a-a993-762b46277b0b, Payment: 4eb56fe0-dc09-4e79-ae33-2088d5634f14, Currency: BTC): Ledger updated (incl. deposit fee) & Order status -> payment_confirmed. TXID: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,671", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1067, "message": "PaymentConfirm Check (Order: 12fe5868-4039-4b4a-a993-762b46277b0b, Payment: 4eb56fe0-dc09-4e79-ae33-2088d5634f14, Currency: BTC): Sent payment confirmation notification to Vendor test_vendor_escrow.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,735", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 455468d7-e86d-44d1-a7aa-a48bbdb164ac, Payment: a444bd98-8b98-48e9-9f9d-84b111dc08a2, Currency: BTC): Starting check.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,801", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 917, "message": "Order ce57538d-369a-4055-bd59-6177942c5a12 cancelled due to underpayment. Rcvd 0.00500000, Exp 0.01000000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,870", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 802, "message": "PaymentConfirm Check (Order: 35e3dcf2-0117-4220-9332-5ed018b192bb, Payment: 5accc2c7-a3ab-4dab-b996-c6efeca04148, Currency: BTC): Starting check.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,870", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 870, "message": "PaymentConfirm Check (Order: 35e3dcf2-0117-4220-9332-5ed018b192bb, Payment: 5accc2c7-a3ab-4dab-b996-c6efeca04148, Currency: BTC): Crypto confirmed. RcvdAtomic=1000000, ExpAtomic=1000000, Confs=8, TXID=btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,871", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 976, "message": "PaymentConfirm Check (Order: 35e3dcf2-0117-4220-9332-5ed018b192bb, Payment: 5accc2c7-a3ab-4dab-b996-c6efeca04148, Currency: BTC): Applying Deposit Fee (2.50%). Gross: 0.01000000, Fee: 0.00025000, Net: 0.00975000 BTC", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,871", "levelname": "CRITICAL", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1075, "message": "PaymentConfirm Check (Order: 35e3dcf2-0117-4220-9332-5ed018b192bb, Payment: 5accc2c7-a3ab-4dab-b996-c6efeca04148, Currency: BTC): CRITICAL: Ledger/Order atomic update FAILED during payment confirmation! Error: ['Cannot lock funds']. Transaction rolled back.", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1010, in check_and_confirm_payment\n    lock_success = ledger_service.lock_funds(\n        user=buyer, currency=currency, amount=expected_std, # Lock the required STANDARD order amount\n        related_order=order, notes=f\"Lock funds for Order {order.id} escrow\"\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nledger.services.InsufficientFundsError: ['Cannot lock funds']"}
{"asctime": "2025-04-08 11:11:42,937", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order f7edab91-e83c-4815-9f4f-acaf121f27c0 (MarkShipped by test_vendor_escrow): Attempting...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,940", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1190, "message": "Order f7edab91-e83c-4815-9f4f-acaf121f27c0 (MarkShipped by test_vendor_escrow): Tracking info provided but 'tracking_info' field missing on Order model.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,942", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1206, "message": "Order f7edab91-e83c-4815-9f4f-acaf121f27c0 (MarkShipped by test_vendor_escrow): Marked shipped. Status -> shipped. Dispute deadline: 2025-04-15 17:11:42.939461+00:00, Auto-finalize: 2025-04-22 17:11:42.939461+00:00", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:42,943", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1230, "message": "Order f7edab91-e83c-4815-9f4f-acaf121f27c0 (MarkShipped by test_vendor_escrow): Sent order shipped notification to Buyer test_buyer_escrow.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,004", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order de3209dc-fea5-45c1-8553-8fef5f6056de (MarkShipped by test_buyer_escrow): Attempting...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,005", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1126, "message": "Order de3209dc-fea5-45c1-8553-8fef5f6056de (MarkShipped by test_buyer_escrow): Permission denied. User test_buyer_escrow is not the vendor (test_vendor_escrow).", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,066", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 835505e4-da16-4d0e-b1b4-028b60c94a21 (MarkShipped by test_vendor_escrow): Attempting...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,068", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1130, "message": "Order 835505e4-da16-4d0e-b1b4-028b60c94a21 (MarkShipped by test_vendor_escrow): Cannot mark shipped. Invalid status 'pending_payment' (Expected: 'payment_confirmed').", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,130", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1104, "message": "Order 4e485a00-3093-4f3c-bda5-3b0221783257 (MarkShipped by test_vendor_escrow): Attempting...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,137", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1144, "message": "Order 4e485a00-3093-4f3c-bda5-3b0221783257 (MarkShipped by test_vendor_escrow): Failed to prepare release transaction: Prep Fail", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1138, in mark_order_shipped\n    prepared_release_metadata = _prepare_release(order_locked) # Definition is later in file\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Prep Fail"}
{"asctime": "2025-04-08 11:11:43,202", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order a13a06cc-480f-41cd-9f42-82f9b4a8cac8 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,205", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order a13a06cc-480f-41cd-9f42-82f9b4a8cac8 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,206", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order a13a06cc-480f-41cd-9f42-82f9b4a8cac8 (SignRelease by test_buyer_escrow): Signature applied. Current signers: 1/2. Ready for broadcast: False.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,272", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 6cb14594-0a24-4d3d-b01c-c92063460baa (SignRelease by test_vendor_escrow): Attempting signature...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,274", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 6cb14594-0a24-4d3d-b01c-c92063460baa (SignRelease by test_vendor_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,275", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1451, "message": "Order 6cb14594-0a24-4d3d-b01c-c92063460baa (SignRelease by test_vendor_escrow): Signature applied. Current signers: 2/2. Ready for broadcast: True.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,275", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1465, "message": "Order 6cb14594-0a24-4d3d-b01c-c92063460baa (SignRelease by test_vendor_escrow): Sent 'ready for broadcast' notification to test_buyer_escrow.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,341", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 16c619d5-cc4f-458b-af7f-16227f012325 (SignRelease by test_mod_escrow): Attempting signature...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,343", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1289, "message": "Order 16c619d5-cc4f-458b-af7f-16227f012325 (SignRelease by test_mod_escrow): Permission denied. User is not buyer or vendor.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,407", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 3abd8fb6-4bc6-4236-acc2-0f23d509956c (SignRelease by test_buyer_escrow): Attempting signature...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,409", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 3abd8fb6-4bc6-4236-acc2-0f23d509956c (SignRelease by test_buyer_escrow): Attempting signature...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,412", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 3abd8fb6-4bc6-4236-acc2-0f23d509956c (SignRelease by test_buyer_escrow): Attempting signature...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,414", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 3abd8fb6-4bc6-4236-acc2-0f23d509956c (SignRelease by test_buyer_escrow): Attempting signature...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,479", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 41158e45-9ac6-4301-95f9-9bee603ddf88 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,481", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1321, "message": "Order 41158e45-9ac6-4301-95f9-9bee603ddf88 (SignRelease by test_buyer_escrow): User test_buyer_escrow (ID: 59) has already signed this release.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,545", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1260, "message": "Order 20036f3d-298a-4779-83ed-30bf4cb4d357 (SignRelease by test_buyer_escrow): Attempting signature...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,547", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1335, "message": "Order 20036f3d-298a-4779-83ed-30bf4cb4d357 (SignRelease by test_buyer_escrow): Calling crypto service module store.services.bitcoin_service for BTC signing...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,547", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1425, "message": "Order 20036f3d-298a-4779-83ed-30bf4cb4d357 (SignRelease by test_buyer_escrow): Crypto signing error: Simulated BTC Sign Failure", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1345, in sign_order_release\n    sign_result = sign_func(\n        psbt_base64=unsigned_crypto_data,  # Map to expected arg name\n        private_key_wif=private_key_info    # Map to expected arg name\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: Simulated BTC Sign Failure"}
{"asctime": "2025-04-08 11:11:43,618", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 829254a6-b17f-4fe6-a0c7-06492dbf0d85 (BroadcastRelease): Initiating broadcast...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,621", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 829254a6-b17f-4fe6-a0c7-06492dbf0d85 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,621", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 829254a6-b17f-4fe6-a0c7-06492dbf0d85 (BroadcastRelease): Broadcast successful. Transaction Hash: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,621", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 829254a6-b17f-4fe6-a0c7-06492dbf0d85 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,622", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 829254a6-b17f-4fe6-a0c7-06492dbf0d85 (BroadcastRelease): Ledger updated. Vendor: 0.00975000 BTC, Fee: 0.00025000 BTC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,693", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 1c76b087-6e76-4ae7-9eae-8898e1707973 (BroadcastRelease): Initiating broadcast...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,695", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 1c76b087-6e76-4ae7-9eae-8898e1707973 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_signed_txset)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,695", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 1c76b087-6e76-4ae7-9eae-8898e1707973 (BroadcastRelease): Broadcast successful. Transaction Hash: xmr_tx_hash_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,696", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 1c76b087-6e76-4ae7-9eae-8898e1707973 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,696", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 1c76b087-6e76-4ae7-9eae-8898e1707973 (BroadcastRelease): Ledger updated. Vendor: 0.975000000000 XMR, Fee: 0.025000000000 XMR.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,760", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 5f9fd4c0-4b37-4e3a-888a-92ea17cae6ab (BroadcastRelease): Initiating broadcast...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,763", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 5f9fd4c0-4b37-4e3a-888a-92ea17cae6ab (BroadcastRelease): Initiating broadcast...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,771", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 5f9fd4c0-4b37-4e3a-888a-92ea17cae6ab (BroadcastRelease): Initiating broadcast...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,837", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 85933f0f-05c2-4be5-aa98-de232d06ec3d (BroadcastRelease): Initiating broadcast...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,840", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 85933f0f-05c2-4be5-aa98-de232d06ec3d (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_final_psbt)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,840", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 85933f0f-05c2-4be5-aa98-de232d06ec3d (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 85933f0f-05c2-4be5-aa98-de232d06ec3d (service module returned invalid tx_hash: 'None').", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 85933f0f-05c2-4be5-aa98-de232d06ec3d (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 11:11:43,984", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 5e60898f-3ec9-4400-b7a3-646539c7bd0e (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 100, Notes: 'Full refund....'", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,986", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 5e60898f-3ec9-4400-b7a3-646539c7bd0e (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.01000000 BTC, Vendor: 0E-8 BTC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,986", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 5e60898f-3ec9-4400-b7a3-646539c7bd0e (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,986", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 5e60898f-3ec9-4400-b7a3-646539c7bd0e (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,986", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 5e60898f-3ec9-4400-b7a3-646539c7bd0e (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:43,987", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 5e60898f-3ec9-4400-b7a3-646539c7bd0e (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.01000000, Vendor: 0E-8 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,059", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 44e40c40-42b7-44e3-810d-cd0b01a91918 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 70, Notes: 'Split 70/30...'", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,062", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 44e40c40-42b7-44e3-810d-cd0b01a91918 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00700000 BTC, Vendor: 0.00300000 BTC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,062", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 44e40c40-42b7-44e3-810d-cd0b01a91918 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,062", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 44e40c40-42b7-44e3-810d-cd0b01a91918 (ResolveDispute by test_mod_escrow): Dispute transaction broadcast successful. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,063", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 44e40c40-42b7-44e3-810d-cd0b01a91918 (ResolveDispute by test_mod_escrow): Order state saved successfully. Proceeding to ledger updates.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,063", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 44e40c40-42b7-44e3-810d-cd0b01a91918 (ResolveDispute by test_mod_escrow): Ledger updated. Buyer: 0.00700000, Vendor: 0.00300000 BTC. TX: btc_tx_hash_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,135", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 27d79665-cce2-4645-9e96-cbe2cb90b4e4 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test notes...'", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,205", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order bef36bc9-91c5-4e3c-b7cc-d6b0dc372a26 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 101, Notes: 'Test notes...'", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,207", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order bef36bc9-91c5-4e3c-b7cc-d6b0dc372a26 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: -10, Notes: 'Test notes...'", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,276", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order e621ed3c-5ca1-4e50-8732-daf724d9a0c1 (ResolveDispute by test_mod_escrow): Attempting resolution. Buyer %: 50, Notes: 'Test Notes - Crypto Fail Attempt...'", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,277", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order e621ed3c-5ca1-4e50-8732-daf724d9a0c1 (ResolveDispute by test_mod_escrow): Calculated Shares - Total: 0.01000000, Buyer: 0.00500000 BTC, Vendor: 0.00500000 BTC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,278", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order e621ed3c-5ca1-4e50-8732-daf724d9a0c1 (ResolveDispute by test_mod_escrow): Attempting dispute broadcast (BTC)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,278", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order e621ed3c-5ca1-4e50-8732-daf724d9a0c1 (ResolveDispute by test_mod_escrow): Dispute broadcast error: Crypto dispute broadcast failed for Order e621ed3c-5ca1-4e50-8732-daf724d9a0c1 (service module returned invalid tx_hash: 'None').", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order e621ed3c-5ca1-4e50-8732-daf724d9a0c1 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 11:11:44,343", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 1eec8440-5f88-4d9c-8e55-56dfdfd5bcb7 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,345", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2244, "message": "Order 1eec8440-5f88-4d9c-8e55-56dfdfd5bcb7 (GetUnsignedTx for test_buyer_escrow): Returning prepared transaction data (Type: btc_psbt). Already Signed: False", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,409", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order b63e8ebf-cc1d-4e5d-a9cf-8845a5f9ea82 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,410", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2212, "message": "Order b63e8ebf-cc1d-4e5d-a9cf-8845a5f9ea82 (GetUnsignedTx for test_buyer_escrow): Attempted to get unsigned TX before release initiated.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,412", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order b63e8ebf-cc1d-4e5d-a9cf-8845a5f9ea82 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,413", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order b63e8ebf-cc1d-4e5d-a9cf-8845a5f9ea82 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {}", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,414", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order b63e8ebf-cc1d-4e5d-a9cf-8845a5f9ea82 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,415", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order b63e8ebf-cc1d-4e5d-a9cf-8845a5f9ea82 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'type': 'btc_psbt', 'signatures': {}}", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,416", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order b63e8ebf-cc1d-4e5d-a9cf-8845a5f9ea82 (GetUnsignedTx for test_buyer_escrow): Request received.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,417", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2225, "message": "Order b63e8ebf-cc1d-4e5d-a9cf-8845a5f9ea82 (GetUnsignedTx for test_buyer_escrow): Release metadata incomplete. Missing 'type' or 'data'. Metadata: {'data': 'some_data', 'signatures': {}}", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,484", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2182, "message": "Order 4c46d689-7066-4f15-b97b-ac473bc07d39 (GetUnsignedTx for test_mod_escrow): Request received.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,499", "levelname": "WARNING", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2207, "message": "Order 4c46d689-7066-4f15-b97b-ac473bc07d39 (GetUnsignedTx for test_mod_escrow): Permission denied. User not buyer or vendor.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,558", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 416, "message": "Order ebeaa054-1d24-4f8f-94fd-81858a2ce860 (TimeoutCheck): Payment deadline 2025-04-08 16:11:44.557479+00:00 passed. Attempting cancellation.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,558", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 429, "message": "Order ebeaa054-1d24-4f8f-94fd-81858a2ce860 (TimeoutCheck): Successfully cancelled due to payment timeout. Status -> cancelled_timeout", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,559", "levelname": "WARNING", "name": "django.security", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 430, "message": "Order ebeaa054-1d24-4f8f-94fd-81858a2ce860 automatically cancelled due to payment timeout.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,684", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order b0e126a9-a4f9-48a7-9c3f-8d51b5143a66 (BroadcastRelease): Initiating broadcast...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,684", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,686", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order b0e126a9-a4f9-48a7-9c3f-8d51b5143a66 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,686", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order b0e126a9-a4f9-48a7-9c3f-8d51b5143a66 (BroadcastRelease): Broadcast successful. Transaction Hash: aaa_int_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,688", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order b0e126a9-a4f9-48a7-9c3f-8d51b5143a66 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,689", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 77c39e41-13c9-467d-a256-0da5ef234e27 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,691", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction f275e913-6367-4dff-935c-ef5c85d1c729 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,691", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order b0e126a9-a4f9-48a7-9c3f-8d51b5143a66 (BroadcastRelease): Ledger updated. Vendor: 0.01960000 BTC, Fee: 0.00040000 BTC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,752", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 971eb52b-ef54-481a-bd48-54e4b8543698 (BroadcastRelease): Initiating broadcast...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,753", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,755", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 971eb52b-ef54-481a-bd48-54e4b8543698 (BroadcastRelease): Calling crypto service module to finalize and broadcast (XMR, Type: xmr_unsigned_txset)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,755", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1624, "message": "Order 971eb52b-ef54-481a-bd48-54e4b8543698 (BroadcastRelease): Broadcast successful. Transaction Hash: bbb_int_bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,756", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1669, "message": "Order 971eb52b-ef54-481a-bd48-54e4b8543698 (BroadcastRelease): Order state saved successfully. Proceeding to ledger updates.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,758", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction c828ceb2-f3f9-4af8-817a-938ab639d79c recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,759", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction d8faae96-e73b-4b84-98d1-eb29349ab38f recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,759", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1689, "message": "Order 971eb52b-ef54-481a-bd48-54e4b8543698 (BroadcastRelease): Ledger updated. Vendor: 1.462500000000 XMR, Fee: 0.037500000000 XMR.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,818", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1499, "message": "Order 102af800-dd4a-4d19-b7c6-56c06e524ce4 (BroadcastRelease): Initiating broadcast...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,819", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,820", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1594, "message": "Order 102af800-dd4a-4d19-b7c6-56c06e524ce4 (BroadcastRelease): Calling crypto service module to finalize and broadcast (BTC, Type: btc_psbt)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,821", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1627, "message": "Order 102af800-dd4a-4d19-b7c6-56c06e524ce4 (BroadcastRelease): Crypto broadcast failed: Crypto broadcast failed for Order 102af800-dd4a-4d19-b7c6-56c06e524ce4 (service module returned invalid tx_hash: 'None').", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 1622, in broadcast_release_transaction\n    raise CryptoProcessingError(f\"Crypto broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto broadcast failed for Order 102af800-dd4a-4d19-b7c6-56c06e524ce4 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 11:11:44,880", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 87fed1c9-0b6e-4192-8e91-0c316b5f38ac (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 30, Notes: 'Split decision: 30% to buyer...'", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,881", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,883", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 87fed1c9-0b6e-4192-8e91-0c316b5f38ac (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.00600000 BTC, Vendor: 0.01400000 BTC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,883", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 87fed1c9-0b6e-4192-8e91-0c316b5f38ac (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,883", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2036, "message": "Order 87fed1c9-0b6e-4192-8e91-0c316b5f38ac (ResolveDispute by test_mod_int): Dispute transaction broadcast successful. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,886", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2093, "message": "Order 87fed1c9-0b6e-4192-8e91-0c316b5f38ac (ResolveDispute by test_mod_int): Order state saved successfully. Proceeding to ledger updates.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,887", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 7f70051b-28a2-4794-b771-a0cb00d175a4 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,888", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 243, "message": "Ledger transaction 883c8716-2d1d-4139-b5c0-028236424c78 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,888", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2123, "message": "Order 87fed1c9-0b6e-4192-8e91-0c316b5f38ac (ResolveDispute by test_mod_int): Ledger updated. Buyer: 0.00600000, Vendor: 0.01400000 BTC. TX: ccc_dispute_cccccccccccccccccccccccccccccccccccccccccccccccccccccc", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,950", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1856, "message": "Order 7166a617-09ca-4fd4-9502-a86b70be6b58 (ResolveDispute by test_mod_int): Attempting resolution. Buyer %: 50, Notes: 'Attempted resolution...'", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,950", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 201, "message": "Market user 'market_int_user_v2' loaded and cached.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,952", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1961, "message": "Order 7166a617-09ca-4fd4-9502-a86b70be6b58 (ResolveDispute by test_mod_int): Calculated Shares - Total: 0.02000000, Buyer: 0.01000000 BTC, Vendor: 0.01000000 BTC.", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,952", "levelname": "INFO", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 1998, "message": "Order 7166a617-09ca-4fd4-9502-a86b70be6b58 (ResolveDispute by test_mod_int): Attempting dispute broadcast (BTC)...", "process": 3368, "thread": 7820}
{"asctime": "2025-04-08 11:11:44,952", "levelname": "ERROR", "name": "store.services.escrow_service", "module": "escrow_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\escrow_service.py", "lineno": 2039, "message": "Order 7166a617-09ca-4fd4-9502-a86b70be6b58 (ResolveDispute by test_mod_int): Dispute broadcast error: Crypto dispute broadcast failed for Order 7166a617-09ca-4fd4-9502-a86b70be6b58 (service module returned invalid tx_hash: 'None').", "process": 3368, "thread": 7820, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\escrow_service.py\", line 2034, in resolve_dispute\n    raise CryptoProcessingError(f\"Crypto dispute broadcast failed for Order {order_locked.id} (service module returned invalid tx_hash: '{tx_hash}').\")\nstore.exceptions.CryptoProcessingError: Crypto dispute broadcast failed for Order 7166a617-09ca-4fd4-9502-a86b70be6b58 (service module returned invalid tx_hash: 'None')."}
{"asctime": "2025-04-08 11:11:45,003", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 3368, "thread": 7820}
