{"asctime": "2025-04-11 13:07:39,538", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,542", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,545", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,545", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,545", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,545", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 24172, "thread": 22368, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:07:39,545", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,545", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,548", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,548", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,548", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,548", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 24172, "thread": 22368, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:07:39,548", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,548", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,550", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,551", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,551", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,560", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,560", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 24172, "thread": 22368, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-11 13:07:39,566", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,566", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,566", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 24172, "thread": 22368, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-11 13:07:39,569", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,569", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,573", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,574", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,574", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,574", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,577", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,578", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,578", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,581", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,581", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,581", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,581", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,583", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,583", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,585", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,585", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,585", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,586", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,587", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,587", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,588", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 24172, "thread": 22368, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:07:39,590", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,590", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 24172, "thread": 22368, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:07:39,594", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,594", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,596", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,597", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,597", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 24172, "thread": 22368, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-11 13:07:39,600", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,601", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,603", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,604", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,604", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,604", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,607", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,607", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,608", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,608", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,610", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,610", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,610", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 60d6db59ab4454d7c299e55767903d597fa8e5acbd8a210cad8a27a025b14ed8", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,611", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,613", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,615", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,618", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,618", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,619", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 60d6db59ab4454d7c299e55767903d597fa8e5acbd8a210cad8a27a025b14ed8", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,622", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,623", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,625", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,626", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,628", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,628", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,628", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,631", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,632", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,632", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,634", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,634", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,634", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,637", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,637", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,637", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,641", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,641", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,641", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,644", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,644", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 60d6db59ab4454d7c299e55767903d597fa8e5acbd8a210cad8a27a025b14ed8, Fee: 0.000543210000 XMR (543210000 pico)", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,647", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,647", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,647", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,648", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,648", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,651", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: ea82227e...): Failed to get daemon height. Cannot calculate confirmations.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,662", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: ea82227e...): Skipping entry 0: TXID 60d6db59ab4454d7c299e55767903d597fa8e5acbd8a210cad8a27a025b14ed8 already processed.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,666", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,670", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,672", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,678", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: ea82227e...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 24172, "thread": 22368, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-11 13:07:39,683", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: ea82227e...): Found candidate! TXID: 60d6db59ab4454d7c299e55767903d597fa8e5acbd8a210cad8a27a025b14ed8, Amt: 1.234567890123 XMR, Confs: 11.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,683", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: ea82227e...): Confirmed payment found.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,687", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,687", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,687", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,687", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 24172, "thread": 22368, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-11 13:07:39,690", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,694", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,694", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,694", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,694", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 60d6db59ab4454d7c299e55767903d597fa8e5acbd8a210cad8a27a025b14ed8, Fee: 0.000678900000 XMR (678900000 pico)", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,697", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,697", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,697", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,697", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,697", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,697", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,697", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,698", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,702", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,706", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,706", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,706", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,706", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 24172, "thread": 22368, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:07:39,710", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,711", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 24172, "thread": 22368, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:07:39,713", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,716", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,716", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,716", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 24172, "thread": 22368, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:07:39,718", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 24172, "thread": 22368, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:07:39,719", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,722", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,723", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,723", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,723", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 60d6db59ab4454d7c299e55767903d597fa8e5acbd8a210cad8a27a025b14ed8, Fee: 0.000777700000 XMR (777700000 pico)", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,723", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,727", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,727", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,727", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,728", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 60d6db59ab4454d7c299e55767903d597fa8e5acbd8a210cad8a27a025b14ed8, Fee: 0.000888800000 XMR (888800000 pico)", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,728", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,731", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,731", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,731", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,731", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,731", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,731", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:39,733", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,234", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,234", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,237", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,738", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,738", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,742", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 24172, "thread": 22368, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-11 13:07:40,768", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,770", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2689895663328'>", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,777", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,785", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,785", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2689874017120'>", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,795", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,807", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,807", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,814", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,814", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,825", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,825", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,825", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,835", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,835", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,836", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,844", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,856", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,856", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,870", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,870", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 24172, "thread": 22368, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-11 13:07:40,878", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,885", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,885", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 24172, "thread": 22368, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-11 13:07:40,898", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,898", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,906", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,906", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,914", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:40,914", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:41,496", "levelname": "WARNING", "name": "django.security", "module": "common_escrow_utils", "pathname": "C:\\shadow_market\\backend\\store\\services\\common_escrow_utils.py", "lineno": 411, "message": "Order b15c0eb0-59b3-42f5-98ad-51214347a44f automatically cancelled due to payment timeout.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:41,860", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction da76befd-a2ac-4381-aa74-abca1292618e recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:41,861", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction c91b9c20-2acb-47a8-aa0c-a60f5050dcdc recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:41,911", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction f3c4469b-5f48-48c6-bf0c-76a26d79f45c recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:41,912", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 51a32d66-eed5-45eb-a86b-e853790521a5 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,008", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 253d8baf-2ffa-4f1d-8000-9eb05d8c4cca recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,009", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction f49cf523-d130-4cf7-9bd3-707b76112fbb recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,093", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,132", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,132", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,132", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,133", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,134", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,134", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee credit successful.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,134", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,134", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,135", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,135", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,135", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,170", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,170", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,170", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,171", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,205", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,205", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,205", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,206", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,207", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,207", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee credit successful.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,207", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,207", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 24172, "thread": 22368, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-11 13:07:42,210", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,211", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:07:42,251", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 24172, "thread": 22368}
{"asctime": "2025-04-11 13:12:03,243", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,244", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 4d99744b-1434-4917-aa4d-f7513b7a5660 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,250", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction d44c59fc-2eea-4517-84f6-60ce28702bcc recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,256", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction c42aeebe-6f68-413a-af6e-c51fd4ecee02 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,262", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 206, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,268", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,273", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,277", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,281", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,284", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,290", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,296", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,300", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,303", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,307", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,312", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,315", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,355", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 508, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,355", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 535, "message": "Ledger transaction 30111d63-5742-4c3f-8f3a-81edf8957a12 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,360", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 487, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,368", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 464, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,373", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 630, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,373", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 656, "message": "Ledger transaction ff945eed-11e8-427d-9b71-3a4b3405e780 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,378", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 620, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,379", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 630, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,379", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 656, "message": "Ledger transaction f5985f35-4723-465b-b196-c7f8f6132812 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,383", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 615, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,386", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 585, "message": "Unlock amount must be positive, got 0.0. User 1, Currency ETH. No action taken.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,585", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 595, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,590", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction e3c70461-497c-43b9-b8cf-6475c763864f recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,594", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 9a1e3b15-4eb2-4ef9-b8d5-ab04e4601017 recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,602", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction c4000310-4410-4e58-93cd-3d851ed953e6 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,608", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,609", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,609", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Service or balance function 'get_wallet_balance' not configured correctly for BTC.", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 254, in reconcile_ledger_balances\n    raise ValueError(f\"Service or balance function '{balance_func_name}' not configured correctly for {currency}.\")\nValueError: Service or balance function 'get_wallet_balance' not configured correctly for BTC."}
{"asctime": "2025-04-11 13:12:03,612", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing XMR: Service or balance function 'get_wallet_balance' not configured correctly for XMR.", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 254, in reconcile_ledger_balances\n    raise ValueError(f\"Service or balance function '{balance_func_name}' not configured correctly for {currency}.\")\nValueError: Service or balance function 'get_wallet_balance' not configured correctly for XMR."}
{"asctime": "2025-04-11 13:12:03,613", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,614", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,624", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,625", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,625", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Service or balance function 'get_wallet_balance' not configured correctly for BTC.", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 254, in reconcile_ledger_balances\n    raise ValueError(f\"Service or balance function '{balance_func_name}' not configured correctly for {currency}.\")\nValueError: Service or balance function 'get_wallet_balance' not configured correctly for BTC."}
{"asctime": "2025-04-11 13:12:03,626", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,628", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,636", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,637", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,637", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Service or balance function 'get_wallet_balance' not configured correctly for BTC.", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 254, in reconcile_ledger_balances\n    raise ValueError(f\"Service or balance function '{balance_func_name}' not configured correctly for {currency}.\")\nValueError: Service or balance function 'get_wallet_balance' not configured correctly for BTC."}
{"asctime": "2025-04-11 13:12:03,639", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,639", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,647", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,650", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,650", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Service or balance function 'get_wallet_balance' not configured correctly for BTC.", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 254, in reconcile_ledger_balances\n    raise ValueError(f\"Service or balance function '{balance_func_name}' not configured correctly for {currency}.\")\nValueError: Service or balance function 'get_wallet_balance' not configured correctly for BTC."}
{"asctime": "2025-04-11 13:12:03,651", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,652", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,661", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,662", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,664", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 150, "message": "Invalid precision '<MagicMock name='CURRENCY_CONFIG.get().get()' id='2740681263824'>' provided, defaulting to 8 decimal places.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,664", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing XMR: attribute name must be string, not 'MagicMock'", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 253, in reconcile_ledger_balances\n    if not service or not balance_func_name or not hasattr(service, balance_func_name):\n                                                   ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: attribute name must be string, not 'MagicMock'"}
{"asctime": "2025-04-11 13:12:03,666", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 150, "message": "Invalid precision '<MagicMock name='CURRENCY_CONFIG.get().get()' id='2740681263824'>' provided, defaulting to 8 decimal places.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,666", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: attribute name must be string, not 'MagicMock'", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 253, in reconcile_ledger_balances\n    if not service or not balance_func_name or not hasattr(service, balance_func_name):\n                                                   ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: attribute name must be string, not 'MagicMock'"}
{"asctime": "2025-04-11 13:12:03,668", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 150, "message": "Invalid precision '<MagicMock name='CURRENCY_CONFIG.get().get()' id='2740681263824'>' provided, defaulting to 8 decimal places.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,668", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing ETH: attribute name must be string, not 'MagicMock'", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 253, in reconcile_ledger_balances\n    if not service or not balance_func_name or not hasattr(service, balance_func_name):\n                                                   ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: attribute name must be string, not 'MagicMock'"}
{"asctime": "2025-04-11 13:12:03,669", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,670", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,677", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,707", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,734", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 780, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Fetching key from Vault...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,734", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 791, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault returned invalid data (not a non-empty string) for key.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,734", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 850, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault ERROR fetching named BTC key ('market_btc_multisig_key'): Invalid data received from Vault for key 'market_btc_multisig_key'.", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py\", line 792, in _get_named_btc_private_key_from_vault\n    raise VaultError(f\"Invalid data received from Vault for key '{key_name_in_vault}'.\") # <-- RAISES VaultError\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nstore.services.bitcoin_service.VaultError: Invalid data received from Vault for key 'market_btc_multisig_key'."}
{"asctime": "2025-04-11 13:12:03,745", "levelname": "WARNING", "name": "django.security", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1133, "message": "[estimate_fee_rate(target:6)] Fee Volatility Warning: Node estimate (0.00012345 BTC/kB) differs significantly (>5x) from fallback setting (0.00001000 BTC/kB).", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,809", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,811", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,853", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,855", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,858", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,860", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,862", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,864", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,866", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,866", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-11 13:12:03,869", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,874", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-11 13:12:03,880", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-11 13:12:03,887", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,887", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,890", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-11 13:12:03,893", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-11 13:12:03,898", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,899", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,901", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,904", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,907", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-11 13:12:03,912", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-11 13:12:03,915", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-11 13:12:03,923", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,927", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 49b62d99af406f53)...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,927", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 49b62d99af406f53): 4LdpnMo9wPESgQ4...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,929", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,929", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,929", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,932", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 49b62d99af406f53)...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,932", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 49b62d99af406f53): Timeout", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,935", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 49b62d99af406f53)...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,935", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 49b62d99af406f53): Monero RPC Error (Code: -5): RPC Failed", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,937", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 49b62d99af406f53)...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,937", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 49b62d99af406f53). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,939", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,939", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,941", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 49b62d99af406f53)...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,941", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 49b62d99af406f53) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,943", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,943", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,943", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,949", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,949", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,952", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,952", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,954", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,955", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,956", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,957", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '41d78f76dcdb57e49e60d41fba3989104ea3d270e4b98a7437198ad756280d420b2fce0cef5a129a020ce7def95053a0484f9299cccba1491d4061726128268c162a109785a60e44d31bc378fd85078ed2cb274dd61c6a799d5897eecc9c98193f4a74955e22a4929a7ccb60b3742835bf5a04b5105b94e121cc97dbfdba312f'}", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,960", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,960", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,961", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 3748, "thread": 14296, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-11 13:12:03,962", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,962", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,965", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,965", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,966", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,966", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': 'eaf4f93bbda2335fb338632bc5a6b1d92f1d529b5588fbb5b7717ae706b06e834f80385d3faff6b5b5ebbcbe332e7e2962b5a1fea62bb1c03773ac735ee58581ed4c11ec5e6ced848c19210151cefe6c9d4a05a01703ce2b41439a26cf7de54ce112692daf12fbc884f07db689892b2eeee41f814abab8797ac7a694f932ec3b711de16e6d7fa12ebfc53f28c326c3d9333aa01ff2b238b1144907d8618074ff69a4303e12e1204ea9c22b9e04b17aac5a10e352850774dc3b117998d3301efa33d7034beef2cdaaa7c4c4ac54b24475ac3580ecf846610bbd1df7a0631c1e9cb091dc6d8f0878e8fa7208fe0b0b8642344ef42012c3ee27344419b9d557ab42'}", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,966", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 3748, "thread": 14296, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:12:03,966", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,966", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,969", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,969", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,969", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,969", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 3748, "thread": 14296, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:12:03,970", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,970", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,972", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,973", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,973", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,974", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 3748, "thread": 14296, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:12:03,974", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,974", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,977", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,978", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,978", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,991", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,991", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-11 13:12:03,995", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,996", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,996", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-11 13:12:03,998", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:03,999", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,001", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,002", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,002", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,002", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,004", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,004", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,005", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,007", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,008", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,008", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,008", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,010", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,010", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,012", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,012", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,012", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,013", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,015", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,016", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,016", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:12:04,019", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,019", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:12:04,025", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,025", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,028", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,028", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,028", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-11 13:12:04,031", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,031", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,033", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,033", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,034", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,034", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,036", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,037", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,037", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,037", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,040", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,041", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,041", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 5692f54d6ff5b5d3817e310c7c5cd83baba1291b7783c9457a7820b9d0beee8c", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,041", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,045", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,047", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,051", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,052", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,052", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 5692f54d6ff5b5d3817e310c7c5cd83baba1291b7783c9457a7820b9d0beee8c", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,055", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,055", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,058", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,058", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,060", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,060", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,060", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,064", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,064", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,064", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,067", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,067", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,067", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,069", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,069", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,069", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,072", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,072", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,072", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,074", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,075", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 5692f54d6ff5b5d3817e310c7c5cd83baba1291b7783c9457a7820b9d0beee8c, Fee: 0.000543210000 XMR (543210000 pico)", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,078", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,079", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,079", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,079", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,079", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,084", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 844b1a35...): Failed to get daemon height. Cannot calculate confirmations.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,095", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 844b1a35...): Skipping entry 0: TXID 5692f54d6ff5b5d3817e310c7c5cd83baba1291b7783c9457a7820b9d0beee8c already processed.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,098", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,102", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,105", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,111", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 844b1a35...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-11 13:12:04,117", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 844b1a35...): Found candidate! TXID: 5692f54d6ff5b5d3817e310c7c5cd83baba1291b7783c9457a7820b9d0beee8c, Amt: 1.234567890123 XMR, Confs: 11.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,118", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 844b1a35...): Confirmed payment found.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,121", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,121", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,121", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,121", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-11 13:12:04,123", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,125", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,125", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,126", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,126", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 5692f54d6ff5b5d3817e310c7c5cd83baba1291b7783c9457a7820b9d0beee8c, Fee: 0.000678900000 XMR (678900000 pico)", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,128", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,128", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,128", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,128", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,128", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,128", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,128", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,129", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,132", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,135", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,135", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,135", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,135", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:12:04,138", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,138", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:12:04,140", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,142", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,143", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,143", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:12:04,144", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:12:04,146", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,148", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,149", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,149", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,149", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 5692f54d6ff5b5d3817e310c7c5cd83baba1291b7783c9457a7820b9d0beee8c, Fee: 0.000777700000 XMR (777700000 pico)", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,149", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,151", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,152", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,152", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,152", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 5692f54d6ff5b5d3817e310c7c5cd83baba1291b7783c9457a7820b9d0beee8c, Fee: 0.000888800000 XMR (888800000 pico)", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,152", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,156", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,156", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,157", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,157", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,157", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,158", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,162", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,664", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,664", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:04,667", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,167", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,168", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,171", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-11 13:12:05,189", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,190", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2740681262144'>", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,200", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,214", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,215", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2740659863632'>", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,223", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,233", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,233", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,241", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,241", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,250", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,251", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,251", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,260", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,260", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,260", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,267", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,279", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,279", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,298", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,298", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-11 13:12:05,306", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,313", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,313", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-11 13:12:05,326", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,326", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,338", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,339", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,347", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,347", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:05,956", "levelname": "WARNING", "name": "django.security", "module": "common_escrow_utils", "pathname": "C:\\shadow_market\\backend\\store\\services\\common_escrow_utils.py", "lineno": 411, "message": "Order 4886e0ff-01a9-4ffe-b6b2-515481e6cd69 automatically cancelled due to payment timeout.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,320", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction bfbae05f-2990-4ea0-ba50-b341a8e48e26 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,321", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 6501af1c-8d70-4ab3-b2b3-83a884340ff2 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,369", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 95174f23-a132-4b1a-9be3-a522a487bd5a recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,370", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 346212fb-4678-4c3c-ace2-688bb6f01c8b recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,467", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 824c5ba9-b5cb-4e81-9ab6-10b3a11c324e recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,468", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 98d37988-3130-4944-8337-3d4d4310e4a2 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,556", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,589", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,590", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,590", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,591", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,592", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,592", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee credit successful.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,592", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,592", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,594", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,594", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,595", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,634", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,634", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,634", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,634", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,672", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,672", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,672", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,673", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,673", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,674", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee credit successful.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,674", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,674", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 3748, "thread": 14296, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-11 13:12:06,677", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,677", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:12:06,719", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 3748, "thread": 14296}
{"asctime": "2025-04-11 13:15:43,671", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,672", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 3393c195-2ed7-4799-9357-c2e96904aca4 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,679", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 0b4598b7-4a13-449b-9ced-bab42585bb91 recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,687", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction fddbeded-5f5b-4459-82b8-2cb64e4221b2 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,693", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 206, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,698", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,703", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,707", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,710", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,715", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,719", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,722", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,726", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,731", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,734", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,737", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,740", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,782", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 508, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,783", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 535, "message": "Ledger transaction 47de7e0d-4904-4045-983d-efd410773328 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,788", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 487, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,796", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 464, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,802", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 630, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,802", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 656, "message": "Ledger transaction 8ba0afe4-c5ea-4f8a-84b5-d52cc35ef823 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,806", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 620, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,807", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 630, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,807", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 656, "message": "Ledger transaction 476a6f51-f7d9-4799-a8ba-18f24e1d87a1 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,812", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 615, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:43,816", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 585, "message": "Unlock amount must be positive, got 0.0. User 1, Currency ETH. No action taken.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,050", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 595, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,054", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 7fda3c2a-49fd-46d3-b71e-0996787cbf14 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,059", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 5d8c8622-459f-48c6-bbb8-e3cdea72ef79 recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,063", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction ac5600fe-8d6b-435b-9a25-1147b0601080 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,226", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,227", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,227", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 150, "message": "Invalid precision '<MagicMock name='CURRENCY_CONFIG.get().get()' id='1794006767264'>' provided, defaulting to 8 decimal places.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,228", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing XMR: attribute name must be string, not 'MagicMock'", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 253, in reconcile_ledger_balances\n    if not service or not balance_func_name or not hasattr(service, balance_func_name):\n                                                   ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: attribute name must be string, not 'MagicMock'"}
{"asctime": "2025-04-11 13:15:44,230", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 150, "message": "Invalid precision '<MagicMock name='CURRENCY_CONFIG.get().get()' id='1794006767264'>' provided, defaulting to 8 decimal places.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,230", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: attribute name must be string, not 'MagicMock'", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 253, in reconcile_ledger_balances\n    if not service or not balance_func_name or not hasattr(service, balance_func_name):\n                                                   ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: attribute name must be string, not 'MagicMock'"}
{"asctime": "2025-04-11 13:15:44,231", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 150, "message": "Invalid precision '<MagicMock name='CURRENCY_CONFIG.get().get()' id='1794006767264'>' provided, defaulting to 8 decimal places.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,231", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing ETH: attribute name must be string, not 'MagicMock'", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 253, in reconcile_ledger_balances\n    if not service or not balance_func_name or not hasattr(service, balance_func_name):\n                                                   ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: attribute name must be string, not 'MagicMock'"}
{"asctime": "2025-04-11 13:15:44,232", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,233", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,240", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,278", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,298", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 780, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Fetching key from Vault...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,298", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 791, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault returned invalid data (not a non-empty string) for key.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,298", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 850, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault ERROR fetching named BTC key ('market_btc_multisig_key'): Invalid data received from Vault for key 'market_btc_multisig_key'.", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py\", line 792, in _get_named_btc_private_key_from_vault\n    raise VaultError(f\"Invalid data received from Vault for key '{key_name_in_vault}'.\") # <-- RAISES VaultError\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nstore.services.bitcoin_service.VaultError: Invalid data received from Vault for key 'market_btc_multisig_key'."}
{"asctime": "2025-04-11 13:15:44,308", "levelname": "WARNING", "name": "django.security", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1133, "message": "[estimate_fee_rate(target:6)] Fee Volatility Warning: Node estimate (0.00012345 BTC/kB) differs significantly (>5x) from fallback setting (0.00001000 BTC/kB).", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,371", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,373", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,413", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,415", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,416", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,418", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,420", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,422", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,424", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,424", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-11 13:15:44,427", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,434", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-11 13:15:44,439", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-11 13:15:44,447", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,448", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,449", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-11 13:15:44,453", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-11 13:15:44,456", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,456", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,458", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,460", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,462", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-11 13:15:44,465", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-11 13:15:44,474", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-11 13:15:44,481", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,484", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 84f3f0d3f2dd119b)...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,484", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 84f3f0d3f2dd119b): 4LdpnMo9wPESgQ4...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,485", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,485", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,485", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,487", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 84f3f0d3f2dd119b)...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,487", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 84f3f0d3f2dd119b): Timeout", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,489", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 84f3f0d3f2dd119b)...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,489", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 84f3f0d3f2dd119b): Monero RPC Error (Code: -5): RPC Failed", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,492", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 84f3f0d3f2dd119b)...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,492", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 84f3f0d3f2dd119b). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,494", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,494", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,497", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 84f3f0d3f2dd119b)...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,497", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 84f3f0d3f2dd119b) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,500", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,501", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,501", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,505", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,505", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,507", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,507", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,510", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,510", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,513", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,513", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': 'b9dd918267cb4ad6ce7e7e1abf4e398aead664f31d3b655f93903db82224a6cbfb195129dfe399e9bddd75c251bc6c89e8a3aea0c670c210351a05ceb544365352ab7d84e3cefdb50c12a1950846dd2ec8970e88e6c0ad73f32e4e5c6f90ef30f4d3c9ec99478d04fd423124bc137b911745cb222bf7f41bf0753385733e0a59'}", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,517", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,517", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,517", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 10556, "thread": 4840, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-11 13:15:44,517", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,517", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,521", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,521", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,522", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,522", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': 'd3541a415bb13469396dcc81dbed2872904e3997dba84e40807e9245e9eedf28f6a6160fd9144923a5272d4433074f3d3c1efc5ff15fc3bda94710bcb8806df2ba99456b17118b403244542ce9043eff3730fa64331ab6831c375406e45b1c719dacf4ce11cd27c0540db0a635b93d707b18f0d60b04645bc0c60487e0d5369add65299e3086434dc5f325054807dd325ed5e620aea73dbfb4ef3996c45e50d2ecd4c98d590abf93c444c92607419e6612ebec908b93a64e0c8544df4a7a27de52a5ece571cc36de2c0033b63eefd23f2e7d6d7581bb627392ada22caaca069c6ba759546702ed407cb3ac607f3a402a230a2dd2cb67bba4cf93bc056f4a2746'}", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,522", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 10556, "thread": 4840, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:15:44,522", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,522", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,526", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,526", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,527", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,527", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 10556, "thread": 4840, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:15:44,527", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,527", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,530", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,530", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,530", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,531", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 10556, "thread": 4840, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:15:44,531", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,531", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,533", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,534", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,534", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,543", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,543", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-11 13:15:44,547", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,547", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,547", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-11 13:15:44,550", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,550", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,554", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,555", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,555", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,555", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,558", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,558", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,559", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,562", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,562", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,563", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,563", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,565", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,565", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,567", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,567", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,568", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,568", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,569", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,570", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,570", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:15:44,572", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,572", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:15:44,576", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,577", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,580", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,580", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,581", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-11 13:15:44,583", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,583", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,586", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,586", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,586", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,587", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,588", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,589", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,589", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,589", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,590", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,591", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,591", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: cfd2185d8447f7947fe7163b0e6be0e5f7ba28bfe6dd3c6c4f71fad4f364b7ba", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,591", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,596", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,599", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,602", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,602", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,603", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: cfd2185d8447f7947fe7163b0e6be0e5f7ba28bfe6dd3c6c4f71fad4f364b7ba", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,605", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,605", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,609", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,609", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,612", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,612", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,612", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,616", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,616", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,616", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,618", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,619", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,619", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,621", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,622", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,622", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,624", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,624", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,624", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,627", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,627", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: cfd2185d8447f7947fe7163b0e6be0e5f7ba28bfe6dd3c6c4f71fad4f364b7ba, Fee: 0.000543210000 XMR (543210000 pico)", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,629", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,629", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,630", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,630", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,630", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,633", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 6dfa3500...): Failed to get daemon height. Cannot calculate confirmations.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,644", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 6dfa3500...): Skipping entry 0: TXID cfd2185d8447f7947fe7163b0e6be0e5f7ba28bfe6dd3c6c4f71fad4f364b7ba already processed.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,646", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,650", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,653", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,660", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 6dfa3500...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-11 13:15:44,667", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 6dfa3500...): Found candidate! TXID: cfd2185d8447f7947fe7163b0e6be0e5f7ba28bfe6dd3c6c4f71fad4f364b7ba, Amt: 1.234567890123 XMR, Confs: 11.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,667", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 6dfa3500...): Confirmed payment found.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,670", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,670", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,670", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,670", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-11 13:15:44,672", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,674", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,674", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,674", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,675", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: cfd2185d8447f7947fe7163b0e6be0e5f7ba28bfe6dd3c6c4f71fad4f364b7ba, Fee: 0.000678900000 XMR (678900000 pico)", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,677", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,677", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,677", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,677", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,677", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,677", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,677", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,677", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,681", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,686", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,686", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,686", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,686", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:15:44,689", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,690", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:15:44,692", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,694", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,695", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,695", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:15:44,697", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:15:44,700", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,702", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,703", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,703", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,703", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: cfd2185d8447f7947fe7163b0e6be0e5f7ba28bfe6dd3c6c4f71fad4f364b7ba, Fee: 0.000777700000 XMR (777700000 pico)", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,703", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,707", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,707", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,708", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,708", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: cfd2185d8447f7947fe7163b0e6be0e5f7ba28bfe6dd3c6c4f71fad4f364b7ba, Fee: 0.000888800000 XMR (888800000 pico)", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,708", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,711", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,711", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,711", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,711", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,711", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,712", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:44,715", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,216", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,216", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,219", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,720", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,720", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,724", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-11 13:15:45,747", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,748", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='1794007115360'>", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,756", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,766", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,767", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='1794032393856'>", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,775", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,784", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,785", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,793", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,793", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,803", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,803", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,804", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,812", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,812", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,812", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,818", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,825", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,825", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,841", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,842", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-11 13:15:45,850", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,857", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,858", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-11 13:15:45,869", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,869", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,878", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,878", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,885", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:45,885", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:46,468", "levelname": "WARNING", "name": "django.security", "module": "common_escrow_utils", "pathname": "C:\\shadow_market\\backend\\store\\services\\common_escrow_utils.py", "lineno": 411, "message": "Order 9fa99628-6291-467b-b439-6dde15733759 automatically cancelled due to payment timeout.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:46,833", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction f0fb8663-ef64-4537-b8b5-4f342902fb30 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:46,834", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction bdbea6fe-787b-4a12-9ca5-0bed4cd27d24 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:46,887", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 4eec88bd-a269-463c-ac5b-0913232d5b58 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:46,888", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction a9ae58fd-9654-4996-b119-434fcde7d7d5 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:46,994", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction dffc6dbb-195a-48ec-8695-6f5100e253db recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:46,995", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction dc7529d7-43ab-4a45-9405-3ed45518aaaf recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,087", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,126", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,126", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,126", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,127", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,128", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,128", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee credit successful.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,128", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,128", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,129", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,129", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,129", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,164", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,164", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,164", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,164", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,198", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,198", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,198", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,199", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,199", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,200", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee credit successful.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,200", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,200", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 10556, "thread": 4840, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-11 13:15:47,203", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,203", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:15:47,242", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 10556, "thread": 4840}
{"asctime": "2025-04-11 13:18:56,005", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,005", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 20dbdea3-6f22-4619-9a49-2e09025107a3 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,011", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction c1d33d33-63fb-45bc-81e3-40f9e3b43010 recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,015", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 497ff363-5b99-4024-ad00-c6d724e24d01 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,020", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 206, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,026", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,029", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,033", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,037", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,041", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,044", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,047", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,051", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,056", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,060", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,063", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,066", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,112", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 508, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,112", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 535, "message": "Ledger transaction 306cd42b-d1c1-4735-9cc2-4eae902a67aa recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,117", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 487, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,126", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 464, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,131", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 630, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,132", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 656, "message": "Ledger transaction 821966b4-da1f-4b83-99fb-490c4d499c47 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,136", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 620, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,137", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 630, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,137", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 656, "message": "Ledger transaction 56b707bf-023e-4c3d-b9f4-0de087fbd3a4 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,144", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 615, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,147", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 585, "message": "Unlock amount must be positive, got 0.0. User 1, Currency ETH. No action taken.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,347", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 595, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,353", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction befe211e-51fd-4206-9129-1a65df4424d9 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,360", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 9662dae8-a17e-46fe-b43d-5e1fd22a3e20 recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,365", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 28da4cba-dd3d-4c84-981c-11c6f3cc233a recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,369", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,369", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,370", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,370", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,370", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,370", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,370", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,371", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,414", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,415", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,415", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,415", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,416", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,454", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,456", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,457", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,457", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,457", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,458", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,495", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,495", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,496", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 270, "message": "[ReconcileLedger:None] Invalid balance format received from node for BTC: Type=<class 'unittest.mock.MagicMock'>, Value='<MagicMock name='bitcoin_service.get_wallet_balance()' id='2051490062288'>...'. Error: [<class 'decimal.ConversionSyntax'>]", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,496", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Invalid balance format from node: [<class 'decimal.ConversionSyntax'>]", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 267, in reconcile_ledger_balances\n    node_balance = Decimal(str(node_balance_raw))\ndecimal.InvalidOperation: [<class 'decimal.ConversionSyntax'>]\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 271, in reconcile_ledger_balances\n    raise ValueError(f\"Invalid balance format from node: {conv_err}\") from conv_err\nValueError: Invalid balance format from node: [<class 'decimal.ConversionSyntax'>]"}
{"asctime": "2025-04-11 13:18:56,499", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,499", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,509", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,510", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,510", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 239, "message": "[ReconcileLedger:None] Skipping XMR: No configuration found in CURRENCY_CONFIG.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,511", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 239, "message": "[ReconcileLedger:None] Skipping BTC: No configuration found in CURRENCY_CONFIG.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,511", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 239, "message": "[ReconcileLedger:None] Skipping ETH: No configuration found in CURRENCY_CONFIG.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,511", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,512", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,521", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,560", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,588", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 780, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Fetching key from Vault...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,588", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 791, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault returned invalid data (not a non-empty string) for key.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,588", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 850, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault ERROR fetching named BTC key ('market_btc_multisig_key'): Invalid data received from Vault for key 'market_btc_multisig_key'.", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py\", line 792, in _get_named_btc_private_key_from_vault\n    raise VaultError(f\"Invalid data received from Vault for key '{key_name_in_vault}'.\") # <-- RAISES VaultError\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nstore.services.bitcoin_service.VaultError: Invalid data received from Vault for key 'market_btc_multisig_key'."}
{"asctime": "2025-04-11 13:18:56,597", "levelname": "WARNING", "name": "django.security", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1133, "message": "[estimate_fee_rate(target:6)] Fee Volatility Warning: Node estimate (0.00012345 BTC/kB) differs significantly (>5x) from fallback setting (0.00001000 BTC/kB).", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,661", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,665", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,706", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,709", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,711", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,714", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,716", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,717", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,719", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,720", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-11 13:18:56,722", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,727", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-11 13:18:56,731", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-11 13:18:56,737", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,737", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,740", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-11 13:18:56,744", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-11 13:18:56,748", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,748", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,751", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,753", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,755", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-11 13:18:56,759", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-11 13:18:56,765", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-11 13:18:56,770", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,772", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: e2f441367b71f374)...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,772", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: e2f441367b71f374): 4LdpnMo9wPESgQ4...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,774", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,774", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,774", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,776", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: e2f441367b71f374)...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,777", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: e2f441367b71f374): Timeout", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,779", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: e2f441367b71f374)...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,779", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: e2f441367b71f374): Monero RPC Error (Code: -5): RPC Failed", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,781", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: e2f441367b71f374)...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,781", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: e2f441367b71f374). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,784", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,784", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,785", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: e2f441367b71f374)...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,786", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: e2f441367b71f374) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,788", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,788", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,789", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,794", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,794", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,797", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,797", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,799", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,799", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,801", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,801", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '6938670a339e789b7abf8e20801cda0baf3cae5f255c04c88cf0062d3c5e1b1edec593be4336af09530d9dcf954aa72668456c28a8ea18bd2177812cfad1253bca3412f725bac75c32b8e9f37b114aa375567b2686bd52b0261ed381744bd301e4367d62f53ceb56b2679e7a553e2c15f9c0fc918c55828a8a22de5c3356fffd'}", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,805", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,805", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,805", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 19708, "thread": 20028, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-11 13:18:56,805", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,805", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,808", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,809", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,809", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,809", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '99cf8d3830c0165b80c2b26a99f8754bb825992b3ed6f12679783b6c5b574fb5145bec7f88437831305a663d523812143206df46fc3af08df9bf737ea684746b949e6523fc30611d87b55538c91b73d8883b0e9ce03b973ae8fa2276567492c65d6b21443d5af9ec76482b8692941c8e1be5c72ef874d81c16d30481cf522e2113a785604332d4eff76a1d7c7ae97341e773bcfc022440b99c59321ce42bba06adb4c5225777fbc79c478e1ed5db87403d818b303b98ec159b28766e9b4340c413ac515ae6b81515125afa23cdd2396bca85255ef04863865ff1bafe968c24b7f961aeeebe25b0204973c7ce09b99658ddcf39c5b3eef713c33066e96fef4dab'}", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,809", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 19708, "thread": 20028, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:18:56,809", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,810", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,813", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,813", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,813", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,813", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 19708, "thread": 20028, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:18:56,813", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,813", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,815", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,816", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,816", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,816", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 19708, "thread": 20028, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:18:56,816", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,816", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,819", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,819", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,819", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,831", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,831", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-11 13:18:56,835", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,835", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,835", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-11 13:18:56,839", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,840", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,842", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,842", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,843", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,843", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,846", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,846", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,847", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,849", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,849", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,849", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,849", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,851", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,852", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,854", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,854", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,854", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,855", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,857", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,858", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,858", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:18:56,861", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,861", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:18:56,866", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,866", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,868", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,869", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,869", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-11 13:18:56,873", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,873", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,875", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,875", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,876", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,876", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,877", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,878", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,878", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,878", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,881", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,881", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,881", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 88537389c6c75ee623573c9e62154305cd03b44d7c93c1f30aedb4051ff2edcf", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,881", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,885", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,888", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,890", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,891", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,891", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 88537389c6c75ee623573c9e62154305cd03b44d7c93c1f30aedb4051ff2edcf", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,894", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,894", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,897", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,898", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,901", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,901", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,901", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,904", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,904", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,905", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,907", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,908", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,908", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,911", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,912", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,912", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,915", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,915", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,915", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,918", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,918", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 88537389c6c75ee623573c9e62154305cd03b44d7c93c1f30aedb4051ff2edcf, Fee: 0.000543210000 XMR (543210000 pico)", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,920", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,921", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,921", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,921", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,921", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,925", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 409e3025...): Failed to get daemon height. Cannot calculate confirmations.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,937", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 409e3025...): Skipping entry 0: TXID 88537389c6c75ee623573c9e62154305cd03b44d7c93c1f30aedb4051ff2edcf already processed.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,942", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,945", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,947", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,953", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 409e3025...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-11 13:18:56,958", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 409e3025...): Found candidate! TXID: 88537389c6c75ee623573c9e62154305cd03b44d7c93c1f30aedb4051ff2edcf, Amt: 1.234567890123 XMR, Confs: 11.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,958", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 409e3025...): Confirmed payment found.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,961", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,961", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,961", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,962", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-11 13:18:56,963", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,966", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,966", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,967", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,967", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 88537389c6c75ee623573c9e62154305cd03b44d7c93c1f30aedb4051ff2edcf, Fee: 0.000678900000 XMR (678900000 pico)", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,971", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,971", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,971", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,971", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,971", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,971", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,971", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,971", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,975", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,977", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,978", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,978", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,978", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:18:56,981", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,981", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:18:56,985", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,988", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,988", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,988", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:18:56,990", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:18:56,992", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,994", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,995", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,995", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,995", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 88537389c6c75ee623573c9e62154305cd03b44d7c93c1f30aedb4051ff2edcf, Fee: 0.000777700000 XMR (777700000 pico)", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,995", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,999", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,999", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:56,999", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:57,000", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 88537389c6c75ee623573c9e62154305cd03b44d7c93c1f30aedb4051ff2edcf, Fee: 0.000888800000 XMR (888800000 pico)", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:57,000", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:57,003", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:57,003", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:57,004", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:57,004", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:57,004", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:57,004", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:57,006", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:57,507", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:57,508", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:57,510", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,011", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,011", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,015", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-11 13:18:58,036", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,037", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2051489714192'>", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,046", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,056", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,057", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2051490062960'>", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,063", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,072", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,072", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,080", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,081", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,090", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,090", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,090", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,100", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,100", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,101", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,107", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,120", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,120", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,139", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,139", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-11 13:18:58,148", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,156", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,156", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-11 13:18:58,166", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,166", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,174", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,174", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,183", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,183", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:58,799", "levelname": "WARNING", "name": "django.security", "module": "common_escrow_utils", "pathname": "C:\\shadow_market\\backend\\store\\services\\common_escrow_utils.py", "lineno": 411, "message": "Order ca57b0a1-cb65-4f93-a543-b33aa3d166d3 automatically cancelled due to payment timeout.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,175", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 47d41c21-0bbb-465c-9f13-aeda2e05934d recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,176", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 1423d576-8f84-48ec-90f3-ccf3fee27873 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,231", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 6c99a63e-4702-4b32-8240-ce7547cda392 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,232", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction c594aefd-45bf-40e3-a0c8-68cb7b32ba61 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,331", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 08c34e20-ba91-47dd-84db-eb1fab9a9421 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,332", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction a79f054b-b302-4219-b08a-e6f14a1483a0 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,426", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,467", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,467", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,467", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,468", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,469", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,470", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee credit successful.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,470", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,470", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,471", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,471", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,471", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,508", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,508", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,508", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,509", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,545", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,545", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,545", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,546", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,547", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,547", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee credit successful.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,547", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,547", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 19708, "thread": 20028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-11 13:18:59,550", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,550", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:18:59,592", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 19708, "thread": 20028}
{"asctime": "2025-04-11 13:21:15,324", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,325", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 2e90df5e-7d4b-4329-be85-90355201c9a7 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,331", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction df8f9f0d-5bf1-4fbc-b5c8-f7b86aa8f24e recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,338", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction d23850f6-70a0-4afa-84ac-862783cc83be recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,345", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 206, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,348", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,354", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,359", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,362", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,367", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,372", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,376", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,380", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,383", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,389", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,395", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,400", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,442", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 508, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,442", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 535, "message": "Ledger transaction fd6a4338-aabc-447c-aa05-9fbf788e78aa recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,447", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 487, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,456", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 464, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,462", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 630, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,462", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 656, "message": "Ledger transaction b9aace42-5839-4362-aa38-e50a44ac6e00 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,467", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 620, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,467", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 630, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,467", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 656, "message": "Ledger transaction 59215ad2-8351-4cb1-9c2e-2700ad09d4d5 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,474", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 615, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,477", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 585, "message": "Unlock amount must be positive, got 0.0. User 1, Currency ETH. No action taken.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,704", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 595, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,711", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 38332781-b1d2-4448-b6a1-471e16bc9918 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,719", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 6786c38b-8627-4569-995a-e50ad708bbad recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,725", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction aa8cea70-4219-4a81-9927-99684973ff7f recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,732", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,733", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,733", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,733", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,734", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,734", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,734", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,734", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,796", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,796", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,797", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,797", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,798", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,837", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,839", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,839", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,840", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,840", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,840", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,879", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,879", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,880", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,880", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-11 13:21:15,897", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,898", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,907", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,908", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,908", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,908", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,911", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,948", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,975", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 780, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Fetching key from Vault...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,975", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 791, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault returned invalid data (not a non-empty string) for key.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:15,975", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 850, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault ERROR fetching named BTC key ('market_btc_multisig_key'): Invalid data received from Vault for key 'market_btc_multisig_key'.", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py\", line 792, in _get_named_btc_private_key_from_vault\n    raise VaultError(f\"Invalid data received from Vault for key '{key_name_in_vault}'.\") # <-- RAISES VaultError\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nstore.services.bitcoin_service.VaultError: Invalid data received from Vault for key 'market_btc_multisig_key'."}
{"asctime": "2025-04-11 13:21:16,011", "levelname": "WARNING", "name": "django.security", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1133, "message": "[estimate_fee_rate(target:6)] Fee Volatility Warning: Node estimate (0.00012345 BTC/kB) differs significantly (>5x) from fallback setting (0.00001000 BTC/kB).", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,084", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,089", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,139", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,142", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,144", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,148", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,150", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,152", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,156", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,156", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-11 13:21:16,194", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,200", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-11 13:21:16,204", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-11 13:21:16,209", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,210", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,212", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-11 13:21:16,218", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-11 13:21:16,221", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,221", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,224", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,226", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,229", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-11 13:21:16,234", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-11 13:21:16,238", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-11 13:21:16,245", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,248", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: aeb3083d89d34271)...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,248", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: aeb3083d89d34271): 4LdpnMo9wPESgQ4...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,250", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,250", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,250", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,253", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: aeb3083d89d34271)...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,253", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: aeb3083d89d34271): Timeout", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,256", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: aeb3083d89d34271)...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,256", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: aeb3083d89d34271): Monero RPC Error (Code: -5): RPC Failed", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,259", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: aeb3083d89d34271)...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,259", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: aeb3083d89d34271). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,261", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,261", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,263", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: aeb3083d89d34271)...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,263", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: aeb3083d89d34271) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,266", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,266", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,267", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,273", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,274", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,276", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,276", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,278", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,278", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,281", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,281", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': 'fde1adcc2ccd6f2b09e5b9dc6cf42d1405b7769682b012bc2ef6170c16b50d0c2cb317a1b5fb0bae82cd178cd9a4965f552d9c040e44afcd3728eb8cdebb94eb01a880cc2b6242052ddb374962f324c523e8dcca33286d287d960477fea967c97708dd59f32882df186137f69b7a7cb9b524048b31bd91cea574b0f2997a331d'}", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,285", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,285", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,286", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 24460, "thread": 2160, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-11 13:21:16,286", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,286", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,290", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,290", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,290", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,290", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': 'e8f828bc878cdca08b4087e0ac9efe0115ed4f6bd94af79a250a5c72c2b000b9cb2c5623f431e340d11f00ce316ac0df23ff3dfd784eda9ac40623f8c1012fff1bf4a865cdb71a0ce9e24fe9726e5f7c38557dfa30e459930aa347a95fb84f1f6e82dd1aa3a354ad9531e4f4b0f4afbd5e1d063ff1a60f2e17d50101d0d5166afe4f233ee318f21f81b8afdd4c1a24b5ed385279755aefe4134ec84b55e360fc1285520ff658850732f558275025cd23febc839bbb2a130523aeee7d13f6db0797786ccd4e12875116b29391f401e422308f0388483bddc16771892d0bed56e536d17c54ca106825ce788063032fc844fce77fffcbc192fb793cc471eda8dc6e'}", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,291", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 24460, "thread": 2160, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:21:16,291", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,291", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,294", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,294", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,294", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,294", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 24460, "thread": 2160, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:21:16,295", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,295", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,297", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,297", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,298", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,298", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 24460, "thread": 2160, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:21:16,298", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,298", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,301", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,302", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,302", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,314", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,314", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-11 13:21:16,320", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,320", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,321", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-11 13:21:16,323", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,323", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,326", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,327", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,327", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,327", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,330", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,330", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,331", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,334", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,335", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,335", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,335", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,338", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,338", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,340", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,340", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,340", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,341", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,343", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,344", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,344", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:21:16,346", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,346", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:21:16,351", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,352", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,355", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,355", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,355", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-11 13:21:16,358", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,358", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,361", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,361", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,361", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,362", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,365", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,365", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,366", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,366", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,369", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,370", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,370", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 7bd7810a82df03657542362312c0f2c9594c7e9ff3039e1bde00d50e012a9383", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,370", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,374", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,377", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,380", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,380", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,380", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 7bd7810a82df03657542362312c0f2c9594c7e9ff3039e1bde00d50e012a9383", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,384", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,384", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,387", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,387", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,389", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,390", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,390", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,394", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,395", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,395", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,398", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,398", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,398", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,401", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,401", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,401", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,404", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,405", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,405", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,408", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,409", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 7bd7810a82df03657542362312c0f2c9594c7e9ff3039e1bde00d50e012a9383, Fee: 0.000543210000 XMR (543210000 pico)", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,412", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,413", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,413", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,413", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,413", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,416", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 6b8cadc8...): Failed to get daemon height. Cannot calculate confirmations.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,428", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 6b8cadc8...): Skipping entry 0: TXID 7bd7810a82df03657542362312c0f2c9594c7e9ff3039e1bde00d50e012a9383 already processed.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,432", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,436", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,441", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,448", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 6b8cadc8...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-11 13:21:16,455", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 6b8cadc8...): Found candidate! TXID: 7bd7810a82df03657542362312c0f2c9594c7e9ff3039e1bde00d50e012a9383, Amt: 1.234567890123 XMR, Confs: 11.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,455", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 6b8cadc8...): Confirmed payment found.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,458", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,459", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,459", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,459", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-11 13:21:16,461", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,464", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,464", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,464", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,465", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 7bd7810a82df03657542362312c0f2c9594c7e9ff3039e1bde00d50e012a9383, Fee: 0.000678900000 XMR (678900000 pico)", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,469", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,469", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,469", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,469", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,469", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,469", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,469", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,469", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,472", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,476", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,476", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,476", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,477", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:21:16,479", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,480", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:21:16,483", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,487", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,487", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,488", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:21:16,490", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:21:16,506", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,510", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,510", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,511", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,511", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 7bd7810a82df03657542362312c0f2c9594c7e9ff3039e1bde00d50e012a9383, Fee: 0.000777700000 XMR (777700000 pico)", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,511", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,515", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,515", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,516", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,516", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 7bd7810a82df03657542362312c0f2c9594c7e9ff3039e1bde00d50e012a9383, Fee: 0.000888800000 XMR (888800000 pico)", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,516", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,519", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,519", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,519", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,519", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,519", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,519", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:16,523", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,024", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,024", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,026", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,527", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,527", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,531", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-11 13:21:17,550", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,550", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2372202776960'>", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,559", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,567", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,568", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2372202775616'>", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,577", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,585", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,586", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,594", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,594", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,605", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,605", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,605", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,614", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,615", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,615", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,622", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,632", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,632", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,649", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,649", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-11 13:21:17,673", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,680", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,680", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-11 13:21:17,690", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,690", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,697", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,697", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,705", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:17,705", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:18,366", "levelname": "WARNING", "name": "django.security", "module": "common_escrow_utils", "pathname": "C:\\shadow_market\\backend\\store\\services\\common_escrow_utils.py", "lineno": 411, "message": "Order 4d746ede-6995-4ce4-965e-2111007d8f1c automatically cancelled due to payment timeout.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:18,810", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction e8fe9e0f-7da8-4356-8097-41a9ed7030d1 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:18,811", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 5775e4ab-2638-4e94-8225-271de5b0aa57 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:18,869", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 7ce05d00-8e90-465a-a374-05ce726635d2 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:18,870", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction c537b5d8-518a-4cd9-8977-e3ae8b012d3d recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:18,990", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction dab6f1b2-b908-4178-bf05-5c2e434a68b6 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:18,991", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 6d7ea9d9-3cf7-4e94-bcd7-1e269bafc974 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,094", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,138", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,139", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,139", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,140", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,141", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,142", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee credit successful.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,142", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,142", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,143", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,143", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,143", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,183", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,183", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,183", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,183", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,224", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,224", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,224", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,225", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,226", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,226", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee credit successful.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,226", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,226", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 24460, "thread": 2160, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-11 13:21:19,242", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,242", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:21:19,296", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 24460, "thread": 2160}
{"asctime": "2025-04-11 13:23:27,585", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,585", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction ca4c7757-e63a-4135-99ea-e18fa0de2279 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,591", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 8cc0845f-dc40-4fc5-906a-5db5e5094889 recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,595", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 9c09f705-0085-45f6-a9a0-f641467b427d recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,602", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 206, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,606", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,609", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,614", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,618", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,621", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,626", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,631", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,634", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,637", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,642", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,647", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,650", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,695", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 508, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,695", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 535, "message": "Ledger transaction 55b716d6-67d9-42a0-826a-c41b2c768bff recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,701", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 487, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,710", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 464, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,717", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 630, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,717", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 656, "message": "Ledger transaction 472bffe7-d95a-48e9-97ba-54bf35e5b9f7 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,723", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 620, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,723", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 630, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,723", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 656, "message": "Ledger transaction 620fc8ec-810e-4a04-927d-51cb7bd8dab0 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,728", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 615, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,732", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 585, "message": "Unlock amount must be positive, got 0.0. User 1, Currency ETH. No action taken.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,936", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 595, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,941", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 7f791c3f-b25e-4221-9e99-bb820c533429 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,948", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 6488c87c-2c1d-4a2e-a0af-37d7cf7c0b2b recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,954", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 787358c9-3e5a-4e5c-bfed-f15e08f77aa4 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,961", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,962", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,964", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,964", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,965", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,965", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,965", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,965", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,968", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,968", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,969", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,969", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,970", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,973", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,973", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,973", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,974", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,974", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,975", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,980", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,980", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,981", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:27,982", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-11 13:23:28,008", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,009", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,072", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,072", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,072", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,072", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,075", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,105", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,128", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 780, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Fetching key from Vault...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,128", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 791, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault returned invalid data (not a non-empty string) for key.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,128", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 850, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault ERROR fetching named BTC key ('market_btc_multisig_key'): Invalid data received from Vault for key 'market_btc_multisig_key'.", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py\", line 792, in _get_named_btc_private_key_from_vault\n    raise VaultError(f\"Invalid data received from Vault for key '{key_name_in_vault}'.\") # <-- RAISES VaultError\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nstore.services.bitcoin_service.VaultError: Invalid data received from Vault for key 'market_btc_multisig_key'."}
{"asctime": "2025-04-11 13:23:28,137", "levelname": "WARNING", "name": "django.security", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1133, "message": "[estimate_fee_rate(target:6)] Fee Volatility Warning: Node estimate (0.00012345 BTC/kB) differs significantly (>5x) from fallback setting (0.00001000 BTC/kB).", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,198", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,201", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,246", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,248", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,250", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,252", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,253", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,256", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,259", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,259", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-11 13:23:28,262", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,267", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-11 13:23:28,271", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-11 13:23:28,279", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,279", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,281", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-11 13:23:28,288", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-11 13:23:28,293", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,294", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,297", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,300", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,302", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-11 13:23:28,308", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-11 13:23:28,313", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-11 13:23:28,319", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,321", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 459021180640caad)...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,322", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 459021180640caad): 4LdpnMo9wPESgQ4...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,323", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,324", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,324", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,327", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 459021180640caad)...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,327", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 459021180640caad): Timeout", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,329", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 459021180640caad)...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,329", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 459021180640caad): Monero RPC Error (Code: -5): RPC Failed", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,331", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 459021180640caad)...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,332", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 459021180640caad). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,334", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,334", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,336", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 459021180640caad)...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,336", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 459021180640caad) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,339", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,339", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,339", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,343", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,343", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,347", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,347", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,349", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,349", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,350", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,351", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '409c97635d566c9bff9e5da2c17bba523a9e9590b92455038170e87a9cf376750a84a3b68b781fabe6950ab743ad50858335f39680f8f4b4ac63acbd1ca9c6367e887b3f5922f7ceac20b44f7ecb7b40d82f5cd31a7d388427cc92747742b21780a7b59606a49a75a3c49033e84e512952cf9f727201b42c8464d1f131697725'}", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,354", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,354", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,354", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 22392, "thread": 6764, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-11 13:23:28,355", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,355", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,358", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,358", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,358", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,359", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '1591cc3c3a4b7cf87695c68b5a1bf454706efb3a838ab26e4b657067e04db548c9813eac7e6b416da9ef86f4fc56e58d4522e24cc91402fbe473849294bb74a4c48ed1c3ecb6187bfd5aa4154b51e2640335ad7cc08c8ca4b05a3c0c494eca6e99821e5bcc9af29b9caa100cdbba38e4fea9fddd972db6b8f009a781c5a443d3e17992dd6644165accde9694edd1b1a143d4d32d1121f3d85009cc4b75b3a6020f9690d9fc55191baff54af5a91a7a5e103a35079cc73ef1a8418ccb809af79dfd3f2d8c72681ad46a5bc29b2a8dae36ea2facd42325b7a9a9eafec884ea043642af134c545f12b3a1299426d099e6e59c98ed62e099951fb3d3e295991b917f'}", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,359", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 22392, "thread": 6764, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:23:28,359", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,360", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,362", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,362", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,362", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,362", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 22392, "thread": 6764, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:23:28,363", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,363", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,367", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,367", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,367", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,367", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 22392, "thread": 6764, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:23:28,368", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,368", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,370", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,370", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,371", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,382", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,383", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-11 13:23:28,387", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,388", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,388", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-11 13:23:28,391", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,391", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,395", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,396", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,396", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,396", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,398", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,399", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,399", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,402", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,402", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,402", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,402", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,405", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,405", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,407", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,407", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,408", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,408", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,410", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,411", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,411", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:23:28,413", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,413", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:23:28,418", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,419", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,421", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,421", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,422", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-11 13:23:28,424", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,424", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,427", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,427", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,427", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,427", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,431", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,431", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,431", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,431", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,433", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,434", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,434", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 3c12b97b3f1f7bc2191d603135436f533cce0f7ee2906cdf763694cd0772d921", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,434", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,438", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,440", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,444", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,444", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,444", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 3c12b97b3f1f7bc2191d603135436f533cce0f7ee2906cdf763694cd0772d921", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,447", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,447", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,451", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,451", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,453", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,453", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,453", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,457", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,457", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,457", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,460", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,460", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,460", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,464", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,464", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,464", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,466", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,467", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,467", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,469", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,470", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 3c12b97b3f1f7bc2191d603135436f533cce0f7ee2906cdf763694cd0772d921, Fee: 0.000543210000 XMR (543210000 pico)", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,473", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,473", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,474", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,474", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,474", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,478", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 2817e8c7...): Failed to get daemon height. Cannot calculate confirmations.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,489", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 2817e8c7...): Skipping entry 0: TXID 3c12b97b3f1f7bc2191d603135436f533cce0f7ee2906cdf763694cd0772d921 already processed.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,493", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,496", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,499", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,506", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 2817e8c7...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-11 13:23:28,510", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 2817e8c7...): Found candidate! TXID: 3c12b97b3f1f7bc2191d603135436f533cce0f7ee2906cdf763694cd0772d921, Amt: 1.234567890123 XMR, Confs: 11.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,510", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 2817e8c7...): Confirmed payment found.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,515", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,515", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,515", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,515", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-11 13:23:28,517", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,520", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,521", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,521", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,521", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 3c12b97b3f1f7bc2191d603135436f533cce0f7ee2906cdf763694cd0772d921, Fee: 0.000678900000 XMR (678900000 pico)", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,523", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,523", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,523", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,523", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,523", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,523", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,524", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,524", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,527", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,531", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,531", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,531", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,531", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:23:28,535", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,535", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:23:28,537", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,541", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,541", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,541", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:23:28,543", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:23:28,545", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,549", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,550", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,550", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,550", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 3c12b97b3f1f7bc2191d603135436f533cce0f7ee2906cdf763694cd0772d921, Fee: 0.000777700000 XMR (777700000 pico)", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,551", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,554", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,554", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,555", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,555", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 3c12b97b3f1f7bc2191d603135436f533cce0f7ee2906cdf763694cd0772d921, Fee: 0.000888800000 XMR (888800000 pico)", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,555", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,557", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,558", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,558", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,558", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,558", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,558", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:28,561", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,062", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,062", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,065", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,566", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,566", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,570", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-11 13:23:29,590", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,591", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2281464851024'>", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,600", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,608", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,609", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2281464854720'>", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,614", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,623", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,623", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,634", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,634", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,645", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,645", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,646", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,655", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,655", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,655", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,661", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,671", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,671", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,687", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,688", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-11 13:23:29,694", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,702", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,702", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-11 13:23:29,711", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,711", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,719", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,719", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,728", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:29,729", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,335", "levelname": "WARNING", "name": "django.security", "module": "common_escrow_utils", "pathname": "C:\\shadow_market\\backend\\store\\services\\common_escrow_utils.py", "lineno": 411, "message": "Order 4f57dce8-c2cd-41ec-ba4c-5b91dfa8b5a6 automatically cancelled due to payment timeout.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,709", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 7cd55345-1d68-4764-80e0-dfa4816d17f9 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,710", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 9937750d-5643-414a-882a-affba16c55a5 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,763", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction bc99ddf9-aab7-405a-b061-7702f1d21f1b recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,764", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction ba7e99d0-83de-43a4-978d-bc3fae8abc4d recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,864", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction f7a050ab-3393-433c-ad05-4043b7254430 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,865", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 1734de5b-1216-4552-98cd-31f92623ebbd recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,948", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,984", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,984", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,984", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,985", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,986", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,986", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee credit successful.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,986", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,986", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,987", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,987", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:30,988", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:31,028", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:31,029", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:31,029", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:31,029", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:31,070", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:31,070", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:31,071", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:31,071", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:31,072", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:31,072", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee credit successful.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:31,072", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:31,073", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 22392, "thread": 6764, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-11 13:23:31,077", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:31,077", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:23:31,119", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 22392, "thread": 6764}
{"asctime": "2025-04-11 13:24:50,750", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 178, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,750", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction fdee2223-9a8c-423a-8004-ff783389e368 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,756", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 338e408c-ff7e-4f05-be36-7a10aeb04769 recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,761", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction f9ccd832-29db-4150-9ca7-e40d7c37e264 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,765", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 206, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,771", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,776", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type:  for user 1.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,783", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: None for user 1.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,786", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 146, "message": "Invalid transaction type: 123 for user 1.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,789", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: USD for user 1.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,792", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency:  for user 1.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,795", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: None for user 1.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,799", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 150, "message": "Invalid currency: 456 for user 1.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,807", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,812", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,816", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,820", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 158, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,863", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 508, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,863", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 535, "message": "Ledger transaction cbb23bf3-65f2-414f-bfc8-34d10ab5fb98 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,868", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 487, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,876", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 464, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,881", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 630, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,881", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 656, "message": "Ledger transaction 6a52c779-c1fd-4389-9a30-07ebb0f16a78 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,886", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 620, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,886", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 630, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,886", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 656, "message": "Ledger transaction e60ed166-5361-411e-a64b-406d4b34a9eb recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,891", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 615, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:50,895", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 585, "message": "Unlock amount must be positive, got 0.0. User 1, Currency ETH. No action taken.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,091", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 595, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,098", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction f2ecb263-5d9a-4589-8f6c-f8a0e6ae8fca recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,104", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction a39d234a-74d4-40c8-a794-34e1cf8b297b recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,109", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction a3098982-1cfe-4dfb-be76-e80732826bab recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,116", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,116", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,118", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,118", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,118", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,118", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,118", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,119", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,123", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,123", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,123", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,124", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,124", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,127", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,127", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,128", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,129", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,130", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,130", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,135", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,136", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,136", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,137", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-11 13:24:51,142", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,142", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,146", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,146", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,146", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,146", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,151", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,189", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,212", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 780, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Fetching key from Vault...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,213", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 791, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault returned invalid data (not a non-empty string) for key.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,213", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 850, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault ERROR fetching named BTC key ('market_btc_multisig_key'): Invalid data received from Vault for key 'market_btc_multisig_key'.", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py\", line 792, in _get_named_btc_private_key_from_vault\n    raise VaultError(f\"Invalid data received from Vault for key '{key_name_in_vault}'.\") # <-- RAISES VaultError\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nstore.services.bitcoin_service.VaultError: Invalid data received from Vault for key 'market_btc_multisig_key'."}
{"asctime": "2025-04-11 13:24:51,222", "levelname": "WARNING", "name": "django.security", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1133, "message": "[estimate_fee_rate(target:6)] Fee Volatility Warning: Node estimate (0.00012345 BTC/kB) differs significantly (>5x) from fallback setting (0.00001000 BTC/kB).", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,287", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,290", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,335", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,337", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,339", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,341", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,344", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,346", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,348", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,348", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-11 13:24:51,351", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,357", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-11 13:24:51,361", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-11 13:24:51,368", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,368", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,371", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-11 13:24:51,375", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-11 13:24:51,379", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,380", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,383", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,385", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,388", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-11 13:24:51,394", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-11 13:24:51,403", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-11 13:24:51,412", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,416", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 0e5a6b43b78e8584)...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,416", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 0e5a6b43b78e8584): 4LdpnMo9wPESgQ4...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,420", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,421", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,421", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,424", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 0e5a6b43b78e8584)...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,425", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 0e5a6b43b78e8584): Timeout", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,428", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 0e5a6b43b78e8584)...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,428", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 0e5a6b43b78e8584): Monero RPC Error (Code: -5): RPC Failed", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,430", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 0e5a6b43b78e8584)...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,430", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 0e5a6b43b78e8584). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,432", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,433", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,436", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 0e5a6b43b78e8584)...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,436", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 0e5a6b43b78e8584) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,440", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,440", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,440", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,445", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,445", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,448", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,449", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,452", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,453", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,457", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,457", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '68a3e3be7e001934e92daf88cdc2c5f69abc828cd87cd1702ac1c4ec8fcacd74bf127a684a257ab1a8970236f20d4b29010b9c542f54684148d23960e4542c926911b47a81d6fc88e4dd6fc40ae5b4015d1b8abc96de3b97159d7dcbf716257befc2e142fba81dfad22164a3ab0029b84c127a81e90908855ddafc4d05671681'}", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,461", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,462", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,462", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 8400, "thread": 3228, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-11 13:24:51,462", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,463", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,466", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,467", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,467", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,467", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': 'a2a958235dcf4a915fce68b8cc714e975909e1f3e2f073256071fb4af62668d6644365e866534de00c78bf83f6d4aa196f338a06118fb8738fdfc2c98a86cd6cd0a0981a2d02ba31d95e1ce94f79726fdbe5e88f48726ab7101ffb0d8024fbe53950d29657cb1cf52468f71c05678e039c3cf6c86ad75f4a9c6a582a152491f172e85921bff0cf3e62b826b74214e8ccf2626376c668eebd022dbbfc4506caa2bd8fe8f719871e47e767bf85a792b5af15aeda43932d190f3bf1f86ca107ad861d1a107e2e712f3cd3182aba2e6291fa030965bfaa0790bfa2838af6f5bd00fad0206a2a4173ecfc24ff052e4fe9f1149cbc1600f6b4184b4c43994108593530'}", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,467", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 8400, "thread": 3228, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:24:51,468", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,468", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,472", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,472", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,472", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,473", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 8400, "thread": 3228, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:24:51,474", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,474", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,478", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,479", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,479", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,479", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 8400, "thread": 3228, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:24:51,480", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,480", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,483", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,484", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,484", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,501", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,501", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-11 13:24:51,506", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,507", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,507", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-11 13:24:51,511", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,511", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,514", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,514", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,514", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,514", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,517", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,517", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,518", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,520", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,521", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,521", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,521", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,523", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,524", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,526", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,526", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,527", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,527", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,529", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,529", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,529", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:24:51,532", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,532", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:24:51,537", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,538", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,540", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,540", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,540", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-11 13:24:51,543", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,543", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,545", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,546", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,546", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,546", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,548", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,549", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,549", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,549", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,552", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,553", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,553", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: a29d4620c33554d54ea249c36e23c8add5ec9752edf67b337d591ba0add22260", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,553", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,556", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,559", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,562", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,562", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,563", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: a29d4620c33554d54ea249c36e23c8add5ec9752edf67b337d591ba0add22260", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,566", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,566", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,569", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,569", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,571", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,572", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,572", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,575", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,575", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,575", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,577", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,577", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,577", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,580", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,580", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,580", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,583", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,583", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,583", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,586", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,586", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: a29d4620c33554d54ea249c36e23c8add5ec9752edf67b337d591ba0add22260, Fee: 0.000543210000 XMR (543210000 pico)", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,590", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,590", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,590", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,590", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,590", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,594", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: efc97bac...): Failed to get daemon height. Cannot calculate confirmations.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,604", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: efc97bac...): Skipping entry 0: TXID a29d4620c33554d54ea249c36e23c8add5ec9752edf67b337d591ba0add22260 already processed.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,607", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,610", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,612", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,619", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: efc97bac...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-11 13:24:51,625", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: efc97bac...): Found candidate! TXID: a29d4620c33554d54ea249c36e23c8add5ec9752edf67b337d591ba0add22260, Amt: 1.234567890123 XMR, Confs: 11.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,626", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: efc97bac...): Confirmed payment found.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,629", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,629", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,629", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,630", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-11 13:24:51,632", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,636", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,636", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,636", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,636", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: a29d4620c33554d54ea249c36e23c8add5ec9752edf67b337d591ba0add22260, Fee: 0.000678900000 XMR (678900000 pico)", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,638", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,639", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,639", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,639", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,639", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,639", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,639", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,639", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,643", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,647", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,647", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,647", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,647", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:24:51,651", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,651", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:24:51,653", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,657", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,657", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,657", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:24:51,660", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:24:51,662", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,665", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,665", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,665", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,666", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: a29d4620c33554d54ea249c36e23c8add5ec9752edf67b337d591ba0add22260, Fee: 0.000777700000 XMR (777700000 pico)", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,666", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,668", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,668", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,668", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,669", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: a29d4620c33554d54ea249c36e23c8add5ec9752edf67b337d591ba0add22260, Fee: 0.000888800000 XMR (888800000 pico)", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,669", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,672", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,672", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,673", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,673", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,673", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,673", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:51,677", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,178", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,178", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,181", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,682", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,682", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,687", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-11 13:24:52,710", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,711", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2499202813968'>", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,722", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,734", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,734", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2499181336896'>", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,740", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,752", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,752", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,761", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,761", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,771", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,771", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,771", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,781", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,781", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,782", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,787", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,795", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,795", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,832", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,832", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-11 13:24:52,849", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,871", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,871", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-11 13:24:52,880", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,880", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,895", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,895", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,902", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:52,903", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:53,507", "levelname": "WARNING", "name": "django.security", "module": "common_escrow_utils", "pathname": "C:\\shadow_market\\backend\\store\\services\\common_escrow_utils.py", "lineno": 411, "message": "Order ee558061-517a-4e56-8299-f1b2ee057eb6 automatically cancelled due to payment timeout.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:53,878", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 4e3f15ef-5d37-4956-bcbe-99021d1e4be4 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:53,879", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction e4d183a4-3f32-49eb-919b-9a97b271a26e recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:53,936", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction a6ad5b73-cd14-46c7-af9b-a8999e635995 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:53,937", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 5b821c99-8fde-455c-8eb5-cb5233403935 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,042", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction 5afe1108-9245-40a4-8900-ce858a3e7f30 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,043", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 247, "message": "Ledger transaction d96efbfa-c169-4147-96c9-bef5478784f3 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,137", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,178", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,178", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,178", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,179", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,180", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,180", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee credit successful.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,180", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,180", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,181", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,181", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,182", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,220", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,220", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,220", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,221", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,258", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,259", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,259", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,260", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,261", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,261", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee credit successful.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,261", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,261", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 8400, "thread": 3228, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-11 13:24:54,264", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,264", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:24:54,305", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 8400, "thread": 3228}
{"asctime": "2025-04-11 13:29:06,763", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,763", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 67838189-aa38-4384-84ed-7cc488c46d2a recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,768", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 58ab06d2-916e-48e8-9e32-dbd17986ad3b recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,772", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction e7f6aa69-da77-4f5b-982e-631c80ad4e2a recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,777", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,782", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,786", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,790", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,794", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,799", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,803", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,808", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,812", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,815", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,821", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,825", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,828", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,873", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,873", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction 44e6b428-5477-477d-b3d0-553beabf91a3 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,879", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,887", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,893", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,893", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction cef3202d-4fd5-4cd4-97ab-358d46ef8e14 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,898", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,898", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,898", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 13cf4fd2-fca2-4210-b8a8-32884eec04e8 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,904", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,912", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,919", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 2bcbbfa3-2974-4429-8222-6f48c1d17fdd recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,925", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction a7b3f931-bac4-469e-9301-e35ecc9507db recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,931", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 2a1e5e87-273e-4220-b250-9f8140479da7 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,937", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,937", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,937", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,938", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,938", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,939", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,939", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,940", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,944", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,944", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,945", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,945", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,945", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,948", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,949", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,949", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,949", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,949", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,950", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,953", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,953", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,953", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,953", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-11 13:29:06,958", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,959", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,961", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,961", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,962", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,962", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:06,965", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,004", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,030", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 780, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Fetching key from Vault...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,030", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 791, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault returned invalid data (not a non-empty string) for key.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,030", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 850, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault ERROR fetching named BTC key ('market_btc_multisig_key'): Invalid data received from Vault for key 'market_btc_multisig_key'.", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py\", line 792, in _get_named_btc_private_key_from_vault\n    raise VaultError(f\"Invalid data received from Vault for key '{key_name_in_vault}'.\") # <-- RAISES VaultError\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nstore.services.bitcoin_service.VaultError: Invalid data received from Vault for key 'market_btc_multisig_key'."}
{"asctime": "2025-04-11 13:29:07,041", "levelname": "WARNING", "name": "django.security", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1133, "message": "[estimate_fee_rate(target:6)] Fee Volatility Warning: Node estimate (0.00012345 BTC/kB) differs significantly (>5x) from fallback setting (0.00001000 BTC/kB).", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,107", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,110", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,156", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,158", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,161", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,163", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,165", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,167", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,169", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,169", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-11 13:29:07,172", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,178", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-11 13:29:07,182", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-11 13:29:07,190", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,190", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,193", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-11 13:29:07,197", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-11 13:29:07,202", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,202", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,205", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,208", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,211", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-11 13:29:07,219", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-11 13:29:07,224", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-11 13:29:07,229", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,233", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7357146d4142117e)...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,234", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 7357146d4142117e): 4LdpnMo9wPESgQ4...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,236", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,237", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,237", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,239", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7357146d4142117e)...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,239", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 7357146d4142117e): Timeout", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,242", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7357146d4142117e)...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,242", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 7357146d4142117e): Monero RPC Error (Code: -5): RPC Failed", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,245", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7357146d4142117e)...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,245", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 7357146d4142117e). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,248", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,248", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,250", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7357146d4142117e)...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,250", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 7357146d4142117e) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,253", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,254", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,254", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,259", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,260", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,263", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,263", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,265", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,265", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,267", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,267", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '4b25b5d5dcba94936893c5e4dc2f93bf1f2d10cc5c42654d36dcb29a6a992d52934bce1feb770babead71bb014fa94ee85f95786361411e59477bb09c09186619d93e0e595d37d3eb3f562dc156818916f3df98d6ad274fe69d2107357b1ce9a1350b7352607e165f72bc57bfb83681fac2c0bf8ba995e7911bf1133f8507a6a'}", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,270", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,270", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,270", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 2704, "thread": 6092, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-11 13:29:07,270", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,271", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,274", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,274", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,274", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,275", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '544b498e23185db6d1416684de3f8fb7848954c7d6a81fc9a7e742b2f547adc68ff3bb11e0b09a0e8c3a9c95915c265c8ab87ab58f2bdd1713353fca3e8301278d9ed98fc546e16cbf2ac314d8cd08c7d64aa5e52d0caef848e1de285321b17cc7b8bdd1d1fbfde70ae0e9d819faa0fc38ba29f68537808f617f29222ba6df6e6979df4471a7506e2e66a855966de60ab9b8c098e3f697607d7994d3460a8510218c9c8a8e36e389fed643c436bae02fa77f4f526ad7b2b217736c382991989f196c2428f89267094a34305178fab1637d5c3eafeac99b2b58839cdc56de6c72c23e475acbf616f7005ee1d0414e9186f7bac334141282cdf4901998a93e1a8d'}", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,275", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 2704, "thread": 6092, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:29:07,275", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,275", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,278", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,278", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,278", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,278", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 2704, "thread": 6092, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:29:07,279", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,279", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,281", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,281", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,282", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,282", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 2704, "thread": 6092, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:29:07,282", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,282", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,284", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,285", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,285", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,297", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,297", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-11 13:29:07,301", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,302", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,302", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-11 13:29:07,305", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,305", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,309", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,310", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,310", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,310", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,313", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,314", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,315", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,318", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,318", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,319", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,319", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,321", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,321", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,323", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,323", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,324", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,324", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,327", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,327", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,328", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:29:07,330", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,331", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:29:07,335", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,336", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,338", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,338", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,339", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-11 13:29:07,342", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,342", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,345", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,345", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,345", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,345", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,347", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,348", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,348", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,348", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,350", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,350", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,351", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 9aec21932a4533175934f985430d72c9cdaf2c1bced9926aa1a732f15853ad27", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,351", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,356", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,359", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,362", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,362", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,362", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 9aec21932a4533175934f985430d72c9cdaf2c1bced9926aa1a732f15853ad27", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,365", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,365", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,368", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,369", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,372", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,373", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,373", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,376", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,376", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,376", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,379", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,379", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,380", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,383", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,383", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,384", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,387", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,387", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,387", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,389", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,390", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 9aec21932a4533175934f985430d72c9cdaf2c1bced9926aa1a732f15853ad27, Fee: 0.000543210000 XMR (543210000 pico)", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,392", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,393", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,393", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,393", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,393", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,397", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 426eb613...): Failed to get daemon height. Cannot calculate confirmations.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,407", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 426eb613...): Skipping entry 0: TXID 9aec21932a4533175934f985430d72c9cdaf2c1bced9926aa1a732f15853ad27 already processed.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,412", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,415", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,418", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,424", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 426eb613...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-11 13:29:07,429", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 426eb613...): Found candidate! TXID: 9aec21932a4533175934f985430d72c9cdaf2c1bced9926aa1a732f15853ad27, Amt: 1.234567890123 XMR, Confs: 11.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,429", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 426eb613...): Confirmed payment found.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,432", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,432", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,432", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,433", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-11 13:29:07,435", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,437", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,437", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,437", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,438", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 9aec21932a4533175934f985430d72c9cdaf2c1bced9926aa1a732f15853ad27, Fee: 0.000678900000 XMR (678900000 pico)", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,440", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,440", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,440", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,440", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,440", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,440", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,440", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,440", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,443", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,445", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,445", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,446", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,446", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:29:07,451", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,451", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:29:07,453", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,457", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,457", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,457", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:29:07,459", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:29:07,460", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,463", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,464", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,464", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,464", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 9aec21932a4533175934f985430d72c9cdaf2c1bced9926aa1a732f15853ad27, Fee: 0.000777700000 XMR (777700000 pico)", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,464", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,467", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,467", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,467", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,468", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 9aec21932a4533175934f985430d72c9cdaf2c1bced9926aa1a732f15853ad27, Fee: 0.000888800000 XMR (888800000 pico)", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,468", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,471", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,471", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,472", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,472", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,472", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,472", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,474", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,975", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,975", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:07,978", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,478", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,479", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,481", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-11 13:29:08,507", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,507", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2114141872080'>", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,516", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,524", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,524", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2114141874432'>", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,530", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,538", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,538", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,549", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,549", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,559", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,559", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,560", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,569", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,569", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,570", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,577", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,586", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,586", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,603", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,604", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-11 13:29:08,613", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,620", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,620", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-11 13:29:08,630", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,631", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,639", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,639", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,647", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:08,647", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:09,298", "levelname": "WARNING", "name": "django.security", "module": "common_escrow_utils", "pathname": "C:\\shadow_market\\backend\\store\\services\\common_escrow_utils.py", "lineno": 411, "message": "Order 28bfa230-aa6b-4401-8686-e68f89d6bdc6 automatically cancelled due to payment timeout.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:09,875", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 731e39ec-58a8-45cb-8125-1d03993e4feb recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:09,876", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 7019e6a2-f235-4790-a5e3-7daf42b758f5 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:09,932", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 7ec8b668-5449-4869-93d3-43ebee46b0e2 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:09,933", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 69265c81-0e06-446e-805f-948c03b4da6b recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,037", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction eaa5ac95-e070-49a2-a37b-57f0854a8ca4 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,038", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 10679d53-5a0a-405a-a89c-ca7101c2bf17 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,131", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,169", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,169", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,169", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,171", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,172", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,172", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee credit successful.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,172", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,172", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,173", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,173", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,174", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,209", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,209", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,209", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,210", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,245", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,246", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,246", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,247", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,248", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,248", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee credit successful.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,248", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,248", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 2704, "thread": 6092, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-11 13:29:10,252", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,252", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:29:10,292", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 2704, "thread": 6092}
{"asctime": "2025-04-11 13:31:29,692", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,692", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 4af83b12-4f4d-445b-b438-9d5913f05150 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,698", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 0668980e-c988-499a-a30e-1fd967616b25 recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,703", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction c127ac98-829b-4037-9973-1aea5f73e52b recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,706", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,711", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,716", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,720", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,723", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,728", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,732", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,735", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,738", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,742", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,747", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,751", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,755", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,800", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,801", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction b10f350e-0874-4584-8a54-00fea156f0db recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,806", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,815", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,821", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,821", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 82f34c63-6855-4c5a-ad9f-263d730d72be recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,825", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,825", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,826", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 1592bf69-9528-4da0-94b6-723f0c44b120 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,830", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,838", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,844", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 320fce60-8d6a-4008-8964-556e30b3952a recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,851", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 3df172de-2755-40a7-acd2-5e0857028651 recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,857", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 68b8eabf-a1f5-4458-b2f8-60cc612b2476 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,861", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,861", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,862", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,863", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,863", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,863", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,864", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,864", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,868", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,868", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,870", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,870", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,870", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,873", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,874", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,874", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,874", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,874", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,875", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,879", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,880", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,880", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,880", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-11 13:31:29,886", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,886", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,888", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,889", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,889", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,889", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,893", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,927", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,953", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 780, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Fetching key from Vault...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,954", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 791, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault returned invalid data (not a non-empty string) for key.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:29,954", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 850, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault ERROR fetching named BTC key ('market_btc_multisig_key'): Invalid data received from Vault for key 'market_btc_multisig_key'.", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py\", line 792, in _get_named_btc_private_key_from_vault\n    raise VaultError(f\"Invalid data received from Vault for key '{key_name_in_vault}'.\") # <-- RAISES VaultError\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nstore.services.bitcoin_service.VaultError: Invalid data received from Vault for key 'market_btc_multisig_key'."}
{"asctime": "2025-04-11 13:31:29,963", "levelname": "WARNING", "name": "django.security", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1133, "message": "[estimate_fee_rate(target:6)] Fee Volatility Warning: Node estimate (0.00012345 BTC/kB) differs significantly (>5x) from fallback setting (0.00001000 BTC/kB).", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,036", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,039", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,080", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,082", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,085", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,087", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,089", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,091", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,093", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,093", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-11 13:31:30,095", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,099", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-11 13:31:30,103", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-11 13:31:30,110", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,110", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,112", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-11 13:31:30,116", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-11 13:31:30,120", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,120", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,123", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,125", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,127", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-11 13:31:30,131", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-11 13:31:30,135", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-11 13:31:30,141", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,143", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 68a7a79cd429a72b)...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,144", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 68a7a79cd429a72b): 4LdpnMo9wPESgQ4...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,145", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,145", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,145", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,147", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 68a7a79cd429a72b)...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,148", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 68a7a79cd429a72b): Timeout", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,150", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 68a7a79cd429a72b)...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,150", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 68a7a79cd429a72b): Monero RPC Error (Code: -5): RPC Failed", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,152", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 68a7a79cd429a72b)...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,152", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 68a7a79cd429a72b). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,155", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,155", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,157", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 68a7a79cd429a72b)...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,157", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 68a7a79cd429a72b) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,160", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,160", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,161", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,164", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,165", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,167", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,167", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,169", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,169", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,171", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,171", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '6818a64fa3882d84b3a13e4ea21516f2c511e2a5115895e13797aaa6798be047a99f2001e1fc87f777f82675bfacfc974d9917ce4e5bb84eb7e00b9bcb358bdc5e68d832fc0fac5d3a194152e074ccfadc8c3f997b47c1458f299588d1732fb06d511fc8e3ce704bf5e1e6fd0f289a9c91aaa7c8ff3f8636dcc2ed3524f0678c'}", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,174", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,175", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,175", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 5340, "thread": 15736, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-11 13:31:30,175", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,175", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,179", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,179", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,180", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,180", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '1e7dfd298c59f3c78f85d4f10709236c93533bb8bc49cbd3768e3ba1b5a7ea3c650a0db2818d3314fa13a3c4fc97e27e21178d7ec683efda72d01b854302c541fcbab8f96e9eacc89dcd7dba18f7b1ad0024a76b34ddf4d343edbfe7076309fe90da1c8fbf1dbb099aeb81cacc0e3ff06054ee7fc2f929558098b0d10f45c1d4b3012bf7c5554701ab30bc8fcae72c1ff851ae9288df2c86f23deff8a5651ce87476b9129c21578994008ce48ac0061bdfa7da408be31ac12af77a08f8873a26073c272dea6d35cbcef8fd300b88b307ab5c049256eac844fabd5567669ab33631d45cdecfc657a150296aecb5169452fb01711d7e6aa0dcfb1cee19c2b282f0'}", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,180", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 5340, "thread": 15736, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:31:30,180", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,180", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,183", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,183", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,183", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,183", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 5340, "thread": 15736, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:31:30,184", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,184", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,186", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,186", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,186", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,186", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 5340, "thread": 15736, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:31:30,186", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,187", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,190", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,190", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,191", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,204", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,205", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-11 13:31:30,210", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,210", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,210", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-11 13:31:30,213", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,213", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,216", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,216", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,216", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,216", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,222", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,222", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,223", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,225", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,226", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,226", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,226", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,228", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,228", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,229", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,230", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,230", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,230", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,232", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,233", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,233", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:31:30,236", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,237", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:31:30,241", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,241", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,243", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,244", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,244", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-11 13:31:30,246", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,247", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,249", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,249", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,249", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,249", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,253", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,253", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,253", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,253", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,255", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,255", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,256", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: d5a2ea30fbfb59d4bc8178d27773287058aa7334944d3b9cea10d794eee0f610", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,256", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,259", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,261", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,264", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,264", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,264", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: d5a2ea30fbfb59d4bc8178d27773287058aa7334944d3b9cea10d794eee0f610", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,267", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,267", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,270", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,271", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,274", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,274", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,274", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,277", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,277", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,277", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,280", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,280", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,280", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,284", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,284", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,284", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,287", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,287", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,287", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,290", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,290", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: d5a2ea30fbfb59d4bc8178d27773287058aa7334944d3b9cea10d794eee0f610, Fee: 0.000543210000 XMR (543210000 pico)", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,293", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,293", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,293", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,293", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,294", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,298", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 2e4655da...): Failed to get daemon height. Cannot calculate confirmations.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,308", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 2e4655da...): Skipping entry 0: TXID d5a2ea30fbfb59d4bc8178d27773287058aa7334944d3b9cea10d794eee0f610 already processed.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,311", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,315", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,317", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,322", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 2e4655da...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-11 13:31:30,327", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 2e4655da...): Found candidate! TXID: d5a2ea30fbfb59d4bc8178d27773287058aa7334944d3b9cea10d794eee0f610, Amt: 1.234567890123 XMR, Confs: 11.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,327", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 2e4655da...): Confirmed payment found.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,330", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,331", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,331", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,331", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-11 13:31:30,332", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,336", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,336", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,336", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,336", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: d5a2ea30fbfb59d4bc8178d27773287058aa7334944d3b9cea10d794eee0f610, Fee: 0.000678900000 XMR (678900000 pico)", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,340", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,340", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,340", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,340", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,340", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,340", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,340", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,341", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,344", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,346", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,347", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,347", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,347", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:31:30,350", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,351", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:31:30,354", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,357", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,357", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,357", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:31:30,359", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:31:30,360", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,364", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,364", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,364", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,364", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: d5a2ea30fbfb59d4bc8178d27773287058aa7334944d3b9cea10d794eee0f610, Fee: 0.000777700000 XMR (777700000 pico)", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,364", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,367", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,367", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,367", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,367", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: d5a2ea30fbfb59d4bc8178d27773287058aa7334944d3b9cea10d794eee0f610, Fee: 0.000888800000 XMR (888800000 pico)", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,368", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,371", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,371", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,372", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,372", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,372", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,373", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,375", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,877", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,877", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:30,879", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,380", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,380", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,383", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-11 13:31:31,401", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,402", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2484915273216'>", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,413", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,421", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,422", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2484915263136'>", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,429", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,437", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,437", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,448", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,448", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,459", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,459", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,459", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,467", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,468", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,468", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,476", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,485", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,485", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,501", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,502", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-11 13:31:31,510", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,517", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,518", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-11 13:31:31,526", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,527", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,534", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,534", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,542", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:31,543", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,148", "levelname": "WARNING", "name": "django.security", "module": "common_escrow_utils", "pathname": "C:\\shadow_market\\backend\\store\\services\\common_escrow_utils.py", "lineno": 411, "message": "Order bb2c9404-195f-4ff3-9627-a49258a0cde9 automatically cancelled due to payment timeout.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,693", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction eaa7538f-59f7-455a-981f-6988be7641b9 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,694", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction a4855a70-c290-4f1b-99c6-3f435ed3d9f0 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,752", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 575cf84d-a4fc-4a9d-a308-add89d827464 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,753", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction d12fd482-2edb-48a3-a1a9-ecce982fca7a recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,856", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 4151bf0c-cf09-480d-894e-33bc48e77d10 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,857", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction fce969e9-9972-4837-9e6c-6f99ea6c1c18 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,943", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,983", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,984", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,984", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,985", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,985", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,985", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee credit successful.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,986", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,986", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,987", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,987", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:32,987", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:33,023", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:33,024", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:33,024", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:33,024", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:33,060", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:33,060", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:33,060", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:33,061", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:33,061", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:33,062", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee credit successful.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:33,062", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:33,062", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 5340, "thread": 15736, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-11 13:31:33,065", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:33,065", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:31:33,108", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 5340, "thread": 15736}
{"asctime": "2025-04-11 13:34:25,738", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,738", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 239cfe25-d9d5-4061-8d29-69e3828ae7d3 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,744", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 80b036fa-a685-48dc-864c-6a5e87c4b1aa recorded: User 1, Type MANUAL_ADJUST_CREDIT, Amount 0.25 BTC", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,749", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 0ab6729b-1576-4bfc-b088-3e3b7c657c54 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,753", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,759", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,763", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,766", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,770", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,773", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,776", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,780", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,785", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,790", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,793", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,798", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,803", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,848", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,848", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction 0952dc42-c3cb-4ae5-92fc-9b2422afab36 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,853", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,862", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,867", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,868", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 69e9efb8-c131-4d58-b3dc-076cf37cad07 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,874", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,874", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,874", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction b5faf806-8ac0-4eb9-a764-0f375962a606 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,878", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,887", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,893", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 8efb472c-d09a-4474-81c4-2044a13d5b9e recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,901", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 070da686-cb9c-4822-9497-b4562e90a9d2 recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,905", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 9cceaeef-4079-4169-a588-255ed2083be0 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,911", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,911", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,912", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,912", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,912", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,912", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,912", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,913", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,917", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,917", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,918", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,918", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,918", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,922", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,923", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,923", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,924", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,924", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,925", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,929", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,929", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,929", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,929", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-11 13:34:25,934", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,935", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,938", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,938", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,938", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,938", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,943", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,976", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,998", "levelname": "INFO", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 780, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Fetching key from Vault...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,998", "levelname": "CRITICAL", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 791, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault returned invalid data (not a non-empty string) for key.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:25,999", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 850, "message": "[get_market_btc_key][get_named_key:market_btc_multisig_key] Vault ERROR fetching named BTC key ('market_btc_multisig_key'): Invalid data received from Vault for key 'market_btc_multisig_key'.", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py\", line 792, in _get_named_btc_private_key_from_vault\n    raise VaultError(f\"Invalid data received from Vault for key '{key_name_in_vault}'.\") # <-- RAISES VaultError\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nstore.services.bitcoin_service.VaultError: Invalid data received from Vault for key 'market_btc_multisig_key'."}
{"asctime": "2025-04-11 13:34:26,007", "levelname": "WARNING", "name": "django.security", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 1133, "message": "[estimate_fee_rate(target:6)] Fee Volatility Warning: Node estimate (0.00012345 BTC/kB) differs significantly (>5x) from fallback setting (0.00001000 BTC/kB).", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,072", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,075", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,118", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,119", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,121", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,124", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,127", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,129", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,131", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,132", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-11 13:34:26,134", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,140", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-11 13:34:26,145", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-11 13:34:26,151", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,151", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,154", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-11 13:34:26,158", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-11 13:34:26,164", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,164", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,168", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,171", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,173", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-11 13:34:26,176", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-11 13:34:26,182", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-11 13:34:26,188", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,190", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: fad877129a322986)...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,190", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: fad877129a322986): 4LdpnMo9wPESgQ4...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,193", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,193", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,193", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,196", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: fad877129a322986)...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,196", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: fad877129a322986): Timeout", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,198", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: fad877129a322986)...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,198", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: fad877129a322986): Monero RPC Error (Code: -5): RPC Failed", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,200", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: fad877129a322986)...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,201", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: fad877129a322986). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,202", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,202", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,204", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: fad877129a322986)...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,205", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: fad877129a322986) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,209", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 666, "message": "Invalid data found in market multisig cache key 'monero_market_multisig_info'. Fetching fresh.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,210", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,210", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,215", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,215", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,217", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,217", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,219", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,220", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,223", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,223", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '092d7130183703e2db26d8eaf01c98f52ba7b2c6e73d17d731689d265e3c5e1bc055904ef7c8bee6afe13da2287d8d6cb84b7008aa29a1b6a69fd68191cb40bbbafecaf4fe1220c77403d22ac5d20d96b1182c74023c984d816fcc6d3a822ecd200374e95766f111fb5b81c1928f87ab1ef9eb6dad0b31927aa18abb3610fcc1'}", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,227", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,227", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,227", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 20704, "thread": 22980, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-11 13:34:26,228", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,228", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,230", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,230", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,231", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,231", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': 'a95b3724bfa55e03f87a6c0e3dfa0cbc568144cd905d952017beeab127672036593b7fbcacb3fee24b8b8095c16248af12d0cd713602e9f7499fe8c9c6e01ebfe123b8a6f64c717cb7e18223d4687ab9d9ac331b094127e941751ff6710769e635fb2e0d8577d908ab07496ab4c02763bd36cb75f2010b3a8871513521cc340e362aa5a41fe73eb0a10b6ee8993949c0129b7e78f48ae39a54a5cde8b1d57511aa6b3434809aee704e83c8578f8706da82bc92ad891431aed087dd3b4b09e3d9a959c6018a7e22d59f54595a18f358affb10f048d311c37b2a975ca85dc54e2c3c6c7a314ae1de9cda3a3ef0482a688ee897a3c63bf19b5e544bf2a6fbded644'}", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,231", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 20704, "thread": 22980, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:34:26,231", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,231", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,234", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,234", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,235", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,235", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 20704, "thread": 22980, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:34:26,235", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,235", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,238", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,238", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,239", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,239", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 20704, "thread": 22980, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 13:34:26,239", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 836, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Wallet creation failed after storing password. Attempting Vault cleanup for 'msig_order_order_abc_789'...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,240", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 839, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Vault password cleanup attempt finished for 'msig_order_order_abc_789'.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,242", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,243", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,243", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,256", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 765, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Storing generated password in Vault...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,256", "levelname": "CRITICAL", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 772, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Failed to store password in Vault. Aborting wallet creation. Error: Vault connection failed", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 768, in create_monero_multisig_wallet\n    store_monero_wallet_password(wallet_name, wallet_password, raise_error=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Vault connection failed"}
{"asctime": "2025-04-11 13:34:26,264", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,265", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,265", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-11 13:34:26,271", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,271", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,275", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,276", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,276", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,276", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,288", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,289", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,291", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,296", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,296", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,297", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,297", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,299", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,299", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,301", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,301", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,302", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,302", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,305", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,305", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,305", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:34:26,310", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,310", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 13:34:26,315", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,315", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,317", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,318", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,318", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-11 13:34:26,324", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,324", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,327", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,328", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,328", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,328", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,331", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,332", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,332", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,332", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,336", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,337", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,337", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 46fcf5a15e73c30cfebbdb3431573d1736b7d35991911bb86353fd1b02b62b28", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,337", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,342", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,347", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,351", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,351", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,351", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 46fcf5a15e73c30cfebbdb3431573d1736b7d35991911bb86353fd1b02b62b28", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,354", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,355", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,357", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,358", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,361", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,361", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,361", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,367", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,367", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,368", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,370", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,370", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,371", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1155, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,374", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,374", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,374", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'} (RPC Struct Issue)", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,377", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,377", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,378", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1141, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000} (RPC Struct Issue)", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,381", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,381", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 46fcf5a15e73c30cfebbdb3431573d1736b7d35991911bb86353fd1b02b62b28, Fee: 0.000543210000 XMR (543210000 pico)", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,383", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,384", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,384", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,384", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1147, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,384", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,388", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: f8bfb5f0...): Failed to get daemon height. Cannot calculate confirmations.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,397", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: f8bfb5f0...): Skipping entry 0: TXID 46fcf5a15e73c30cfebbdb3431573d1736b7d35991911bb86353fd1b02b62b28 already processed.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,400", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,403", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,405", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,412", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: f8bfb5f0...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-11 13:34:26,419", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: f8bfb5f0...): Found candidate! TXID: 46fcf5a15e73c30cfebbdb3431573d1736b7d35991911bb86353fd1b02b62b28, Amt: 1.234567890123 XMR, Confs: 11.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,419", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: f8bfb5f0...): Confirmed payment found.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,423", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,423", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,423", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,423", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-11 13:34:26,425", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1424, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,430", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,430", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,430", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,430", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 46fcf5a15e73c30cfebbdb3431573d1736b7d35991911bb86353fd1b02b62b28, Fee: 0.000678900000 XMR (678900000 pico)", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,433", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,433", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,433", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,434", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,434", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,434", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1369, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,434", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,434", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1415, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,438", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,440", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,441", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,441", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,441", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:34:26,444", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,444", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 13:34:26,447", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,451", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,451", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,451", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:34:26,453", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Cannot get password", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1598, in create_and_broadcast_dispute_tx\n    with _managed_wallet_session(multisig_wallet_name) as wallet_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 141, in __enter__\n    return next(self.gen)\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 13:34:26,455", "levelname": "ERROR", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1631, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Direct Broadcast): BShare:1000000000000 VShare:0. Err: Cannot get password", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,459", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,459", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,459", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,460", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 46fcf5a15e73c30cfebbdb3431573d1736b7d35991911bb86353fd1b02b62b28, Fee: 0.000777700000 XMR (777700000 pico)", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,460", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,464", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,464", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,464", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,464", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 46fcf5a15e73c30cfebbdb3431573d1736b7d35991911bb86353fd1b02b62b28, Fee: 0.000888800000 XMR (888800000 pico)", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,464", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,467", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,467", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer address required for positive buyer share.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,467", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,467", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: ['Bad vendor addr']", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,468", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,468", "levelname": "WARNING", "name": "django.security", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1589, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - Dispute Tx FAILED (Invalid Params): N/A Err: Buyer payout amount must be a non-negative Decimal.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,471", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,971", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,972", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:26,973", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,474", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,474", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,477", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-11 13:34:27,497", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 311, "message": "PGP key details retrieved: FP=0123456789ABCDEF0123456789ABCDEF01234567, UIDs=['Test User <test@example.com>']", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,498", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2494899826912'>", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,508", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 298, "message": "GPG key import failed. Status: [{'fingerprint': None, 'ok': '0', 'text': 'Import failed'}], Stderr: N/A", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,518", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 307, "message": "Failed to retrieve key details after successful import. FP: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,519", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 334, "message": "GPG key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 might not have been fully successful. Status: ok, Stderr: <MagicMock name='mock.delete_keys().stderr' id='2494899817840'>", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,524", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 389, "message": "Generated PGP login challenge for User ID 1. Hash cached. Key: pgp_login_challenge_1, Timeout: 300s.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,532", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 491, "message": "PGP login challenge verification SUCCESS for User ID 1 (test_user_pgp). Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,532", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,542", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 437, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Challenge cache miss or expired. Key: pgp_login_challenge_1", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,543", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 438, "message": "Failed PGP 2FA Login (Cache Miss/Expired): User 'test_user_pgp' (ID: 1).", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,551", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 465, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signature invalid or fingerprint mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature bad", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,551", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 468, "message": "Failed PGP 2FA Login (Sig/FP Invalid): User 'test_user_pgp' (ID: 1). Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,551", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,561", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 484, "message": "PGP login verify failed for User ID 1 (test_user_pgp): Signed content hash mismatch. Actual Hash: a1fe7a33..., Expected Hash: 2cb80315...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,561", "levelname": "WARNING", "name": "django.security", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 487, "message": "Failed PGP 2FA Login (Hash Mismatch): User 'test_user_pgp' (ID: 1).", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,561", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 515, "message": "Verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,566", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 589, "message": "Generated PGP action challenge: User test_user_pgp, Action 'confirm_withdrawal'. Hash cached. Nonce: action_nonce_abcdef1234567890, Key: pgp_action_nonce_1_confirm_withdrawal_action_nonce_abcdef1234567890, Timeout: 120s.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,576", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 686, "message": "PGP Action 'confirm_withdrawal' verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,576", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 706, "message": "Action verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1, Action 'confirm_withdrawal') might not have been fully successful. Status: ok", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,593", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 771, "message": "PGP encryption failed for recipient 0123456789ABCDEF0123456789ABCDEF01234567. Status: 'encryption failed'. Stderr: gpg: encryption failed: some error", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,593", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 783, "message": "Unexpected error during PGP encryption for fingerprint 0123456789ABCDEF0123456789ABCDEF01234567...", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 773, in encrypt_message_for_recipient\n    raise PGPEncryptionError(f\"Encryption failed for key {recipient_fingerprint}. Status: {status}. Details: {stderr}\")\nstore.services.pgp_service.PGPEncryptionError: Encryption failed for key 0123456789ABCDEF0123456789ABCDEF01234567. Status: encryption failed. Details: gpg: encryption failed: some error"}
{"asctime": "2025-04-11 13:34:27,599", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 817, "message": "Successfully decrypted message. Key fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,606", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 834, "message": "PGP decryption failed. Status: 'decryption failed'. Stderr: gpg: decryption failed: bad key", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,606", "levelname": "ERROR", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 850, "message": "Unexpected error during PGP decryption: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\pgp_service.py\", line 842, in decrypt_message\n    raise PGPDecryptionError(error_msg)\nstore.services.pgp_service.PGPDecryptionError: PGP decryption failed. Status: decryption failed. Details: gpg: decryption failed: bad key"}
{"asctime": "2025-04-11 13:34:27,616", "levelname": "INFO", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 936, "message": "Message signature verification SUCCESS for User test_user_pgp. Fingerprint: 0123456789ABCDEF0123456789ABCDEF01234567", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,616", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,623", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 906, "message": "Message signature verification failed for User test_user_pgp: Invalid sig or FP mismatch. Verified FP: 0123456789ABCDEF0123456789ABCDEF01234567, Expected FP: 0123456789ABCDEF0123456789ABCDEF01234567, Valid: False, Status: signature valid", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,623", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,632", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 931, "message": "Message signature verification failed for User test_user_pgp: Signed content mismatch after normalization.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:27,632", "levelname": "WARNING", "name": "store.services.pgp_service", "module": "pgp_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\pgp_service.py", "lineno": 957, "message": "Message verification key deletion for 0123456789ABCDEF0123456789ABCDEF01234567 (User 1) might not have been fully successful. Status: ok", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,240", "levelname": "WARNING", "name": "django.security", "module": "common_escrow_utils", "pathname": "C:\\shadow_market\\backend\\store\\services\\common_escrow_utils.py", "lineno": 411, "message": "Order 3f20a5ce-639b-4d93-938f-129b7ee63e40 automatically cancelled due to payment timeout.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,534", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 287c986b-83f1-4157-87e8-0303219e7d65 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,535", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 7ace398d-7acb-4b8e-b3c8-622c744e70cf recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,589", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction fa94e39e-b339-4a97-86a8-4a2f1785b790 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,590", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction b9ec8efe-104e-409c-a93e-3caff68942e8 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,695", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 5f6ea990-0480-45f7-a1d7-2aee6f097d0d recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,696", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 889106a3-c7fe-456f-b622-08e8b23b085e recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,786", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,827", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,827", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,827", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,828", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,829", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,829", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee credit successful.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,829", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,829", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,830", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,830", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,831", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,866", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,867", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,867", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,867", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,904", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,904", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,904", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,905", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,906", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,906", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 279, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee credit successful.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,906", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,906", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 20704, "thread": 22980, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-11 13:34:28,910", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,910", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 20704, "thread": 22980}
{"asctime": "2025-04-11 13:34:28,950", "levelname": "ERROR", "name": "django.security", "module": "vault_integration", "pathname": "C:\\shadow_market\\backend\\vault_integration.py", "lineno": 363, "message": "VaultRead(Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key', Key='private_key_wif'): Permission denied accessing Vault path: Mount='secret', Path='shadowmarket/crypto_keys/bitcoin/market_btc_multisig_key'. Check Vault ACL policies.", "process": 20704, "thread": 22980}
