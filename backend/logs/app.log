{"asctime": "2025-04-11 20:35:05,451", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-11 20:35:05,461", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,461", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,465", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,465", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,465", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,465", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,468", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,504", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,609", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,612", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,653", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,654", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,657", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,660", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,662", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,665", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,667", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,667", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-11 20:35:05,670", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,675", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-11 20:35:05,680", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-11 20:35:05,686", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,686", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,689", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-11 20:35:05,693", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-11 20:35:05,698", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,699", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,702", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,705", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,707", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-11 20:35:05,711", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-11 20:35:05,716", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-11 20:35:05,722", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,724", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 459de19adb878559)...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,724", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 459de19adb878559): 4LdpnMo9wPESgQ4...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,726", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,727", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,727", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,729", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 459de19adb878559)...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,729", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 459de19adb878559): Timeout", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,731", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 459de19adb878559)...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,732", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 459de19adb878559): Monero RPC Error (Code: -5): RPC Failed", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,734", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 459de19adb878559)...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,734", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 459de19adb878559). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,736", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,736", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,738", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 459de19adb878559)...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,738", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 459de19adb878559) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,743", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,743", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,748", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,748", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,750", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,750", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,752", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,752", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,754", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,754", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': 'b222b28cc0ab9a4f686251954bcd77b905c248dcdfe580ac9f07490e768b321510014ca589a55e18a56fb2d5a83ad974e1380363bf1b742793bf8134fc09fa95d95db8fb13efd2a4aa1d7e297f583d50b91fbaecb22d31eac50b5b435925ad7315ef8fcd362eef8836236e8364a0b2350854d5521e3eebac0cc02312795cbfc4'}", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,757", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,757", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 25796, "thread": 26564, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-11 20:35:05,760", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,760", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,760", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': 'b6ad62ae648b883cee14b6834eafaa4164b6bc662dd6244790be3092963517aedaf0eab789b85d1935753fe54b1bd4dcf629abd2777550ccfa2e6f3004cab9855eae853c9dcf497ac54649a2279d30478ccf812cc8be879f88cec8441020be50abc145710eff2b7e359332f6dec0630b245f560220eb4f3a70131a73a69cca5e1515e2c5435b7b3419b160a220cf58ec67fcf55df440225ce64e423a2d03130bd2bd293718f1c7d982637b83ad491c2186b55ff6fa8ec7d28b7fc41c974d8a4ad367810a43089b52819a01b79ff946b1d285a4c29db07ecef7e22d8c68625da01b0dcfa69593278a0e3718a99fb7a5472b325b6bb66747f99510f7e4299f0857'}", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,761", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 25796, "thread": 26564, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 20:35:05,764", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,764", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,764", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 25796, "thread": 26564, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 20:35:05,768", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,768", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,768", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 25796, "thread": 26564, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 20:35:05,772", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,772", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,790", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,791", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,791", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-11 20:35:05,794", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,794", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,799", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,800", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,800", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,800", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,805", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,806", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,806", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,810", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,810", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,810", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,811", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,814", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,814", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,817", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,817", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,817", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,817", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,820", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,820", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,820", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 20:35:05,824", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,824", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 20:35:05,831", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,831", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,833", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,833", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,833", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-11 20:35:05,837", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,837", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,840", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,840", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,841", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,841", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,844", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,844", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,845", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,845", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,848", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,848", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,848", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: d1809cd96a6367dec6d5d1314387212641fe740e62cf8557fd3f549ce4a56bf7", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,848", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,853", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,856", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,859", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,859", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,860", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: d1809cd96a6367dec6d5d1314387212641fe740e62cf8557fd3f549ce4a56bf7", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,862", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,862", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,866", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,866", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,869", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,869", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,869", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,873", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,873", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,876", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,876", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,879", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,879", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,882", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,882", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,886", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,886", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: d1809cd96a6367dec6d5d1314387212641fe740e62cf8557fd3f549ce4a56bf7, Fee: 0.000543210000 XMR (543210000 pico)", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,889", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,889", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,889", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,893", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: ab1df0b9...): Failed to get daemon height. Cannot calculate confirmations.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,904", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: ab1df0b9...): Skipping entry 0: TXID d1809cd96a6367dec6d5d1314387212641fe740e62cf8557fd3f549ce4a56bf7 already processed.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,910", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,915", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,918", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,928", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: ab1df0b9...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-11 20:35:05,934", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: ab1df0b9...): Found candidate! TXID: d1809cd96a6367dec6d5d1314387212641fe740e62cf8557fd3f549ce4a56bf7, Amt: 1.234567890123 XMR, Confs: 11.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,934", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: ab1df0b9...): Confirmed payment found.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,938", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,939", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,939", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-11 20:35:05,945", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,945", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,945", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: d1809cd96a6367dec6d5d1314387212641fe740e62cf8557fd3f549ce4a56bf7, Fee: 0.000678900000 XMR (678900000 pico)", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,949", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,949", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,949", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,949", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,953", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,957", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,957", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,958", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,958", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 20:35:05,960", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,960", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 20:35:05,966", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,966", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,966", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 20:35:05,973", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,973", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,973", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,973", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: d1809cd96a6367dec6d5d1314387212641fe740e62cf8557fd3f549ce4a56bf7, Fee: 0.000777700000 XMR (777700000 pico)", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,974", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,977", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,978", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,978", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,978", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: d1809cd96a6367dec6d5d1314387212641fe740e62cf8557fd3f549ce4a56bf7, Fee: 0.000888800000 XMR (888800000 pico)", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,978", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,982", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,983", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,983", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:05,986", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:06,486", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:06,486", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:06,490", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:06,990", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:06,991", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:06,994", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-11 20:35:07,229", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 4: Level=info, Message='Your Order #f9a24cb6 (Test BTC Product Only) is re...'", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:07,330", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 11: Level=success, Message='Payment confirmed for Order #df75ba7d (Test BTC Pr...'", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:07,381", "levelname": "WARNING", "name": "store.validators", "module": "validators", "pathname": "C:\\shadow_market\\backend\\store\\validators.py", "lineno": 150, "message": "Bitcoin address validation for 'tb1qw508d6...' used basic regex ONLY. Checksum not validated. Consider using a dedicated library.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:07,383", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 13: Level=info, Message='Your Order #406a80bd (Test BTC Product Only) has b...'", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:07,492", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 19: Level=success, Message='Order #a6eda807 (Test BTC Product Only) has been f...'", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:07,492", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 20: Level=success, Message='Order #a6eda807 finalized. Funds (0.00975000 BTC) ...'", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:07,551", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 22: Level=info, Message='Dispute resolved for Order #0ac1ab7e. Notes: Full ...'", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:07,552", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 23: Level=info, Message='Dispute resolved for Order #0ac1ab7e. Notes: Full ...'", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:07,991", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 46: Level=info, Message='Your Order #4b314aeb (Test XMR Product Only) is re...'", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:08,893", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction ebd559d6-8cf1-460c-be3b-786a5970054d recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:08,894", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction a78baa18-964a-4479-9c87-6d5cde2e2965 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:08,894", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #964ecbee (Integration Test Product) has bee...'", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:08,895", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Order #964ecbee finalized. Funds (0.01960000 BTC) ...'", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:08,949", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 53385764-8817-410e-85da-2f2d467c16c6 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:08,950", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 93eab9b5-6288-4da9-afe4-343424005602 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:08,950", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Funds released for Order #57ca87b9 (Integration Te...'", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:08,950", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #57ca87b9 (Integration Test Product) has bee...'", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,051", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction e0309ef3-a685-411c-9276-c3183523a35c recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,052", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction bafafdb0-875d-4044-9ace-30f260a12e63 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,053", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=info, Message='Dispute resolved for Order #3db0067f. Notes: Split...'", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,053", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=info, Message='Dispute resolved for Order #3db0067f. Notes: Split...'", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,143", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,185", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,185", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,185", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,186", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,187", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,187", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,187", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,188", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,188", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,188", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 9001: Level=success, Message='Your withdrawal of 0.47500000 BTC (Fee: 0.02500000...'", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,188", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,225", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,225", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,225", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,225", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,262", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,262", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,262", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,263", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,264", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,264", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,264", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 25796, "thread": 26564, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-11 20:35:09,268", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:35:09,268", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 25796, "thread": 26564}
{"asctime": "2025-04-11 20:39:57,030", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,030", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 406bbbdd-9a44-4fb5-92e7-5ce333d5e323 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,040", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction e6a26979-4492-4014-8ee3-1b634c22a359 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,046", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,049", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,051", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,055", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,058", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,061", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,064", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,067", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,070", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,075", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,078", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,082", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,085", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,125", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,125", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction 17679f90-f9ee-4573-b4d3-a0eecedf573b recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,130", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,140", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,146", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,146", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 399578f0-a198-437d-a662-1c33a4b1d4a9 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,151", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,152", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,152", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 8e1a174c-e5b7-4de1-9804-27418ae060e5 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,157", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,164", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,170", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction f7032cba-f364-4a51-a259-43346cbcc628 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,176", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction b5693fe4-4f9f-4348-8a65-3a0da3b0b71e recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,181", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 8756ac41-d58b-4ff2-a001-d8b0708926f0 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,186", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,186", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,187", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,187", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,188", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,188", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,188", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,188", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,192", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,193", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,193", "levelname": "CRITICAL", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 333, "message": "CRITICAL INTERNAL LEDGER INCONSISTENCY [BTC]! Diff: 0.10000000 BTC. LedgerTx Sum: 10.10000000, UserBalance Sum (balance, locked_balance): 10.00000000. REQUIRES MANUAL INVESTIGATION OF TRANSACTIONS.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,193", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,194", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,194", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,200", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,200", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,201", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,201", "levelname": "ERROR", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 365, "message": "Ledger Discrepancy (Node vs Ledger) [BTC]! Diff: -0.10000000 BTC. Node: 9.90000000, Ledger: 10.00000000. INVESTIGATION RECOMMENDED.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,201", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,201", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,202", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,205", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,205", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,205", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,206", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-11 20:39:57,211", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,212", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,215", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,215", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,216", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,216", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,219", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,253", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,359", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,363", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,402", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,404", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,405", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,409", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,411", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,413", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,415", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,416", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-11 20:39:57,418", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,423", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-11 20:39:57,426", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-11 20:39:57,433", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,434", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,436", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-11 20:39:57,439", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-11 20:39:57,444", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,444", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,447", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,449", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,451", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-11 20:39:57,456", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-11 20:39:57,460", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-11 20:39:57,465", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,468", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: b7c1f1ecaec93bcb)...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,468", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: b7c1f1ecaec93bcb): 4LdpnMo9wPESgQ4...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,470", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,470", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,470", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,472", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: b7c1f1ecaec93bcb)...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,473", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: b7c1f1ecaec93bcb): Timeout", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,476", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: b7c1f1ecaec93bcb)...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,476", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: b7c1f1ecaec93bcb): Monero RPC Error (Code: -5): RPC Failed", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,478", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: b7c1f1ecaec93bcb)...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,478", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: b7c1f1ecaec93bcb). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,480", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,480", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,482", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: b7c1f1ecaec93bcb)...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,482", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: b7c1f1ecaec93bcb) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,487", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,487", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,493", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,493", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,496", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,496", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,499", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,499", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,501", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,501", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '24744bf6fe20e3d3346fbca29b5a3d3c9dec1c77ff220bcadd5e0e91edd555e738192a583f23beaea40efafad1ededd460675d4a51d9cd87d3a5529e22afe10218a80f8913f1c657153291154e07fc5dfae07924065d3ad39b17013c98537eeb69a819c5652dc323ae6e832a326e15c13ca93b1ff96435ce293621c9524aa29d'}", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,505", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,505", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 13936, "thread": 3132, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-11 20:39:57,509", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,509", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,510", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '0d003a9822555cd8f5fdb6977d75db36607f7bff6b0d6f886820eb00522267b2aae8353dd2b033e1ab3ec9a675dab422120f001c65234bb584368d94425fabf80222e1382c99ed99c6f9e38f7a856bd919568a4863966db7ed3d19459c9d3d18863b5ef950e4f1271d6934a56a744194fcb00fea76d21abbc122b425d43d532b809187722db80c42796b65229929f43bf381254b96f542a872526f8d4b5546a4838bc800ca13cb60d45fe994cef830784eb0f772a91769bfbf301825a0f60757140a521a57d701012212612ff819f534c77fbda1909f0cd4a14995bad7922237f9cb36aa6f690770c388d052044d5935df27e7a2580f7be325c8a1ed4fe405e3'}", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,510", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 13936, "thread": 3132, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 20:39:57,514", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,514", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,514", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 13936, "thread": 3132, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 20:39:57,517", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,517", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,517", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 13936, "thread": 3132, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 20:39:57,521", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,521", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,538", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,539", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,539", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-11 20:39:57,541", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,541", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,544", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,545", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,545", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,545", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,548", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,549", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,550", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,552", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,553", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,553", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,553", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,555", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,555", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,557", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,557", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,557", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,557", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,560", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,560", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,561", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 20:39:57,564", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,564", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 20:39:57,569", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,569", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,571", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,571", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,571", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-11 20:39:57,574", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,574", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,576", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,577", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,577", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,577", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,581", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,581", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,581", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,581", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,583", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,584", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,584", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 75291faeb166a24a4aaa12e6b94e6a362c5e16c47673e502f40bea4df3650969", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,584", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,587", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,589", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,592", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,592", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,592", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 75291faeb166a24a4aaa12e6b94e6a362c5e16c47673e502f40bea4df3650969", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,596", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,596", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,599", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,599", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,602", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,602", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,602", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,605", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,605", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,609", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,609", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,612", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,613", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,616", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,616", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,619", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,619", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 75291faeb166a24a4aaa12e6b94e6a362c5e16c47673e502f40bea4df3650969, Fee: 0.000543210000 XMR (543210000 pico)", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,622", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,622", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,622", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,627", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 8d15bcf2...): Failed to get daemon height. Cannot calculate confirmations.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,636", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 8d15bcf2...): Skipping entry 0: TXID 75291faeb166a24a4aaa12e6b94e6a362c5e16c47673e502f40bea4df3650969 already processed.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,640", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,643", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,646", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,651", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 8d15bcf2...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-11 20:39:57,657", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 8d15bcf2...): Found candidate! TXID: 75291faeb166a24a4aaa12e6b94e6a362c5e16c47673e502f40bea4df3650969, Amt: 1.234567890123 XMR, Confs: 11.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,657", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 8d15bcf2...): Confirmed payment found.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,660", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,661", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,661", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-11 20:39:57,666", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,666", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,666", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 75291faeb166a24a4aaa12e6b94e6a362c5e16c47673e502f40bea4df3650969, Fee: 0.000678900000 XMR (678900000 pico)", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,669", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,670", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,670", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,670", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,675", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,678", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,678", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,678", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,678", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 20:39:57,681", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,681", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 20:39:57,687", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,687", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,687", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 20:39:57,694", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,695", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,695", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,695", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 75291faeb166a24a4aaa12e6b94e6a362c5e16c47673e502f40bea4df3650969, Fee: 0.000777700000 XMR (777700000 pico)", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,695", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,699", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,700", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,700", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,700", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 75291faeb166a24a4aaa12e6b94e6a362c5e16c47673e502f40bea4df3650969, Fee: 0.000888800000 XMR (888800000 pico)", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,700", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,704", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,705", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,705", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:57,708", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:58,208", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:58,208", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:58,212", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:58,712", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:58,712", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:58,715", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-11 20:39:58,951", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 4: Level=info, Message='Your Order #bb4893ed (Test BTC Product Only) is re...'", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:59,054", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 11: Level=success, Message='Payment confirmed for Order #e1f854e3 (Test BTC Pr...'", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:59,105", "levelname": "WARNING", "name": "store.validators", "module": "validators", "pathname": "C:\\shadow_market\\backend\\store\\validators.py", "lineno": 150, "message": "Bitcoin address validation for 'tb1qw508d6...' used basic regex ONLY. Checksum not validated. Consider using a dedicated library.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:59,106", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 13: Level=info, Message='Your Order #5d0350da (Test BTC Product Only) has b...'", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:59,223", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 19: Level=success, Message='Order #feec3b17 (Test BTC Product Only) has been f...'", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:59,223", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 20: Level=success, Message='Order #feec3b17 finalized. Funds (0.00975000 BTC) ...'", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:59,278", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 22: Level=info, Message='Dispute resolved for Order #4ab0c6af. Notes: Full ...'", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:59,279", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 23: Level=info, Message='Dispute resolved for Order #4ab0c6af. Notes: Full ...'", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:39:59,707", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 46: Level=info, Message='Your Order #222cc01b (Test XMR Product Only) is re...'", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,580", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction cf73e65d-169d-4b64-ba7b-b770f5444010 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,582", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction d4bc73fc-7f0d-47f0-82ef-f4a2d8bc6322 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,583", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #6ffa48d5 (Integration Test Product) has bee...'", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,583", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Order #6ffa48d5 finalized. Funds (0.01960000 BTC) ...'", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,636", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 5655153a-09c1-483b-81ef-25ccade8ad48 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,637", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 8e922f47-2812-416a-9837-f1ec4f66a830 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,637", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Funds released for Order #10a1c9da (Integration Te...'", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,637", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #10a1c9da (Integration Test Product) has bee...'", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,736", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction e5dfed2a-35fe-4bdc-8769-421849a8223a recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,737", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 4bcc5f16-9f64-449a-9753-858d13c1822f recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,738", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=info, Message='Dispute resolved for Order #727dd672. Notes: Split...'", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,738", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=info, Message='Dispute resolved for Order #727dd672. Notes: Split...'", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,831", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,874", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,874", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,874", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,875", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,876", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,876", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,876", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,878", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,878", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,878", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 9001: Level=success, Message='Your withdrawal of 0.47500000 BTC (Fee: 0.02500000...'", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,878", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,915", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,915", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,915", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,915", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,951", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,951", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,951", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,952", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,953", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,953", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,953", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 13936, "thread": 3132, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-11 20:40:00,956", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:40:00,957", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 13936, "thread": 3132}
{"asctime": "2025-04-11 20:42:43,907", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:43,907", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 99b987ea-5d97-44ab-8d33-50f24e5dcd03 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:43,918", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 7f2d2f2c-a323-482d-ab07-1f0b23e4efae recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:43,925", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:43,928", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:43,932", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:43,934", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:43,938", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:43,940", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:43,944", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:43,948", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:43,953", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:43,956", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:43,959", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:43,963", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:43,968", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,010", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,010", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction 5d59b9a5-9e10-48df-bcbd-2451f8f87959 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,016", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,023", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,029", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,030", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction f95dc487-84aa-401a-b7c4-dd997a6dd3aa recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,035", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,036", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,036", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction e6dce4c6-a514-4d06-b93d-fb111ad6d4ef recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,039", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,048", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,054", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction b5b8fc67-1ccf-414a-aaac-7adfd203e759 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,061", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 03d8ea93-879c-4e83-812c-74be3ee997bf recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,067", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction c620c9ba-fcfe-4762-b4be-91bcf61563d2 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,071", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,072", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,073", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,073", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,073", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,073", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,073", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,074", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,078", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,078", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,078", "levelname": "CRITICAL", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 333, "message": "CRITICAL INTERNAL LEDGER INCONSISTENCY [BTC]! Diff: 0.10000000 BTC. LedgerTx Sum: 10.10000000, UserBalance Sum (balance, locked_balance): 10.00000000. REQUIRES MANUAL INVESTIGATION OF TRANSACTIONS.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,079", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,079", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,079", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,084", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,084", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,085", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,085", "levelname": "ERROR", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 365, "message": "Ledger Discrepancy (Node vs Ledger) [BTC]! Diff: -0.10000000 BTC. Node: 9.90000000, Ledger: 10.00000000. INVESTIGATION RECOMMENDED.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,085", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,086", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,087", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,090", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,090", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,091", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,091", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-11 20:42:44,095", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,096", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,099", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,099", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,099", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,099", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,103", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,137", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,238", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,241", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,283", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,286", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,287", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,289", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,292", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,295", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,298", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,298", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-11 20:42:44,300", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,304", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-11 20:42:44,309", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-11 20:42:44,316", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,316", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,317", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-11 20:42:44,322", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-11 20:42:44,329", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,329", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,331", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,333", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,335", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-11 20:42:44,338", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-11 20:42:44,342", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-11 20:42:44,345", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,348", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: ef76048556ee8938)...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,348", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: ef76048556ee8938): 4LdpnMo9wPESgQ4...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,349", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,349", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,350", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,351", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: ef76048556ee8938)...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,351", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: ef76048556ee8938): Timeout", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,353", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: ef76048556ee8938)...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,353", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: ef76048556ee8938): Monero RPC Error (Code: -5): RPC Failed", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,354", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: ef76048556ee8938)...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,354", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: ef76048556ee8938). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,356", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,356", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,357", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: ef76048556ee8938)...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,358", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: ef76048556ee8938) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,361", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,361", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,365", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,365", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,367", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,367", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,368", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,368", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,370", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,370", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': 'b52d6b3c6df612f2d92a028304dcd7bd8fae8de0dc7b5e6fdf9e8b08d017875deda180d8f986b954aaad505912f05684d8014329793ae315904d4e2130902fc2cad992ce4512dd18f98ece2837b3279c329b8403faaa5b586a2929d985c3031664ab460d9ed6fbea93383b905067970202ae6d92bebbd704c941d70908f75fb1'}", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,373", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,373", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 22272, "thread": 12388, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-11 20:42:44,375", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,376", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,376", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '23522ef11b790620390ca6c3e56af0463a7cc14dd286ba0734aec2acce83a8731b0b89373066f9bdb7cfd9a0c15121e67e7b4e7b1df2eaf9ae94fc1dbb3387ae9013b485fc9fdb0c3928ac34eac6513d9afda9d673d52f95a2d12b7b59766f47dfdaa01c2000902092f32213716defa0c318bed06dbf790f62c8588fd18b300889ace63520d9232b9feea46f81c78fc25d0bafa71d650796e6fd45777bae66021cf3620cbe9074100891b2ed377e87a93eadcadbdf4cc3f7b4ea7fe1f3bef5bda9a2d4083b61314cafba31dc31c05355af1b1a3726013a0ee01e1b084a451863f8a5b5a3bc9bf8cb60e6d6ae1876e5fe70efe8aed06a4d6e358dda4263784121'}", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,376", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 22272, "thread": 12388, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 20:42:44,378", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,378", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,378", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 22272, "thread": 12388, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 20:42:44,381", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,381", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,381", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 22272, "thread": 12388, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 20:42:44,383", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,383", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,396", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,396", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,396", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-11 20:42:44,398", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,398", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,400", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,401", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,401", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,401", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,403", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,404", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,404", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,406", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,406", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,406", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,406", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,408", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,408", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,410", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,411", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,411", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,411", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,414", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,414", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,415", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 20:42:44,418", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,418", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 20:42:44,422", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,422", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,424", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,425", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,425", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-11 20:42:44,429", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,429", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,432", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,432", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,433", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,433", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,435", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,435", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,435", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,435", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,437", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,438", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,438", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: de3a4d768006e3f64912eab0975b52c30f14692aca4a641779aa2d0c0d04558c", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,438", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,441", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,445", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,450", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,450", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,451", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: de3a4d768006e3f64912eab0975b52c30f14692aca4a641779aa2d0c0d04558c", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,454", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,454", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,457", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,458", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,462", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,462", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,462", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,467", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,467", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,470", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,471", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,474", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,475", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,479", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,479", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,482", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,482", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: de3a4d768006e3f64912eab0975b52c30f14692aca4a641779aa2d0c0d04558c, Fee: 0.000543210000 XMR (543210000 pico)", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,485", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,486", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,486", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,490", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 8181b881...): Failed to get daemon height. Cannot calculate confirmations.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,500", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 8181b881...): Skipping entry 0: TXID de3a4d768006e3f64912eab0975b52c30f14692aca4a641779aa2d0c0d04558c already processed.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,504", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,507", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,510", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,515", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 8181b881...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-11 20:42:44,520", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 8181b881...): Found candidate! TXID: de3a4d768006e3f64912eab0975b52c30f14692aca4a641779aa2d0c0d04558c, Amt: 1.234567890123 XMR, Confs: 11.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,520", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 8181b881...): Confirmed payment found.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,523", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,524", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,524", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-11 20:42:44,529", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,529", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,530", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: de3a4d768006e3f64912eab0975b52c30f14692aca4a641779aa2d0c0d04558c, Fee: 0.000678900000 XMR (678900000 pico)", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,532", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,532", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,532", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,532", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,536", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,540", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,540", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,541", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,541", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 20:42:44,544", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,545", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 20:42:44,550", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,550", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,551", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 20:42:44,558", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,558", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,558", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,558", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: de3a4d768006e3f64912eab0975b52c30f14692aca4a641779aa2d0c0d04558c, Fee: 0.000777700000 XMR (777700000 pico)", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,558", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,562", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,563", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,563", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,563", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: de3a4d768006e3f64912eab0975b52c30f14692aca4a641779aa2d0c0d04558c, Fee: 0.000888800000 XMR (888800000 pico)", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,563", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,567", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,567", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,568", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:44,571", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:45,072", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:45,072", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:45,074", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:45,574", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:45,575", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:45,578", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-11 20:42:45,812", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 4: Level=info, Message='Your Order #00ed1d34 (Test BTC Product Only) is re...'", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:45,912", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 11: Level=success, Message='Payment confirmed for Order #0485184f (Test BTC Pr...'", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:45,966", "levelname": "WARNING", "name": "store.validators", "module": "validators", "pathname": "C:\\shadow_market\\backend\\store\\validators.py", "lineno": 150, "message": "Bitcoin address validation for 'tb1qw508d6...' used basic regex ONLY. Checksum not validated. Consider using a dedicated library.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:45,967", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 13: Level=info, Message='Your Order #340eba1d (Test BTC Product Only) has b...'", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:46,084", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 19: Level=success, Message='Order #7f2042a2 (Test BTC Product Only) has been f...'", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:46,084", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 20: Level=success, Message='Order #7f2042a2 finalized. Funds (0.00975000 BTC) ...'", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:46,145", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 22: Level=info, Message='Dispute resolved for Order #5c6ff805. Notes: Full ...'", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:46,146", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 23: Level=info, Message='Dispute resolved for Order #5c6ff805. Notes: Full ...'", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:46,572", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 46: Level=info, Message='Your Order #61219d04 (Test XMR Product Only) is re...'", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,475", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction b666c969-4e9c-4d31-936f-773d448fe92f recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,476", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 8c1da13a-8a9a-49e5-bab5-e0fb2dcceb58 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,477", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #571aae1f (Integration Test Product) has bee...'", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,477", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Order #571aae1f finalized. Funds (0.01960000 BTC) ...'", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,530", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 0d439e37-1b9a-41d0-a703-2a8947ad055e recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,531", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction fcc5c1b7-de12-4f69-9963-0b62f00155db recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,531", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Funds released for Order #7fdc4796 (Integration Te...'", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,531", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #7fdc4796 (Integration Test Product) has bee...'", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,633", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 718f664b-5369-4229-b834-0c2fdddca74c recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,634", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 7513f85d-6fd7-4dc4-9267-40f6863c15d1 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,634", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=info, Message='Dispute resolved for Order #2d974814. Notes: Split...'", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,634", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=info, Message='Dispute resolved for Order #2d974814. Notes: Split...'", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,725", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,765", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,766", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,766", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,767", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,768", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,768", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,768", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,769", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,769", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,769", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 9001: Level=success, Message='Your withdrawal of 0.47500000 BTC (Fee: 0.02500000...'", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,769", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,806", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,806", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,807", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,807", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,845", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,845", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,845", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,846", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,847", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,847", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,847", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 22272, "thread": 12388, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-11 20:42:47,850", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:42:47,850", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 22272, "thread": 12388}
{"asctime": "2025-04-11 20:44:24,195", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,195", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 9593b6c9-13da-481e-81b5-f5bf112df754 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,205", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 894295d9-3f6d-426d-b64e-d5a0d491f845 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,211", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,215", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,217", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,221", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,224", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,228", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,232", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,236", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,239", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,244", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,248", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,251", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,256", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,296", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,296", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction 4c27b134-c260-4c43-bf4f-e525a8d926ac recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,303", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,311", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,318", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,319", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 2aae33ea-69ec-4884-8f4d-8394bc14d19a recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,324", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,324", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,325", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction bab14d52-c378-47d9-b84b-6b92962821d5 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,331", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,338", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,345", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 01846ae5-d0c9-4238-98a9-f9e0cf06bf63 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,350", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction b5600d07-78dd-439f-8a8c-88dd0b92d16a recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,356", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction f587184b-3b84-4fd8-88ed-b3234f9a7dab recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,360", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,360", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,361", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,361", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,361", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,361", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,362", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,362", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,365", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,366", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,366", "levelname": "CRITICAL", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 333, "message": "CRITICAL INTERNAL LEDGER INCONSISTENCY [BTC]! Diff: 0.10000000 BTC. LedgerTx Sum: 10.10000000, UserBalance Sum (balance, locked_balance): 10.00000000. REQUIRES MANUAL INVESTIGATION OF TRANSACTIONS.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,368", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,369", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,369", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,373", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,373", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,373", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,374", "levelname": "ERROR", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 365, "message": "Ledger Discrepancy (Node vs Ledger) [BTC]! Diff: -0.10000000 BTC. Node: 9.90000000, Ledger: 10.00000000. INVESTIGATION RECOMMENDED.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,374", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,374", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,374", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,377", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,377", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,377", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,378", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-11 20:44:24,383", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,383", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,386", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,387", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,387", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,387", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,389", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,421", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,511", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,513", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,553", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,555", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,557", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,559", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,561", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,562", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,564", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,564", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-11 20:44:24,568", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,572", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-11 20:44:24,576", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-11 20:44:24,581", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,582", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,584", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-11 20:44:24,589", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-11 20:44:24,593", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,593", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,595", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,598", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,600", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-11 20:44:24,604", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-11 20:44:24,608", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-11 20:44:24,611", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,613", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 496e8a2212f45da5)...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,614", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 496e8a2212f45da5): 4LdpnMo9wPESgQ4...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,615", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,615", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,616", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,617", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 496e8a2212f45da5)...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,617", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 496e8a2212f45da5): Timeout", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,619", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 496e8a2212f45da5)...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,620", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 496e8a2212f45da5): Monero RPC Error (Code: -5): RPC Failed", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,624", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 496e8a2212f45da5)...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,624", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 496e8a2212f45da5). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,627", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,627", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,629", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 496e8a2212f45da5)...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,629", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 496e8a2212f45da5) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,632", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,632", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,636", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,637", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,640", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,640", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,643", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,643", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,645", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,646", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '21bb465b66ecd99478503a3a7273371f0eaaae62ddcdb6c8c21a44fdf0ace39c83bb2c2ecd6690070fd217adc30e03136c944ed376eb29e6567ef202bed9203d4d41f31125d996797f315f8a8d95dc5440870ac09b11ba238398a39bc90a378d3936382e9d7669b62b1d03207409f78141d2adc9a401d7873201b44de3b817ce'}", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,648", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,648", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 17656, "thread": 18472, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-11 20:44:24,652", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,652", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,652", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '7c405b51bf169e6ef951f6e8df13b80e7a52f30e86c8f1e5773b07c6e63538f84a00cc009b8f3f4d74832e74d1c95e255524dc5bc5c1cf12f42af241c4ae3134fc0877bcd803453599f2e7e29ede905fbeaf0bce3f80a80698203225cec6c3229f67e49e05234325d5969a262f8a28837a8b8cc3713aa101022ea61e3b65ecd5e6f32b7b4a9d9417d16f1162207c5fbc420408c918529161defc4097b53cc9c5601d5c45fbd11dbe5cc7ca00ce760fa49fc67c047b852552e3835916aa7f20181ebaa23614fa5bb9028bbf12b94fe084628ba77bb5384ddbafd53cda17395b82ac3f672f52d925be6bbbbb0b235b9febc1ed70dc0bb45e76c03415f7881841ba'}", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,652", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 17656, "thread": 18472, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 20:44:24,656", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,656", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,656", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 17656, "thread": 18472, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 20:44:24,660", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,660", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,660", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 17656, "thread": 18472, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 20:44:24,663", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,663", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,679", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,679", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,679", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-11 20:44:24,683", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,683", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,686", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,686", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,687", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,688", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,692", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,692", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,693", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,695", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,695", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,696", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,696", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,698", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,699", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,701", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,701", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,702", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,702", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,704", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,705", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,706", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 20:44:24,709", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,709", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 20:44:24,714", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,714", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,716", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,717", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,717", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-11 20:44:24,721", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,721", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,723", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,723", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,724", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,724", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,726", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,726", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,727", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,727", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,729", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,730", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,730", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 12de6e0627945db17bc993422109d605b7b19c629e267273b3f9414fece32871", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,731", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,734", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,737", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,741", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,742", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,742", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 12de6e0627945db17bc993422109d605b7b19c629e267273b3f9414fece32871", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,744", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,744", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,748", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,748", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,751", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,751", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,751", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,755", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,755", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,758", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,758", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,761", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,761", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,764", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,764", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,767", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,767", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 12de6e0627945db17bc993422109d605b7b19c629e267273b3f9414fece32871, Fee: 0.000543210000 XMR (543210000 pico)", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,770", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,771", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,771", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,774", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: f9f812e7...): Failed to get daemon height. Cannot calculate confirmations.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,783", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: f9f812e7...): Skipping entry 0: TXID 12de6e0627945db17bc993422109d605b7b19c629e267273b3f9414fece32871 already processed.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,786", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,789", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,792", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,797", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: f9f812e7...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-11 20:44:24,803", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: f9f812e7...): Found candidate! TXID: 12de6e0627945db17bc993422109d605b7b19c629e267273b3f9414fece32871, Amt: 1.234567890123 XMR, Confs: 11.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,803", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: f9f812e7...): Confirmed payment found.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,806", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,806", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,806", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-11 20:44:24,811", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,811", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,811", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 12de6e0627945db17bc993422109d605b7b19c629e267273b3f9414fece32871, Fee: 0.000678900000 XMR (678900000 pico)", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,814", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,814", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,814", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,814", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,818", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,820", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,821", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,821", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,821", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 20:44:24,825", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,825", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 20:44:24,830", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,831", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,831", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 20:44:24,840", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,840", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,840", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,840", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 12de6e0627945db17bc993422109d605b7b19c629e267273b3f9414fece32871, Fee: 0.000777700000 XMR (777700000 pico)", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,841", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,843", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,843", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,843", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,845", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 12de6e0627945db17bc993422109d605b7b19c629e267273b3f9414fece32871, Fee: 0.000888800000 XMR (888800000 pico)", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,846", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,849", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,850", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,850", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:24,853", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:25,354", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:25,354", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:25,356", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:25,857", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:25,858", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:25,860", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-11 20:44:26,087", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 4: Level=info, Message='Your Order #27c5a385 (Test BTC Product Only) is re...'", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:26,185", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 11: Level=success, Message='Payment confirmed for Order #947fa181 (Test BTC Pr...'", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:26,239", "levelname": "WARNING", "name": "store.validators", "module": "validators", "pathname": "C:\\shadow_market\\backend\\store\\validators.py", "lineno": 150, "message": "Bitcoin address validation for 'tb1qw508d6...' used basic regex ONLY. Checksum not validated. Consider using a dedicated library.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:26,241", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 13: Level=info, Message='Your Order #f7c588ed (Test BTC Product Only) has b...'", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:26,353", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 19: Level=success, Message='Order #1011afb4 (Test BTC Product Only) has been f...'", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:26,354", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 20: Level=success, Message='Order #1011afb4 finalized. Funds (0.00975000 BTC) ...'", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:26,419", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 22: Level=info, Message='Dispute resolved for Order #98781f65. Notes: Full ...'", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:26,419", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 23: Level=info, Message='Dispute resolved for Order #98781f65. Notes: Full ...'", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:26,867", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 46: Level=info, Message='Your Order #d1e4147e (Test XMR Product Only) is re...'", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:27,762", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 10499341-13a4-42b5-92c1-11f0161460f4 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:27,763", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 8c2fc742-e0e0-4dfe-92fe-a618749fa5f5 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:27,764", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #c940b500 (Integration Test Product) has bee...'", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:27,764", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Order #c940b500 finalized. Funds (0.01960000 BTC) ...'", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:27,822", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 6d26c074-c42f-49a3-b8e1-210b0f95fdcf recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:27,823", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 6349ff72-e228-45a1-84af-0a7ed0edf733 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:27,823", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Funds released for Order #52f0e995 (Integration Te...'", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:27,824", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #52f0e995 (Integration Test Product) has bee...'", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:27,932", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 3d97ab6e-232f-4d4f-8273-82ce2127e448 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:27,933", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 54b47a13-9f9b-4057-b8c4-5197e1310799 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:27,933", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=info, Message='Dispute resolved for Order #64e74c6c. Notes: Split...'", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:27,934", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=info, Message='Dispute resolved for Order #64e74c6c. Notes: Split...'", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,037", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,082", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,082", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,083", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,083", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,085", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,085", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,085", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,086", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,087", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,087", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 9001: Level=success, Message='Your withdrawal of 0.47500000 BTC (Fee: 0.02500000...'", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,087", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,128", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,128", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,129", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,129", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,171", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,171", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,171", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,172", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,173", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,173", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,173", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 17656, "thread": 18472, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-11 20:44:28,177", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:44:28,177", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 17656, "thread": 18472}
{"asctime": "2025-04-11 20:46:21,422", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,422", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 4e985ff9-2921-4f43-9d44-373a1511099b recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,433", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction ee195208-5505-42d8-9104-ef5df47bda7f recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,441", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,449", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,455", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,458", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,464", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,468", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,472", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,478", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,482", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,486", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,490", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,494", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,498", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,543", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,543", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction 6f04e2c5-f761-4f19-a90f-859580a6bab4 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,548", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,556", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,562", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,562", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction f9165f8f-468d-4e5a-b054-17b951334ec7 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,568", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,568", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,569", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 3723f5c0-03c8-4c98-ba95-2585cde9e90e recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,573", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,581", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,586", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 7e1923d8-c393-46e0-9886-76f013695fd0 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,593", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction d09967e9-f755-4acb-9a90-b8f9dc56a67e recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,597", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction d91ece07-9ca6-4a6b-932b-4d0ead6d1f50 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,602", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,602", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,602", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,603", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,603", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,603", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,603", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,604", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,608", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,608", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,608", "levelname": "CRITICAL", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 333, "message": "CRITICAL INTERNAL LEDGER INCONSISTENCY [BTC]! Diff: 0.10000000 BTC. LedgerTx Sum: 10.10000000, UserBalance Sum (balance, locked_balance): 10.00000000. REQUIRES MANUAL INVESTIGATION OF TRANSACTIONS.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,609", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,609", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,609", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,614", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,614", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,614", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,614", "levelname": "ERROR", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 365, "message": "Ledger Discrepancy (Node vs Ledger) [BTC]! Diff: -0.10000000 BTC. Node: 9.90000000, Ledger: 10.00000000. INVESTIGATION RECOMMENDED.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,615", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,615", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,615", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,619", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,619", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,620", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,620", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-11 20:46:21,625", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,625", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,628", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,628", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,629", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,629", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,631", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,664", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,766", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,769", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,813", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,815", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,817", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,819", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,821", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,823", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,826", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,826", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-11 20:46:21,830", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,833", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-11 20:46:21,838", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-11 20:46:21,846", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,846", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,848", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-11 20:46:21,853", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-11 20:46:21,857", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,857", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,860", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,862", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,864", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-11 20:46:21,870", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-11 20:46:21,874", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-11 20:46:21,879", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,882", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: f0bed4b0404bee83)...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,882", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: f0bed4b0404bee83): 4LdpnMo9wPESgQ4...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,885", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,885", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,885", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,887", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: f0bed4b0404bee83)...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,887", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: f0bed4b0404bee83): Timeout", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,888", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: f0bed4b0404bee83)...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,889", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: f0bed4b0404bee83): Monero RPC Error (Code: -5): RPC Failed", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,891", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: f0bed4b0404bee83)...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,891", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: f0bed4b0404bee83). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,893", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,893", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,896", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: f0bed4b0404bee83)...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,896", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: f0bed4b0404bee83) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,901", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,901", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,905", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,905", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,907", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,908", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,911", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,911", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,914", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,914", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '68b5d420f12299340ad779a3e9c10aa0db890c59cb6c3d7eebc86ef79b9c30a1be93d62aa414b3b0330a435b01c5ff7228ed185095e71eb606ffc251e84a8aeb740222164c0d1d73db46718ddf4fb9b6a534d9f02a4fc2057c3caabe2bd6a9a6562dc0925cdaf6ec5b78fdc9439e37cb3ecb567d090b9197ab0f65d9d2477d00'}", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,917", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,917", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 25832, "thread": 19760, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-11 20:46:21,921", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,921", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,922", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '733c12cfc8eaca533617e465edc6013c2a7be25107ffafd74f636b383b06c3aba9f36a96996ea08d4c97cab9d9091b75cc10dc4713b5ab7147a21a070217e2c7a015661519c41003933c332d71c034cf52bbd31f0e396b2e73e762f7a36e3e4b50ae21c2c3312d84b5d235d2394d5fbd3e7f65131abcdfcf9df5c8d84dca8ca4d42fd3293ae83517f9293c5256444db9b8a1865b0792e2e68f5ad4ebfd30e551f54276c1e7dad9a1c1f547985d06ea2873b841fdc3b0af79cf34066eb07727a189075addabc3a6a9125e90be2bfbb2bf4978f3f1fe22b7521ed2bde268c862a34095674233ae21a457350772b7d2cd18be8d08b3806bd178ed1d4cbaa9708f12'}", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,922", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 25832, "thread": 19760, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 20:46:21,926", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,926", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,926", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 25832, "thread": 19760, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 20:46:21,929", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,929", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,929", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 25832, "thread": 19760, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 20:46:21,932", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,932", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,947", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,947", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,948", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-11 20:46:21,951", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,951", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,954", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,955", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,955", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,955", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,958", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,958", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,958", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,961", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,961", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,961", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,962", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,964", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,964", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,968", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,969", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,969", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,969", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,971", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,971", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,971", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 20:46:21,975", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,975", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 20:46:21,980", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,980", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,983", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,983", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,983", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-11 20:46:21,986", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,986", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,988", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,988", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,988", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,988", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,990", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,990", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,991", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,991", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,992", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,993", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,993", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: c0d3a535f3ba76c68586463a0c39dd1d3a0cd3858413e29993376f457e0161c6", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,993", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,996", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:21,999", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,002", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,002", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,002", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: c0d3a535f3ba76c68586463a0c39dd1d3a0cd3858413e29993376f457e0161c6", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,006", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,006", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,009", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,010", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,012", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,012", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,012", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,015", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,015", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,019", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,019", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,023", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,023", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,026", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,026", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,029", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,029", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: c0d3a535f3ba76c68586463a0c39dd1d3a0cd3858413e29993376f457e0161c6, Fee: 0.000543210000 XMR (543210000 pico)", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,031", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,032", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,032", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,038", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 5ac4d0d6...): Failed to get daemon height. Cannot calculate confirmations.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,048", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 5ac4d0d6...): Skipping entry 0: TXID c0d3a535f3ba76c68586463a0c39dd1d3a0cd3858413e29993376f457e0161c6 already processed.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,051", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,055", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,058", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,064", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 5ac4d0d6...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-11 20:46:22,069", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 5ac4d0d6...): Found candidate! TXID: c0d3a535f3ba76c68586463a0c39dd1d3a0cd3858413e29993376f457e0161c6, Amt: 1.234567890123 XMR, Confs: 11.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,070", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 5ac4d0d6...): Confirmed payment found.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,074", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,074", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,074", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-11 20:46:22,079", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,079", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,079", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: c0d3a535f3ba76c68586463a0c39dd1d3a0cd3858413e29993376f457e0161c6, Fee: 0.000678900000 XMR (678900000 pico)", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,083", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,083", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,084", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,084", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,087", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,090", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,090", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,090", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,091", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 20:46:22,094", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,094", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 20:46:22,100", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,100", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,101", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 20:46:22,107", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,107", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,108", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,108", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: c0d3a535f3ba76c68586463a0c39dd1d3a0cd3858413e29993376f457e0161c6, Fee: 0.000777700000 XMR (777700000 pico)", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,108", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,113", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,113", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,113", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,114", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: c0d3a535f3ba76c68586463a0c39dd1d3a0cd3858413e29993376f457e0161c6, Fee: 0.000888800000 XMR (888800000 pico)", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,114", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,116", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,117", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,117", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,120", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,620", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,620", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:22,623", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:23,123", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:23,124", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:23,127", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-11 20:46:23,365", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 4: Level=info, Message='Your Order #e6a2a3b5 (Test BTC Product Only) is re...'", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:23,463", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 11: Level=success, Message='Payment confirmed for Order #f8bcf9e3 (Test BTC Pr...'", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:23,515", "levelname": "WARNING", "name": "store.validators", "module": "validators", "pathname": "C:\\shadow_market\\backend\\store\\validators.py", "lineno": 150, "message": "Bitcoin address validation for 'tb1qw508d6...' used basic regex ONLY. Checksum not validated. Consider using a dedicated library.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:23,517", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 13: Level=info, Message='Your Order #6361b0d8 (Test BTC Product Only) has b...'", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:23,625", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 19: Level=success, Message='Order #94c3e107 (Test BTC Product Only) has been f...'", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:23,625", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 20: Level=success, Message='Order #94c3e107 finalized. Funds (0.00975000 BTC) ...'", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:23,682", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 22: Level=info, Message='Dispute resolved for Order #e26ccd47. Notes: Full ...'", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:23,682", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 23: Level=info, Message='Dispute resolved for Order #e26ccd47. Notes: Full ...'", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,089", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 46: Level=info, Message='Your Order #4961fabe (Test XMR Product Only) is re...'", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,690", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 42ba2b05-b58e-46f3-b280-02cb718838d0 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,691", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction e2898c2c-f8a7-4250-a8e1-ee82e6636422 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,692", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #354b6389 (Integration Test Product) has bee...'", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,692", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Order #354b6389 finalized. Funds (0.01960000 BTC) ...'", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,746", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 32e296b4-674d-4da9-99e4-e59e77a12886 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,747", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 103f6bc0-6727-4e16-aa42-a7818387ebd6 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,748", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Funds released for Order #98806532 (Integration Te...'", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,748", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #98806532 (Integration Test Product) has bee...'", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,846", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction cbe51386-3c96-43e4-a28d-064f5e462413 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,847", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 7c35dfce-4f47-4753-948e-2016b19644dc recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,848", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=info, Message='Dispute resolved for Order #a13f20fe. Notes: Split...'", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,848", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=info, Message='Dispute resolved for Order #a13f20fe. Notes: Split...'", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,938", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,976", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,976", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,977", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,978", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,979", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,979", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,980", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,981", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,982", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,982", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 9001: Level=success, Message='Your withdrawal of 0.47500000 BTC (Fee: 0.02500000...'", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:24,982", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:25,018", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:25,018", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:25,019", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:25,019", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:25,058", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:25,058", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:25,058", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:25,059", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:25,059", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:25,060", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:25,060", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 25832, "thread": 19760, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-11 20:46:25,063", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 20:46:25,063", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 25832, "thread": 19760}
{"asctime": "2025-04-11 21:02:22,608", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,609", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction e01719c5-7d50-4785-b72f-6f99606188ad recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,622", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction d1637b61-c99f-480a-b42b-6e8cc1ae28a4 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,644", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,659", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,668", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,677", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,691", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,700", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,705", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,709", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,719", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,727", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,731", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,735", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,740", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,780", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,780", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction 9d98845e-bca0-44eb-a277-643cd891c6fa recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,785", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,793", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,800", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,800", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 0baacc44-1926-47b0-9eaf-565906f246ee recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,805", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,806", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,806", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction f77b4615-d19a-42b9-9b34-fa156de8416a recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,811", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,819", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,826", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 88984803-a403-445e-983c-482314b6bad4 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,833", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 69ef3c02-1af1-4d62-b4dc-172a99b9475e recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,839", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 62969543-1bcd-4ac9-9e1d-fe1d924fa470 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,844", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,844", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,845", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,845", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,845", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,845", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,845", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,846", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,850", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,851", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,852", "levelname": "CRITICAL", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 333, "message": "CRITICAL INTERNAL LEDGER INCONSISTENCY [BTC]! Diff: 0.10000000 BTC. LedgerTx Sum: 10.10000000, UserBalance Sum (balance, locked_balance): 10.00000000. REQUIRES MANUAL INVESTIGATION OF TRANSACTIONS.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,852", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,852", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,853", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,860", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,860", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,860", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,860", "levelname": "ERROR", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 365, "message": "Ledger Discrepancy (Node vs Ledger) [BTC]! Diff: -0.10000000 BTC. Node: 9.90000000, Ledger: 10.00000000. INVESTIGATION RECOMMENDED.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,861", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,861", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,862", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,865", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,865", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,866", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,866", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-11 21:02:22,871", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,871", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,874", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,875", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,875", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,875", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,878", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:22,912", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,030", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,033", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,084", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,087", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,089", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,093", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,095", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,097", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,100", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,100", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-11 21:02:23,104", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,109", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-11 21:02:23,114", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-11 21:02:23,122", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,122", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,125", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-11 21:02:23,131", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-11 21:02:23,136", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,136", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,139", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,142", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,145", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-11 21:02:23,150", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-11 21:02:23,155", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-11 21:02:23,162", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,164", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: a9037f9fbfff2e2d)...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,164", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: a9037f9fbfff2e2d): 4LdpnMo9wPESgQ4...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,167", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,167", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,167", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,170", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: a9037f9fbfff2e2d)...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,170", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: a9037f9fbfff2e2d): Timeout", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,173", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: a9037f9fbfff2e2d)...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,173", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: a9037f9fbfff2e2d): Monero RPC Error (Code: -5): RPC Failed", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,176", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: a9037f9fbfff2e2d)...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,176", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: a9037f9fbfff2e2d). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,178", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,178", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,180", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: a9037f9fbfff2e2d)...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,181", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: a9037f9fbfff2e2d) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,187", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,187", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,192", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,192", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,195", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,195", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,198", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,198", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,202", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,202", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '5a0e21df4378c634228e768bdd80b792a1c54c933d6e831f9d6e792d136b08e3f4ea67293117d04f17ca13aed0b0ae5782ee42c8f0b59e19d0f4907826ae5a91e68dedd8d2a33efda5dbf8921f3384786ac35fcad1305568af59dd97e26f3d4517e29618b12572d47a04cd7b45153816270e253ba3b9a0463f73ec3c7a684e53'}", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,206", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,206", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 13720, "thread": 19740, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-11 21:02:23,210", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,210", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,210", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '8c1f3463f04eaedf4c9b80362741b4fdb7f2f74a9a282179ab776d2b6037f340b3d2b5c9f2a4874d62ede7aeb16a851c57728ea9c662ff679c90f025d4098cc73849781d705874f49ec7661aae689f796dcea78907be7b561f2064f95170c9fbcc1f81d7479c1791c632ad1432c42d53c706902f751828885d8c2aa10d0cc6484a2ee34db872eec734f21c3d3f2549ba98d0aeab2164ce43e281f3dc8c5660ee0c4c522ec76389b42996c42e1c73458ee38405dffe0c9c92b3c475d7a79df1e1051550bebc34eae18507260df39ead0ee35db56db4bdfa9bc5647b989bf9fbbc41d679ac974e60ce48f0d651c21553f885d1711506400947f0aa35f4754f0cae'}", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,210", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 13720, "thread": 19740, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 21:02:23,214", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,214", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,214", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 13720, "thread": 19740, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 21:02:23,219", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,220", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,220", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 13720, "thread": 19740, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 21:02:23,224", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,224", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,244", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,244", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,244", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-11 21:02:23,248", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,248", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,252", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,253", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,253", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,253", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,256", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,257", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,258", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,260", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,261", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,261", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,261", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,266", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,266", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,268", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,268", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,269", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,269", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,271", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,272", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,272", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 21:02:23,274", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,274", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 21:02:23,281", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,281", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,283", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,283", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,284", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-11 21:02:23,288", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,288", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,290", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,290", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,290", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,291", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,294", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,294", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,294", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,294", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,297", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,298", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,298", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 82f7129799b259368435f082d34727268314ed300587b53fe65a565e3e6cc8ea", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,298", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,302", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,308", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,314", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,314", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,315", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 82f7129799b259368435f082d34727268314ed300587b53fe65a565e3e6cc8ea", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,318", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,319", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,323", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,323", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,327", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,327", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,327", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,331", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,331", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,334", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,335", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,338", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,339", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,342", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,343", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,345", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,346", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 82f7129799b259368435f082d34727268314ed300587b53fe65a565e3e6cc8ea, Fee: 0.000543210000 XMR (543210000 pico)", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,349", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,349", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,349", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,354", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: f2551fef...): Failed to get daemon height. Cannot calculate confirmations.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,365", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: f2551fef...): Skipping entry 0: TXID 82f7129799b259368435f082d34727268314ed300587b53fe65a565e3e6cc8ea already processed.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,370", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,373", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,375", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,382", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: f2551fef...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-11 21:02:23,387", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: f2551fef...): Found candidate! TXID: 82f7129799b259368435f082d34727268314ed300587b53fe65a565e3e6cc8ea, Amt: 1.234567890123 XMR, Confs: 11.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,387", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: f2551fef...): Confirmed payment found.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,391", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,391", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,391", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-11 21:02:23,397", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,397", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,397", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 82f7129799b259368435f082d34727268314ed300587b53fe65a565e3e6cc8ea, Fee: 0.000678900000 XMR (678900000 pico)", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,400", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,401", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,401", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,401", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,405", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,408", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,408", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,408", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,409", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 21:02:23,412", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,412", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 21:02:23,418", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,419", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,419", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 21:02:23,426", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,426", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,426", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,426", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 82f7129799b259368435f082d34727268314ed300587b53fe65a565e3e6cc8ea, Fee: 0.000777700000 XMR (777700000 pico)", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,426", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,432", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,432", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,432", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,432", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 82f7129799b259368435f082d34727268314ed300587b53fe65a565e3e6cc8ea, Fee: 0.000888800000 XMR (888800000 pico)", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,432", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,435", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,435", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,436", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,439", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,940", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,940", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:23,943", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:24,443", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:24,443", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:24,446", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-11 21:02:24,683", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 4: Level=info, Message='Your Order #28e12465 (Test BTC Product Only) is re...'", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:24,790", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 11: Level=success, Message='Payment confirmed for Order #02d80103 (Test BTC Pr...'", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:24,848", "levelname": "WARNING", "name": "store.validators", "module": "validators", "pathname": "C:\\shadow_market\\backend\\store\\validators.py", "lineno": 150, "message": "Bitcoin address validation for 'tb1qw508d6...' used basic regex ONLY. Checksum not validated. Consider using a dedicated library.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:24,849", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 13: Level=info, Message='Your Order #9dd66338 (Test BTC Product Only) has b...'", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:24,962", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 19: Level=success, Message='Order #e7cb8448 (Test BTC Product Only) has been f...'", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:24,963", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 20: Level=success, Message='Order #e7cb8448 finalized. Funds (0.00975000 BTC) ...'", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:25,025", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 22: Level=info, Message='Dispute resolved for Order #a1c55741. Notes: Full ...'", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:25,025", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 23: Level=info, Message='Dispute resolved for Order #a1c55741. Notes: Full ...'", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:25,448", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 46: Level=info, Message='Your Order #3b7aa79d (Test XMR Product Only) is re...'", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,064", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 2f0ed16d-0f67-4026-80af-b81ee0991430 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,065", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction ea2437cc-5ff4-4506-b012-9b8df572e007 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,066", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #4c6d8475 (Integration Test Product) has bee...'", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,066", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Order #4c6d8475 finalized. Funds (0.01960000 BTC) ...'", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,120", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 480715e6-2719-4122-8225-73a35725d178 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,121", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 8ac30a7b-fa64-416c-bf42-4b90d54198f9 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,121", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Funds released for Order #ef1b847b (Integration Te...'", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,121", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #ef1b847b (Integration Test Product) has bee...'", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,226", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction a2a7a648-5cce-452b-b250-0d2ea4bde7e8 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,226", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 0e9ec4fc-0c63-4c9c-814f-48b03d4c1ef2 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,227", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=info, Message='Dispute resolved for Order #023bb47e. Notes: Split...'", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,227", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=info, Message='Dispute resolved for Order #023bb47e. Notes: Split...'", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,317", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,358", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,358", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,358", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,359", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,360", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,360", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,360", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,362", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,362", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,362", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 9001: Level=success, Message='Your withdrawal of 0.47500000 BTC (Fee: 0.02500000...'", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,362", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,399", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,400", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,400", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,400", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,438", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,439", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,439", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,439", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,440", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,440", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,440", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 13720, "thread": 19740, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-11 21:02:26,444", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 21:02:26,444", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 13720, "thread": 19740}
{"asctime": "2025-04-11 23:25:35,641", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,642", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 4b4af81e-eaf8-4d6e-bb0c-f7f27534e307 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,650", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction b2364c73-65d0-4ee3-95d7-23ec6c662888 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,655", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,659", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,663", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,666", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,669", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,675", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,679", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,682", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,688", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,691", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,695", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,699", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,702", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,742", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,743", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction 81c632d4-311e-46fb-b67a-9d218deb8653 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,747", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,756", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,761", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,761", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 49cbf953-f469-4535-9dad-c39967c75cf1 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,768", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,768", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,768", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 41b21cf3-73a8-4cb7-b735-3130065fe646 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,773", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,781", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,787", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction c229d055-f179-47f7-90e5-17f63b12b022 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,792", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction dbe2ffb3-ccd5-483f-928c-5704c0777fcb recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,798", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction a8706e06-8154-4449-9b3c-b7fba3a8e7ff recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,802", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,802", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,803", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,803", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,803", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,803", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,803", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,804", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,807", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,807", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,807", "levelname": "CRITICAL", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 333, "message": "CRITICAL INTERNAL LEDGER INCONSISTENCY [BTC]! Diff: 0.10000000 BTC. LedgerTx Sum: 10.10000000, UserBalance Sum (balance, locked_balance): 10.00000000. REQUIRES MANUAL INVESTIGATION OF TRANSACTIONS.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,808", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,808", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,808", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,814", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,814", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,814", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,814", "levelname": "ERROR", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 365, "message": "Ledger Discrepancy (Node vs Ledger) [BTC]! Diff: -0.10000000 BTC. Node: 9.90000000, Ledger: 10.00000000. INVESTIGATION RECOMMENDED.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,815", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,815", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,815", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,818", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,818", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,819", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,819", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-11 23:25:35,826", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,827", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,830", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,830", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,830", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,830", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,833", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,864", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,962", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:35,965", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,005", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,006", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,008", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,010", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,013", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,015", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,017", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,018", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-11 23:25:36,021", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,026", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-11 23:25:36,030", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-11 23:25:36,036", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,036", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,038", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-11 23:25:36,044", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-11 23:25:36,047", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,048", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,050", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,053", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,055", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-11 23:25:36,059", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-11 23:25:36,063", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-11 23:25:36,067", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,069", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 45c01a204ba7156b)...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,069", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 45c01a204ba7156b): 4LdpnMo9wPESgQ4...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,071", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,071", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,071", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,073", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 45c01a204ba7156b)...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,073", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 45c01a204ba7156b): Timeout", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,075", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 45c01a204ba7156b)...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,075", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 45c01a204ba7156b): Monero RPC Error (Code: -5): RPC Failed", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,077", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 45c01a204ba7156b)...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,077", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 45c01a204ba7156b). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,079", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,079", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,081", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 45c01a204ba7156b)...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,082", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 45c01a204ba7156b) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,086", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,086", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,090", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,090", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,093", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,094", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,096", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,096", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,099", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,099", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': 'fc33dcca7fadc37dff391fe20b897ef7a3db5c4248ecb55af834d9adeadcca3faff590d7864eccddc5900b34463e79ff3f5b4c5a152a900234c4fce1186c41762aafc9069885ac2c8a1de16991bc87a566fe12f242ba27e83b161784524e8fc2349380332aa39a3c854a5cd005f43ad8339b15206fbedbec66843052e3f7f7d2'}", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,102", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,102", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 26072, "thread": 15448, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-11 23:25:36,106", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,106", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,106", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '46ae5f71bf2ef9fd6d5347bfd8dafefa9b5c0274d61059040a3b547b715e620c5deb062cbc6abe9a4d5de09dad0c3152313195d6aae9e27dd1aef7d5788d167ca288416ff46f8bc810a1ac036fb8e6e8cd89ba75aacedfb12f4082f6c77020e1244443ee5a9552458856481e4622e41148ca2237064cd1a8da51458487f045be47ca99b1b0593a770c3dfd2c3ff7b3f83cd8f6ae5736c3ca394a04b027ec448d3fa5cffd50be7c91708d397577877f563e714f7a6857958eef4ba1fd1a18aea7065a6ef0dd41eae9add97c941f2cc01047cfabb589215e2cb7f36fe7577e664d776c2f8761057e6372b78c5d32f3d266b995f03b1f50b645a56ac712d5047838'}", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,106", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 26072, "thread": 15448, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 23:25:36,110", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,110", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,111", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 26072, "thread": 15448, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 23:25:36,114", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,114", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,114", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 26072, "thread": 15448, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-11 23:25:36,117", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,117", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,134", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,135", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,135", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-11 23:25:36,137", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,137", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,140", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,141", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,141", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,141", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,145", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,145", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,145", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,148", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,148", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,148", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,149", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,150", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,151", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,153", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,153", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,153", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,153", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,156", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,156", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,156", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 23:25:36,159", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,159", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-11 23:25:36,163", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,163", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,165", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,165", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,166", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-11 23:25:36,169", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,169", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,171", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,172", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,172", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,172", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,175", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,176", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,176", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,176", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,178", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,179", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,179", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 38800f5ad2337004c2f0f7dec1f8138e8f3c0e17677e45a71af77c52c5a22396", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,179", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,184", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,188", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,191", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,191", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,191", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 38800f5ad2337004c2f0f7dec1f8138e8f3c0e17677e45a71af77c52c5a22396", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,194", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,194", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,197", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,197", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,200", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,200", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,200", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,204", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,204", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,207", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,207", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,210", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,210", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,213", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,213", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,216", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,217", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 38800f5ad2337004c2f0f7dec1f8138e8f3c0e17677e45a71af77c52c5a22396, Fee: 0.000543210000 XMR (543210000 pico)", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,220", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,220", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,220", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,224", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: c2afaa2a...): Failed to get daemon height. Cannot calculate confirmations.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,234", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: c2afaa2a...): Skipping entry 0: TXID 38800f5ad2337004c2f0f7dec1f8138e8f3c0e17677e45a71af77c52c5a22396 already processed.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,238", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,241", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,245", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,250", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: c2afaa2a...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-11 23:25:36,256", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: c2afaa2a...): Found candidate! TXID: 38800f5ad2337004c2f0f7dec1f8138e8f3c0e17677e45a71af77c52c5a22396, Amt: 1.234567890123 XMR, Confs: 11.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,256", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: c2afaa2a...): Confirmed payment found.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,259", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,261", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,261", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-11 23:25:36,266", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,266", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,266", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 38800f5ad2337004c2f0f7dec1f8138e8f3c0e17677e45a71af77c52c5a22396, Fee: 0.000678900000 XMR (678900000 pico)", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,269", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,269", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,269", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,270", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,273", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,275", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,275", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,276", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,276", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 23:25:36,278", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,279", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-11 23:25:36,284", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,284", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,284", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-11 23:25:36,291", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,291", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,291", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,291", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 38800f5ad2337004c2f0f7dec1f8138e8f3c0e17677e45a71af77c52c5a22396, Fee: 0.000777700000 XMR (777700000 pico)", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,292", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,296", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,296", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,296", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,296", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 38800f5ad2337004c2f0f7dec1f8138e8f3c0e17677e45a71af77c52c5a22396, Fee: 0.000888800000 XMR (888800000 pico)", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,297", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,300", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,300", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,300", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,303", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,803", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,804", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:36,807", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:37,308", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:37,309", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:37,316", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-11 23:25:37,552", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 4: Level=info, Message='Your Order #0a920907 (Test BTC Product Only) is re...'", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:37,646", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 11: Level=success, Message='Payment confirmed for Order #4b31e7f4 (Test BTC Pr...'", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:37,692", "levelname": "WARNING", "name": "store.validators", "module": "validators", "pathname": "C:\\shadow_market\\backend\\store\\validators.py", "lineno": 150, "message": "Bitcoin address validation for 'tb1qw508d6...' used basic regex ONLY. Checksum not validated. Consider using a dedicated library.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:37,694", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 13: Level=info, Message='Your Order #1df0c8cd (Test BTC Product Only) has b...'", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:37,792", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 19: Level=success, Message='Order #c3b813ee (Test BTC Product Only) has been f...'", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:37,792", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 20: Level=success, Message='Order #c3b813ee finalized. Funds (0.00975000 BTC) ...'", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:37,845", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 22: Level=info, Message='Dispute resolved for Order #c6cec66d. Notes: Full ...'", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:37,846", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 23: Level=info, Message='Dispute resolved for Order #c6cec66d. Notes: Full ...'", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:38,233", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 46: Level=info, Message='Your Order #171f9075 (Test XMR Product Only) is re...'", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:38,810", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction bbf9572a-470d-4c9b-8e33-0827145021c5 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:38,813", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 19bb9394-5ceb-4e71-b42c-a627dc066df5 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:38,813", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #afd2dbeb (Integration Test Product) has bee...'", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:38,813", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Order #afd2dbeb finalized. Funds (0.01960000 BTC) ...'", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:38,863", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction de1baab9-3c15-4df3-ae3f-48f35e23c56d recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:38,864", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 5d12c558-7ae0-44a0-a219-190c7c90fa85 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:38,865", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Funds released for Order #d0d79173 (Integration Te...'", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:38,865", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #d0d79173 (Integration Test Product) has bee...'", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:38,957", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 83f38c34-ad57-4085-bc30-c6d8d4ab31c8 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:38,958", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction e9b88879-0cbe-4378-8be8-862510de35ae recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:38,959", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=info, Message='Dispute resolved for Order #91ea3531. Notes: Split...'", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:38,959", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=info, Message='Dispute resolved for Order #91ea3531. Notes: Split...'", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,043", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,079", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,080", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,080", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,080", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,081", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,081", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,082", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,083", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,083", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,083", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 9001: Level=success, Message='Your withdrawal of 0.47500000 BTC (Fee: 0.02500000...'", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,083", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,116", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,117", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,117", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,117", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,151", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,152", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,152", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,153", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,153", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,153", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,154", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 26072, "thread": 15448, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-11 23:25:39,157", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 26072, "thread": 15448}
{"asctime": "2025-04-11 23:25:39,158", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 26072, "thread": 15448}
{"asctime": "2025-04-12 20:34:31,023", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,023", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 8c431833-1d02-4220-8c3e-1eb80869a253 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,031", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction de0ca560-dd1e-49e8-9fb6-a109eeb1b62c recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,035", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,038", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,044", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,046", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,050", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,054", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,059", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,061", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,065", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,069", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,072", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,075", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,079", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,117", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,117", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction ed152920-2d7c-47d0-b791-5f5a2e28343c recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,122", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,130", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,136", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,136", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction d1da27d8-34aa-45d8-9b7e-724faa54c91e recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,142", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,142", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,142", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction e9462a9d-0e1d-4ff1-bf01-37f1b3e0cefe recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,147", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,154", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,159", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 1872ec0f-43e4-408b-b9f6-aeb33ce4de83 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,165", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 986b5360-f065-4223-ae6a-fc6ee30ae0ed recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,171", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 23fbafb1-3890-49f4-9b19-c1067d4d06b9 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,175", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,176", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,176", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,176", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,176", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,177", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,177", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,177", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,181", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,181", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,181", "levelname": "CRITICAL", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 333, "message": "CRITICAL INTERNAL LEDGER INCONSISTENCY [BTC]! Diff: 0.10000000 BTC. LedgerTx Sum: 10.10000000, UserBalance Sum (balance, locked_balance): 10.00000000. REQUIRES MANUAL INVESTIGATION OF TRANSACTIONS.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,182", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,182", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,182", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,187", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,188", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,188", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,188", "levelname": "ERROR", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 365, "message": "Ledger Discrepancy (Node vs Ledger) [BTC]! Diff: -0.10000000 BTC. Node: 9.90000000, Ledger: 10.00000000. INVESTIGATION RECOMMENDED.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,188", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,189", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,189", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,192", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,192", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,193", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,193", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-12 20:34:31,220", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,220", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,224", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,224", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,224", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,224", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,226", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,260", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,363", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,366", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,434", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,437", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,441", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,445", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,447", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,449", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,452", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,452", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-12 20:34:31,454", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,458", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-12 20:34:31,461", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-12 20:34:31,467", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,468", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,470", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-12 20:34:31,474", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-12 20:34:31,477", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,478", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,480", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,482", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,484", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-12 20:34:31,488", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-12 20:34:31,491", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-12 20:34:31,496", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,498", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 0316b93ae223e2be)...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,498", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 0316b93ae223e2be): 4LdpnMo9wPESgQ4...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,500", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,500", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,500", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,502", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 0316b93ae223e2be)...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,502", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 0316b93ae223e2be): Timeout", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,504", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 0316b93ae223e2be)...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,504", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 0316b93ae223e2be): Monero RPC Error (Code: -5): RPC Failed", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,506", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 0316b93ae223e2be)...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,506", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 0316b93ae223e2be). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,507", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,508", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,509", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 0316b93ae223e2be)...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,509", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 0316b93ae223e2be) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,513", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,513", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,516", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,517", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,519", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,519", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,522", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,522", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,525", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,525", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': 'aa76c4764f6fa1ad0e77f62a7cfb6efb44efd572484365f51a4a89cb6aa864cef3ec72e8414688c32f47d7bdaf8240c2f592ac6e14efc4ba49062fed04c7e5e87fef684c0bd4d9b1c5d76b858dc3172c7234feb46103590cc28c6e17f6087b6a80e81157921e787b326cf1f03289f5f081b84fc51f0fff35f14b6b5bb6f71f1c'}", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,529", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,529", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 31516, "thread": 22028, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-12 20:34:31,533", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,533", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,533", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '7a6f471d6ff10695a69c71f118de45a52e8acb53deabc900eb3971afc3d6d21528fffbfd9ea28219d771da82a16413dd53d88c8419e62b0c2196062119dc678eb83354632377d894e124fe46c6caa38b788a1b94d7b368e060cddcd44f276d3f7cf325665295eb3a10f6e5107b8d200b56af2bc165beaff54cfe4d18cc0bc6da3982ee9f175b860b753cf00f88f7e149b2e818ae3093c0f75824c5a4ee0edd947c24d95ee15cf38c05887de7baa67a072b308dc16d79f3d03b058f73461462e96229883ea37e2918cdf9b2628578e57214eb1527b13304f21b9781845556e8a79d8edfbefac73d200b2811a3d59f213026857ae2863cec42fb416c8dac9dc329'}", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,533", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 31516, "thread": 22028, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:34:31,537", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,537", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,537", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 31516, "thread": 22028, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:34:31,540", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,540", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,540", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 31516, "thread": 22028, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:34:31,544", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,544", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,560", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,560", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,560", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-12 20:34:31,564", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,564", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,567", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,567", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,567", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,567", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,571", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,571", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,571", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,574", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,574", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,574", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,574", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,576", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,576", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,578", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,579", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,579", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,579", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,582", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,582", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,583", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-12 20:34:31,585", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,585", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-12 20:34:31,589", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,589", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,591", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,591", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,591", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-12 20:34:31,594", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,594", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,595", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,596", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,596", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,596", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,598", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,599", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,599", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,599", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,601", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,601", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,601", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 626e767d38b1a496ad5f605135b6c14b9396a9742e37466056b4c63328512e26", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,601", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,604", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,607", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,610", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,610", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,610", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 626e767d38b1a496ad5f605135b6c14b9396a9742e37466056b4c63328512e26", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,613", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,613", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,616", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,616", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,619", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,619", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,619", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,623", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,623", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,625", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,626", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,629", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,630", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,633", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,633", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,636", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,636", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 626e767d38b1a496ad5f605135b6c14b9396a9742e37466056b4c63328512e26, Fee: 0.000543210000 XMR (543210000 pico)", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,639", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,640", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,640", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,645", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: c0a7b265...): Failed to get daemon height. Cannot calculate confirmations.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,654", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: c0a7b265...): Skipping entry 0: TXID 626e767d38b1a496ad5f605135b6c14b9396a9742e37466056b4c63328512e26 already processed.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,659", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,662", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,664", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,671", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: c0a7b265...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-12 20:34:31,676", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: c0a7b265...): Found candidate! TXID: 626e767d38b1a496ad5f605135b6c14b9396a9742e37466056b4c63328512e26, Amt: 1.234567890123 XMR, Confs: 11.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,677", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: c0a7b265...): Confirmed payment found.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,680", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,680", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,680", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-12 20:34:31,685", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,685", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,685", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 626e767d38b1a496ad5f605135b6c14b9396a9742e37466056b4c63328512e26, Fee: 0.000678900000 XMR (678900000 pico)", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,688", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,688", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,688", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,688", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,692", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,694", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,694", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,695", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,695", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-12 20:34:31,698", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,699", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-12 20:34:31,705", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,706", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,706", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-12 20:34:31,728", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,728", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,728", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,728", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 626e767d38b1a496ad5f605135b6c14b9396a9742e37466056b4c63328512e26, Fee: 0.000777700000 XMR (777700000 pico)", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,728", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,732", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,732", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,733", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,733", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 626e767d38b1a496ad5f605135b6c14b9396a9742e37466056b4c63328512e26, Fee: 0.000888800000 XMR (888800000 pico)", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,733", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,735", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,736", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,737", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:31,739", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:32,240", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:32,241", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:32,246", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:32,748", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:32,748", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:32,753", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-12 20:34:32,967", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 4: Level=info, Message='Your Order #a1a229bc (Test BTC Product Only) is re...'", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:33,053", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 11: Level=success, Message='Payment confirmed for Order #36883d88 (Test BTC Pr...'", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:33,099", "levelname": "WARNING", "name": "store.validators", "module": "validators", "pathname": "C:\\shadow_market\\backend\\store\\validators.py", "lineno": 150, "message": "Bitcoin address validation for 'tb1qw508d6...' used basic regex ONLY. Checksum not validated. Consider using a dedicated library.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:33,100", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 13: Level=info, Message='Your Order #04f42c9f (Test BTC Product Only) has b...'", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:33,191", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 19: Level=success, Message='Order #cd46735b (Test BTC Product Only) has been f...'", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:33,192", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 20: Level=success, Message='Order #cd46735b finalized. Funds (0.00975000 BTC) ...'", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:33,242", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 22: Level=info, Message='Dispute resolved for Order #e464b601. Notes: Full ...'", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:33,242", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 23: Level=info, Message='Dispute resolved for Order #e464b601. Notes: Full ...'", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:33,612", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 46: Level=info, Message='Your Order #fd253903 (Test XMR Product Only) is re...'", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,185", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 5899abe5-b601-4075-ae9b-753d852b85eb recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,185", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 9b7fd0ee-e0ea-4082-84c6-6e7227c32f33 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,186", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #20e555ff (Integration Test Product) has bee...'", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,186", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Order #20e555ff finalized. Funds (0.01960000 BTC) ...'", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,236", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 55f2bf4a-2a2f-4990-99ba-86c2e0c851ee recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,237", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 7a86a967-f35f-4ee8-8270-742636f69058 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,237", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Funds released for Order #fb2d7cd6 (Integration Te...'", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,237", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #fb2d7cd6 (Integration Test Product) has bee...'", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,325", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 916849f2-e0ba-4e3d-a8cc-3a008d22fa91 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,326", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 44f6caaf-ca10-4009-a14e-d73cfe1c8c94 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,326", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=info, Message='Dispute resolved for Order #1788df11. Notes: Split...'", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,327", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=info, Message='Dispute resolved for Order #1788df11. Notes: Split...'", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,405", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,442", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,442", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,442", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,443", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,444", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,444", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,444", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,445", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,445", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,446", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 9001: Level=success, Message='Your withdrawal of 0.47500000 BTC (Fee: 0.02500000...'", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,446", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,474", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,474", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,474", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,474", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,510", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,510", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,511", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,511", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,512", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,512", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,512", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 31516, "thread": 22028, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-12 20:34:34,515", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:34:34,515", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 31516, "thread": 22028}
{"asctime": "2025-04-12 20:37:56,314", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,314", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 0c186471-5bb7-4476-a4b9-73e502dca784 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,323", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 83ffbfaa-2d55-4c97-bc46-e1641fa40360 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,326", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,330", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,335", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,342", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,346", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,349", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,353", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,358", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,362", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,365", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,368", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,371", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,374", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,413", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,413", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction 1a077582-76ff-4dc6-8a64-fdc53f75e5fc recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,418", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,425", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,430", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,431", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 56f1f529-e4d7-465a-b6f7-7a8a24747f2d recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,436", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,436", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,436", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction db9288d8-efb8-4a3a-b63a-e3241b1a0b78 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,441", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,447", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,452", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction e66e4403-e7cb-4c1a-833b-fb91b4d88de8 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,457", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction b25ade94-c9eb-4add-8224-bb9cc7bfb53e recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,462", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction a67cc224-4598-4729-91c5-4b914dae4e86 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,466", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,467", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,467", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,467", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,468", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,468", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,468", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,468", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,472", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,472", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,472", "levelname": "CRITICAL", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 333, "message": "CRITICAL INTERNAL LEDGER INCONSISTENCY [BTC]! Diff: 0.10000000 BTC. LedgerTx Sum: 10.10000000, UserBalance Sum (balance, locked_balance): 10.00000000. REQUIRES MANUAL INVESTIGATION OF TRANSACTIONS.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,474", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,474", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,475", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,478", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,478", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,479", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,480", "levelname": "ERROR", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 365, "message": "Ledger Discrepancy (Node vs Ledger) [BTC]! Diff: -0.10000000 BTC. Node: 9.90000000, Ledger: 10.00000000. INVESTIGATION RECOMMENDED.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,480", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,480", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,481", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,484", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,484", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,485", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,485", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-12 20:37:56,490", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,491", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,494", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,495", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,495", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,495", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,498", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,526", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,616", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,620", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,660", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,662", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,664", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,666", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,667", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,669", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,671", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,672", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-12 20:37:56,675", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,679", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-12 20:37:56,683", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-12 20:37:56,687", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,687", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,689", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-12 20:37:56,693", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-12 20:37:56,696", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,696", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,699", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,702", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,704", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-12 20:37:56,709", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-12 20:37:56,714", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-12 20:37:56,717", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,720", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: eab16c298e5ba1e8)...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,720", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: eab16c298e5ba1e8): 4LdpnMo9wPESgQ4...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,723", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,723", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,723", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,725", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: eab16c298e5ba1e8)...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,725", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: eab16c298e5ba1e8): Timeout", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,727", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: eab16c298e5ba1e8)...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,727", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: eab16c298e5ba1e8): Monero RPC Error (Code: -5): RPC Failed", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,732", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: eab16c298e5ba1e8)...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,733", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: eab16c298e5ba1e8). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,734", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,735", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,737", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: eab16c298e5ba1e8)...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,738", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: eab16c298e5ba1e8) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,741", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,741", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,744", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,744", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,747", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,747", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,749", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,749", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,752", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,752", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': 'eaf8094f9140031406d9b4eac99a4596e5f77b66a78af727612902a046bf9474d7a68da3877cb933736f1336739ddf9acf7256c225a754015cffccb10d0c759e5536c0de406ead27d7770b5444b5d0e280410f59ef002b1553df6a15600a2453df093640f3d40a64a9946dd9fac5c02848cb14b35109fa19d4d8af297af61730'}", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,755", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,756", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 29664, "thread": 28596, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-12 20:37:56,758", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,758", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,759", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '8b38dec4636fbb58132d889cba58248e936d88302873e8d9f7d6351f315993080311d5ef8a6fef94393e8656f302cc3969ddb4ba959f344cff81562b4847df0ac3663139c0ec50c9afbce5c85f3cc745c4fc4566cb5aa54e022bb95160403df4e9fd9d2aae83dbce838efbcd0b60511b5cbe778674816ecd3de34b573ac0b384271ace7564e7b33441bfb26ef67c6a1931233aed7357911196f6cbebd041575e1983655d59ff3bdab6d02e3d2101a6898c384593d96aebc054b887a831722af81babd504be8e61b581b23cc013c781a633844d0f4821add92e8be9309ea93816383df869189e9cdb6f879c527355841731a5bb3859837814dcca95d657a6ca7e'}", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,759", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 29664, "thread": 28596, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:37:56,762", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,762", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,762", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 29664, "thread": 28596, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:37:56,766", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,766", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,766", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 29664, "thread": 28596, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:37:56,769", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,769", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,783", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,783", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,783", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-12 20:37:56,786", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,786", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,790", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,790", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,790", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,790", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,795", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,795", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,796", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,799", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,799", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,799", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,799", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,802", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,802", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,804", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,805", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,805", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,805", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,808", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,808", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,808", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-12 20:37:56,811", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,811", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-12 20:37:56,815", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,815", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,816", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,817", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,817", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-12 20:37:56,819", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,819", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,821", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,821", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,821", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,821", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,824", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,824", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,824", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,824", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,826", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,826", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,826", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 6f903483fc57a62b30d029930851f0e5e6b8ef4c4b8ce14b3dc5af1cc8a927e2", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,826", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,829", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,832", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,836", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,836", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,836", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 6f903483fc57a62b30d029930851f0e5e6b8ef4c4b8ce14b3dc5af1cc8a927e2", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,839", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,840", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,842", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,842", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,845", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,845", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,845", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,849", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,849", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,852", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,852", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,855", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,856", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,859", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,859", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,861", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,862", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 6f903483fc57a62b30d029930851f0e5e6b8ef4c4b8ce14b3dc5af1cc8a927e2, Fee: 0.000543210000 XMR (543210000 pico)", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,864", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,864", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,864", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,867", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 2f0c9b1d...): Failed to get daemon height. Cannot calculate confirmations.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,875", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 2f0c9b1d...): Skipping entry 0: TXID 6f903483fc57a62b30d029930851f0e5e6b8ef4c4b8ce14b3dc5af1cc8a927e2 already processed.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,877", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,880", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,883", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,889", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 2f0c9b1d...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-12 20:37:56,894", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 2f0c9b1d...): Found candidate! TXID: 6f903483fc57a62b30d029930851f0e5e6b8ef4c4b8ce14b3dc5af1cc8a927e2, Amt: 1.234567890123 XMR, Confs: 11.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,894", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 2f0c9b1d...): Confirmed payment found.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,897", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,898", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,898", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-12 20:37:56,903", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,903", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,903", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 6f903483fc57a62b30d029930851f0e5e6b8ef4c4b8ce14b3dc5af1cc8a927e2, Fee: 0.000678900000 XMR (678900000 pico)", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,906", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,907", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,907", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,907", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,910", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,912", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,912", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,913", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,913", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-12 20:37:56,916", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,916", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-12 20:37:56,922", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,922", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,922", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-12 20:37:56,931", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,931", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,931", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,931", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 6f903483fc57a62b30d029930851f0e5e6b8ef4c4b8ce14b3dc5af1cc8a927e2, Fee: 0.000777700000 XMR (777700000 pico)", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,931", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,934", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,935", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,935", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,935", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 6f903483fc57a62b30d029930851f0e5e6b8ef4c4b8ce14b3dc5af1cc8a927e2, Fee: 0.000888800000 XMR (888800000 pico)", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,935", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,939", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,939", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,939", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:56,942", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:57,443", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:57,443", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:57,447", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:57,948", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:57,949", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:57,955", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-12 20:37:58,161", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 4: Level=info, Message='Your Order #09a42abb (Test BTC Product Only) is re...'", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:58,253", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 11: Level=success, Message='Payment confirmed for Order #6f9bd867 (Test BTC Pr...'", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:58,300", "levelname": "WARNING", "name": "store.validators", "module": "validators", "pathname": "C:\\shadow_market\\backend\\store\\validators.py", "lineno": 150, "message": "Bitcoin address validation for 'tb1qw508d6...' used basic regex ONLY. Checksum not validated. Consider using a dedicated library.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:58,301", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 13: Level=info, Message='Your Order #1faae534 (Test BTC Product Only) has b...'", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:58,395", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 19: Level=success, Message='Order #afc447b6 (Test BTC Product Only) has been f...'", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:58,395", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 20: Level=success, Message='Order #afc447b6 finalized. Funds (0.00975000 BTC) ...'", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:58,445", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 22: Level=info, Message='Dispute resolved for Order #88c33ca1. Notes: Full ...'", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:58,446", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 23: Level=info, Message='Dispute resolved for Order #88c33ca1. Notes: Full ...'", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:58,810", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 46: Level=info, Message='Your Order #3319c214 (Test XMR Product Only) is re...'", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,352", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 7e02abc6-1d37-4ffe-9f92-0d4f26540e38 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,355", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 53e1a6ce-ae8c-44b9-be74-08f40bab547d recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,356", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #a8a9cefb (Integration Test Product) has bee...'", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,356", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Order #a8a9cefb finalized. Funds (0.01960000 BTC) ...'", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,408", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 59be531a-b781-4a50-bfc3-05ed27704034 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,409", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction ab9ede11-e28d-41a4-9a93-9b0e9f05216c recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,409", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Funds released for Order #e0dcf6cc (Integration Te...'", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,410", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #e0dcf6cc (Integration Test Product) has bee...'", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,524", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 955af27d-47cc-4af9-a654-ebb95ac6d5d0 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,526", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 7f69bb23-2ec8-47de-b086-5dab16f5ce13 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,527", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=info, Message='Dispute resolved for Order #d38ca724. Notes: Split...'", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,527", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=info, Message='Dispute resolved for Order #d38ca724. Notes: Split...'", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,608", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,648", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,648", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,648", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,649", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,650", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,650", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,650", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,651", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,651", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,651", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 9001: Level=success, Message='Your withdrawal of 0.47500000 BTC (Fee: 0.02500000...'", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,651", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,681", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,681", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,681", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,682", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,717", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,718", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,718", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,718", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,719", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,719", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,719", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 29664, "thread": 28596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-12 20:37:59,722", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:37:59,723", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 29664, "thread": 28596}
{"asctime": "2025-04-12 20:41:17,696", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,696", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 486e3ca3-14de-4633-9f02-f8d449d99083 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,705", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 2ff99362-4b52-41fe-a125-e7bfb5ee0cf7 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,709", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,716", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,720", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,723", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,726", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,730", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,734", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,737", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,740", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,743", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,747", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,750", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,752", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,787", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,787", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction 5e93fda2-6927-4392-b627-639d9a5aa115 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,792", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,801", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,806", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,806", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 8b5bdc78-41c5-4117-ae40-e198d5a662e8 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,811", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,811", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,812", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction ee487c03-9684-42c9-82d9-c73c78fa8ab4 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,816", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,823", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,829", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction edc77fc6-a73e-4ddb-a5f2-d56ab999da25 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,834", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 6e5bdd77-f8e0-444b-a13a-78383f10ef70 recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,839", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 0268b5e6-c919-4e03-b9bc-9d025b7aa062 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,843", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,843", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,844", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,844", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,844", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,844", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,844", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,845", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,848", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,849", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,849", "levelname": "CRITICAL", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 333, "message": "CRITICAL INTERNAL LEDGER INCONSISTENCY [BTC]! Diff: 0.10000000 BTC. LedgerTx Sum: 10.10000000, UserBalance Sum (balance, locked_balance): 10.00000000. REQUIRES MANUAL INVESTIGATION OF TRANSACTIONS.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,850", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,850", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,850", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,855", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,855", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,855", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,855", "levelname": "ERROR", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 365, "message": "Ledger Discrepancy (Node vs Ledger) [BTC]! Diff: -0.10000000 BTC. Node: 9.90000000, Ledger: 10.00000000. INVESTIGATION RECOMMENDED.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,856", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,856", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,856", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,859", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,859", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,860", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,860", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-12 20:41:17,864", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,865", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,868", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,868", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,869", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,869", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,871", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,900", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,991", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:17,993", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,031", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,033", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,034", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,037", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,038", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,039", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,042", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,042", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-12 20:41:18,045", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,050", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-12 20:41:18,054", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-12 20:41:18,060", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,060", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,062", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-12 20:41:18,066", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-12 20:41:18,071", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,071", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,073", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,075", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,077", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-12 20:41:18,081", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-12 20:41:18,085", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-12 20:41:18,090", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,093", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 68ebd3e2e88a713f)...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,093", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 68ebd3e2e88a713f): 4LdpnMo9wPESgQ4...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,096", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,096", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,096", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,098", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 68ebd3e2e88a713f)...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,098", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 68ebd3e2e88a713f): Timeout", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,099", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 68ebd3e2e88a713f)...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,099", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 68ebd3e2e88a713f): Monero RPC Error (Code: -5): RPC Failed", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,101", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 68ebd3e2e88a713f)...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,101", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 68ebd3e2e88a713f). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,103", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,103", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,105", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 68ebd3e2e88a713f)...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,105", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 68ebd3e2e88a713f) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,110", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,110", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,114", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,114", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,116", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,116", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,118", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,119", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,122", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,122", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '5595a0edca66555f3e28c10b748ee26bbec5d4eea5fb45e9161fa2bd1c3ca5294078f4ed3b857119bc33244e7fff0ff4c8a2e225bf13aa0f67d85eee991cf21eeaf416f84a6956d53e1f72d37d19bbfcdb281ddb4d74ad7f224638d73958b14ef520ede8dbabaa37988f402ad99a4451fd6348e7b917b416469fe0c832218402'}", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,125", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,125", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 31184, "thread": 33004, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-12 20:41:18,128", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,128", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,128", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': 'b40787d15e27065a168c877258e88d7dbcd2ea7ef9a363a0957233075178e6f513aaee5efa0c5ccde7a2948a2a536d60f3a2177099804b609843342810f3490c58874cca6a3779c35c79a98b849f83506549b551b4d42bda9d97ac74400ddce9be19e37c64a15bac272353aa2cb98b48b21d385a5a257fab91b92397e741680d96cc3a14bf7f3ab196326d4fa42f6b2d32161eaf218ae281eca70707e0fec8f3efc79eec0ff7917a440861b0500125a3ca3ff8303a164358a32ab47c144707160db55127c28b77f664d290d7d0ad7f008d980fd33c0a7aaf4910e161d778ef5855b20c26522ae7c7212f93d1ba937fb684a7155100b81caf965bcba6d5d3ce18'}", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,128", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 31184, "thread": 33004, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:41:18,131", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,131", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,131", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 31184, "thread": 33004, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:41:18,133", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,134", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,134", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 31184, "thread": 33004, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:41:18,136", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,136", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,152", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,152", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,152", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-12 20:41:18,156", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,156", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,159", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,159", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,160", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,160", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,164", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,164", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,165", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,167", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,168", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,168", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,168", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,171", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,171", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,173", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,173", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,174", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,174", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,176", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,176", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,176", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-12 20:41:18,179", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,179", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-12 20:41:18,184", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,184", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,186", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,187", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,187", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-12 20:41:18,189", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,190", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,192", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,192", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,192", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,192", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,195", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,195", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,196", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,196", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,199", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,199", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,200", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 3e689ab03b30dfdf0c77df93690fa1e6edfd49e03b9f47de408d8d638eb3f81d", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,200", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,203", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,206", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,208", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,208", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,208", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 3e689ab03b30dfdf0c77df93690fa1e6edfd49e03b9f47de408d8d638eb3f81d", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,212", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,212", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,215", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,215", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,218", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,218", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,218", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,221", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,221", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,225", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,225", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,228", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,228", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,232", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,232", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,235", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,235", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 3e689ab03b30dfdf0c77df93690fa1e6edfd49e03b9f47de408d8d638eb3f81d, Fee: 0.000543210000 XMR (543210000 pico)", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,238", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,238", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,238", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,241", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 100b8e72...): Failed to get daemon height. Cannot calculate confirmations.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,251", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 100b8e72...): Skipping entry 0: TXID 3e689ab03b30dfdf0c77df93690fa1e6edfd49e03b9f47de408d8d638eb3f81d already processed.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,253", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,256", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,258", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,265", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 100b8e72...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-12 20:41:18,269", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 100b8e72...): Found candidate! TXID: 3e689ab03b30dfdf0c77df93690fa1e6edfd49e03b9f47de408d8d638eb3f81d, Amt: 1.234567890123 XMR, Confs: 11.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,269", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 100b8e72...): Confirmed payment found.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,273", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,273", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,273", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-12 20:41:18,278", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,278", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,278", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 3e689ab03b30dfdf0c77df93690fa1e6edfd49e03b9f47de408d8d638eb3f81d, Fee: 0.000678900000 XMR (678900000 pico)", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,280", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,281", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,281", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,281", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,284", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,286", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,286", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,286", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,286", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-12 20:41:18,288", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,289", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-12 20:41:18,294", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,294", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,294", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-12 20:41:18,301", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,301", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,301", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,302", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 3e689ab03b30dfdf0c77df93690fa1e6edfd49e03b9f47de408d8d638eb3f81d, Fee: 0.000777700000 XMR (777700000 pico)", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,302", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,306", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,306", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,307", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,307", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 3e689ab03b30dfdf0c77df93690fa1e6edfd49e03b9f47de408d8d638eb3f81d, Fee: 0.000888800000 XMR (888800000 pico)", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,307", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,311", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,311", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,311", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,314", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,815", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,816", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:18,821", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:19,323", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:19,323", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:19,330", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-12 20:41:19,562", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 4: Level=info, Message='Your Order #1c923c3e (Test BTC Product Only) is re...'", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:19,649", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 11: Level=success, Message='Payment confirmed for Order #e368cbc4 (Test BTC Pr...'", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:19,694", "levelname": "WARNING", "name": "store.validators", "module": "validators", "pathname": "C:\\shadow_market\\backend\\store\\validators.py", "lineno": 150, "message": "Bitcoin address validation for 'tb1qw508d6...' used basic regex ONLY. Checksum not validated. Consider using a dedicated library.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:19,695", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 13: Level=info, Message='Your Order #8a0a31f8 (Test BTC Product Only) has b...'", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:19,788", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 19: Level=success, Message='Order #fce2b780 (Test BTC Product Only) has been f...'", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:19,789", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 20: Level=success, Message='Order #fce2b780 finalized. Funds (0.00975000 BTC) ...'", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:19,839", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 22: Level=info, Message='Dispute resolved for Order #4f5f338c. Notes: Full ...'", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:19,839", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 23: Level=info, Message='Dispute resolved for Order #4f5f338c. Notes: Full ...'", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:20,203", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 46: Level=info, Message='Your Order #ade9f5ba (Test XMR Product Only) is re...'", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:20,757", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 0bd6c023-cee1-400b-92e6-8e4351c46b88 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:20,760", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction abb327b5-9196-4806-b350-53b4172d13dc recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:20,760", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #7a5c574e (Integration Test Product) has bee...'", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:20,760", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Order #7a5c574e finalized. Funds (0.01960000 BTC) ...'", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:20,810", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 84c7e476-e443-4e98-ac3b-c7859fd5260c recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:20,811", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction fa2c3229-8eff-48d7-8360-0007713d84c1 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:20,811", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Funds released for Order #01d90181 (Integration Te...'", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:20,811", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #01d90181 (Integration Test Product) has bee...'", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:20,901", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction d411d375-ccb3-4d34-b0c0-51f0497aa7fb recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:20,902", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction b3e99953-743f-4c55-b336-7b306a6d9ab9 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:20,902", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=info, Message='Dispute resolved for Order #c600cd43. Notes: Split...'", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:20,903", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=info, Message='Dispute resolved for Order #c600cd43. Notes: Split...'", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:20,982", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,018", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,018", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,018", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,019", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,020", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,020", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,020", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,021", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,021", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,021", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 9001: Level=success, Message='Your withdrawal of 0.47500000 BTC (Fee: 0.02500000...'", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,021", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,050", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,051", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,051", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,051", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,087", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,087", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,087", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,087", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,088", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,088", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,088", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 31184, "thread": 33004, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-12 20:41:21,091", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:41:21,091", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 31184, "thread": 33004}
{"asctime": "2025-04-12 20:43:14,211", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,211", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction b08a8832-189b-46ea-928e-919436e3faf5 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,220", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction a019708c-d417-4ee1-8b1a-8326de53dabc recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,223", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,227", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,230", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,233", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,236", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,240", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,244", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,248", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,252", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,255", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,259", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,262", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,265", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,297", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,298", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction 30ed8e92-7a17-49c9-8771-e113e46a3ee1 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,301", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,309", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,315", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,316", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 1101f448-658e-41fd-8743-bbf940cb2fce recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,320", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,320", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,320", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction ef7a39b1-f4af-4e63-875a-f3af9c7ec0b5 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,324", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,331", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,337", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction ec154e70-d570-4e48-b4ac-d1a4a890827a recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,343", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 6bdf74cd-a91c-4311-9bb1-1cc4de08748d recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,349", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 7ee5932f-526d-4bf6-b337-398d7a388a29 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,353", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,353", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,354", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,354", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,354", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,354", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,354", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,355", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,358", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,358", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,359", "levelname": "CRITICAL", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 333, "message": "CRITICAL INTERNAL LEDGER INCONSISTENCY [BTC]! Diff: 0.10000000 BTC. LedgerTx Sum: 10.10000000, UserBalance Sum (balance, locked_balance): 10.00000000. REQUIRES MANUAL INVESTIGATION OF TRANSACTIONS.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,361", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,362", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,362", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,365", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,366", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,366", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,366", "levelname": "ERROR", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 365, "message": "Ledger Discrepancy (Node vs Ledger) [BTC]! Diff: -0.10000000 BTC. Node: 9.90000000, Ledger: 10.00000000. INVESTIGATION RECOMMENDED.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,366", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,366", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,367", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,371", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,371", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,371", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,371", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-12 20:43:14,376", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,377", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,380", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,380", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,380", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,380", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,383", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,414", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,504", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,506", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,550", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,552", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,554", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,555", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,557", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,558", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,561", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,561", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-12 20:43:14,564", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,569", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-12 20:43:14,573", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-12 20:43:14,580", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,580", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,582", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-12 20:43:14,586", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-12 20:43:14,591", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,592", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,595", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,597", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,601", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-12 20:43:14,605", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-12 20:43:14,609", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-12 20:43:14,614", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,619", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: b03dd644481139b2)...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,619", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: b03dd644481139b2): 4LdpnMo9wPESgQ4...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,622", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,622", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,622", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,626", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: b03dd644481139b2)...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,626", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: b03dd644481139b2): Timeout", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,629", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: b03dd644481139b2)...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,629", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: b03dd644481139b2): Monero RPC Error (Code: -5): RPC Failed", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,633", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: b03dd644481139b2)...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,634", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: b03dd644481139b2). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,636", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,636", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,638", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: b03dd644481139b2)...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,639", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: b03dd644481139b2) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,643", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,643", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,648", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,648", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,650", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,651", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,653", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,654", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,657", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,657", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': 'ebebc4acaabb2c114caf5044f5c645746fde914a821534403da323fea8b53e78cee0ca3dbafbe55f1d75b77cead1a270d9d3407a1a4fdfd760dca3390d2f58cdbbf8c36c87ad72c587ec4d9f6717504116e614cbeb69574c2b3033e6152c354cdf0bf8c43a74edbd7acafdcb3d9346c65422d7a0eebb646d8ca71b3fe6f7eaa5'}", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,662", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,662", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 31948, "thread": 32512, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-12 20:43:14,666", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,666", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,666", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '412556264cb4d40c5357eb7f3a17cc20270153ad378ad31dcb5774d88bb0e4846b3a09b5df6befc59dceb08cde37905a360a07e2002dcb5678e0bfe7981bcdc6292a20baca7ea08e4759a3395f248997028ee0a8c923819a07541f5af7cabd80af0c573bfe97a613cfee67f7d990533d5023fca0a7ead95d449a1503d184e7afee98c57d05fdd592c351bccad875ceb7d4f14a1e8b3b1a00029ed1be7e7608a5db0f171de18fb105be1eced395090eb975ed280f74888d57658d42d881c9322da2d59c8ec6ff173238002376ce7fde30a011e4263fd2a73365793518541007d223b6a1f926deea999aff9e2bd81f3fb1741ecad54d0342b96c506873ccfe406c'}", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,666", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 31948, "thread": 32512, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:43:14,670", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,670", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,671", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 31948, "thread": 32512, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:43:14,675", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,675", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,675", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 31948, "thread": 32512, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:43:14,679", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,679", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,697", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,698", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,698", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-12 20:43:14,701", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,701", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,705", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,706", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,706", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,706", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,710", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,711", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,712", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,714", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,714", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,715", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,715", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,719", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,719", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,721", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,722", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,722", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,722", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,724", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,725", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,725", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-12 20:43:14,727", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,728", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-12 20:43:14,732", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,732", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,734", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,735", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,735", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-12 20:43:14,738", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,738", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,740", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,741", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,741", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,741", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,744", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,744", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,744", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,744", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,746", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,747", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,747", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 244a05d00b33059b85aac538b9ed63230ac167da4265a39320bc2503f2cfdf7c", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,747", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,750", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,753", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,756", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,757", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,757", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 244a05d00b33059b85aac538b9ed63230ac167da4265a39320bc2503f2cfdf7c", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,759", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,759", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,761", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,762", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,764", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,764", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,764", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,768", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,768", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,771", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,771", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,774", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,774", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,777", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,777", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,781", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,781", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 244a05d00b33059b85aac538b9ed63230ac167da4265a39320bc2503f2cfdf7c, Fee: 0.000543210000 XMR (543210000 pico)", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,784", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,784", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,784", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,787", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: f17af20c...): Failed to get daemon height. Cannot calculate confirmations.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,796", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: f17af20c...): Skipping entry 0: TXID 244a05d00b33059b85aac538b9ed63230ac167da4265a39320bc2503f2cfdf7c already processed.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,799", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,801", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,804", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,808", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: f17af20c...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-12 20:43:14,813", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: f17af20c...): Found candidate! TXID: 244a05d00b33059b85aac538b9ed63230ac167da4265a39320bc2503f2cfdf7c, Amt: 1.234567890123 XMR, Confs: 11.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,813", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: f17af20c...): Confirmed payment found.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,816", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,816", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,816", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-12 20:43:14,821", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,821", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,822", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 244a05d00b33059b85aac538b9ed63230ac167da4265a39320bc2503f2cfdf7c, Fee: 0.000678900000 XMR (678900000 pico)", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,824", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,824", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,825", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,825", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,829", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,832", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,832", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,832", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,832", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-12 20:43:14,835", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,836", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-12 20:43:14,840", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,840", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,841", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-12 20:43:14,847", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,847", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,847", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,848", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 244a05d00b33059b85aac538b9ed63230ac167da4265a39320bc2503f2cfdf7c, Fee: 0.000777700000 XMR (777700000 pico)", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,848", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,850", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,850", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,850", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,851", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 244a05d00b33059b85aac538b9ed63230ac167da4265a39320bc2503f2cfdf7c, Fee: 0.000888800000 XMR (888800000 pico)", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,851", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,853", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,853", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,854", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:14,856", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:15,357", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:15,357", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:15,362", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:15,864", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:15,865", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:15,871", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-12 20:43:16,084", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 4: Level=info, Message='Your Order #b57c150e (Test BTC Product Only) is re...'", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:16,172", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 11: Level=success, Message='Payment confirmed for Order #cedd3e4b (Test BTC Pr...'", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:16,219", "levelname": "WARNING", "name": "store.validators", "module": "validators", "pathname": "C:\\shadow_market\\backend\\store\\validators.py", "lineno": 150, "message": "Bitcoin address validation for 'tb1qw508d6...' used basic regex ONLY. Checksum not validated. Consider using a dedicated library.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:16,220", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 13: Level=info, Message='Your Order #d444f885 (Test BTC Product Only) has b...'", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:16,312", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 19: Level=success, Message='Order #c92e4f9a (Test BTC Product Only) has been f...'", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:16,313", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 20: Level=success, Message='Order #c92e4f9a finalized. Funds (0.00975000 BTC) ...'", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:16,363", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 22: Level=info, Message='Dispute resolved for Order #689fba6a. Notes: Full ...'", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:16,363", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 23: Level=info, Message='Dispute resolved for Order #689fba6a. Notes: Full ...'", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:16,725", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 46: Level=info, Message='Your Order #bb3f7d4c (Test XMR Product Only) is re...'", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,286", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction f7c599ad-f023-477a-ba04-68e4b84dc2c9 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,288", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction bea15280-d6c9-42af-8dff-771b59d6d268 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,288", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #62fa804b (Integration Test Product) has bee...'", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,288", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Order #62fa804b finalized. Funds (0.01960000 BTC) ...'", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,338", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 834346e1-fca7-44cd-bf4a-3c6648fb4f56 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,339", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction ae81748d-fa0b-42f6-a39b-5d8889467ee2 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,339", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Funds released for Order #5fd34bcb (Integration Te...'", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,339", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #5fd34bcb (Integration Test Product) has bee...'", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,430", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction f2fb1b57-6d90-4c7a-b2ab-2e3cd11d9a23 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,431", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 2cf8d75f-39ad-4b57-947a-e033686369fe recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,431", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=info, Message='Dispute resolved for Order #b7287585. Notes: Split...'", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,431", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=info, Message='Dispute resolved for Order #b7287585. Notes: Split...'", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,511", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,544", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,544", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,544", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,545", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,546", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,546", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,546", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,547", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,547", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,547", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 9001: Level=success, Message='Your withdrawal of 0.47500000 BTC (Fee: 0.02500000...'", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,547", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,577", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,577", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,577", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,578", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,613", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,613", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,614", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,614", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,615", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,615", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,615", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 31948, "thread": 32512, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-12 20:43:17,618", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:43:17,618", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 31948, "thread": 32512}
{"asctime": "2025-04-12 20:46:15,764", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,765", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction abe3aa9c-7716-4427-b918-1fbc870f3889 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,773", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction eb9a833f-18c8-4239-994f-bee9dee4a513 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,777", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,782", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,785", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,788", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,793", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,797", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,801", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,804", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,807", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,812", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,815", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,818", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,821", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,861", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,861", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction aa31e5d4-228f-458a-a4f4-1437e8d3bc62 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,865", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,873", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,877", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,878", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 558c7dbe-da36-43f1-99ce-696001764f71 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,883", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,883", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,884", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 413d2e78-b5c4-4406-82f9-6ccd73dfba3b recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,888", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,896", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,902", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction b49c37ad-0bdd-42f7-b799-bca34f778fc3 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,907", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 79bd749f-167c-441c-8408-79d05f05270d recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,913", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 170b94d1-0ec8-48ac-a540-93e4b0000dfd recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,918", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,918", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,918", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,918", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,919", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,919", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,919", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,919", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,923", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,923", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,924", "levelname": "CRITICAL", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 333, "message": "CRITICAL INTERNAL LEDGER INCONSISTENCY [BTC]! Diff: 0.10000000 BTC. LedgerTx Sum: 10.10000000, UserBalance Sum (balance, locked_balance): 10.00000000. REQUIRES MANUAL INVESTIGATION OF TRANSACTIONS.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,924", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,924", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,925", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,930", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,931", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,931", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,931", "levelname": "ERROR", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 365, "message": "Ledger Discrepancy (Node vs Ledger) [BTC]! Diff: -0.10000000 BTC. Node: 9.90000000, Ledger: 10.00000000. INVESTIGATION RECOMMENDED.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,931", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,931", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,932", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,936", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,936", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,936", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,936", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-12 20:46:15,941", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,942", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,945", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,946", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,946", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,946", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,948", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:15,980", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,075", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,078", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,116", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,118", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,120", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,123", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,125", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,127", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,129", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,129", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-12 20:46:16,131", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,135", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-12 20:46:16,138", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-12 20:46:16,143", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,143", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,146", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-12 20:46:16,150", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-12 20:46:16,154", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,154", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,157", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,159", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,161", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-12 20:46:16,166", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-12 20:46:16,170", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-12 20:46:16,175", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,178", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 75220f579edec00a)...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,178", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 75220f579edec00a): 4LdpnMo9wPESgQ4...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,180", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,181", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,181", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,182", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 75220f579edec00a)...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,182", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 75220f579edec00a): Timeout", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,184", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 75220f579edec00a)...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,184", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 75220f579edec00a): Monero RPC Error (Code: -5): RPC Failed", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,187", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 75220f579edec00a)...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,187", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 75220f579edec00a). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,189", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,189", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,192", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 75220f579edec00a)...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,192", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 75220f579edec00a) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,197", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,197", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,201", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,201", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,203", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,203", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,207", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,207", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,209", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,209", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': 'f27807fbe176e3b08a72af933fc7bbbb5d9c3128a52b57ac9c7373840f5dfd072131693c3b7bf47d304ec3e87ab7bf5af4b5e27a0f7210017b408eb0179dc849f5a83a4b78658b38e82fa49c3a1003bf62a81f5086d68a155294304202344fbeb33cd3b6529b9c95d44ac04d29d8d08b859da7c5290a4dd4d8a9e171858ef72d'}", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,212", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,212", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 32772, "thread": 32112, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-12 20:46:16,215", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,216", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,216", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '677867d9635a439b894ecebef3b9653d0b272c2304c33f3e4cf5d374fa80a54610648ae2de4f99f3fdd975ef787baf7a548e624f81b820167f749f2ea72d9c5ba17e0aa276e14f012cb8010f02560b1dbc7266323b5576ce9c888b754aa0e3a26f2d69051683d6d24c1b3d7383cb022a4d8fcc9f87ac7590597e603ce2579a3b90b5bc265201abe7d6999905e300d02adebe6acabfd9a060d6c20d9bb9f2599f872f2edf24f0f6519081000cbe03d42d27d67388baad0226c5472766bcb511a1832291fe0616afefa1e58b99a807247204c52da6b335ee6b1fefe70e49f0e23f57482183ceb5df0d15f213466ef91ea5f020c00bd339300d3c1f915758bbe79e'}", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,216", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 32772, "thread": 32112, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:46:16,219", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,219", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,219", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 32772, "thread": 32112, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:46:16,222", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,222", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,222", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 32772, "thread": 32112, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:46:16,224", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,224", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,240", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,240", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,240", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-12 20:46:16,243", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,243", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,246", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,246", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,246", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,246", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,249", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,250", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,250", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,252", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,252", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,253", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,253", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,255", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,255", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,256", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,257", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,257", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,257", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,258", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,259", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,259", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-12 20:46:16,261", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,261", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-12 20:46:16,266", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,266", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,268", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,269", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,270", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-12 20:46:16,272", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,272", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,275", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,275", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,275", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,275", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,278", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,278", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,278", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,279", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,282", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,282", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,282", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: a0f734154071f083852367b767aa8a86248da834169fd64accdb653ab3e7f70a", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,283", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,286", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,288", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,292", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,292", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,292", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: a0f734154071f083852367b767aa8a86248da834169fd64accdb653ab3e7f70a", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,295", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,296", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,300", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,300", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,302", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,302", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,302", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,306", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,306", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,309", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,310", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,313", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,313", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,315", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,316", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,319", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,319", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: a0f734154071f083852367b767aa8a86248da834169fd64accdb653ab3e7f70a, Fee: 0.000543210000 XMR (543210000 pico)", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,322", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,322", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,322", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,327", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: f768791c...): Failed to get daemon height. Cannot calculate confirmations.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,336", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: f768791c...): Skipping entry 0: TXID a0f734154071f083852367b767aa8a86248da834169fd64accdb653ab3e7f70a already processed.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,341", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,344", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,347", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,355", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: f768791c...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-12 20:46:16,361", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: f768791c...): Found candidate! TXID: a0f734154071f083852367b767aa8a86248da834169fd64accdb653ab3e7f70a, Amt: 1.234567890123 XMR, Confs: 11.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,361", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: f768791c...): Confirmed payment found.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,363", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,364", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,364", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-12 20:46:16,368", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,368", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,368", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: a0f734154071f083852367b767aa8a86248da834169fd64accdb653ab3e7f70a, Fee: 0.000678900000 XMR (678900000 pico)", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,370", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,371", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,371", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,371", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,373", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,376", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,376", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,376", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,376", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-12 20:46:16,379", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,379", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-12 20:46:16,385", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,385", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,385", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-12 20:46:16,391", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,392", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,392", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,392", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: a0f734154071f083852367b767aa8a86248da834169fd64accdb653ab3e7f70a, Fee: 0.000777700000 XMR (777700000 pico)", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,392", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,395", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,396", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,396", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,396", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: a0f734154071f083852367b767aa8a86248da834169fd64accdb653ab3e7f70a, Fee: 0.000888800000 XMR (888800000 pico)", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,396", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,398", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,399", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,399", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,401", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,902", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,902", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:16,908", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:17,409", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:17,410", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:17,417", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-12 20:46:17,630", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 4: Level=info, Message='Your Order #2b1e643b (Test BTC Product Only) is re...'", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:17,725", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 11: Level=success, Message='Payment confirmed for Order #f6a6c9ca (Test BTC Pr...'", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:17,773", "levelname": "WARNING", "name": "store.validators", "module": "validators", "pathname": "C:\\shadow_market\\backend\\store\\validators.py", "lineno": 150, "message": "Bitcoin address validation for 'tb1qw508d6...' used basic regex ONLY. Checksum not validated. Consider using a dedicated library.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:17,775", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 13: Level=info, Message='Your Order #31ff07ad (Test BTC Product Only) has b...'", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:17,870", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 19: Level=success, Message='Order #76141a93 (Test BTC Product Only) has been f...'", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:17,870", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 20: Level=success, Message='Order #76141a93 finalized. Funds (0.00975000 BTC) ...'", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:17,923", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 22: Level=info, Message='Dispute resolved for Order #2c239161. Notes: Full ...'", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:17,923", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 23: Level=info, Message='Dispute resolved for Order #2c239161. Notes: Full ...'", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:18,305", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 46: Level=info, Message='Your Order #3db49328 (Test XMR Product Only) is re...'", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:18,886", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction d4ca507d-8353-4bde-8b91-9dae3421c8db recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:18,887", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 94dae972-0ff7-4e13-88a1-5450fd0032bc recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:18,887", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #01408180 (Integration Test Product) has bee...'", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:18,887", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Order #01408180 finalized. Funds (0.01960000 BTC) ...'", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:18,939", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction aa77fc60-72c0-42d3-8615-1030e96fc648 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:18,940", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 4b6a172d-beb6-4b84-bdcb-e5f0f4f0b7a0 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:18,940", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Funds released for Order #6b354295 (Integration Te...'", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:18,940", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #6b354295 (Integration Test Product) has bee...'", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,035", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 843d68c0-ffb1-4aad-90a0-69dcc53f5ce0 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,036", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 1701822d-f205-4691-b38e-4c9f3d53735d recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,037", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=info, Message='Dispute resolved for Order #bd95bb99. Notes: Split...'", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,037", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=info, Message='Dispute resolved for Order #bd95bb99. Notes: Split...'", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,121", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,161", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,161", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,161", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,162", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,162", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,163", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,163", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,163", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,164", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,164", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 9001: Level=success, Message='Your withdrawal of 0.47500000 BTC (Fee: 0.02500000...'", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,164", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,199", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,199", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,199", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,200", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,235", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,235", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,235", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,236", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,236", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,237", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,237", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 32772, "thread": 32112, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-12 20:46:19,240", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:46:19,240", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 32772, "thread": 32112}
{"asctime": "2025-04-12 20:52:24,401", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,401", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 6034d409-0226-476f-9147-277064aa03d5 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,411", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 700d466c-e29b-46b7-a778-d0b9e57c95f9 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,416", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,419", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,423", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,427", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,430", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,434", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,438", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,441", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,444", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,448", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,451", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,455", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,459", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,496", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,496", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction 91bd10a0-43c5-4379-a1e0-e8b074d797b3 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,501", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,509", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,514", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,514", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 5787c249-e13f-41d4-af6d-2ed9681e49ed recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,520", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,520", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,521", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 5c37992d-232c-4fd1-9318-4a6c8b49c9cb recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,525", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,532", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,538", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 40d7c3ad-7066-47bf-bbf0-30be1eb65b61 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,543", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction d21ec7bb-cf1d-4756-bb04-5d9399b33f43 recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,549", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction f2bc97f2-423a-4d46-ac4f-48d3ef10ead2 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,554", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,554", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,554", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,554", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,555", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,555", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,555", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,555", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,559", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,559", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,559", "levelname": "CRITICAL", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 333, "message": "CRITICAL INTERNAL LEDGER INCONSISTENCY [BTC]! Diff: 0.10000000 BTC. LedgerTx Sum: 10.10000000, UserBalance Sum (balance, locked_balance): 10.00000000. REQUIRES MANUAL INVESTIGATION OF TRANSACTIONS.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,561", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,561", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,562", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,565", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,566", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,566", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,566", "levelname": "ERROR", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 365, "message": "Ledger Discrepancy (Node vs Ledger) [BTC]! Diff: -0.10000000 BTC. Node: 9.90000000, Ledger: 10.00000000. INVESTIGATION RECOMMENDED.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,566", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,567", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,567", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,570", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,570", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,571", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,571", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-12 20:52:24,576", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,577", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,579", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,579", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,580", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,580", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,582", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,617", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,711", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,714", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,754", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,756", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,758", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,760", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,762", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,764", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,766", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,766", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-12 20:52:24,769", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,774", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-12 20:52:24,778", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-12 20:52:24,784", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,784", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,786", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-12 20:52:24,790", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-12 20:52:24,794", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,794", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,797", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,799", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,802", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-12 20:52:24,806", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-12 20:52:24,810", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-12 20:52:24,814", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,817", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 875e5a53cd154837)...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,817", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 875e5a53cd154837): 4LdpnMo9wPESgQ4...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,819", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,819", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,819", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,821", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 875e5a53cd154837)...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,821", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 875e5a53cd154837): Timeout", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,824", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 875e5a53cd154837)...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,824", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 875e5a53cd154837): Monero RPC Error (Code: -5): RPC Failed", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,828", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 875e5a53cd154837)...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,828", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 875e5a53cd154837). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,830", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,830", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,832", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 875e5a53cd154837)...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,832", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 875e5a53cd154837) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,835", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,835", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,839", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,839", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,840", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,841", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,842", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,842", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,844", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,845", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '445a283bb979fc0dd6df2a1268f4644d34209dadcc352c01aecee8f668d692653f5d103c32bfa2200054e2c5ffc90c5b93633c409a1ae83ca5455e0e03731320fe47145526b3c77d160d3ed708c60c53d7b3032c6f543006f1a13ea2c182d837d9ee59ba57d4496b156cb30c2395df44c595d7130515f244f4c0d34ba1f044ec'}", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,848", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,848", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 30632, "thread": 29596, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-12 20:52:24,852", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,852", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,852", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '14f498544c1a1dcdc76403814850d75b743794f774c947c64a5e1efb93233816fa0c7d0abe28acd3ef59174f80b772088563fe4e722f9c743199674c3d60adfb8a69c8ea76d35b7c33908f2c1010b6e13b678f69630eeb3a28d6c439c6e713a5b7a38bb6b51988f093da4bbb6c76e61664f1e1c79c2bb947938fdb8bfd89e33f9a23a3f087e18c6667765be8f0240e19e6cc147dbf6c52df1b8d79ef23013667d8a48a3e9943519344767155cd06770fcafe745a3b8f825165945bf9e4c63df54482a5f07e0cb1a0793177eb394aa1adc7e87e93de91fda6cb45bafc9fd6e131e0382b1932476be06c76b6294cd6b785a84b556b72e9f1fe7690d1a1fb7356c7'}", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,853", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 30632, "thread": 29596, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:52:24,855", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,855", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,856", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 30632, "thread": 29596, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:52:24,859", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,859", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,859", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 30632, "thread": 29596, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 20:52:24,862", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,862", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,878", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,878", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,878", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-12 20:52:24,881", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,881", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,884", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,884", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,885", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,885", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,888", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,888", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,889", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,891", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,891", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,891", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,891", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,894", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,894", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,896", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,897", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,897", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,897", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,900", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,900", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,900", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-12 20:52:24,903", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,903", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-12 20:52:24,907", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,908", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,910", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,910", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,910", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-12 20:52:24,913", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,914", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,916", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,916", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,916", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,916", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,918", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,918", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,919", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,919", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,921", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,921", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,921", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: b33f3ec37a3a6bbf64e08ba252497fe6438984fe5cec33454d3e7edab343e394", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,921", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,925", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,928", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,931", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,931", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,931", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: b33f3ec37a3a6bbf64e08ba252497fe6438984fe5cec33454d3e7edab343e394", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,933", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,934", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,937", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,937", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,940", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,940", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,940", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,943", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,944", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,946", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,946", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,949", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,949", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,952", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,952", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,957", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,957", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: b33f3ec37a3a6bbf64e08ba252497fe6438984fe5cec33454d3e7edab343e394, Fee: 0.000543210000 XMR (543210000 pico)", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,959", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,960", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,960", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,963", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 79340d4e...): Failed to get daemon height. Cannot calculate confirmations.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,973", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 79340d4e...): Skipping entry 0: TXID b33f3ec37a3a6bbf64e08ba252497fe6438984fe5cec33454d3e7edab343e394 already processed.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,975", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,979", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,981", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,988", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 79340d4e...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-12 20:52:24,993", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 79340d4e...): Found candidate! TXID: b33f3ec37a3a6bbf64e08ba252497fe6438984fe5cec33454d3e7edab343e394, Amt: 1.234567890123 XMR, Confs: 11.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,993", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 79340d4e...): Confirmed payment found.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,996", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,997", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:24,997", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-12 20:52:25,002", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,002", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,002", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: b33f3ec37a3a6bbf64e08ba252497fe6438984fe5cec33454d3e7edab343e394, Fee: 0.000678900000 XMR (678900000 pico)", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,006", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,006", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,006", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,006", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,009", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,013", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,013", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,013", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,014", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-12 20:52:25,017", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,017", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-12 20:52:25,023", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,023", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,024", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-12 20:52:25,033", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,033", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,034", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,034", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: b33f3ec37a3a6bbf64e08ba252497fe6438984fe5cec33454d3e7edab343e394, Fee: 0.000777700000 XMR (777700000 pico)", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,034", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,037", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,038", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,038", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,038", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: b33f3ec37a3a6bbf64e08ba252497fe6438984fe5cec33454d3e7edab343e394, Fee: 0.000888800000 XMR (888800000 pico)", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,039", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,042", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,042", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,042", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,045", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,546", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,546", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:25,548", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:26,049", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:26,050", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:26,056", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-12 20:52:26,272", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 4: Level=info, Message='Your Order #441f941c (Test BTC Product Only) is re...'", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:26,363", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 11: Level=success, Message='Payment confirmed for Order #a5c80fc9 (Test BTC Pr...'", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:26,410", "levelname": "WARNING", "name": "store.validators", "module": "validators", "pathname": "C:\\shadow_market\\backend\\store\\validators.py", "lineno": 150, "message": "Bitcoin address validation for 'tb1qw508d6...' used basic regex ONLY. Checksum not validated. Consider using a dedicated library.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:26,411", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 13: Level=info, Message='Your Order #06a13f1c (Test BTC Product Only) has b...'", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:26,506", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 19: Level=success, Message='Order #d4a58951 (Test BTC Product Only) has been f...'", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:26,507", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 20: Level=success, Message='Order #d4a58951 finalized. Funds (0.00975000 BTC) ...'", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:26,560", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 22: Level=info, Message='Dispute resolved for Order #0a93f5ca. Notes: Full ...'", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:26,561", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 23: Level=info, Message='Dispute resolved for Order #0a93f5ca. Notes: Full ...'", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:26,961", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 46: Level=info, Message='Your Order #f402592d (Test XMR Product Only) is re...'", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,529", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction d43a5e52-2b62-4de7-a8eb-456a42a758c1 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,530", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 03172c4b-1acb-4c7b-8139-ad88e2a44931 recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,530", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #408b9de5 (Integration Test Product) has bee...'", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,531", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Order #408b9de5 finalized. Funds (0.01960000 BTC) ...'", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,582", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 044badf0-1707-4be3-86a7-8e8258a9b302 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,582", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction a8c6d8b5-bb25-4bc5-8fb8-c71006a9b3e3 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,583", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Funds released for Order #2d435038 (Integration Te...'", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,583", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #2d435038 (Integration Test Product) has bee...'", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,677", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction e15fe439-0626-44a7-bf36-d365a5057d62 recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,678", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction b724df85-4f0a-4078-a504-1ab2a82d1fe3 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,679", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=info, Message='Dispute resolved for Order #6286add7. Notes: Split...'", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,679", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=info, Message='Dispute resolved for Order #6286add7. Notes: Split...'", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,773", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,814", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,814", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,814", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,815", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,815", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,816", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,816", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,817", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,817", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,817", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 9001: Level=success, Message='Your withdrawal of 0.47500000 BTC (Fee: 0.02500000...'", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,817", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,852", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,852", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,852", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,853", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,890", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,890", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,891", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,891", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,892", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,892", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,892", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 30632, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-12 20:52:27,895", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 20:52:27,896", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 30632, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,149", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,149", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 3ab25a58-4073-4c25-ac1b-b846648146b9 recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,158", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 89a51af9-fa75-40a7-bd9c-34eb8c87eb44 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,163", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,167", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,171", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,173", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,179", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,183", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,187", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,189", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,193", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,196", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,200", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,203", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,207", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,244", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,244", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction 3e4e21f9-f1d8-4dc1-9ccd-2c77f1d0c385 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,248", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,255", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,259", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,260", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction dadb03dd-9fdd-4b42-b673-3137e0c2c765 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,264", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,265", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,265", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 41971d98-5a2e-4971-a94b-2c695f2369ea recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,268", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,276", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,281", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 6b176644-cd33-413d-a681-7e20f5c44b48 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,286", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 2a6c40f8-f038-4fba-8669-f22477182bcb recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,291", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 45d5871a-4ac3-499c-bd9f-cabd0580ed7e recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,296", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,296", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,296", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,297", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,297", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,297", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,297", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,297", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,302", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,302", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,302", "levelname": "CRITICAL", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 333, "message": "CRITICAL INTERNAL LEDGER INCONSISTENCY [BTC]! Diff: 0.10000000 BTC. LedgerTx Sum: 10.10000000, UserBalance Sum (balance, locked_balance): 10.00000000. REQUIRES MANUAL INVESTIGATION OF TRANSACTIONS.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,302", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,303", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,303", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,307", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,307", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,308", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,308", "levelname": "ERROR", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 365, "message": "Ledger Discrepancy (Node vs Ledger) [BTC]! Diff: -0.10000000 BTC. Node: 9.90000000, Ledger: 10.00000000. INVESTIGATION RECOMMENDED.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,308", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,308", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,309", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,312", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,312", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,312", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,312", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-12 22:39:34,318", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,319", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,321", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,322", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,322", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,322", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,325", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,358", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,454", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,457", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,496", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,498", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,500", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,503", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,505", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,506", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,508", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,508", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-12 22:39:34,512", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,517", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-12 22:39:34,521", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-12 22:39:34,526", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,527", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,529", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-12 22:39:34,533", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-12 22:39:34,537", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,537", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,540", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,542", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,545", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-12 22:39:34,549", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-12 22:39:34,553", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-12 22:39:34,558", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,561", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: f3e73d5dc1e6e8c4)...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,561", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: f3e73d5dc1e6e8c4): 4LdpnMo9wPESgQ4...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,563", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,563", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,563", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,564", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: f3e73d5dc1e6e8c4)...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,564", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: f3e73d5dc1e6e8c4): Timeout", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,566", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: f3e73d5dc1e6e8c4)...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,567", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: f3e73d5dc1e6e8c4): Monero RPC Error (Code: -5): RPC Failed", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,569", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: f3e73d5dc1e6e8c4)...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,570", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: f3e73d5dc1e6e8c4). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,572", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,573", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,575", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: f3e73d5dc1e6e8c4)...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,575", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: f3e73d5dc1e6e8c4) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,579", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,579", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,584", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,584", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,587", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,587", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,589", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,590", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,592", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,592", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '78fc53d59e84bb95f37607e91274236764ad98491ce51125730668319f9a7ab4f96fd4c4f5d63d08844b40cdc3d9ef24ea9dca639923d9938d030b7c78db1f3dbf38078893b3d35bf51d7d20a70c5943eba67751f9d97a2c63710b12c47071aac87a6a44c838f53032b7a1e25ee3f2a501eb5593e7073ca8dad15fd38764d4f8'}", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,595", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,595", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 36484, "thread": 29596, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-12 22:39:34,597", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,598", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,598", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': 'c93ff0023df91cbe94993d2d01d486a7befa2e04117c371bdb4225b8b6ce9cd6003ed6a1a4d84e11596830cdd2ec6202da99ae0467ed352b253f2c0fdf06bcd6854847c78ed266b0983460fc68637aeebf2ac9552f6e45e340b33192a65ec309d23de33ece4313c1815c53aa37d73502075a7a32f3bff4b150ff365cbf4234782134ef09e3751d8f66c434a970256ddfb846ed52ae2ee3d64bdd8f6e971e41b53d540cfa2849fef5d9dd93c2ebf25cad089cccc30c0c48e4b69a9beb26e85c260086e79974f60f0fb610a3a21f4e864e0ad00e8db813c7929bab5a6359bf44d5bd7f5e8479446bafb646ed5668dff6412ea0ccf465bfc16e8bdfe002f73f5f67'}", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,598", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 36484, "thread": 29596, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 22:39:34,602", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,602", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,603", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 36484, "thread": 29596, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 22:39:34,606", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,606", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,606", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 36484, "thread": 29596, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-12 22:39:34,609", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,609", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,624", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,625", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,625", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-12 22:39:34,628", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,628", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,631", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,631", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,631", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,631", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,634", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,634", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,635", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,637", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,638", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,638", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,638", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,641", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,641", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,643", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,643", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,643", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,643", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,646", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,646", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,646", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-12 22:39:34,648", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,649", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-12 22:39:34,654", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,654", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,656", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,656", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,657", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-12 22:39:34,659", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,659", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,662", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,662", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,662", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,663", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,665", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,665", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,665", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,665", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,668", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,668", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,668", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 90a818fa4d7d7c2022214169b17e4d538a21f87240f1ecd18d4ace3390a9ff8b", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,669", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,672", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,674", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,676", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,677", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,677", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 90a818fa4d7d7c2022214169b17e4d538a21f87240f1ecd18d4ace3390a9ff8b", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,680", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,680", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,683", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,684", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,686", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,686", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,686", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,689", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,689", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,691", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,692", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,695", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,695", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,698", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,699", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,701", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,702", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 90a818fa4d7d7c2022214169b17e4d538a21f87240f1ecd18d4ace3390a9ff8b, Fee: 0.000543210000 XMR (543210000 pico)", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,704", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,704", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,704", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,708", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: a556d9fc...): Failed to get daemon height. Cannot calculate confirmations.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,718", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: a556d9fc...): Skipping entry 0: TXID 90a818fa4d7d7c2022214169b17e4d538a21f87240f1ecd18d4ace3390a9ff8b already processed.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,720", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,723", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,725", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,730", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: a556d9fc...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-12 22:39:34,734", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: a556d9fc...): Found candidate! TXID: 90a818fa4d7d7c2022214169b17e4d538a21f87240f1ecd18d4ace3390a9ff8b, Amt: 1.234567890123 XMR, Confs: 11.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,734", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: a556d9fc...): Confirmed payment found.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,737", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,737", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,737", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-12 22:39:34,742", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,742", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,742", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 90a818fa4d7d7c2022214169b17e4d538a21f87240f1ecd18d4ace3390a9ff8b, Fee: 0.000678900000 XMR (678900000 pico)", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,746", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,746", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,747", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,747", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,750", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,752", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,752", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,752", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,753", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-12 22:39:34,755", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,755", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-12 22:39:34,762", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,762", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,763", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-12 22:39:34,769", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,769", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,769", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,770", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 90a818fa4d7d7c2022214169b17e4d538a21f87240f1ecd18d4ace3390a9ff8b, Fee: 0.000777700000 XMR (777700000 pico)", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,770", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,774", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,775", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,775", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,775", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 90a818fa4d7d7c2022214169b17e4d538a21f87240f1ecd18d4ace3390a9ff8b, Fee: 0.000888800000 XMR (888800000 pico)", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,775", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,779", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,779", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,779", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:34,782", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:35,283", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:35,283", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:35,289", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:35,790", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:35,790", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:35,797", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-12 22:39:36,013", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 4: Level=info, Message='Your Order #b9be741f (Test BTC Product Only) is re...'", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:36,102", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 11: Level=success, Message='Payment confirmed for Order #5c6fd71e (Test BTC Pr...'", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:36,150", "levelname": "WARNING", "name": "store.validators", "module": "validators", "pathname": "C:\\shadow_market\\backend\\store\\validators.py", "lineno": 150, "message": "Bitcoin address validation for 'tb1qw508d6...' used basic regex ONLY. Checksum not validated. Consider using a dedicated library.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:36,151", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 13: Level=info, Message='Your Order #e9e241c6 (Test BTC Product Only) has b...'", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:36,251", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 19: Level=success, Message='Order #2109784e (Test BTC Product Only) has been f...'", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:36,252", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 20: Level=success, Message='Order #2109784e finalized. Funds (0.00975000 BTC) ...'", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:36,313", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 22: Level=info, Message='Dispute resolved for Order #8671a21e. Notes: Full ...'", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:36,313", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 23: Level=info, Message='Dispute resolved for Order #8671a21e. Notes: Full ...'", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:36,692", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 46: Level=info, Message='Your Order #73f7b02d (Test XMR Product Only) is re...'", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,278", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 2c88da01-3be1-4bf3-b538-d569958915a2 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,279", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction dd51db93-eaad-4bed-a79f-c96002a6d2dd recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,280", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #2c7287f0 (Integration Test Product) has bee...'", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,280", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Order #2c7287f0 finalized. Funds (0.01960000 BTC) ...'", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,338", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 949ca114-4be8-4b56-a4da-e94e35f3d120 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,340", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction b6947655-c69e-4815-85a7-e33619f13637 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,340", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Funds released for Order #2bb5a944 (Integration Te...'", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,340", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #2bb5a944 (Integration Test Product) has bee...'", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,438", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 7015ea5b-b47e-41fd-b7c5-6da965bf730a recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,439", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 1186dd22-0f0e-40f1-be46-f485b0b9925b recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,439", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=info, Message='Dispute resolved for Order #a6e9e490. Notes: Split...'", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,439", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=info, Message='Dispute resolved for Order #a6e9e490. Notes: Split...'", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,522", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,558", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,559", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,559", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,560", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,560", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,560", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,561", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,561", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,562", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,562", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 9001: Level=success, Message='Your withdrawal of 0.47500000 BTC (Fee: 0.02500000...'", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,562", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,594", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,594", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,594", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,594", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,627", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,628", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,628", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,629", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,629", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,629", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,630", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 36484, "thread": 29596, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-12 22:39:37,633", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 36484, "thread": 29596}
{"asctime": "2025-04-12 22:39:37,633", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 36484, "thread": 29596}
{"asctime": "2025-04-13 20:06:47,218", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,220", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction d686b126-bdef-493b-b068-9f5d844a626e recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,229", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction aba1054d-a0fa-44a7-bc3a-2d298c4121e3 recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,234", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,241", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,245", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,248", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,251", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,256", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,259", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,263", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,266", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,269", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,273", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,277", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,280", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,320", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,320", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction dcdc376f-a002-43fc-96a2-034321ae58a6 recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,325", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,332", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,338", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,338", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 26686d47-3acb-44df-a99e-f3c1621b8aa4 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,344", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,344", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,344", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 01fd6eaa-22c5-4f9c-a349-b10c4c48d740 recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,348", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,356", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,362", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction cca0d31e-fed6-4bfc-a967-c65763937ce4 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,369", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 070351c7-f9ba-4ae0-b568-528d92ce7abb recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,374", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 6768ab1d-4e7f-4c54-a9da-3139233a3bf8 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,378", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,378", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,380", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,380", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,380", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,380", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,381", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,381", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,385", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,385", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,386", "levelname": "CRITICAL", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 333, "message": "CRITICAL INTERNAL LEDGER INCONSISTENCY [BTC]! Diff: 0.10000000 BTC. LedgerTx Sum: 10.10000000, UserBalance Sum (balance, locked_balance): 10.00000000. REQUIRES MANUAL INVESTIGATION OF TRANSACTIONS.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,386", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,387", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,387", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,392", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,393", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,394", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,394", "levelname": "ERROR", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 365, "message": "Ledger Discrepancy (Node vs Ledger) [BTC]! Diff: -0.10000000 BTC. Node: 9.90000000, Ledger: 10.00000000. INVESTIGATION RECOMMENDED.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,394", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,394", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,395", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,399", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,399", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,400", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,400", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-13 20:06:47,431", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,432", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,435", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,436", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,436", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,436", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,438", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,470", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,569", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,571", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,613", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,614", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,616", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,619", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,621", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,623", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,625", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,625", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-13 20:06:47,627", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,632", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-13 20:06:47,637", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-13 20:06:47,642", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,643", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,645", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-13 20:06:47,649", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-13 20:06:47,654", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,654", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,656", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,658", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,660", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-13 20:06:47,663", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-13 20:06:47,667", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-13 20:06:47,672", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,675", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7c7d8e7359ad21ed)...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,675", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 7c7d8e7359ad21ed): 4LdpnMo9wPESgQ4...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,677", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,677", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,678", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,679", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7c7d8e7359ad21ed)...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,680", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 7c7d8e7359ad21ed): Timeout", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,681", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7c7d8e7359ad21ed)...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,682", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 7c7d8e7359ad21ed): Monero RPC Error (Code: -5): RPC Failed", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,683", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7c7d8e7359ad21ed)...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,684", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 7c7d8e7359ad21ed). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,686", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,686", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,689", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 7c7d8e7359ad21ed)...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,689", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 7c7d8e7359ad21ed) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,694", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,694", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,698", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,698", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,700", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,701", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,703", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,703", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,707", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,707", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '4212f6abd5ff5a035b9898c89c0792dddc2140b098fa01d0455e2cba9e0e666341419b38be3c4b90ab8a90a097e37b30f166e93e28bd6fbcb6cd01cca96c49db892404b0dd619aef4976b0b377fa109924eb68d4027e02d82a9bbed001a9f29014ec42b10e6c67823bfd98374c4cbe0c6c6f868d2b54b824db94366092473df7'}", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,710", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,710", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 4908, "thread": 17312, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-13 20:06:47,714", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,714", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,714", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': 'd18f6af721940cb4385776b868eaac4e8b73fe1568d442a0a8309cf41f08616a40c15d5b2673ee8829edd86c31d968b650ca38d123aeb4ca2e8dbf224e577b1c3d27c51038e9d6a5a18b4816859f1150bfe70606b161a0d93dae54fa29e670caa81a07de88409f4412669fe3bf12f7a4f19dfcccfaeb11b9c7b1ff97a13b420a1bbd7111c0df930dc88da7de7b5e2418523cff0172bff52c656daeca5dab35b60398cd8d0bb048b4973b0c3e517342f379c485485e2d86671ca6f456f06ff6520af9ee0ccc9bf58ba1b5ccf8d09e9d0cff8922fe79280a0f965ada4e7160efce0b5d309d89abe590344af72fec86240591242cf0e16a90bc064907d4f5fa748b'}", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,714", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 4908, "thread": 17312, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-13 20:06:47,717", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,717", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,717", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 4908, "thread": 17312, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-13 20:06:47,721", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,721", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,721", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 4908, "thread": 17312, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-13 20:06:47,724", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,724", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,741", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,741", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,741", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-13 20:06:47,744", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,744", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,746", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,747", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,747", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,747", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,750", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,750", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,750", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,752", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,752", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,752", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,752", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,756", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,756", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,759", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,759", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,759", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,760", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,763", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,763", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,763", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-13 20:06:47,765", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,766", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-13 20:06:47,771", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,771", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,773", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,774", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,774", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-13 20:06:47,777", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,777", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,779", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,780", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,780", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,780", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,782", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,782", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,782", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,782", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,784", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,784", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,785", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: ac98f490d06530110d4be7320889465a3c4390adc2a0e1038edc3d297bfac8d1", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,785", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,787", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,790", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,792", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,793", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,793", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: ac98f490d06530110d4be7320889465a3c4390adc2a0e1038edc3d297bfac8d1", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,795", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,795", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,799", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,799", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,802", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,802", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,802", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,805", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,806", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,808", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,808", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,811", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,812", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,815", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,815", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,818", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,819", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: ac98f490d06530110d4be7320889465a3c4390adc2a0e1038edc3d297bfac8d1, Fee: 0.000543210000 XMR (543210000 pico)", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,821", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,821", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,821", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,826", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 1eaa36cd...): Failed to get daemon height. Cannot calculate confirmations.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,835", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 1eaa36cd...): Skipping entry 0: TXID ac98f490d06530110d4be7320889465a3c4390adc2a0e1038edc3d297bfac8d1 already processed.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,839", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,842", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,845", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,850", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 1eaa36cd...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-13 20:06:47,855", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 1eaa36cd...): Found candidate! TXID: ac98f490d06530110d4be7320889465a3c4390adc2a0e1038edc3d297bfac8d1, Amt: 1.234567890123 XMR, Confs: 11.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,856", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 1eaa36cd...): Confirmed payment found.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,860", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,860", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,861", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-13 20:06:47,866", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,866", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,866", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: ac98f490d06530110d4be7320889465a3c4390adc2a0e1038edc3d297bfac8d1, Fee: 0.000678900000 XMR (678900000 pico)", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,869", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,869", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,869", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,869", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,872", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,876", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,876", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,877", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,877", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-13 20:06:47,880", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,880", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-13 20:06:47,885", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,885", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,885", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-13 20:06:47,909", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,909", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,909", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,909", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: ac98f490d06530110d4be7320889465a3c4390adc2a0e1038edc3d297bfac8d1, Fee: 0.000777700000 XMR (777700000 pico)", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,909", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,913", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,914", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,915", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,915", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: ac98f490d06530110d4be7320889465a3c4390adc2a0e1038edc3d297bfac8d1, Fee: 0.000888800000 XMR (888800000 pico)", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,915", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,919", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,920", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,920", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:47,924", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:48,425", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:48,426", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:48,431", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:48,932", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:48,932", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:48,938", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-13 20:06:49,170", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 4: Level=info, Message='Your Order #cd807489 (Test BTC Product Only) is re...'", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:49,260", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 11: Level=success, Message='Payment confirmed for Order #5352bfe9 (Test BTC Pr...'", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:49,306", "levelname": "WARNING", "name": "store.validators", "module": "validators", "pathname": "C:\\shadow_market\\backend\\store\\validators.py", "lineno": 150, "message": "Bitcoin address validation for 'tb1qw508d6...' used basic regex ONLY. Checksum not validated. Consider using a dedicated library.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:49,307", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 13: Level=info, Message='Your Order #86390d05 (Test BTC Product Only) has b...'", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:49,399", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 19: Level=success, Message='Order #3cb8b3a6 (Test BTC Product Only) has been f...'", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:49,399", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 20: Level=success, Message='Order #3cb8b3a6 finalized. Funds (0.00975000 BTC) ...'", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:49,452", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 22: Level=info, Message='Dispute resolved for Order #9cd79c03. Notes: Full ...'", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:49,452", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 23: Level=info, Message='Dispute resolved for Order #9cd79c03. Notes: Full ...'", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:49,832", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 46: Level=info, Message='Your Order #9756aced (Test XMR Product Only) is re...'", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,422", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 9a65c12e-5ca6-49e5-92f2-ba6affdfeb9d recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,423", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction ca48df1d-6038-4a4f-857f-0ed43a2f87ba recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,425", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #cf55426e (Integration Test Product) has bee...'", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,425", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Order #cf55426e finalized. Funds (0.01960000 BTC) ...'", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,479", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 8b39cb46-e292-4341-8a02-7945d188f60a recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,480", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction e301c220-867a-49c2-8b13-2cae25998ebf recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,480", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Funds released for Order #475c38b9 (Integration Te...'", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,481", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #475c38b9 (Integration Test Product) has bee...'", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,569", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 219cd217-84e9-4286-9485-5e4624edad9c recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,570", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 3d4689a8-d10b-45ba-9ccf-04ccfa44ea24 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,570", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=info, Message='Dispute resolved for Order #29eb2116. Notes: Split...'", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,570", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=info, Message='Dispute resolved for Order #29eb2116. Notes: Split...'", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,651", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,686", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,686", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,686", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,687", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,688", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,688", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,688", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,689", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,689", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,689", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 9001: Level=success, Message='Your withdrawal of 0.47500000 BTC (Fee: 0.02500000...'", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,689", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,723", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,723", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,723", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,724", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,757", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,758", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,758", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,758", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,759", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,759", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,759", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 4908, "thread": 17312, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-13 20:06:50,763", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 4908, "thread": 17312}
{"asctime": "2025-04-13 20:06:50,763", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 4908, "thread": 17312}
{"asctime": "2025-04-23 14:04:39,877", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 181, "message": "Created new UserBalance record for User 1, Currency XMR.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,879", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction f5efc57a-4aec-4ecf-a373-0502a119b8fb recorded: User 1, Type DEPOSIT, Amount 10.5 XMR", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,888", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 3ef9ae78-708a-4aa6-8e43-410d61ff288a recorded: User 1, Type WITHDRAWAL_SENT, Amount -1.2 ETH", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,891", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 209, "message": "Insufficient funds: User 1, Currency ETH. Available: 0.2, Required Debit: 0.5", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,894", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: INVALID_TYPE for user 1.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,898", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type:  for user 1.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,905", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: None for user 1.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,909", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 149, "message": "Invalid transaction type: 123 for user 1.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,912", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: USD for user 1.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,916", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency:  for user 1.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,919", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: None for user 1.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,922", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 153, "message": "Invalid currency: 456 for user 1.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,925", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format ''abc'' (Type: <class 'str'>) for user 1.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,928", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format 'None' (Type: <class 'NoneType'>) for user 1.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,932", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '[]' (Type: <class 'list'>) for user 1.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,935", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 161, "message": "Invalid amount format '{}' (Type: <class 'dict'>) for user 1.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,976", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 511, "message": "Locked 0.5 BTC for User 1. Initial Locked: 0.1, New Locked: 0.6. Reason: N/A", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,976", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 538, "message": "Ledger transaction 35042753-0f5e-4bf9-924f-290e9e86a8bb recorded for LOCK_FUNDS: User 1, Amount 0.5 BTC", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,982", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 490, "message": "Insufficient available funds to lock: User 1, Currency BTC. Available: 0.3, Tried to lock: 0.5", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,989", "levelname": "ERROR", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 467, "message": "Cannot lock funds, balance record not found: User 1, Currency XMR", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,995", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 1.0 ETH for User 1. Initial Locked: 1.5, New Locked: 0.5. Reason: N/A", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:39,995", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 7ce733ad-bdc0-497d-bae7-d197fbf31fd0 recorded for UNLOCK_FUNDS: User 1, Amount 1.0 ETH", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,001", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 628, "message": "Unlock attempt User 1: Requested 1.0 ETH, but only 0.3 locked. Unlocking available amount (0.3).", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,001", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 638, "message": "Unlocked 0.3 ETH for User 1. Initial Locked: 0.3, New Locked: 0.0. Reason: N/A", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,001", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 664, "message": "Ledger transaction 6b3ff7ea-07fd-4c67-b0d5-4ebd2e53fb9e recorded for UNLOCK_FUNDS: User 1, Amount 0.3 ETH", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,005", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 622, "message": "Unlock requested User 1, Currency ETH, but nothing to unlock (Locked=0.0, Requested=0.5).", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,013", "levelname": "WARNING", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 600, "message": "Cannot unlock funds, balance record not found: User 1, Currency XMR", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,018", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction b49747cb-cfbf-4f2f-9e2e-cbddba93ff29 recorded: User 1, Type DEPOSIT, Amount 0.5 BTC", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,023", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction ae6d77ac-22b0-4989-b8dc-3056206e0250 recorded: User 1, Type ESCROW_FUND_DEBIT, Amount -0.5 BTC", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,029", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction ac9cc479-09e5-40a5-8e17-25a3a59693a0 recorded: User 1, Type MARKET_BOND_FORFEIT, Amount 1.0 XMR", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,035", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,035", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,035", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=10.00000000, Ledger=10.00000000", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,035", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for BTC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,036", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check XMR: Node=100.000000000000, Ledger=100.000000000000", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,036", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 370, "message": "[ReconcileLedger:None] Ledger reconciliation PASSED for XMR.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,036", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 413, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: SUCCESS. All configured currency balances match.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,036", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,041", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,041", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,042", "levelname": "CRITICAL", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 333, "message": "CRITICAL INTERNAL LEDGER INCONSISTENCY [BTC]! Diff: 0.10000000 BTC. LedgerTx Sum: 10.10000000, UserBalance Sum (balance, locked_balance): 10.00000000. REQUIRES MANUAL INVESTIGATION OF TRANSACTIONS.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,042", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 335, "message": "[ReconcileLedger:None] Internal ledger consistency FAILED for BTC. Difference: 0.10000000", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,042", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,042", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,046", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,046", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,046", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 355, "message": "[ReconcileLedger:None] Reconciliation Check BTC: Node=9.90000000, Ledger=10.00000000", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,046", "levelname": "ERROR", "name": "finance.security", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 365, "message": "Ledger Discrepancy (Node vs Ledger) [BTC]! Diff: -0.10000000 BTC. Node: 9.90000000, Ledger: 10.00000000. INVESTIGATION RECOMMENDED.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,046", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 367, "message": "[ReconcileLedger:None] Ledger reconciliation FAILED (Node vs Ledger) for BTC. Difference: -0.10000000", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,047", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,047", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,050", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,050", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 211, "message": "[ReconcileLedger:None] Successfully acquired lock: lock_ledger_reconciliation. Starting reconciliation.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,050", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 289, "message": "[ReconcileLedger:None] Error aggregating LedgerTransaction for BTC: Simulated DB connection lost on LT", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,051", "levelname": "ERROR", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 377, "message": "[ReconcileLedger:None] Error processing BTC: Could not aggregate LedgerTransaction for BTC", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 284, in reconcile_ledger_balances\n    lt_aggregation = LedgerTransaction.objects.filter(currency=currency).aggregate(\n        total_amount=models.Sum('amount', default=Decimal('0.0'), output_field=models.DecimalField())\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\ndjango.db.utils.OperationalError: Simulated DB connection lost on LT\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\ledger\\tasks.py\", line 290, in reconcile_ledger_balances\n    raise RuntimeError(f\"Could not aggregate LedgerTransaction for {currency}\") from lt_agg_err\nRuntimeError: Could not aggregate LedgerTransaction for BTC"}
{"asctime": "2025-04-23 14:04:40,071", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 409, "message": "[ReconcileLedger:None] Ledger Reconciliation Task finished with overall status: FAILED. Discrepancies or errors detected.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,072", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 434, "message": "[ReconcileLedger:None] Released lock: lock_ledger_reconciliation", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,076", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 198, "message": "[ReconcileLedger:None] Attempting to acquire lock: lock_ledger_reconciliation", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,076", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 206, "message": "[ReconcileLedger:None] Lock 'lock_ledger_reconciliation' already held. Waiting up to 15s...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,076", "levelname": "WARNING", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 208, "message": "[ReconcileLedger:None] Could not acquire lock 'lock_ledger_reconciliation' after waiting. Another instance likely running. Skipping this run.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,076", "levelname": "INFO", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 418, "message": "[ReconcileLedger:None] Task ignored due to lock contention or explicit request.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,078", "levelname": "CRITICAL", "name": "ledger.tasks", "module": "tasks", "pathname": "C:\\shadow_market\\backend\\ledger\\tasks.py", "lineno": 184, "message": "[ReconcileLedger:None] Task Aborted: Critical dependencies (models/services) failed to load during startup.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,112", "levelname": "ERROR", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 519, "message": "Invalid type or value for btc_to_satoshis: not a decimal. Error: [<class 'decimal.ConversionSyntax'>]", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,208", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3364, "message": "Deprecated func process_btc_withdrawal called.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,210", "levelname": "WARNING", "name": "store.services.bitcoin_service", "module": "bitcoin_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\bitcoin_service.py", "lineno": 3369, "message": "Deprecated func process_escrow_release called.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,251", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Could not connect to Monero daemon at http://127.0.0.1:18081/json_rpc after retries.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,253", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Connection timed out", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,255", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 494, "message": "Get Monero Daemon Height: Skipped. MONERO_RPC_URL setting is not configured.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,257", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 508, "message": "Get Monero Daemon Height: Failed: Monero RPC Error (Code: -50): Daemon busy", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,258", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 502, "message": "Get Monero Daemon Height: Current height is 1234567.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,261", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 505, "message": "Get Monero Daemon Height: Failed. Unexpected result structure from get_block_count: {'status': 'OK', 'height': 'wrong'}", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,264", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,264", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Something failed inside the 'with' block", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 351, in test_session_action_inside_fails\n    raise custom_exception\nValueError: Something failed inside the 'with' block"}
{"asctime": "2025-04-23 14:04:40,266", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,271", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Vault auth failed", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultAuthenticationError: Vault auth failed"}
{"asctime": "2025-04-23 14:04:40,275", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Password not found", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultSecretNotFoundError: Password not found"}
{"asctime": "2025-04-23 14:04:40,281", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 127, "message": "CRITICAL SETTING MISSING: 'MONERO_WALLET_RPC_URL'. Service functionality may be impaired.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,281", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 418, "message": "Managed Wallet Session: Attempted to start session but MONERO_WALLET_RPC_URL is not configured.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,283", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Timeout opening wallet", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Timeout opening wallet"}
{"asctime": "2025-04-23 14:04:40,287", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -1): Wrong password", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 438, in _managed_wallet_session\n    _make_rpc_request(wallet_rpc_url, \"open_wallet\", params_open, is_wallet=True) # Let RPC/Network errors propagate\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): Wrong password"}
{"asctime": "2025-04-23 14:04:40,291", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,291", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,293", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 549, "message": "Get balance for currently open wallet: Failed to parse balance from unexpected RPC result structure: {'unlocked_balance': 'not-a-number', 'balance': 100}", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,296", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for currently open wallet: Retrieved unlocked balance: 1.500000000000 XMR (1500000000000 piconero).", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,298", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Connection refused", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.OperationFailedException: Connection refused"}
{"asctime": "2025-04-23 14:04:40,302", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for currently open wallet: Failed: Monero RPC Error (Code: -10): Wallet sync error", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 563, in get_wallet_balance\n    _fetch_balance_from_rpc(wallet_rpc_url)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 537, in _fetch_balance_from_rpc\n    result = _make_rpc_request(rpc_url_to_use, \"get_balance\", {\"account_index\": 0}, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -10): Wallet sync error"}
{"asctime": "2025-04-23 14:04:40,306", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 566, "message": "Get balance for 'test_wallet_123': Failed: Failed to get password", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 554, in get_wallet_balance\n    with _managed_wallet_session(wallet_name) as managed_rpc_url:\n         ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Failed to get password"}
{"asctime": "2025-04-23 14:04:40,312", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 543, "message": "Get balance for 'test_wallet_123': Retrieved unlocked balance: 0.750000000000 XMR (750000000000 piconero).", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,315", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 4fe0c0c04794af52)...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,315", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 625, "message": "Successfully generated Integrated Address (PID: 4fe0c0c04794af52): 4LdpnMo9wPESgQ4...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,317", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,317", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,317", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero : Invalid payment_id format. Must be exactly 16 hex characters.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,319", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 4fe0c0c04794af52)...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,320", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 4fe0c0c04794af52): Timeout", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,322", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 4fe0c0c04794af52)...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,322", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 641, "message": "Error generating Monero Integrated Address (PID: 4fe0c0c04794af52): Monero RPC Error (Code: -5): RPC Failed", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,325", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 4fe0c0c04794af52)...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,325", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 637, "message": "Failed to generate Monero Integrated Address (PID: 4fe0c0c04794af52). Unexpected RPC Result structure or validation failed: {'address': '4LdpnMo9wPESgQ4N3SpYYy1f5t9aZnsQA6zMCg9KDGpQEAd2HpSCq4x7p8tjPnUbqQe2xShzXgCMZtVmrB8s8tqqJbsUnE1zQ7hFzU5gX9'}", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,327", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Standard Subaddress (Account 0)...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,327", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 629, "message": "Successfully generated Standard Subaddress (Account 0): 4AdRN5dKiN2B7Mg... (Index: 5)", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,329", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 614, "message": "Generating Monero Integrated Address (PID: 4fe0c0c04794af52)...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,329", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 633, "message": "Generated Monero Integrated Address (PID: 4fe0c0c04794af52) but FAILED validation: ['Invalid address format']. Address: invalid-address-format", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,333", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,333", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,337", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,337", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 683, "message": "Market 'prepare_multisig': Successfully retrieved and validated info via RPC. Caching for 3600s.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,340", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,340", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 695, "message": "Market 'prepare_multisig': Error retrieving info via RPC: Monero RPC Error (Code: -20): Prepare failed", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,343", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,343", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 688, "message": "Market 'prepare_multisig': Invalid multisig_info format received from RPC: Snippet: INVALID_RPC_HEX_ODD...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,345", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 675, "message": "Market 'prepare_multisig': Cache miss or invalid cache entry, retrieving via RPC...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,345", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 692, "message": "Market 'prepare_multisig': Failed. Unexpected RPC Result structure: {'wrong_key': '7934849c99366bb4e04f95ee3cb81f6ebf96e4879ab234ff5effc4b0c2cb8c2985152c1a088224d9b145b057a099361c7b0eef4147c4a7c7b9bd89cb27fb961891e536c41d41f0066edf9f25fb88711d21c5c2778fba58604fe3facb1b2f6fc76192773e98025d8418898bdf5d6dab48fa0b83c1aaf5a2d3d45597d3651d406a'}", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,348", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,348", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -30): RPC make_multisig failed", "process": 12544, "thread": 11984, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -30): RPC make_multisig failed"}
{"asctime": "2025-04-23 14:04:40,351", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,351", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 800, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): make_multisig returned invalid address format: invalid-address", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,352", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: invalid-address). Raw result: {'address': 'invalid-address', 'multisig_info': '9e4abac75eb3ff2c2d8e2a763ea9070158e45869d9096fb32e55adbb2c71d5e0ab08dbe712ae35d7e421255be2a0d606827a6ca07e06d31869ae637c69224e7090084cf8de84c6a1a610032614ade264206e474d75d4228576cc9dd0b492d11465db3dcacece7383adab688fab15c94a38ed00f632330de48241f04f308abaca25e8560d9b06d6b0310ee8f797b641a47a463c0c13c946c111a7cc28a4a1db19b56eaf9358edf0e2dd532d287b4c4f67da1178ef6d56ff4e28441c81cfef12d703c6d8df2ec85f5a039e7529274fb67d02af2273d35f38df411702e89ad2e75667ec95f047a3646965b61fb1e6263838943e7d9a67d341f882600e48fda4dc27'}", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,352", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: invalid-address)", "process": 12544, "thread": 11984, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-23 14:04:40,355", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,355", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...). Raw result: {'address': '4AdRN5dKiN2B7MgSTm1kMbub5FAnceKQTG5QpXU91Qnscc6MJ1S3nEq6fGDrHG8jN33p3DB1wNUZEt58h3vRwaM8AKQbaq7', 'multisig_info': 'INVALID_HEX_ODD'}", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,355", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'multisig_info' (value: INVALID_HEX_ODD...)", "process": 12544, "thread": 11984, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-23 14:04:40,359", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,360", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 818, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED. 'make_multisig' RPC call succeeded HTTP but returned invalid data structure. Errors: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...). Raw result: {}", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,360", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 824, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): FAILED during 'make_multisig' RPC call or validation. Error: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data: Invalid or missing 'address' (value: None); Invalid or missing 'multisig_info' (value: None...)", "process": 12544, "thread": 11984, "exc_info": "store.exceptions.MoneroRPCError: Monero RPC Error (Code: -96): make_multisig succeeded HTTP but returned unexpected data"}
{"asctime": "2025-04-23 14:04:40,362", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 786, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): Attempting RPC 'make_multisig' (2/2)...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,363", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 806, "message": "Multisig wallet creation (Order: 'order_abc_789', Wallet: 'msig_order_order_abc_789'): SUCCESS. Wallet created. Address: 4AdRN5dKiN2B7Mg...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,378", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 1000.000000000000 XMR (1000000000000000 piconero).", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,378", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,378", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -38): Not enough spendable outputs", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 901, in prepare_monero_release_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough spendable outputs"}
{"asctime": "2025-04-23 14:04:40,381", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,381", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 925, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Insufficient funds reported by wallet during preparation.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,385", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 885, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing transaction to 4AdRN5dKiN2B7Mg... for 2.500000000000 XMR (2500000000000 piconero).", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,386", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,386", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 908, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully prepared unsigned transaction set. Est. Fee: 0.012345000000 XMR.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,386", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,390", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: ['Invalid address']", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,390", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 920, "message": "Prepare XMR release (Order: 1, Wallet: 'msig_order_order_abc_789'): Validation failed: Payout amount must be a positive Decimal value, got -1.0", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,390", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 871, "message": "Prepare XMR: Order 1 missing valid 'xmr_multisig_wallet_name'.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,393", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Attempting to sign transaction set...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,393", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_2_wallet'): Successfully opened wallet via RPC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,393", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_2_wallet'): Successfully signed transaction set (complete).", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,393", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_2_wallet'): close_wallet request completed.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,395", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 957, "message": "Sign XMR: Invalid or missing transaction set hex provided for signing. Value: INVALID_HEX_ODD...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,395", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 961, "message": "Sign XMR: Invalid or missing wallet name provided for signing context. Value: None", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,397", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Attempting to sign transaction set...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,397", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('participant_1_wallet'): Successfully opened wallet via RPC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,397", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 990, "message": "Sign XMR txset (Wallet Context: 'participant_1_wallet'): Successfully signed transaction set (partially signed).", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,398", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('participant_1_wallet'): close_wallet request completed.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,400", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 969, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Attempting to sign transaction set...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,400", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('test_wallet_123'): Successfully opened wallet via RPC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,400", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('test_wallet_123'): Failed to establish session: Monero RPC Error (Code: -15): Signing failed", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-23 14:04:40,403", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('test_wallet_123'): close_wallet request completed.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,403", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 999, "message": "Sign XMR txset (Wallet Context: 'test_wallet_123'): Failed during signing (RPC/Vault/Network): Monero RPC Error (Code: -15): Signing failed", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 974, in sign_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"sign_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -15): Signing failed"}
{"asctime": "2025-04-23 14:04:40,408", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1025, "message": "Submit XMR: Invalid or missing signed transaction set hex provided for submission.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,408", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1029, "message": "Submit XMR: Invalid or missing wallet name provided for submission context.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,410", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,411", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,411", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -5): Transaction was rejected by daemon", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1041, in submit_monero_txset\n    result = _make_rpc_request(wallet_rpc_url, \"submit_multisig\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 747, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -5): Transaction was rejected by daemon"}
{"asctime": "2025-04-23 14:04:40,413", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,413", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1061, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Transaction rejected by the network. Code: -5, Message: Transaction was rejected by daemon", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,415", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,416", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,416", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1052, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded HTTP but returned unexpected tx_hash_list format: []", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,416", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,418", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,418", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,418", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1050, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): 'submit_multisig' succeeded but returned invalid TXID format in list: INVALID_TXID_HEX_ODD", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,418", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,421", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1036, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Attempting to submit fully signed transaction set...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,422", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,422", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1048, "message": "Submit XMR txset (Wallet Context: 'msig_order_order_abc_789'): Successfully submitted. TXID: 8ee52020d7e89972acd048c3e16c38d0cb831f00cd1dfec8dd74bcbf36d0cc24", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,422", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,425", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1455, "message": "Finalize XMR: Invalid or missing current transaction set hex provided.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,427", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1461, "message": "Finalize XMR: Order 1 missing valid Monero multisig wallet name ('xmr_multisig_wallet_name').", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,430", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,430", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,430", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1496, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Successfully signed and submitted. TXID: 8ee52020d7e89972acd048c3e16c38d0cb831f00cd1dfec8dd74bcbf36d0cc24", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,433", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,433", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1476, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Signing step failed (returned None). Aborting.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,437", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,437", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1481, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set NOT complete after final signing attempt. Cannot broadcast.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,439", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1467, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Starting final signing and broadcast sequence...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,439", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1486, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Transaction set signed and complete. Proceeding to broadcast...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,440", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1490, "message": "Finalize XMR Release (Order: 1, Wallet: 'msig_order_order_abc_789'): Submission step failed (returned None) after successful signing.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,443", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,443", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Generic Transfer Failure): Transaction creation failed", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,445", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,445", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1154, "message": "XMR Withdrawal (User: testuser/1, Amt: 5000.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Insufficient Funds): Not enough money", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,448", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,448", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'tx_hash': 'INVALID_TXID_ODD'}", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,451", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,451", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1140, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED. Unexpected RPC response structure from 'transfer': {'fee': 1000}", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,455", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1110, "message": "Attempting XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...)", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,455", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1135, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.987000000000, Addr: 4AdRN5dKiN2B7Mg...) - SUCCESS. TXID: 8ee52020d7e89972acd048c3e16c38d0cb831f00cd1dfec8dd74bcbf36d0cc24, Fee: 0.000543210000 XMR (543210000 pico)", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,459", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 1.000000000000, Addr: bad-address...) - FAILED (Validation Error): ['Bad address']", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,459", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1146, "message": "XMR Withdrawal (User: testuser/1, Amt: 0.000000000000, Addr: 4AdRN5dKiN2B7Mg...) - FAILED (Validation Error): Withdrawal amount must be a positive Decimal value, got 0.0", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,459", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1093, "message": "Process Withdrawal: Invalid User object provided.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,462", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1248, "message": "XMR Payment Scan (Order 1, PID: 1e26a750...): Failed to get daemon height. Cannot calculate confirmations.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,472", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1300, "message": "XMR Payment Scan (Order 1, PID: 1e26a750...): Skipping entry 0: TXID 8ee52020d7e89972acd048c3e16c38d0cb831f00cd1dfec8dd74bcbf36d0cc24 already processed.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,475", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1222, "message": "Scan XMR: Invalid expected_amount_native for CryptoPayment 1: -100", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,477", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1217, "message": "Scan XMR: Missing or invalid Monero payment ID (64 hex chars) for CryptoPayment 1: invalid-short", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,480", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1208, "message": "Scan XMR: Invalid CryptoPayment object.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,487", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1337, "message": "XMR Payment Scan (Order 1, PID: 1e26a750...): Failed during scan (RPC/Daemon/Network/Validation): Monero RPC Error (Code: -1): RPC Busy", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1260, in scan_for_payment_confirmation\n    result = _make_rpc_request(wallet_rpc_url, \"get_payments\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -1): RPC Busy"}
{"asctime": "2025-04-23 14:04:40,492", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1314, "message": "XMR Payment Scan (Order 1, PID: 1e26a750...): Found candidate! TXID: 8ee52020d7e89972acd048c3e16c38d0cb831f00cd1dfec8dd74bcbf36d0cc24, Amt: 1.234567890123 XMR, Confs: 11.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,492", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1329, "message": "XMR Payment Scan (Order 1, PID: 1e26a750...): Confirmed payment found.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,496", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 5000.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,496", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,496", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1423, "message": "Centralized XMR Release (Order: 1) - FAILED (Insufficient Funds): Monero RPC Error (Code: -38): Not enough money", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1394, in process_escrow_release\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -38): Not enough money"}
{"asctime": "2025-04-23 14:04:40,501", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: 1.450000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,501", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1393, "message": "Centralized XMR Release (Order: 1): Attempting direct transfer from main wallet...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,501", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1403, "message": "Centralized XMR Release (Order: 1) - SUCCESS (Centralized). TXID: 8ee52020d7e89972acd048c3e16c38d0cb831f00cd1dfec8dd74bcbf36d0cc24, Fee: 0.000678900000 XMR (678900000 pico)", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,503", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: bad-address... Amt: 1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,503", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): ['Bad address']", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,503", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1368, "message": "CENTRALIZED XMR Escrow Release: Order 1 -> Addr: 4AdRN5dKiN2B7Mg... Amt: -1.000000000000. WARNING: BYPASSING Order's multisig wallet. Sending from main RPC wallet.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,504", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1414, "message": "Centralized XMR Release (Order: 1) - FAILED (Invalid Params): Payout amount must be a positive Decimal value.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,507", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1574, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): No payout destinations specified. No transaction created.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,509", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,509", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,509", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,510", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 443, in _managed_wallet_session\n    yield wallet_rpc_url\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-23 14:04:40,513", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,513", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1630, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Error processing dispute tx direct broadcast: Monero RPC Error (Code: -4): Dispute transfer failed", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 1608, in create_and_broadcast_dispute_tx\n    result = _make_rpc_request(wallet_rpc_url, \"transfer\", params, is_wallet=True)\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1232, in _execute_mock_call\n    result = effect(*args, **kwargs)\n  File \"c:\\shadow_market\\backend\\store\\tests\\test_monero_service.py\", line 1295, in side_effect\n    raise action_result\nstore.exceptions.MoneroRPCError: Monero RPC Error (Code: -4): Dispute transfer failed"}
{"asctime": "2025-04-23 14:04:40,519", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,519", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,520", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 446, "message": "Wallet session ('msig_order_order_abc_789'): Failed to establish session: Cannot get password", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 431, in _managed_wallet_session\n    wallet_password = get_monero_wallet_password(wallet_name, raise_error=True) # Let VaultError propagate\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nvault_integration.VaultError: Cannot get password"}
{"asctime": "2025-04-23 14:04:40,542", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 0.600000000000, Vendor: 0.400000000000. Total: 1.000000000000 XMR.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,542", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,543", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,543", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 8ee52020d7e89972acd048c3e16c38d0cb831f00cd1dfec8dd74bcbf36d0cc24, Fee: 0.000777700000 XMR (777700000 pico)", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,543", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,548", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1582, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Preparing dispute payout. Buyer: 1.000000000000, Vendor: 0.000000000000. Total: 1.000000000000 XMR.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,549", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1596, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Attempting direct 'transfer' RPC call from multisig wallet...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,549", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 440, "message": "Wallet session ('msig_order_order_abc_789'): Successfully opened wallet via RPC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,549", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1617, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789') - SUCCESS: Dispute tx broadcast directly. TXID: 8ee52020d7e89972acd048c3e16c38d0cb831f00cd1dfec8dd74bcbf36d0cc24, Fee: 0.000888800000 XMR (888800000 pico)", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,549", "levelname": "INFO", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 458, "message": "Wallet session ('msig_order_order_abc_789'): close_wallet request completed.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,552", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer address required for positive buyer share.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,552", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: ['Bad vendor addr']", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,552", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 1588, "message": "XMR Dispute Resolution (Order: 1, Wallet: 'msig_order_order_abc_789'): Invalid dispute parameters: Buyer payout amount must be a non-negative Decimal.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:40,555", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 1/2): Refused consistently. Retrying in 0.5s...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:41,056", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting (Attempt 2/2): Refused consistently. Retrying in 0.5s...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:41,056", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Wallet - Method: get_balance): Network error connecting failed after 2 attempts.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:41,062", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 1/2): Timeout consistently. Retrying in 0.5s...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:41,562", "levelname": "WARNING", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 281, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting (Attempt 2/2): Timeout consistently. Retrying in 0.5s...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:41,563", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 286, "message": "Monero RPC (Daemon - Method: get_block_count): Network error connecting failed after 2 attempts.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:41,569", "levelname": "ERROR", "name": "store.services.monero_service", "module": "monero_service", "pathname": "C:\\shadow_market\\backend\\store\\services\\monero_service.py", "lineno": 315, "message": "Monero RPC (Wallet - Method: get_balance): An unexpected error occurred during RPC request processing.", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\store\\services\\monero_service.py\", line 248, in _make_rpc_request\n    response_json = response.json()\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}
{"asctime": "2025-04-23 14:04:41,782", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 4: Level=info, Message='Your Order #c4af7602 (Test BTC Product Only) is re...'", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:41,873", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 11: Level=success, Message='Payment confirmed for Order #55be8235 (Test BTC Pr...'", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:41,921", "levelname": "WARNING", "name": "store.validators", "module": "validators", "pathname": "C:\\shadow_market\\backend\\store\\validators.py", "lineno": 150, "message": "Bitcoin address validation for 'tb1qw508d6...' used basic regex ONLY. Checksum not validated. Consider using a dedicated library.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:41,922", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 13: Level=info, Message='Your Order #fcb7019c (Test BTC Product Only) has b...'", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:42,014", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 19: Level=success, Message='Order #28cfee82 (Test BTC Product Only) has been f...'", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:42,015", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 20: Level=success, Message='Order #28cfee82 finalized. Funds (0.00975000 BTC) ...'", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:42,068", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 22: Level=info, Message='Dispute resolved for Order #2634d528. Notes: Full ...'", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:42,069", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 23: Level=info, Message='Dispute resolved for Order #2634d528. Notes: Full ...'", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:42,454", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 46: Level=info, Message='Your Order #c03dda2c (Test XMR Product Only) is re...'", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,056", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction e798602c-483d-45ed-9e1d-ce6affb8a210 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 0.01960000 BTC", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,057", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 4f08d3ca-0c7e-445c-86a4-88708203575c recorded: User 1004, Type MARKET_FEE, Amount 0.00040000 BTC", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,057", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #0436e65e (Integration Test Product) has bee...'", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,057", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Order #0436e65e finalized. Funds (0.01960000 BTC) ...'", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,107", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction badf66fd-c49c-4415-90fb-df150803a5b3 recorded: User 1002, Type ESCROW_RELEASE_VENDOR, Amount 1.462500000000 XMR", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,108", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 79abd036-c2e4-4695-898d-dc8da68ab155 recorded: User 1004, Type MARKET_FEE, Amount 0.037500000000 XMR", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,108", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=success, Message='Funds released for Order #7d3d0440 (Integration Te...'", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,109", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=success, Message='Order #7d3d0440 (Integration Test Product) has bee...'", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,205", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 4fa5e568-9709-4274-a331-a1cb726c21fb recorded: User 1001, Type DISPUTE_RESOLUTION_BUYER, Amount 0.00600000 BTC", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,206", "levelname": "INFO", "name": "ledger.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\ledger\\services.py", "lineno": 250, "message": "Ledger transaction 21204fa5-1503-44b2-b1a2-009a0e279c89 recorded: User 1002, Type DISPUTE_RESOLUTION_VENDOR, Amount 0.01400000 BTC", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,206", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1001: Level=info, Message='Dispute resolved for Order #186585ab. Notes: Split...'", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,206", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 1002: Level=info, Message='Dispute resolved for Order #186585ab. Notes: Split...'", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,287", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 119, "message": "Site owner user 'site_owner_withdraw_test' loaded and cached.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,321", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Processing request with integrated broadcast...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,321", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,321", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Fee: 0.02500000 BTC (5.0%). Net Amount to Send: 0.47500000 BTC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,322", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Created WithdrawalRequest 1 with status PENDING.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,323", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Debit successful.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,323", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Ledger updates successful. Attempting crypto broadcast for request 1...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,324", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 297, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Crypto broadcast successful. TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,324", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 328, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): WithdrawalRequest 1 status updated to COMPLETED.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,325", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 374, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Request 1 completed successfully (pending commit). TXID: withdraw_tx_hash_wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,325", "levelname": "INFO", "name": "notifications.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\notifications\\services.py", "lineno": 62, "message": "Notification created for User ID 9001: Level=success, Message='Your withdrawal of 0.47500000 BTC (Fee: 0.02500000...'", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,325", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 390, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.50000000): Sent withdrawal processed notification to User test_user_withdraw (ID: 9001).", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,362", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Processing request with integrated broadcast...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,362", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,362", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Fee: 0.50000000 BTC (5.0%). Net Amount to Send: 9.50000000 BTC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,362", "levelname": "WARNING", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 218, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 10.0): Insufficient available funds. Available: 1.000000000000 BTC, Requested: 10.00000000 BTC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,398", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 164, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Processing request with integrated broadcast...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,399", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 142, "message": "Using withdrawal fee percentage from settings: 5.0%", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,399", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 208, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Fee: 0.00500000 BTC (5.0%). Net Amount to Send: 0.09500000 BTC.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,400", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 238, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Created WithdrawalRequest 2 with status PENDING.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,401", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 269, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Debit successful.", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,401", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 284, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Ledger updates successful. Attempting crypto broadcast for request 2...", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,401", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 301, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Crypto broadcast FAILED for request 2: RPC Timeout during broadcast", "process": 12544, "thread": 11984, "exc_info": "Traceback (most recent call last):\n  File \"C:\\shadow_market\\backend\\withdraw\\services.py\", line 287, in request_withdrawal\n    tx_hash = crypto_service.send_to_address(\n         currency=currency,\n    ...<2 lines>...\n         # withdrawal_request_id=withdrawal_request.id # Optional\n    )\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\flowe\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\unittest\\mock.py\", line 1226, in _execute_mock_call\n    raise effect\nstore.exceptions.CryptoProcessingError: RPC Timeout during broadcast"}
{"asctime": "2025-04-23 14:04:43,404", "levelname": "INFO", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 308, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Marked request 2 as FAILED due to broadcast error (pre-rollback attempt).", "process": 12544, "thread": 11984}
{"asctime": "2025-04-23 14:04:43,404", "levelname": "ERROR", "name": "withdraw.services", "module": "services", "pathname": "C:\\shadow_market\\backend\\withdraw\\services.py", "lineno": 332, "message": "WithdrawalRequest (User: test_user_withdraw, Currency: BTC, Amount: 0.10000000): Withdrawal processing failed for Request ID 2: RPC Timeout during broadcast. Transaction rolling back.", "process": 12544, "thread": 11984}
